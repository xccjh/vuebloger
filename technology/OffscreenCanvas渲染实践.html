<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OffscreenCanvas渲染实践 | 邹先生博客记录</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/vuebloger/img/logo.jpeg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/vuebloger/assets/css/0.styles.2e2748f8.css" as="style"><link rel="preload" href="/vuebloger/assets/js/app.a65085b2.js" as="script"><link rel="preload" href="/vuebloger/assets/js/7.02fe805f.js" as="script"><link rel="preload" href="/vuebloger/assets/js/1.252ffbfc.js" as="script"><link rel="preload" href="/vuebloger/assets/js/73.686450b9.js" as="script"><link rel="preload" href="/vuebloger/assets/js/33.f5a6ecda.js" as="script"><link rel="prefetch" href="/vuebloger/assets/js/10.2fc7b3fc.js"><link rel="prefetch" href="/vuebloger/assets/js/100.fcf6680d.js"><link rel="prefetch" href="/vuebloger/assets/js/101.69820fcb.js"><link rel="prefetch" href="/vuebloger/assets/js/102.62596cc1.js"><link rel="prefetch" href="/vuebloger/assets/js/103.735a2268.js"><link rel="prefetch" href="/vuebloger/assets/js/104.421b6620.js"><link rel="prefetch" href="/vuebloger/assets/js/105.f5e2a7d0.js"><link rel="prefetch" href="/vuebloger/assets/js/106.afec1c9e.js"><link rel="prefetch" href="/vuebloger/assets/js/107.666053ae.js"><link rel="prefetch" href="/vuebloger/assets/js/108.a0cc6c24.js"><link rel="prefetch" href="/vuebloger/assets/js/109.6164bbd7.js"><link rel="prefetch" href="/vuebloger/assets/js/11.ad6acc3a.js"><link rel="prefetch" href="/vuebloger/assets/js/110.4960b345.js"><link rel="prefetch" href="/vuebloger/assets/js/111.ef01f6bb.js"><link rel="prefetch" href="/vuebloger/assets/js/112.a1ad976d.js"><link rel="prefetch" href="/vuebloger/assets/js/113.9f62ab74.js"><link rel="prefetch" href="/vuebloger/assets/js/114.4de2eed2.js"><link rel="prefetch" href="/vuebloger/assets/js/115.eda457c5.js"><link rel="prefetch" href="/vuebloger/assets/js/116.5a94abc8.js"><link rel="prefetch" href="/vuebloger/assets/js/117.e51edec8.js"><link rel="prefetch" href="/vuebloger/assets/js/118.3a4dcc09.js"><link rel="prefetch" href="/vuebloger/assets/js/119.f75dc0b8.js"><link rel="prefetch" href="/vuebloger/assets/js/12.831b2cd3.js"><link rel="prefetch" href="/vuebloger/assets/js/120.57bbd4e8.js"><link rel="prefetch" href="/vuebloger/assets/js/121.694f16e2.js"><link rel="prefetch" href="/vuebloger/assets/js/122.31dd7130.js"><link rel="prefetch" href="/vuebloger/assets/js/123.78b6861a.js"><link rel="prefetch" href="/vuebloger/assets/js/124.f6b84355.js"><link rel="prefetch" href="/vuebloger/assets/js/125.54d2fff1.js"><link rel="prefetch" href="/vuebloger/assets/js/126.8531be65.js"><link rel="prefetch" href="/vuebloger/assets/js/127.3d4251de.js"><link rel="prefetch" href="/vuebloger/assets/js/128.8169e335.js"><link rel="prefetch" href="/vuebloger/assets/js/129.4ce9bd80.js"><link rel="prefetch" href="/vuebloger/assets/js/13.930f2726.js"><link rel="prefetch" href="/vuebloger/assets/js/130.56c84295.js"><link rel="prefetch" href="/vuebloger/assets/js/131.6ab9a2c3.js"><link rel="prefetch" href="/vuebloger/assets/js/132.4d0c08ec.js"><link rel="prefetch" href="/vuebloger/assets/js/133.b79e7f13.js"><link rel="prefetch" href="/vuebloger/assets/js/134.79b04327.js"><link rel="prefetch" href="/vuebloger/assets/js/135.e9635342.js"><link rel="prefetch" href="/vuebloger/assets/js/136.7d1f576e.js"><link rel="prefetch" href="/vuebloger/assets/js/137.5ae3251d.js"><link rel="prefetch" href="/vuebloger/assets/js/138.2cf72827.js"><link rel="prefetch" href="/vuebloger/assets/js/139.7ff3499f.js"><link rel="prefetch" href="/vuebloger/assets/js/14.f14b2abd.js"><link rel="prefetch" href="/vuebloger/assets/js/140.f3c55ed2.js"><link rel="prefetch" href="/vuebloger/assets/js/141.b375515e.js"><link rel="prefetch" href="/vuebloger/assets/js/142.5e65016a.js"><link rel="prefetch" href="/vuebloger/assets/js/143.5f8e60fd.js"><link rel="prefetch" href="/vuebloger/assets/js/144.04214c0d.js"><link rel="prefetch" href="/vuebloger/assets/js/145.cc1be544.js"><link rel="prefetch" href="/vuebloger/assets/js/146.5cfc76ba.js"><link rel="prefetch" href="/vuebloger/assets/js/147.bb3dea71.js"><link rel="prefetch" href="/vuebloger/assets/js/148.7b2156a8.js"><link rel="prefetch" href="/vuebloger/assets/js/149.89021d4c.js"><link rel="prefetch" href="/vuebloger/assets/js/15.1c88a8a2.js"><link rel="prefetch" href="/vuebloger/assets/js/150.fc0ec16e.js"><link rel="prefetch" href="/vuebloger/assets/js/151.9788296d.js"><link rel="prefetch" href="/vuebloger/assets/js/152.87a7322d.js"><link rel="prefetch" href="/vuebloger/assets/js/153.e0ee9fa6.js"><link rel="prefetch" href="/vuebloger/assets/js/154.a0686333.js"><link rel="prefetch" href="/vuebloger/assets/js/155.46ac504c.js"><link rel="prefetch" href="/vuebloger/assets/js/156.d002f6a4.js"><link rel="prefetch" href="/vuebloger/assets/js/157.600eb354.js"><link rel="prefetch" href="/vuebloger/assets/js/158.37e5b3b9.js"><link rel="prefetch" href="/vuebloger/assets/js/16.dba8d6aa.js"><link rel="prefetch" href="/vuebloger/assets/js/17.5c9ff2d7.js"><link rel="prefetch" href="/vuebloger/assets/js/18.e86518d9.js"><link rel="prefetch" href="/vuebloger/assets/js/19.08ad6258.js"><link rel="prefetch" href="/vuebloger/assets/js/20.e6061b25.js"><link rel="prefetch" href="/vuebloger/assets/js/21.6de1dc73.js"><link rel="prefetch" href="/vuebloger/assets/js/22.8a055d98.js"><link rel="prefetch" href="/vuebloger/assets/js/23.5c9f8550.js"><link rel="prefetch" href="/vuebloger/assets/js/24.6502b332.js"><link rel="prefetch" href="/vuebloger/assets/js/25.8e94c39a.js"><link rel="prefetch" href="/vuebloger/assets/js/26.669df298.js"><link rel="prefetch" href="/vuebloger/assets/js/27.7db7ccee.js"><link rel="prefetch" href="/vuebloger/assets/js/28.6468cb48.js"><link rel="prefetch" href="/vuebloger/assets/js/29.495e8d7d.js"><link rel="prefetch" href="/vuebloger/assets/js/30.44efcc4f.js"><link rel="prefetch" href="/vuebloger/assets/js/31.dd3dd93a.js"><link rel="prefetch" href="/vuebloger/assets/js/32.3297950b.js"><link rel="prefetch" href="/vuebloger/assets/js/34.1b52aba9.js"><link rel="prefetch" href="/vuebloger/assets/js/35.af4f0ea3.js"><link rel="prefetch" href="/vuebloger/assets/js/36.3723753e.js"><link rel="prefetch" href="/vuebloger/assets/js/37.8d3ce716.js"><link rel="prefetch" href="/vuebloger/assets/js/38.272cc2ad.js"><link rel="prefetch" href="/vuebloger/assets/js/39.2a3b492f.js"><link rel="prefetch" href="/vuebloger/assets/js/4.7444c5d9.js"><link rel="prefetch" href="/vuebloger/assets/js/40.59f97e36.js"><link rel="prefetch" href="/vuebloger/assets/js/41.03245b0d.js"><link rel="prefetch" href="/vuebloger/assets/js/42.d5021c9c.js"><link rel="prefetch" href="/vuebloger/assets/js/43.bdf0e763.js"><link rel="prefetch" href="/vuebloger/assets/js/44.2cb98cc3.js"><link rel="prefetch" href="/vuebloger/assets/js/45.63e6440b.js"><link rel="prefetch" href="/vuebloger/assets/js/46.7784e388.js"><link rel="prefetch" href="/vuebloger/assets/js/47.d8020da4.js"><link rel="prefetch" href="/vuebloger/assets/js/48.05b856ec.js"><link rel="prefetch" href="/vuebloger/assets/js/49.3a1b9aa9.js"><link rel="prefetch" href="/vuebloger/assets/js/5.b7de26b2.js"><link rel="prefetch" href="/vuebloger/assets/js/50.d01555de.js"><link rel="prefetch" href="/vuebloger/assets/js/51.64762b1b.js"><link rel="prefetch" href="/vuebloger/assets/js/52.f47836ab.js"><link rel="prefetch" href="/vuebloger/assets/js/53.dbf9bd48.js"><link rel="prefetch" href="/vuebloger/assets/js/54.325da55e.js"><link rel="prefetch" href="/vuebloger/assets/js/55.39d24d6d.js"><link rel="prefetch" href="/vuebloger/assets/js/56.44fb3971.js"><link rel="prefetch" href="/vuebloger/assets/js/57.a282179c.js"><link rel="prefetch" href="/vuebloger/assets/js/58.83e3f4da.js"><link rel="prefetch" href="/vuebloger/assets/js/59.5d965a8a.js"><link rel="prefetch" href="/vuebloger/assets/js/6.2de6d4b4.js"><link rel="prefetch" href="/vuebloger/assets/js/60.3b4ad761.js"><link rel="prefetch" href="/vuebloger/assets/js/61.4571dd6e.js"><link rel="prefetch" href="/vuebloger/assets/js/62.19e53228.js"><link rel="prefetch" href="/vuebloger/assets/js/63.d11aae48.js"><link rel="prefetch" href="/vuebloger/assets/js/64.c561c612.js"><link rel="prefetch" href="/vuebloger/assets/js/65.5f4ba8d5.js"><link rel="prefetch" href="/vuebloger/assets/js/66.a9e8b7b1.js"><link rel="prefetch" href="/vuebloger/assets/js/67.0f96aa45.js"><link rel="prefetch" href="/vuebloger/assets/js/68.01325833.js"><link rel="prefetch" href="/vuebloger/assets/js/69.6b738fe4.js"><link rel="prefetch" href="/vuebloger/assets/js/70.67695a0a.js"><link rel="prefetch" href="/vuebloger/assets/js/71.4efef8a4.js"><link rel="prefetch" href="/vuebloger/assets/js/72.5d0b2873.js"><link rel="prefetch" href="/vuebloger/assets/js/74.6d8aba46.js"><link rel="prefetch" href="/vuebloger/assets/js/75.2309bb3b.js"><link rel="prefetch" href="/vuebloger/assets/js/76.db109f33.js"><link rel="prefetch" href="/vuebloger/assets/js/77.ed0537f8.js"><link rel="prefetch" href="/vuebloger/assets/js/78.234b59da.js"><link rel="prefetch" href="/vuebloger/assets/js/79.69b7c8e1.js"><link rel="prefetch" href="/vuebloger/assets/js/8.9a76c738.js"><link rel="prefetch" href="/vuebloger/assets/js/80.99d930cc.js"><link rel="prefetch" href="/vuebloger/assets/js/81.5ccfa044.js"><link rel="prefetch" href="/vuebloger/assets/js/82.c21e1eb7.js"><link rel="prefetch" href="/vuebloger/assets/js/83.b02f9c93.js"><link rel="prefetch" href="/vuebloger/assets/js/84.01512726.js"><link rel="prefetch" href="/vuebloger/assets/js/85.9af400d0.js"><link rel="prefetch" href="/vuebloger/assets/js/86.c0203f6e.js"><link rel="prefetch" href="/vuebloger/assets/js/87.222e425f.js"><link rel="prefetch" href="/vuebloger/assets/js/88.6a15da03.js"><link rel="prefetch" href="/vuebloger/assets/js/89.08e31365.js"><link rel="prefetch" href="/vuebloger/assets/js/9.6529d756.js"><link rel="prefetch" href="/vuebloger/assets/js/90.9da867ce.js"><link rel="prefetch" href="/vuebloger/assets/js/91.b3adfbbe.js"><link rel="prefetch" href="/vuebloger/assets/js/92.56e9a0a5.js"><link rel="prefetch" href="/vuebloger/assets/js/93.6911059d.js"><link rel="prefetch" href="/vuebloger/assets/js/94.822df84f.js"><link rel="prefetch" href="/vuebloger/assets/js/95.892eb3bf.js"><link rel="prefetch" href="/vuebloger/assets/js/96.5773ad19.js"><link rel="prefetch" href="/vuebloger/assets/js/97.f82abdcd.js"><link rel="prefetch" href="/vuebloger/assets/js/98.b78771dc.js"><link rel="prefetch" href="/vuebloger/assets/js/99.2404420f.js"><link rel="prefetch" href="/vuebloger/assets/js/vendors~docsearch.1b4e1257.js">
    <link rel="stylesheet" href="/vuebloger/assets/css/0.styles.2e2748f8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuebloger/" class="home-link router-link-active"><img src="/vuebloger/img/logo.jpeg" alt="邹先生博客记录" class="logo"> <span class="site-name can-hide">邹先生博客记录</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/workplace/" class="nav-link">职场</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xccjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <div style="margin-left:20px;margin-right:20px;">
    音乐
    <div role="switch" class="el-switch"><input type="checkbox" name="" true-value="true" class="el-switch__input"><!----><span class="el-switch__core" style="width:40px;"></span><!----></div> <audio><source src="/vuebloger/mp3/065b_520b_0409_111c898908eab454414c3c326fe77c36.mp3" type="audio/mpeg"></audio></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/workplace/" class="nav-link">职场</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xccjh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>OffscreenCanvas渲染实践</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#两种模式" class="sidebar-link">两种模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#transfer模式" class="sidebar-link">Transfer模式</a></li></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#control模式" class="sidebar-link">Control模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#加载worker文件" class="sidebar-link">加载worker文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#图片处理" class="sidebar-link">图片处理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#动画驱动" class="sidebar-link">动画驱动</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#实践" class="sidebar-link">实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#在主线程中执行绘制" class="sidebar-link">在主线程中执行绘制</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#在worker线程中执行绘制" class="sidebar-link">在worker线程中执行绘制</a></li></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#渲染流水线" class="sidebar-link">渲染流水线</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#兼容性" class="sidebar-link">兼容性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/OffscreenCanvas%E6%B8%B2%E6%9F%93%E5%AE%9E%E8%B7%B5.html#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content__default" data-v-51c26de8 data-v-51c26de8><h2 id="前言" data-v-51c26de8><a href="#前言" class="header-anchor" data-v-51c26de8>#</a> 前言</h2> <p data-v-51c26de8>用户在交互时的Canvas逻辑与渲染在同一线程内执行，动画产生的卡顿可能会影响用户体验。若在后台渲染，则可以避免耗时的渲染任务阻塞主线程。使用OffscreenCanvas与Worker结合的方式可以将渲染任务放在子线程中，有效提升用户交互时的界面流畅度。</p> <p data-v-51c26de8>OffscreenCanvas可以让你在Worker线程中渲染图形，支持多种RenderingContext,将Canvas的逻辑计算与渲染分离，可以避免UI线程阻塞，两种使用方式：同步的Transfer模式与异步的Control模式,其中的commit方法已经弃用，因为现在worker中已经实现了rAF。</p> <h2 id="两种模式" data-v-51c26de8><a href="#两种模式" class="header-anchor" data-v-51c26de8>#</a> 两种模式</h2> <h3 id="transfer模式" data-v-51c26de8><a href="#transfer模式" class="header-anchor" data-v-51c26de8>#</a> Transfer模式</h3> <ol data-v-51c26de8><li data-v-51c26de8>worker线程中创建OffscreenCanvas对象并执行渲染，给主线程返回结果(缓冲区图像或其它数据)</li> <li data-v-51c26de8>主线程使用缓冲区数据渲染Canvas元素</li></ol> <p data-v-51c26de8>worker线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>let</span> offscreen <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>OffscreenCanvas</span><span class="token punctuation" data-v-51c26de8>(</span>w<span class="token punctuation" data-v-51c26de8>,</span>h<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>let</span> ctx <span class="token operator" data-v-51c26de8>=</span> offscreen<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'2d'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token comment" data-v-51c26de8>// 一些渲染操作...</span>
<span class="token keyword" data-v-51c26de8>let</span> image <span class="token operator" data-v-51c26de8>=</span> offscreen<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>transferToImageBitmap</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
self<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>postMessage</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>{</span> image <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token punctuation" data-v-51c26de8>[</span>image<span class="token punctuation" data-v-51c26de8>]</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8></div></div><p data-v-51c26de8>主线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8>renderWorker<span class="token punctuation" data-v-51c26de8>.</span><span class="token function-variable function" data-v-51c26de8>onmessage</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token parameter" data-v-51c26de8>msg</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span>
  <span class="token keyword" data-v-51c26de8>let</span> imageBuffer <span class="token operator" data-v-51c26de8>=</span> msg<span class="token punctuation" data-v-51c26de8>.</span>data<span class="token punctuation" data-v-51c26de8>.</span>image<span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token keyword" data-v-51c26de8>let</span> bitmapContext <span class="token operator" data-v-51c26de8>=</span> canvas<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;bitmaprenderer&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
  bitmapContext<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>transferFromImageBitmap</span><span class="token punctuation" data-v-51c26de8>(</span>imageBuffer<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token punctuation" data-v-51c26de8>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8></div></div><p data-v-51c26de8>这种方式可以用于H5游戏的精灵加载，文本渲染、生成海报等固定的渲染任务。</p> <h2 id="control模式" data-v-51c26de8><a href="#control模式" class="header-anchor" data-v-51c26de8>#</a> Control模式</h2> <ol data-v-51c26de8><li data-v-51c26de8>主线程中移交Canvas元素的控制权</li> <li data-v-51c26de8>在worker线程执行所有的渲染操作，无需图像数据的传递即可更新Canvas元素</li></ol> <p data-v-51c26de8>在该模式下不需要transfer的相关操作，内部直接对绑定的dom元素进行更新。</p> <p data-v-51c26de8>主线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>const</span> offscreen <span class="token operator" data-v-51c26de8>=</span> document<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>querySelector</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'canvas'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>transferControlToOffscreen</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
worker<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>postMessage</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>{</span> canvas<span class="token operator" data-v-51c26de8>:</span> offscreen <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token punctuation" data-v-51c26de8>[</span>offscreen<span class="token punctuation" data-v-51c26de8>]</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8></div></div><p data-v-51c26de8>worker线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token function-variable function" data-v-51c26de8>onmessage</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token parameter" data-v-51c26de8>e</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span>
  <span class="token keyword" data-v-51c26de8>let</span> canvas <span class="token operator" data-v-51c26de8>=</span> e<span class="token punctuation" data-v-51c26de8>.</span>data<span class="token punctuation" data-v-51c26de8>.</span>canvas
  <span class="token keyword" data-v-51c26de8>let</span> ctx <span class="token operator" data-v-51c26de8>=</span> canvas<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'2d'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token comment" data-v-51c26de8>// 一些渲染操作...</span>
  <span class="token comment" data-v-51c26de8>// 这里的渲染操作会在Canvas元素上同步绘制的图像</span>
<span class="token punctuation" data-v-51c26de8>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>6</span><br data-v-51c26de8></div></div><h2 id="加载worker文件" data-v-51c26de8><a href="#加载worker文件" class="header-anchor" data-v-51c26de8>#</a> 加载worker文件</h2> <p data-v-51c26de8>在使用webpack进行构建的项目中，对于worker文件需要进行一些额外的处理。</p> <p data-v-51c26de8>目前生态中主要有三种处理web worker的loader: <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fwebpack-contrib%2Fworker-loader" target="_blank" rel="noopener noreferrer" data-v-51c26de8>worker-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-51c26de8 data-v-51c26de8><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdevelopit%2Fworkerize-loader" target="_blank" rel="noopener noreferrer" data-v-51c26de8>workerize-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-51c26de8 data-v-51c26de8><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGoogleChromeLabs%2Fcomlink-loader" target="_blank" rel="noopener noreferrer" data-v-51c26de8>comlink-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-51c26de8 data-v-51c26de8><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p data-v-51c26de8>由于workerize-loader目前没有对postMessage方法中的<a href="https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FTransferable" data-v-51c26de8>Transferable</a>参数序列进行处理，因此无法将主线程的OffscreenCanvas对象传入worker中，详情见这个<a href="https%3A%2F%2Fgithub.com%2Fdevelopit%2Fworkerize%2Fissues%2F36" data-v-51c26de8>issue</a>，worker-loader表现正常。</p> <p data-v-51c26de8>关于WebWorker可以查看另外一篇文章 - <a href="/vuebloger/technology/WebWorker融会贯通.html" data-v-51c26de8>WebWorker融会贯通</a></p> <h2 id="图片处理" data-v-51c26de8><a href="#图片处理" class="header-anchor" data-v-51c26de8>#</a> 图片处理</h2> <p data-v-51c26de8>在worker中使用图像数据与主线程中有所不同。</p> <p data-v-51c26de8>主线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>const</span> <span class="token function-variable function" data-v-51c26de8>loadImage</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token parameter" data-v-51c26de8>imgPath</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span>
  <span class="token keyword" data-v-51c26de8>return</span> <span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>Promise</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token parameter" data-v-51c26de8>resolve<span class="token punctuation" data-v-51c26de8>,</span> reject</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span>
    <span class="token keyword" data-v-51c26de8>let</span> img <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>Image</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
    img<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>setAttribute</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;crossOrigin&quot;</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token string" data-v-51c26de8>&quot;anonymous&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span> <span class="token comment" data-v-51c26de8>// to solve &quot;Tainted canvases may not be exported&quot; error</span>
    img<span class="token punctuation" data-v-51c26de8>.</span><span class="token function-variable function" data-v-51c26de8>onload</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span> <span class="token function" data-v-51c26de8>resolve</span><span class="token punctuation" data-v-51c26de8>(</span>img<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span> <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>;</span>
    img<span class="token punctuation" data-v-51c26de8>.</span><span class="token function-variable function" data-v-51c26de8>onerror</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token parameter" data-v-51c26de8>e</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span> <span class="token function" data-v-51c26de8>reject</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>Error</span><span class="token punctuation" data-v-51c26de8>(</span>e<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span><span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>;</span>
    img<span class="token punctuation" data-v-51c26de8>.</span>src <span class="token operator" data-v-51c26de8>=</span> imgPath<span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>const</span> image <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>loadImage</span><span class="token punctuation" data-v-51c26de8>(</span>url<span class="token punctuation" data-v-51c26de8>)</span>
<span class="token comment" data-v-51c26de8>// use image...</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>6</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>7</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>8</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>9</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>10</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>11</span><br data-v-51c26de8></div></div><p data-v-51c26de8>worker线程</p> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>const</span> response <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>fetch</span><span class="token punctuation" data-v-51c26de8>(</span>url<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>const</span> blob <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> response<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>blob</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>const</span> image <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>createImageBitmap</span><span class="token punctuation" data-v-51c26de8>(</span>blob<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token comment" data-v-51c26de8>// use image...</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8></div></div><h2 id="动画驱动" data-v-51c26de8><a href="#动画驱动" class="header-anchor" data-v-51c26de8>#</a> 动画驱动</h2> <p data-v-51c26de8>在worker线程中执行动画有两种方式：</p> <ol data-v-51c26de8><li data-v-51c26de8>Timer - setTimeout, setInterval等</li> <li data-v-51c26de8>rAF - rAF在<a href="https%3A%2F%2Fwww.chromestatus.com%2Ffeature%2F5681560598609920" data-v-51c26de8>DedicatedWorker</a>中已经实现，与Window中的行为一致。</li></ol> <h2 id="实践" data-v-51c26de8><a href="#实践" class="header-anchor" data-v-51c26de8>#</a> 实践</h2> <p data-v-51c26de8>了解了OffscreenCanvas与worker的相关特性，不如动手尝试一下，以一个蒙版合成的渲染任务为例。</p> <h3 id="在主线程中执行绘制" data-v-51c26de8><a href="#在主线程中执行绘制" class="header-anchor" data-v-51c26de8>#</a> 在主线程中执行绘制</h3> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token comment" data-v-51c26de8>/* 0. 获取Canvas元素 */</span>
<span class="token keyword" data-v-51c26de8>let</span> mainCanvas <span class="token operator" data-v-51c26de8>=</span> document<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>querySelector</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'#canvas'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>let</span> mainCtx <span class="token operator" data-v-51c26de8>=</span> mainCanvas<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'2d'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token comment" data-v-51c26de8>/* 1. 准备Image对象 */</span>
<span class="token keyword" data-v-51c26de8>let</span> img <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>loadImage</span><span class="token punctuation" data-v-51c26de8>(</span>imgPath<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>  
<span class="token operator" data-v-51c26de8>...</span>
<span class="token comment" data-v-51c26de8>/* 2. 创建一个Canvas来合成结果图像 */</span>
<span class="token keyword" data-v-51c26de8>let</span> maskLayer <span class="token operator" data-v-51c26de8>=</span> document<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>createElement</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;canvas&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
maskLayer<span class="token punctuation" data-v-51c26de8>.</span>width <span class="token operator" data-v-51c26de8>=</span> width<span class="token punctuation" data-v-51c26de8>;</span>
maskLayer<span class="token punctuation" data-v-51c26de8>.</span>height <span class="token operator" data-v-51c26de8>=</span> height<span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>const</span> maskCtx <span class="token operator" data-v-51c26de8>=</span> maskLayer<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;2d&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>drawImage</span><span class="token punctuation" data-v-51c26de8>(</span>img<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>let</span> maskData <span class="token operator" data-v-51c26de8>=</span> maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getImageData</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> width<span class="token punctuation" data-v-51c26de8>,</span> height<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>for</span> <span class="token punctuation" data-v-51c26de8>(</span><span class="token keyword" data-v-51c26de8>let</span> i <span class="token operator" data-v-51c26de8>=</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>;</span> i <span class="token operator" data-v-51c26de8>&lt;</span> width <span class="token operator" data-v-51c26de8>*</span> height<span class="token punctuation" data-v-51c26de8>;</span> i<span class="token operator" data-v-51c26de8>++</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token punctuation" data-v-51c26de8>{</span>
  <span class="token keyword" data-v-51c26de8>if</span> <span class="token punctuation" data-v-51c26de8>(</span>values<span class="token punctuation" data-v-51c26de8>[</span>i<span class="token punctuation" data-v-51c26de8>]</span> <span class="token operator" data-v-51c26de8>!==</span> <span class="token number" data-v-51c26de8>255</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token punctuation" data-v-51c26de8>{</span>
    maskData<span class="token punctuation" data-v-51c26de8>.</span>data<span class="token punctuation" data-v-51c26de8>[</span><span class="token punctuation" data-v-51c26de8>(</span>i <span class="token operator" data-v-51c26de8>+</span> <span class="token number" data-v-51c26de8>1</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token operator" data-v-51c26de8>*</span> <span class="token number" data-v-51c26de8>4</span> <span class="token operator" data-v-51c26de8>-</span> <span class="token number" data-v-51c26de8>1</span><span class="token punctuation" data-v-51c26de8>]</span> <span class="token operator" data-v-51c26de8>=</span> mask<span class="token punctuation" data-v-51c26de8>[</span>i<span class="token punctuation" data-v-51c26de8>]</span><span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token punctuation" data-v-51c26de8>}</span>
<span class="token punctuation" data-v-51c26de8>}</span>
maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>putImageData</span><span class="token punctuation" data-v-51c26de8>(</span>maskData<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token operator" data-v-51c26de8>...</span>
<span class="token comment" data-v-51c26de8>/* 3. 绘制到Canvas元素上 */</span>
mainCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>drawImage</span><span class="token punctuation" data-v-51c26de8>(</span>maskLayer<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>

</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>6</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>7</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>8</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>9</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>10</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>11</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>12</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>13</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>14</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>15</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>16</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>17</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>18</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>19</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>20</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>21</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>22</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>23</span><br data-v-51c26de8></div></div><h3 id="在worker线程中执行绘制" data-v-51c26de8><a href="#在worker线程中执行绘制" class="header-anchor" data-v-51c26de8>#</a> 在worker线程中执行绘制</h3> <ol data-v-51c26de8><li data-v-51c26de8>主线程</li></ol> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>import</span> CanvasWorker <span class="token keyword" data-v-51c26de8>from</span> <span class="token string" data-v-51c26de8>&quot;worker-loader!@/workers/canvas.worker.js&quot;</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token operator" data-v-51c26de8>...</span>
<span class="token comment" data-v-51c26de8>/* 0. 获取Canvas元素 */</span>
<span class="token keyword" data-v-51c26de8>let</span> canvas <span class="token operator" data-v-51c26de8>=</span> document<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>querySelector</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>'#canvas'</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>let</span> offscreenCanvas <span class="token operator" data-v-51c26de8>=</span> canvas<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>transferControlToOffscreen</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token keyword" data-v-51c26de8>let</span> canvasWorker <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>CanvasWorker</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token comment" data-v-51c26de8>// 将绑定的offscreenCanvas实例传递到worker线程中</span>
canvasWorker<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>postMessage</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>{</span> canvas<span class="token operator" data-v-51c26de8>:</span> offscreenCanvas<span class="token punctuation" data-v-51c26de8>,</span> event<span class="token operator" data-v-51c26de8>:</span> <span class="token string" data-v-51c26de8>&quot;init&quot;</span> <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token punctuation" data-v-51c26de8>[</span>offscreenCanvas<span class="token punctuation" data-v-51c26de8>]</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
<span class="token operator" data-v-51c26de8>...</span>
<span class="token comment" data-v-51c26de8>/* 2.发送绘制事件 */</span>
<span class="token keyword" data-v-51c26de8>let</span> img <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>this</span><span class="token punctuation" data-v-51c26de8>.</span>resultImg <span class="token operator" data-v-51c26de8>||</span> <span class="token keyword" data-v-51c26de8>this</span><span class="token punctuation" data-v-51c26de8>.</span>img<span class="token punctuation" data-v-51c26de8>;</span>
canvasWorker<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>postMessage</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>{</span>
  event<span class="token operator" data-v-51c26de8>:</span> <span class="token string" data-v-51c26de8>&quot;draw&quot;</span>
  payload<span class="token operator" data-v-51c26de8>:</span> <span class="token constant" data-v-51c26de8>JSON</span><span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>stringify</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>{</span> width<span class="token punctuation" data-v-51c26de8>,</span> height<span class="token punctuation" data-v-51c26de8>,</span> imgSrc<span class="token punctuation" data-v-51c26de8>,</span> mask <span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token comment" data-v-51c26de8>// 由于结构化克隆算法的限制，这里对参数对象进行JSON序列化后赋值</span>
<span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>6</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>7</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>8</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>9</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>10</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>11</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>12</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>13</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>14</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>15</span><br data-v-51c26de8></div></div><ol start="2" data-v-51c26de8><li data-v-51c26de8>worker线程</li></ol> <div class="language-js line-numbers-mode" data-v-51c26de8><pre class="language-js" data-v-51c26de8><code data-v-51c26de8><span class="token keyword" data-v-51c26de8>let</span> canvas<span class="token punctuation" data-v-51c26de8>,</span> ctx<span class="token punctuation" data-v-51c26de8>;</span>
<span class="token function-variable function" data-v-51c26de8>onmessage</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>async</span> <span class="token parameter" data-v-51c26de8>e</span> <span class="token operator" data-v-51c26de8>=&gt;</span> <span class="token punctuation" data-v-51c26de8>{</span>
  <span class="token keyword" data-v-51c26de8>const</span> data <span class="token operator" data-v-51c26de8>=</span> e<span class="token punctuation" data-v-51c26de8>.</span>data<span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token keyword" data-v-51c26de8>const</span> <span class="token punctuation" data-v-51c26de8>{</span> payload<span class="token punctuation" data-v-51c26de8>,</span> event <span class="token punctuation" data-v-51c26de8>}</span> <span class="token operator" data-v-51c26de8>=</span> data<span class="token punctuation" data-v-51c26de8>;</span>
  <span class="token keyword" data-v-51c26de8>switch</span> <span class="token punctuation" data-v-51c26de8>(</span>event<span class="token punctuation" data-v-51c26de8>)</span> <span class="token punctuation" data-v-51c26de8>{</span>
    <span class="token keyword" data-v-51c26de8>case</span> <span class="token string" data-v-51c26de8>&quot;init&quot;</span><span class="token operator" data-v-51c26de8>:</span> <span class="token punctuation" data-v-51c26de8>{</span>
      <span class="token comment" data-v-51c26de8>// 保存传入的OffscreenCanvas实例</span>
      canvas <span class="token operator" data-v-51c26de8>=</span> data<span class="token punctuation" data-v-51c26de8>.</span>canvas<span class="token punctuation" data-v-51c26de8>;</span>
      ctx <span class="token operator" data-v-51c26de8>=</span> canvas<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;2d&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>break</span><span class="token punctuation" data-v-51c26de8>;</span>
    <span class="token punctuation" data-v-51c26de8>}</span>
    <span class="token keyword" data-v-51c26de8>case</span> <span class="token string" data-v-51c26de8>&quot;draw&quot;</span><span class="token operator" data-v-51c26de8>:</span> <span class="token punctuation" data-v-51c26de8>{</span>
      <span class="token comment" data-v-51c26de8>/* 0. 解析参数 */</span>
      <span class="token keyword" data-v-51c26de8>let</span> <span class="token punctuation" data-v-51c26de8>{</span> width<span class="token punctuation" data-v-51c26de8>,</span> height<span class="token punctuation" data-v-51c26de8>,</span> mask <span class="token punctuation" data-v-51c26de8>}</span> <span class="token operator" data-v-51c26de8>=</span> <span class="token constant" data-v-51c26de8>JSON</span><span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>parse</span><span class="token punctuation" data-v-51c26de8>(</span>payload<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token operator" data-v-51c26de8>...</span>
      <span class="token comment" data-v-51c26de8>/* 1. 下载图片并获取的ImageBitmap数据 */</span>
      <span class="token keyword" data-v-51c26de8>const</span> response <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>fetch</span><span class="token punctuation" data-v-51c26de8>(</span>imgSrc<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>const</span> blob <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> response<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>blob</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>const</span> imageBitmap <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>await</span> <span class="token function" data-v-51c26de8>createImageBitmap</span><span class="token punctuation" data-v-51c26de8>(</span>blob<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token operator" data-v-51c26de8>...</span>
      <span class="token comment" data-v-51c26de8>/* 2. 创建一个新的OffscreenCanvas来合成结果图像 */</span>
      <span class="token keyword" data-v-51c26de8>let</span> maskLayer <span class="token operator" data-v-51c26de8>=</span> <span class="token keyword" data-v-51c26de8>new</span> <span class="token class-name" data-v-51c26de8>OffscreenCanvas</span><span class="token punctuation" data-v-51c26de8>(</span>width<span class="token punctuation" data-v-51c26de8>,</span> height<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>const</span> maskCtx <span class="token operator" data-v-51c26de8>=</span> maskLayer<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getContext</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token string" data-v-51c26de8>&quot;2d&quot;</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>drawImage</span><span class="token punctuation" data-v-51c26de8>(</span>imageBitmap<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span> <span class="token comment" data-v-51c26de8>// 使用ImageBitMap绘制图片</span>
      <span class="token keyword" data-v-51c26de8>let</span> maskData <span class="token operator" data-v-51c26de8>=</span> maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>getImageData</span><span class="token punctuation" data-v-51c26de8>(</span><span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> width<span class="token punctuation" data-v-51c26de8>,</span> height<span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>for</span> <span class="token punctuation" data-v-51c26de8>(</span><span class="token keyword" data-v-51c26de8>let</span> i <span class="token operator" data-v-51c26de8>=</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>;</span> i <span class="token operator" data-v-51c26de8>&lt;</span> width <span class="token operator" data-v-51c26de8>*</span> height<span class="token punctuation" data-v-51c26de8>;</span> i<span class="token operator" data-v-51c26de8>++</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token punctuation" data-v-51c26de8>{</span>
        <span class="token keyword" data-v-51c26de8>if</span> <span class="token punctuation" data-v-51c26de8>(</span>values<span class="token punctuation" data-v-51c26de8>[</span>i<span class="token punctuation" data-v-51c26de8>]</span> <span class="token operator" data-v-51c26de8>!==</span> <span class="token number" data-v-51c26de8>255</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token punctuation" data-v-51c26de8>{</span>
          maskData<span class="token punctuation" data-v-51c26de8>.</span>data<span class="token punctuation" data-v-51c26de8>[</span><span class="token punctuation" data-v-51c26de8>(</span>i <span class="token operator" data-v-51c26de8>+</span> <span class="token number" data-v-51c26de8>1</span><span class="token punctuation" data-v-51c26de8>)</span> <span class="token operator" data-v-51c26de8>*</span> <span class="token number" data-v-51c26de8>4</span> <span class="token operator" data-v-51c26de8>-</span> <span class="token number" data-v-51c26de8>1</span><span class="token punctuation" data-v-51c26de8>]</span> <span class="token operator" data-v-51c26de8>=</span> mask<span class="token punctuation" data-v-51c26de8>[</span>i<span class="token punctuation" data-v-51c26de8>]</span><span class="token punctuation" data-v-51c26de8>;</span>
        <span class="token punctuation" data-v-51c26de8>}</span>
      <span class="token punctuation" data-v-51c26de8>}</span>
      maskCtx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>putImageData</span><span class="token punctuation" data-v-51c26de8>(</span>maskData<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token operator" data-v-51c26de8>...</span>
      <span class="token comment" data-v-51c26de8>/* 3. Canvas元素上会更新绘制效果 */</span>
      ctx<span class="token punctuation" data-v-51c26de8>.</span><span class="token function" data-v-51c26de8>drawImage</span><span class="token punctuation" data-v-51c26de8>(</span>maskLayer<span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>,</span> <span class="token number" data-v-51c26de8>0</span><span class="token punctuation" data-v-51c26de8>)</span><span class="token punctuation" data-v-51c26de8>;</span>
      <span class="token keyword" data-v-51c26de8>break</span><span class="token punctuation" data-v-51c26de8>;</span>
    <span class="token punctuation" data-v-51c26de8>}</span>
  <span class="token punctuation" data-v-51c26de8>}</span>
<span class="token punctuation" data-v-51c26de8>}</span><span class="token punctuation" data-v-51c26de8>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-51c26de8><span class="line-number" data-v-51c26de8>1</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>2</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>3</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>4</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>5</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>6</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>7</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>8</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>9</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>10</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>11</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>12</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>13</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>14</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>15</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>16</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>17</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>18</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>19</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>20</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>21</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>22</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>23</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>24</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>25</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>26</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>27</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>28</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>29</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>30</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>31</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>32</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>33</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>34</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>35</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>36</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>37</span><br data-v-51c26de8><span class="line-number" data-v-51c26de8>38</span><br data-v-51c26de8></div></div><h2 id="渲染流水线" data-v-51c26de8><a href="#渲染流水线" class="header-anchor" data-v-51c26de8>#</a> 渲染流水线</h2> <p data-v-51c26de8>blink ---(Main Frame)---&gt; Layer Compositor ---(Compositor Frame)---&gt; Display Compositor ---(GL/UI Frame)---&gt; Window</p> <ol data-v-51c26de8><li data-v-51c26de8>在OffscreenCanvas中渲染省去了Main Frame中的部分计算任务。</li> <li data-v-51c26de8>Control模式中OffscreenCanvas对Canvas元素的更新不再与主线程中的其他元素保持同步，因为它们通过不同的渲染流水线。</li> <li data-v-51c26de8>OffscreenCanvas类中提供了一些Layer Compositor阶段的执行方法：Commit, BeginFrame与PushFrame等。处理后的数据直接交给Display Compositor渲染，走最短的渲染路径。</li> <li data-v-51c26de8>使用Transfer模式可以实现Canvas元素与其它元素的同步更新。</li></ol> <p data-v-51c26de8>blink中offscreen_canvas与html_canvas_element的主类源码：</p> <ol data-v-51c26de8><li data-v-51c26de8><a href="https%3A%2F%2Fgithub.com%2Fchromium%2Fchromium%2Fblob%2Ff6bef8b8b9%2Fthird_party%2Fblink%2Frenderer%2Fcore%2Foffscreencanvas%2Foffscreen_canvas.cc" data-v-51c26de8>offscreen_canvas class</a></li> <li data-v-51c26de8><a href="https%3A%2F%2Fgithub.com%2Fchromium%2Fchromium%2Fblob%2Fd36263eec3%2Fthird_party%2Fblink%2Frenderer%2Fcore%2Fhtml%2Fcanvas%2Fhtml_canvas_element.cc" data-v-51c26de8>html_canvas_element class</a></li></ol> <p data-v-51c26de8>OffscreenCanvas与HTMLCanvasElement共同继承的类：</p> <ol data-v-51c26de8><li data-v-51c26de8>ImageBitmapSource - ImageBitmapSource API</li> <li data-v-51c26de8>CanvasRenderingContextHost - 文档中的描述：the base class for all elements that can host a rendering context，包含通用的数据转换、尺寸设置、属性获取等方法</li></ol> <p data-v-51c26de8>更详细细节查看另外一篇文章 - <a href="/vuebloger/technology/网页渲染解析和动画优化.html" data-v-51c26de8>网页渲染解析和动画优化</a></p> <h2 id="兼容性" data-v-51c26de8><a href="#兼容性" class="header-anchor" data-v-51c26de8>#</a> 兼容性</h2> <p data-v-51c26de8><img src="/vuebloger/img/post/16e07896446d132c_tplv-t2oaga2asx-watermark.awebp" alt="" data-v-51c26de8></p> <h2 id="其他" data-v-51c26de8><a href="#其他" class="header-anchor" data-v-51c26de8>#</a> 其他</h2> <ol data-v-51c26de8><li data-v-51c26de8><a href="/vuebloger/technology/https%3A%2F%2Fdevnook.github.io%2FOffscreenCanvasDemo%2Findex.html" data-v-51c26de8>几个演示Demo</a></li> <li data-v-51c26de8><a href="https%3A%2F%2Fwww.youtube.com%2Fwatch%3Ftime_continue%3D2136%26v%3DwkDd-x0EkFU" data-v-51c26de8>Google I/O 17上的介绍视频</a></li> <li data-v-51c26de8>另外一篇关于OffscreenCanvas的文章 - <a href="/vuebloger/technology/OffscreenCanvas解析.html" data-v-51c26de8>OffscreenCanvas解析</a></li></ol></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/17/2022, 5:23:06 PM</span></div></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/vuebloger/assets/js/app.a65085b2.js" defer></script><script src="/vuebloger/assets/js/7.02fe805f.js" defer></script><script src="/vuebloger/assets/js/1.252ffbfc.js" defer></script><script src="/vuebloger/assets/js/73.686450b9.js" defer></script><script src="/vuebloger/assets/js/33.f5a6ecda.js" defer></script>
  </body>
</html>
