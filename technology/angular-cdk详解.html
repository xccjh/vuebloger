<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>angular-cdk详解 | 邹先生博客记录</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/vuebloger/img/logo.jpeg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="">
    
    <link rel="preload" href="/vuebloger/assets/css/0.styles.23361e15.css" as="style"><link rel="preload" href="/vuebloger/assets/js/app.98919d7b.js" as="script"><link rel="preload" href="/vuebloger/assets/js/5.82db9be2.js" as="script"><link rel="preload" href="/vuebloger/assets/js/1.b1b3586e.js" as="script"><link rel="preload" href="/vuebloger/assets/js/61.503d35d8.js" as="script"><link rel="preload" href="/vuebloger/assets/js/35.b80e4e89.js" as="script"><link rel="prefetch" href="/vuebloger/assets/js/10.9366c20a.js"><link rel="prefetch" href="/vuebloger/assets/js/100.992ae291.js"><link rel="prefetch" href="/vuebloger/assets/js/101.fa9a2d9f.js"><link rel="prefetch" href="/vuebloger/assets/js/102.207a24c6.js"><link rel="prefetch" href="/vuebloger/assets/js/103.3a347b66.js"><link rel="prefetch" href="/vuebloger/assets/js/104.5906002e.js"><link rel="prefetch" href="/vuebloger/assets/js/105.6a70dc69.js"><link rel="prefetch" href="/vuebloger/assets/js/106.ed8f1d49.js"><link rel="prefetch" href="/vuebloger/assets/js/107.b9726674.js"><link rel="prefetch" href="/vuebloger/assets/js/108.a8df7845.js"><link rel="prefetch" href="/vuebloger/assets/js/109.5ecac763.js"><link rel="prefetch" href="/vuebloger/assets/js/11.628619fa.js"><link rel="prefetch" href="/vuebloger/assets/js/110.b9f52e3c.js"><link rel="prefetch" href="/vuebloger/assets/js/111.d4ea3424.js"><link rel="prefetch" href="/vuebloger/assets/js/112.fa0e2770.js"><link rel="prefetch" href="/vuebloger/assets/js/113.1e6f233f.js"><link rel="prefetch" href="/vuebloger/assets/js/114.5f9b9c8b.js"><link rel="prefetch" href="/vuebloger/assets/js/115.6ea0b59d.js"><link rel="prefetch" href="/vuebloger/assets/js/116.262c2d28.js"><link rel="prefetch" href="/vuebloger/assets/js/117.2ec034d9.js"><link rel="prefetch" href="/vuebloger/assets/js/118.fbcbe333.js"><link rel="prefetch" href="/vuebloger/assets/js/119.015243d2.js"><link rel="prefetch" href="/vuebloger/assets/js/12.3ca2d200.js"><link rel="prefetch" href="/vuebloger/assets/js/120.62f5e332.js"><link rel="prefetch" href="/vuebloger/assets/js/121.5225c89a.js"><link rel="prefetch" href="/vuebloger/assets/js/122.b25ed6ab.js"><link rel="prefetch" href="/vuebloger/assets/js/123.871f0c47.js"><link rel="prefetch" href="/vuebloger/assets/js/124.96c37bca.js"><link rel="prefetch" href="/vuebloger/assets/js/125.51f88eb4.js"><link rel="prefetch" href="/vuebloger/assets/js/126.e433ebf8.js"><link rel="prefetch" href="/vuebloger/assets/js/127.896ee524.js"><link rel="prefetch" href="/vuebloger/assets/js/128.9ccfec4b.js"><link rel="prefetch" href="/vuebloger/assets/js/129.44ce0686.js"><link rel="prefetch" href="/vuebloger/assets/js/13.9cf5f312.js"><link rel="prefetch" href="/vuebloger/assets/js/130.6e37035d.js"><link rel="prefetch" href="/vuebloger/assets/js/131.0ab4e439.js"><link rel="prefetch" href="/vuebloger/assets/js/132.2a27084d.js"><link rel="prefetch" href="/vuebloger/assets/js/133.8f40fb10.js"><link rel="prefetch" href="/vuebloger/assets/js/134.35eabd46.js"><link rel="prefetch" href="/vuebloger/assets/js/135.806f814d.js"><link rel="prefetch" href="/vuebloger/assets/js/136.08ea1c36.js"><link rel="prefetch" href="/vuebloger/assets/js/137.269fca61.js"><link rel="prefetch" href="/vuebloger/assets/js/138.79668cff.js"><link rel="prefetch" href="/vuebloger/assets/js/139.517ccb49.js"><link rel="prefetch" href="/vuebloger/assets/js/14.c45907da.js"><link rel="prefetch" href="/vuebloger/assets/js/15.19528e37.js"><link rel="prefetch" href="/vuebloger/assets/js/16.0a4c588b.js"><link rel="prefetch" href="/vuebloger/assets/js/17.0e51e193.js"><link rel="prefetch" href="/vuebloger/assets/js/18.989dc208.js"><link rel="prefetch" href="/vuebloger/assets/js/19.c276b6de.js"><link rel="prefetch" href="/vuebloger/assets/js/20.5cf90bce.js"><link rel="prefetch" href="/vuebloger/assets/js/21.6b044372.js"><link rel="prefetch" href="/vuebloger/assets/js/22.594fb529.js"><link rel="prefetch" href="/vuebloger/assets/js/23.bea9c4b4.js"><link rel="prefetch" href="/vuebloger/assets/js/24.140dfb31.js"><link rel="prefetch" href="/vuebloger/assets/js/25.66b474cc.js"><link rel="prefetch" href="/vuebloger/assets/js/26.654e076d.js"><link rel="prefetch" href="/vuebloger/assets/js/27.2201416c.js"><link rel="prefetch" href="/vuebloger/assets/js/28.27f3cdb1.js"><link rel="prefetch" href="/vuebloger/assets/js/29.1880d87e.js"><link rel="prefetch" href="/vuebloger/assets/js/30.f1dd8cb0.js"><link rel="prefetch" href="/vuebloger/assets/js/31.97d0102b.js"><link rel="prefetch" href="/vuebloger/assets/js/32.d51b646c.js"><link rel="prefetch" href="/vuebloger/assets/js/33.4400641d.js"><link rel="prefetch" href="/vuebloger/assets/js/34.22e8f912.js"><link rel="prefetch" href="/vuebloger/assets/js/36.3b296408.js"><link rel="prefetch" href="/vuebloger/assets/js/37.cf8d763b.js"><link rel="prefetch" href="/vuebloger/assets/js/38.379cc4d1.js"><link rel="prefetch" href="/vuebloger/assets/js/39.72720f4b.js"><link rel="prefetch" href="/vuebloger/assets/js/4.4e73fd8a.js"><link rel="prefetch" href="/vuebloger/assets/js/40.7b23c4e2.js"><link rel="prefetch" href="/vuebloger/assets/js/41.026e68a8.js"><link rel="prefetch" href="/vuebloger/assets/js/42.31a3786c.js"><link rel="prefetch" href="/vuebloger/assets/js/43.d9ce4688.js"><link rel="prefetch" href="/vuebloger/assets/js/44.845ecfff.js"><link rel="prefetch" href="/vuebloger/assets/js/45.e897e6d3.js"><link rel="prefetch" href="/vuebloger/assets/js/46.b0d807f6.js"><link rel="prefetch" href="/vuebloger/assets/js/47.0f412ac5.js"><link rel="prefetch" href="/vuebloger/assets/js/48.36da818d.js"><link rel="prefetch" href="/vuebloger/assets/js/49.9c9296ee.js"><link rel="prefetch" href="/vuebloger/assets/js/50.2444878d.js"><link rel="prefetch" href="/vuebloger/assets/js/51.517ccbd3.js"><link rel="prefetch" href="/vuebloger/assets/js/52.9f2436f0.js"><link rel="prefetch" href="/vuebloger/assets/js/53.63fd33fe.js"><link rel="prefetch" href="/vuebloger/assets/js/54.64b9c844.js"><link rel="prefetch" href="/vuebloger/assets/js/55.4919ddd2.js"><link rel="prefetch" href="/vuebloger/assets/js/56.5258665c.js"><link rel="prefetch" href="/vuebloger/assets/js/57.dee8ab32.js"><link rel="prefetch" href="/vuebloger/assets/js/58.1d7b0d12.js"><link rel="prefetch" href="/vuebloger/assets/js/59.20043f9b.js"><link rel="prefetch" href="/vuebloger/assets/js/6.05f243c5.js"><link rel="prefetch" href="/vuebloger/assets/js/60.9b7c46af.js"><link rel="prefetch" href="/vuebloger/assets/js/62.09c5c38e.js"><link rel="prefetch" href="/vuebloger/assets/js/63.689f3eb7.js"><link rel="prefetch" href="/vuebloger/assets/js/64.66e2f1ab.js"><link rel="prefetch" href="/vuebloger/assets/js/65.8d34bb31.js"><link rel="prefetch" href="/vuebloger/assets/js/66.d78540ff.js"><link rel="prefetch" href="/vuebloger/assets/js/67.33cda9ef.js"><link rel="prefetch" href="/vuebloger/assets/js/68.0aed1128.js"><link rel="prefetch" href="/vuebloger/assets/js/69.5e217d9c.js"><link rel="prefetch" href="/vuebloger/assets/js/7.1c4cfcbe.js"><link rel="prefetch" href="/vuebloger/assets/js/70.9b6b1900.js"><link rel="prefetch" href="/vuebloger/assets/js/71.1b3eaf50.js"><link rel="prefetch" href="/vuebloger/assets/js/72.c8fa674b.js"><link rel="prefetch" href="/vuebloger/assets/js/73.dbbb5749.js"><link rel="prefetch" href="/vuebloger/assets/js/74.faf0f9fe.js"><link rel="prefetch" href="/vuebloger/assets/js/75.8abad8a8.js"><link rel="prefetch" href="/vuebloger/assets/js/76.4d91a5a9.js"><link rel="prefetch" href="/vuebloger/assets/js/77.67043e2d.js"><link rel="prefetch" href="/vuebloger/assets/js/78.0728b42c.js"><link rel="prefetch" href="/vuebloger/assets/js/79.51abba0a.js"><link rel="prefetch" href="/vuebloger/assets/js/8.f3194aa0.js"><link rel="prefetch" href="/vuebloger/assets/js/80.e22fcdf1.js"><link rel="prefetch" href="/vuebloger/assets/js/81.1519ce16.js"><link rel="prefetch" href="/vuebloger/assets/js/82.c296b863.js"><link rel="prefetch" href="/vuebloger/assets/js/83.84e41767.js"><link rel="prefetch" href="/vuebloger/assets/js/84.63c5793e.js"><link rel="prefetch" href="/vuebloger/assets/js/85.912d16c7.js"><link rel="prefetch" href="/vuebloger/assets/js/86.93b336ae.js"><link rel="prefetch" href="/vuebloger/assets/js/87.63711215.js"><link rel="prefetch" href="/vuebloger/assets/js/88.a82fba45.js"><link rel="prefetch" href="/vuebloger/assets/js/89.9c06ba83.js"><link rel="prefetch" href="/vuebloger/assets/js/9.f25900b9.js"><link rel="prefetch" href="/vuebloger/assets/js/90.459c61ad.js"><link rel="prefetch" href="/vuebloger/assets/js/91.b417f399.js"><link rel="prefetch" href="/vuebloger/assets/js/92.e85a5247.js"><link rel="prefetch" href="/vuebloger/assets/js/93.9c55c667.js"><link rel="prefetch" href="/vuebloger/assets/js/94.b8d136a2.js"><link rel="prefetch" href="/vuebloger/assets/js/95.0f0360a9.js"><link rel="prefetch" href="/vuebloger/assets/js/96.797ad646.js"><link rel="prefetch" href="/vuebloger/assets/js/97.6ea440ee.js"><link rel="prefetch" href="/vuebloger/assets/js/98.8968e5b2.js"><link rel="prefetch" href="/vuebloger/assets/js/99.170c9927.js"><link rel="prefetch" href="/vuebloger/assets/js/vendors~docsearch.439e457f.js">
    <link rel="stylesheet" href="/vuebloger/assets/css/0.styles.23361e15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuebloger/" class="home-link router-link-active"><img src="/vuebloger/img/logo.jpeg" alt="邹先生博客记录" class="logo"> <span class="site-name can-hide">邹先生博客记录</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/workplace/" class="nav-link">职场</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <div style="margin-left:20px;margin-right:20px;">
    音乐
    <div role="switch" class="el-switch"><input type="checkbox" name="" true-value="true" class="el-switch__input"><!----><span class="el-switch__core" style="width:40px;"></span><!----></div> <audio><source src="/vuebloger/mp3/065b_520b_0409_111c898908eab454414c3c326fe77c36.mp3" type="audio/mpeg"></audio></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/workplace/" class="nav-link">职场</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>angular-cdk详解</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk初识" class="sidebar-link">angular-cdk初识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-coercion" class="sidebar-link">@angular/cdk/coercion</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-keycodes" class="sidebar-link">@angular/cdk/keycodes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes常用键码" class="sidebar-link">keycodes常用键码</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes方法" class="sidebar-link">Keycodes方法</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes使用" class="sidebar-link">Keycodes使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-platform" class="sidebar-link">@angular/cdk/platform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform提供的service" class="sidebar-link">Platform提供的Service</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform里面提供的方法" class="sidebar-link">Platform里面提供的方法</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform使用" class="sidebar-link">Platform使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-portal" class="sidebar-link">@angular/cdk/portal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#portals指令" class="sidebar-link">Portals指令</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#portals类-接口" class="sidebar-link">Portals类/接口</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#动态显示componentportal" class="sidebar-link">动态显示ComponentPortal</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#动态显示templateportal" class="sidebar-link">动态显示TemplatePortal</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkportal指令的使用" class="sidebar-link">CdkPortal指令的使用</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkportaloutlet指令使用" class="sidebar-link">CdkPortalOutlet指令使用</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#用法汇总实例" class="sidebar-link">用法汇总实例</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-overlay" class="sidebar-link">@angular/cdk/overlay</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#位置策略-positionstrategy" class="sidebar-link">位置策略(PositionStrategy)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#滑动策略-scrollstrategy" class="sidebar-link">滑动策略(ScrollStrategy)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay-service" class="sidebar-link">Overlay(Service)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay-directive" class="sidebar-link">Overlay(directive)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay使用" class="sidebar-link">Overlay使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-scrolling" class="sidebar-link">@angular/cdk/scrolling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkscrollable-scrolldispatcher" class="sidebar-link">cdkScrollable/ScrollDispatcher</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#viewportruler" class="sidebar-link">ViewportRuler</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#示例汇总" class="sidebar-link">示例汇总</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkvirtualscrollviewport" class="sidebar-link">CdkVirtualScrollViewport</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-drag-drop" class="sidebar-link">@angular/cdk/drag-drop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdrag" class="sidebar-link">CdkDrag</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdroplist" class="sidebar-link">CdkDropList</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdroplistgroup" class="sidebar-link">CdkDropListGroup</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdraghandle" class="sidebar-link">CdkDragHandle</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdragpreview" class="sidebar-link">CdkDragPreview</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdragplaceholder" class="sidebar-link">CdkDragPlaceholder</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-observers" class="sidebar-link">@angular/cdk/observers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#contentobserver" class="sidebar-link">ContentObserver</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkobservecontent" class="sidebar-link">CdkObserveContent</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-layout" class="sidebar-link">@angular/cdk/layout</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#breakpointobserver" class="sidebar-link">BreakpointObserver</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#mediamatcher" class="sidebar-link">MediaMatcher</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#breakpoints" class="sidebar-link">Breakpoints</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#示例汇总-2" class="sidebar-link">示例汇总</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-bidi" class="sidebar-link">@angular/cdk/bidi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#directionality" class="sidebar-link">Directionality</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#dir" class="sidebar-link">Dir</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-a11y" class="sidebar-link">@angular/cdk/a11y</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#listkeymanager" class="sidebar-link">ListKeyManager</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focustrap" class="sidebar-link">FocusTrap</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focusmonitor" class="sidebar-link">FocusMonitor</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focustrapfactory" class="sidebar-link">FocusTrapFactory</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#interactivitychecker" class="sidebar-link">InteractivityChecker</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#liveannouncer" class="sidebar-link">LiveAnnouncer</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-stepper" class="sidebar-link">@angular/cdk/stepper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstep" class="sidebar-link">CdkStep</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepper" class="sidebar-link">CdkStepper</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdksteplabel" class="sidebar-link">CdkStepLabel</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdksteppernext" class="sidebar-link">CdkStepperNext</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepperprevious" class="sidebar-link">CdkStepperPrevious</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepheader" class="sidebar-link">CdkStepHeader</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#推荐链接" class="sidebar-link">推荐链接</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content__default" data-v-c702d684 data-v-c702d684><h2 id="angular-cdk初识" data-v-c702d684><a href="#angular-cdk初识" class="header-anchor" data-v-c702d684>#</a> angular-cdk初识</h2> <p data-v-c702d684>cdk(Component Dev Kit组件开发包)是Angular官方在开发基于Material Design的组件库时抽象出来单独的一个开发包，里面封装了一些开发组件时的公共逻辑并且跟Material Design 设计无关，可以用来封装自己的组件库或者直接在业务开发中使用。cdk库里面的功能模块有以下几个部分：</p> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>cdk库模块</th> <th style="text-align:left;" data-v-c702d684>解释</th> <th style="text-align:left;" data-v-c702d684>cdk库模块</th> <th style="text-align:left;" data-v-c702d684>解释</th> <th style="text-align:left;" data-v-c702d684>cdk库模块</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>Coercion</td> <td style="text-align:left;" data-v-c702d684>常用类型转换工具</td> <td style="text-align:left;" data-v-c702d684>Accessibility</td> <td style="text-align:left;" data-v-c702d684>放置一些方便与使用者互动的功能</td> <td style="text-align:left;" data-v-c702d684>Dragand Drop</td> <td style="text-align:left;" data-v-c702d684>组件托拽工具类</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>Keycodes</td> <td style="text-align:left;" data-v-c702d684>常用键码</td> <td style="text-align:left;" data-v-c702d684>Stepper</td> <td style="text-align:left;" data-v-c702d684>类似工作流里面经常用到的分步填写表单</td> <td style="text-align:left;" data-v-c702d684>Layout</td> <td style="text-align:left;" data-v-c702d684>响应式布局工具</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>Observers</td> <td style="text-align:left;" data-v-c702d684>监听内容变化</td> <td style="text-align:left;" data-v-c702d684>Platform</td> <td style="text-align:left;" data-v-c702d684>获取平台信息，以及平台支持的功能</td> <td style="text-align:left;" data-v-c702d684>Scrolling</td> <td style="text-align:left;" data-v-c702d684>处理滚动</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>Overlay</td> <td style="text-align:left;" data-v-c702d684>处理页面的弹出层</td> <td style="text-align:left;" data-v-c702d684>Portal</td> <td style="text-align:left;" data-v-c702d684>动态内容呈现</td> <td style="text-align:left;" data-v-c702d684>Table</td> <td style="text-align:left;" data-v-c702d684>表格</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>Bidirectionality</td> <td style="text-align:left;" data-v-c702d684>布局方向</td> <td style="text-align:left;" data-v-c702d684>Text field</td> <td style="text-align:left;" data-v-c702d684>处理文字的输入</td> <td style="text-align:left;" data-v-c702d684>Tree</td> <td style="text-align:left;" data-v-c702d684>树</td></tr></tbody></table> <h2 id="angular-cdk-coercion" data-v-c702d684><a href="#angular-cdk-coercion" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/coercion</h2> <p data-v-c702d684>coercion模块提供常用类型转换工具，转number、转boolean、转array、转CSS pixel value。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
  coerceArray<span class="token punctuation" data-v-c702d684>,</span>
  coerceBooleanProperty<span class="token punctuation" data-v-c702d684>,</span>
  coerceNumberProperty<span class="token punctuation" data-v-c702d684>,</span>
  _isNumberValue<span class="token punctuation" data-v-c702d684>,</span>
   coerceCssPixelValue<span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/coercion&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;coercion&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;./coercion.component.html&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>&quot;./coercion.component.scss&quot;</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CoercionComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>let</span> a <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 转化为array</span>
    <span class="token keyword" data-v-c702d684>let</span> aa <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>coerceArray</span><span class="token punctuation" data-v-c702d684>(</span>a<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>aa<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 转化为boolean</span>
    <span class="token keyword" data-v-c702d684>let</span> b <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>coerceBooleanProperty</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;true&quot;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>b<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 转化为number</span>
    <span class="token keyword" data-v-c702d684>let</span> c <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>coerceNumberProperty</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;10.0&quot;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>c<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;是否是number类型: &quot;</span> <span class="token operator" data-v-c702d684>+</span> <span class="token function" data-v-c702d684>coerceNumberProperty</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'a'</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>coerceNumberFallback</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 判断是否number</span>
    <span class="token keyword" data-v-c702d684>let</span> isNum <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>_isNumberValue</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'d'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>isNum<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 转CSS pixel value</span>
     console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;转CSS像素: &quot;</span> <span class="token operator" data-v-c702d684>+</span> <span class="token function" data-v-c702d684>coerceCssPixelValue</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'10'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 当转number的时候发生了错误时候的返回值
     */</span>
    <span class="token function" data-v-c702d684>coerceNumberFallback</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> <span class="token number" data-v-c702d684>10</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684></div></div><h2 id="angular-cdk-keycodes" data-v-c702d684><a href="#angular-cdk-keycodes" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/keycodes</h2> <h3 id="keycodes常用键码" data-v-c702d684><a href="#keycodes常用键码" class="header-anchor" data-v-c702d684>#</a> keycodes常用键码</h3> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>MAC_ENTER</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>3</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>BACKSPACE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>8</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>TAB</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>9</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUM_CENTER</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>12</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>ENTER</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>13</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SHIFT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>16</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>CONTROL</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>17</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>ALT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>18</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PAUSE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>19</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>CAPS_LOCK</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>20</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>ESCAPE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>27</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SPACE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>32</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PAGE_UP</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>33</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PAGE_DOWN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>34</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>END</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>35</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>HOME</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>36</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>LEFT_ARROW</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>37</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>UP_ARROW</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>38</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>RIGHT_ARROW</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>39</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>DOWN_ARROW</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>40</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PLUS_SIGN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>43</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PRINT_SCREEN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>44</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>INSERT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>45</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>DELETE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>46</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>ZERO</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>48</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>ONE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>49</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>TWO</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>50</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>THREE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>51</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FOUR</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>52</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FIVE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>53</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SIX</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>54</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SEVEN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>55</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>EIGHT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>56</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NINE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>57</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_SEMICOLON</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>59</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_EQUALS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>61</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>QUESTION_MARK</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>63</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>AT_SIGN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>64</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>A</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>65</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>B</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>66</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>C</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>67</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>D</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>68</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>E</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>69</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>70</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>G</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>71</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>H</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>72</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>I</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>73</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>J</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>74</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>K</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>75</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>L</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>76</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>M</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>77</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>N</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>78</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>O</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>79</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>P</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>80</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>Q</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>81</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>R</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>82</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>S</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>83</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>T</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>84</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>U</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>85</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>V</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>86</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>W</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>87</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>X</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>88</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>Y</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>89</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>Z</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>90</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>META</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>91</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>MAC_WK_CMD_LEFT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>91</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>MAC_WK_CMD_RIGHT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>93</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>CONTEXT_MENU</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>93</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_ZERO</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>96</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_ONE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>97</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_TWO</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>98</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_THREE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>99</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_FOUR</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>100</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_FIVE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>101</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_SIX</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>102</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_SEVEN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>103</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_EIGHT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>104</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_NINE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>105</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_MULTIPLY</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>106</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_PLUS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>107</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_MINUS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>109</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_PERIOD</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>110</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUMPAD_DIVIDE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>111</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F1</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>112</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F2</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>113</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F3</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>114</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F4</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>115</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F5</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>116</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F6</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>117</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F7</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>118</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F8</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>119</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F9</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>120</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F10</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>121</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F11</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>122</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>F12</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>123</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>NUM_LOCK</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>144</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SCROLL_LOCK</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>145</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FIRST_MEDIA</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>166</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_MINUS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>173</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>MUTE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>173</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>VOLUME_DOWN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>174</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>VOLUME_UP</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>175</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_MUTE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>181</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_VOLUME_DOWN</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>182</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>LAST_MEDIA</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>183</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>FF_VOLUME_UP</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>183</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SEMICOLON</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>186</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>EQUALS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>187</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>COMMA</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>188</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>DASH</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>189</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SLASH</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>191</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>APOSTROPHE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>192</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>TILDE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>192</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>OPEN_SQUARE_BRACKET</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>219</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>BACKSLASH</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>220</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>CLOSE_SQUARE_BRACKET</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>221</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>SINGLE_QUOTE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>222</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>MAC_META</span> <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>224</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684><span class="line-number" data-v-c702d684>96</span><br data-v-c702d684><span class="line-number" data-v-c702d684>97</span><br data-v-c702d684><span class="line-number" data-v-c702d684>98</span><br data-v-c702d684><span class="line-number" data-v-c702d684>99</span><br data-v-c702d684><span class="line-number" data-v-c702d684>100</span><br data-v-c702d684><span class="line-number" data-v-c702d684>101</span><br data-v-c702d684><span class="line-number" data-v-c702d684>102</span><br data-v-c702d684><span class="line-number" data-v-c702d684>103</span><br data-v-c702d684><span class="line-number" data-v-c702d684>104</span><br data-v-c702d684><span class="line-number" data-v-c702d684>105</span><br data-v-c702d684><span class="line-number" data-v-c702d684>106</span><br data-v-c702d684><span class="line-number" data-v-c702d684>107</span><br data-v-c702d684><span class="line-number" data-v-c702d684>108</span><br data-v-c702d684><span class="line-number" data-v-c702d684>109</span><br data-v-c702d684><span class="line-number" data-v-c702d684>110</span><br data-v-c702d684><span class="line-number" data-v-c702d684>111</span><br data-v-c702d684><span class="line-number" data-v-c702d684>112</span><br data-v-c702d684><span class="line-number" data-v-c702d684>113</span><br data-v-c702d684><span class="line-number" data-v-c702d684>114</span><br data-v-c702d684><span class="line-number" data-v-c702d684>115</span><br data-v-c702d684><span class="line-number" data-v-c702d684>116</span><br data-v-c702d684><span class="line-number" data-v-c702d684>117</span><br data-v-c702d684><span class="line-number" data-v-c702d684>118</span><br data-v-c702d684></div></div><h3 id="keycodes方法" data-v-c702d684><a href="#keycodes方法" class="header-anchor" data-v-c702d684>#</a> Keycodes方法</h3> <p data-v-c702d684>就提供了一个方法hasModifierKey，判断是否按下了组合键。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>type</span> <span class="token class-name" data-v-c702d684>ModifierKey</span> <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>'altKey'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'shiftKey'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'ctrlKey'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'metaKey'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 判断是否是按下了组合按钮，比如 alt + c 键
 */</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>function</span> <span class="token function" data-v-c702d684>hasModifierKey</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token operator" data-v-c702d684>:</span> KeyboardEvent<span class="token punctuation" data-v-c702d684>,</span> <span class="token operator" data-v-c702d684>...</span>modifiers<span class="token operator" data-v-c702d684>:</span> ModifierKey<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>boolean</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684></div></div><h3 id="keycodes使用" data-v-c702d684><a href="#keycodes使用" class="header-anchor" data-v-c702d684>#</a> Keycodes使用</h3> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token constant" data-v-c702d684>DELETE</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token constant" data-v-c702d684>ENTER</span><span class="token punctuation" data-v-c702d684>,</span> hasModifierKey<span class="token punctuation" data-v-c702d684>,</span> <span class="token constant" data-v-c702d684>MAC_ENTER</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token constant" data-v-c702d684>TAB</span><span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/keycodes'</span><span class="token punctuation" data-v-c702d684>;</span>

<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-key-codes'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;input placeholder=&quot;keycodes测试&quot; (keyup)=&quot;onKeyDown($event)&quot; #input&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-key-codes.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkKeyCodesComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token function" data-v-c702d684>onKeyDown</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * 组合按键判断(如果按下的是 ctr按键 + 其他的按键的时候 返回true)
         */</span>
        <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function" data-v-c702d684>hasModifierKey</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>,</span> <span class="token string" data-v-c702d684>'ctrlKey'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>/**
         * 打印按键值
         */</span>
        <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>keyCode<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>/**
         * 通过 cdk 判断按键类型
         */</span>
        <span class="token keyword" data-v-c702d684>switch</span> <span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>keyCode<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>case</span> <span class="token constant" data-v-c702d684>MAC_ENTER</span><span class="token operator" data-v-c702d684>:</span>
            <span class="token keyword" data-v-c702d684>case</span> <span class="token constant" data-v-c702d684>ENTER</span><span class="token operator" data-v-c702d684>:</span>
                <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'当前按键: Enter键'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token keyword" data-v-c702d684>break</span><span class="token punctuation" data-v-c702d684>;</span>
            <span class="token keyword" data-v-c702d684>case</span> <span class="token constant" data-v-c702d684>TAB</span><span class="token operator" data-v-c702d684>:</span>
                <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'当前按键: Tab键'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token keyword" data-v-c702d684>break</span><span class="token punctuation" data-v-c702d684>;</span>
            <span class="token keyword" data-v-c702d684>case</span> <span class="token constant" data-v-c702d684>DELETE</span><span class="token operator" data-v-c702d684>:</span>
                <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'当前按键: Delete键'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token keyword" data-v-c702d684>break</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684></div></div><h2 id="angular-cdk-platform" data-v-c702d684><a href="#angular-cdk-platform" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/platform</h2> <p data-v-c702d684>platform用于获取当前平台的信息以及当前平台支持的功能,Platform里面给提供了PlatformModule模块，使用之前先imports</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>PlatformModule<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/platform'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>NgModule</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    imports<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>
        PlatformModule<span class="token punctuation" data-v-c702d684>,</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>AppModule</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684></div></div><h3 id="platform提供的service" data-v-c702d684><a href="#platform提供的service" class="header-anchor" data-v-c702d684>#</a> Platform提供的Service</h3> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>Platform类属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>ANDROID</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否android系统</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>IOS</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否IOS系统</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>isBrowser</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否浏览器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>EDGE</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否edge浏览器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>FIREFOX</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否firefox浏览器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>SAFARI</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台是否safari浏览器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>TRIDENT</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台浏览器的render engine是否为Microsoft Trident</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>WEBKIT</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台浏览器的render engine是否为Webkit</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>BLINK</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前平台浏览器的render engine是否为Blink</td></tr></tbody></table> <h3 id="platform里面提供的方法" data-v-c702d684><a href="#platform里面提供的方法" class="header-anchor" data-v-c702d684>#</a> Platform里面提供的方法</h3> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>Platform模块方法</th> <th style="text-align:left;" data-v-c702d684>参数</th> <th style="text-align:left;" data-v-c702d684>返回值</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>getSupportedInputTypes</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>Set</td> <td style="text-align:left;" data-v-c702d684>当前浏览器支持的输入类型(比如color, button, checkbox, date等)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>supportsPassiveEventListeners</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前浏览器是否支持被动事件监听器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>supportsScrollBehavior</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>boolean</td> <td style="text-align:left;" data-v-c702d684>当前浏览器是否支持滑动行为</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>getRtlScrollAxisType</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>RtlScrollAxisType</td> <td style="text-align:left;" data-v-c702d684>获取当前浏览器使用的RTL滚动轴的类型(Chrome的是NORMAL, Firefox和 Safari的是NEGATED, IE和Edge的是INVERTED.)</td></tr></tbody></table> <h3 id="platform使用" data-v-c702d684><a href="#platform使用" class="header-anchor" data-v-c702d684>#</a> Platform使用</h3> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>// Platform 服务</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
  Platform<span class="token punctuation" data-v-c702d684>,</span>
  supportsPassiveEventListeners<span class="token punctuation" data-v-c702d684>,</span>
  getSupportedInputTypes<span class="token punctuation" data-v-c702d684>,</span>
  supportsScrollBehavior
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/platform&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;platform&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;./platform.component.html&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>&quot;./platform.component.scss&quot;</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>PlatformComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> plat<span class="token operator" data-v-c702d684>:</span> Platform</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>

  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 是否支持被动监听</span>
    <span class="token keyword" data-v-c702d684>let</span> isSupportsPassiveEventListeners <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>supportsPassiveEventListeners</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;isSupportsPassiveEventListeners&quot;</span><span class="token punctuation" data-v-c702d684>,</span>isSupportsPassiveEventListeners<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
   <span class="token comment" data-v-c702d684>// 是否支持滑动行为</span>
    <span class="token keyword" data-v-c702d684>let</span> supportsScrollBehavior <span class="token operator" data-v-c702d684>=</span> <span class="token function" data-v-c702d684>supportsScrollBehavior</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;supportsScrollBehavior&quot;</span><span class="token punctuation" data-v-c702d684>,</span>supportsScrollBehavior<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 支持输入的类型</span>
    <span class="token keyword" data-v-c702d684>let</span> supportedInputTypes <span class="token operator" data-v-c702d684>=</span> Array<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>from</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function" data-v-c702d684>getSupportedInputTypes</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>join</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>', '</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;supportedInputTypes&quot;</span><span class="token punctuation" data-v-c702d684>,</span> supportedInputTypes<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否安卓</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>ANDROID</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>ANDROID</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否IOS</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>IOS</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>IOS</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否BLINK引擎</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>BLINK</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>BLINK</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否DEGE浏览器</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>EDGE</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>EDGE</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否FIREFOX浏览器</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>FIREFOX</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>FIREFOX</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否SAFARI</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>SAFARI</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>SAFARI</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否TRIDENT</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>TRIDENT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>TRIDENT</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否WEBKIT</span>
    <span class="token keyword" data-v-c702d684>let</span> <span class="token constant" data-v-c702d684>WEBKIT</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>WEBKIT</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 是否浏览器</span>
    <span class="token keyword" data-v-c702d684>let</span> isBrowser <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>plat<span class="token punctuation" data-v-c702d684>.</span>isBrowser<span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684></div></div><h2 id="angular-cdk-portal" data-v-c702d684><a href="#angular-cdk-portal" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/portal</h2> <p data-v-c702d684>portal将动态内容(这个内容可以是Component也可以是一个TemplateRef)呈现到应用程序中。即把Portal放到指定位置(我们把他叫做插槽PortalOutlet)。Portal有两个子类ComponentPortal(对应组件)或者TemplatePortal(对应TemplateRef)。</p> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>Portal:表示内容。PortalOutlet: 放置内容的位置。</p> <p data-v-c702d684>在使用Portals之前我们先要import PortalModule。</p></div> <h3 id="portals指令" data-v-c702d684><a href="#portals指令" class="header-anchor" data-v-c702d684>#</a> Portals指令</h3> <h4 id="cdkportal" data-v-c702d684><a href="#cdkportal" class="header-anchor" data-v-c702d684>#</a> CdkPortal</h4> <ol data-v-c702d684><li data-v-c702d684>CdkPortal extends TemplatePortal</li></ol> <ul data-v-c702d684><li data-v-c702d684>Selector: <code data-v-c702d684>[cdk-portal] [cdkPortal] [portal]</code></li> <li data-v-c702d684>Exported as: cdkPortal</li> <li data-v-c702d684>CdkPortal指令继承自TemplatePortal，CdkPortal指令代表当前元素是一个Portal，这个Portal是可以放置到PortalOutlet里面去的。</li> <li data-v-c702d684>注意：CdkPortal指令没有提供@Input()和@Output()。</li></ul> <ol start="2" data-v-c702d684><li data-v-c702d684>CdkPortal指令里面的属性(其实就是TemplatePortal的属性)</li></ol> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>CdkPortal属性</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>context: <code data-v-c702d684>C | undefined</code></td> <td style="text-align:left;" data-v-c702d684>ng-template需要传递的参数，可以参考ngTemplateOutletContext的用法</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>isAttached: boolean</td> <td style="text-align:left;" data-v-c702d684>是否attach到节点里面去了</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>templateRef: TemplateRef</td> <td style="text-align:left;" data-v-c702d684>嵌入视图</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>viewContainerRef: ViewContainerRef</td> <td style="text-align:left;" data-v-c702d684>视图容器(内部会通过上下文拿到)，内部应该是要通过视图容器来插入元素</td></tr></tbody></table> <ol start="3" data-v-c702d684><li data-v-c702d684>CdkPortal指令里面的方法</li></ol> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>/**
 * 把CdkPortal对应的Portal attach 到 PortalOutlet里面去(把组件显示出来)
 * @Param host PortalOutlet
 * @Param context ng-template需要传入的内容
 */</span>
<span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>host<span class="token operator" data-v-c702d684>:</span> PortalOutlet<span class="token punctuation" data-v-c702d684>,</span> context<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>undefined</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 把CdkPortal对应的Portal从PortalOutlet detach移除掉
 */</span>
<span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684></div></div><h4 id="cdkportaloutlet" data-v-c702d684><a href="#cdkportaloutlet" class="header-anchor" data-v-c702d684>#</a> CdkPortalOutlet</h4> <ol data-v-c702d684><li data-v-c702d684>CdkPortalOutlet extends BasePortalOutlet</li></ol> <ul data-v-c702d684><li data-v-c702d684>Selector: <code data-v-c702d684>[cdkPortalOutlet], [cdkPortalHost], [portalHost]</code></li></ul> <ol start="2" data-v-c702d684><li data-v-c702d684>CdkPortalOutlet指令里面的属性</li></ol> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>输入输出</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>portal: <code data-v-c702d684>Portal | null</code></td> <td style="text-align:left;" data-v-c702d684>@Input(cdkPortalOutlet)</td> <td style="text-align:left;" data-v-c702d684>CdkPortalOutlet位置attach的Portal</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>attached: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>当有Portal attach到CdkPortalOutlet位置的时候会回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>attachedRef: CdkPortalOutletAttachedRef</td> <td style="text-align:left;" data-v-c702d684></td> <td style="text-align:left;" data-v-c702d684>已经attach的宿主视图或者嵌入视图(ComponentRef-Component提供</td></tr></tbody></table> <ol start="3" data-v-c702d684><li data-v-c702d684>CdkPortalOutlet指令里面的方法</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>/** 是否有Portal attach到当前PortalOutlet上了 */</span>
<span class="token function" data-v-c702d684>hasAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 把Portal(ComponentPortal、TemplatePortal) attach 到PortalOutlet上去
 */</span>
attach<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
attach<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> EmbeddedViewRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 把ComponentPortal attach 到PortalOutlet上去，使用ComponentFactoryResolver
 */</span>
attachComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 把TemplatePortal attach 到PortalOutlet上去，使用ComponentFactoryResolver
 */</span>
attachTemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> EmbeddedViewRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 把当前PortalOutlet里面的Portal detach掉
 */</span>
<span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 永久性的dispatch掉Portal
 */</span>
<span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684></div></div><h3 id="portals类-接口" data-v-c702d684><a href="#portals类-接口" class="header-anchor" data-v-c702d684>#</a> Portals类/接口</h3> <h4 id="portal" data-v-c702d684><a href="#portal" class="header-anchor" data-v-c702d684>#</a> Portal</h4> <p data-v-c702d684>Portal类代表我们将要显示的动态内容。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>abstract</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>Portal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>private</span> _attachedHost<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** Portal attach 到PortalOutlet里面去 */</span>
    <span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>host<span class="token operator" data-v-c702d684>:</span> PortalOutlet<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>T</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 把Portal从PortalOutlet里面移除掉*/</span>
    <span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 当前portal是否attach到PortalOutlet上了
     */</span>
    <span class="token keyword" data-v-c702d684>readonly</span> isAttached<span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>boolean</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 在 attach() 和 detach()调用的时候，这个函数会被PortalOutlet调用。我们使用的时候是不需要调用这个函数的
     */</span>
    <span class="token function" data-v-c702d684>setAttachedHost</span><span class="token punctuation" data-v-c702d684>(</span>host<span class="token operator" data-v-c702d684>:</span> PortalOutlet <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684></div></div><h4 id="componentportal" data-v-c702d684><a href="#componentportal" class="header-anchor" data-v-c702d684>#</a> ComponentPortal</h4> <p data-v-c702d684>ComponentPortal类是组件视图对应的Portal，extends Portal，重点在构造函数。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>Portal<span class="token operator" data-v-c702d684>&lt;</span>ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;&gt;</span></span> <span class="token punctuation" data-v-c702d684>{</span>
    component<span class="token operator" data-v-c702d684>:</span> ComponentType<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    viewContainerRef<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> ViewContainerRef <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    injector<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> Injector <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    componentFactoryResolver<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 构造函数
     * @param component: 组件
     * @param viewContainerRef: 试图容器
     * @param injector: 注入器(用它来给组件传递参数)，关于怎么传递参数，我们会在下面的实例里面讲到
     * @param componentFactoryResolver： 组件工厂解析器
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>component<span class="token operator" data-v-c702d684>:</span> ComponentType<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>,</span> viewContainerRef<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> ViewContainerRef <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>,</span> injector<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> Injector <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>,</span> componentFactoryResolver<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684></div></div><h4 id="templateportal" data-v-c702d684><a href="#templateportal" class="header-anchor" data-v-c702d684>#</a> TemplatePortal</h4> <p data-v-c702d684>TemplatePortal类是嵌入视图对应的Portal，extends Portal。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>TemplatePortal</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span> <span class="token operator" data-v-c702d684>=</span> any<span class="token operator" data-v-c702d684>&gt;</span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>Portal</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
    templateRef<span class="token operator" data-v-c702d684>:</span> TemplateRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>;</span>
    context<span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>undefined</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     *
     * @param template: 嵌入试图对应的模板
     * @param viewContainerRef： 试图容器
     * @param context： 嵌入试图需要传递的参数
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>template<span class="token operator" data-v-c702d684>:</span> TemplateRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>,</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span> context<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    readonly origin<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>host<span class="token operator" data-v-c702d684>:</span> PortalOutlet<span class="token punctuation" data-v-c702d684>,</span> context<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>undefined</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>C</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684></div></div><h4 id="portaloutlet" data-v-c702d684><a href="#portaloutlet" class="header-anchor" data-v-c702d684>#</a> PortalOutlet</h4> <p data-v-c702d684>PortalOutlet是代表我们动态内容需要放置的地方(插槽)，用来放置ComponentPortal或者TemplatePortal。 PortalOutlet是一个接口。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>/**
 * Portal所要放置的位置
 */</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>interface</span> <span class="token class-name" data-v-c702d684>PortalOutlet</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 把Portal对应的内容放置在PortalOutlet
     */</span>
    <span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> Portal<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>any</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * D把PortalOutlet的内容移除掉
     */</span>
    <span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>any</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 在destroyed之前清理掉 PortalOutlet里面的内容，一帮我们自己很少调用
     */</span>
    <span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 判断PortalOutlet里面是否attach了Portal
     */</span>
    <span class="token function" data-v-c702d684>hasAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>boolean</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684></div></div><h4 id="baseportaloutlet-implements-portaloutlet" data-v-c702d684><a href="#baseportaloutlet-implements-portaloutlet" class="header-anchor" data-v-c702d684>#</a> BasePortalOutlet implements PortalOutlet</h4> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>/**
 * BasePortalOutlet是一个抽象类，实现了PortalOutlet，话句话说BasePortalOutlet实现了ComponentPortal、 TemplatePortal的放置
 * ComponentPortal and TemplatePortal.
 */</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>abstract</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>BasePortalOutlet</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>PortalOutlet</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>protected</span> _attachedPortal<span class="token operator" data-v-c702d684>:</span> Portal<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _disposeFn<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _isDisposed<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 判断PortalOutlet里面是否attach了Portal
     */</span>
    <span class="token function" data-v-c702d684>hasAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>boolean</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     * 在PortalOutlet里面放置ComponentPortal
     */</span>
    <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attach</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 在PortalOutlet里面放置TemplatePortal
     */</span>
    <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attach</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> EmbeddedViewRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>any</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>any</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>abstract</span> <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attachComponentPortal</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>abstract</span> <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attachTemplatePortal</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> EmbeddedViewRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 把PortalOutlet的内容移除掉
     */</span>
    <span class="token function" data-v-c702d684>detach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     *  永久性的移除PortalOutlet的内容，在destroy之前调用
     */</span>
    <span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** @docs-private */</span>
    <span class="token function" data-v-c702d684>setDisposeFn</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function-variable function" data-v-c702d684>fn</span><span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _invokeDisposeFn<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684></div></div><h4 id="domportaloutlet-extends-baseportaloutlet" data-v-c702d684><a href="#domportaloutlet-extends-baseportaloutlet" class="header-anchor" data-v-c702d684>#</a> DomPortalOutlet extends BasePortalOutlet</h4> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>/**
* Dom 形式下的PortalOutlet
*/</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DomPortalOutlet</span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>BasePortalOutlet</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * PortalOutlet 对应的Element，Portal的内容将会添加在这个Element下面
     */</span>
    outletElement<span class="token operator" data-v-c702d684>:</span> Element<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _componentFactoryResolver<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _appRef<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _defaultInjector<span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     *
     * @param outletElement: PortalOutlet对应的节点Element，Portal添加的位置
     * @param _componentFactoryResolver：组件工厂解析器
     * @param _appRef：变化检测工具类
     * @param _defaultInjector：注入器，用于传递参数
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
        <span class="token comment" data-v-c702d684>/** Element into which the content is projected. */</span>
        outletElement<span class="token operator" data-v-c702d684>:</span> Element<span class="token punctuation" data-v-c702d684>,</span> _componentFactoryResolver<span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span> _appRef<span class="token operator" data-v-c702d684>:</span> ApplicationRef<span class="token punctuation" data-v-c702d684>,</span> _defaultInjector<span class="token operator" data-v-c702d684>:</span> Injector<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * attach ComponentPortal
     */</span>
    <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attachComponentPortal</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> ComponentPortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * attach TemplatePortal
     */</span>
    <span class="token generic-function" data-v-c702d684><span class="token function" data-v-c702d684>attachTemplatePortal</span><span class="token generic class-name" data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span></span></span><span class="token punctuation" data-v-c702d684>(</span>portal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> EmbeddedViewRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>C</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 情况DomPortalOutlet下面所有的Portal
     */</span>
    <span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** Gets the root HTMLElement for an instantiated component. */</span>
    <span class="token keyword" data-v-c702d684>private</span> _getComponentRootNode<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684></div></div><h3 id="动态显示componentportal" data-v-c702d684><a href="#动态显示componentportal" class="header-anchor" data-v-c702d684>#</a> 动态显示ComponentPortal</h3> <p data-v-c702d684>动态显示宿主视图(Host View),由Component提供，也就是我们常说的组件了。第一步，我们肯定会有一个自定义的组件的。比如我们新建一个非常简单的组件PortalChildComponent，并且给组件传递一个参数.</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> EventEmitter<span class="token punctuation" data-v-c702d684>,</span> Inject<span class="token punctuation" data-v-c702d684>,</span> InjectionToken<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>/**
 * 用于动态创建PortalChildComponent的时候传递参数
 */</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>const</span> <span class="token constant" data-v-c702d684>PORTAL_CHILD_DATA</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>InjectionToken</span><span class="token operator" data-v-c702d684>&lt;</span>any<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'PORTAL_CHILD_DATA'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-portal-child'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;h1&gt;portal child show&lt;/h1&gt;
        &lt;button (click)=&quot;onButtonClick()&quot;&gt;点击&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>PortalChildComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    outEvent<span class="token operator" data-v-c702d684>:</span> EventEmitter<span class="token operator" data-v-c702d684>&lt;</span>string<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 构造函数
     * @param initData 创建组件的时候传递过来的参数(为了测试用了any类型，推荐根据业务使用特定的类型，尽量不要使用any)
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>@<span class="token function" data-v-c702d684>Inject</span><span class="token punctuation" data-v-c702d684>(</span><span class="token constant" data-v-c702d684>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token keyword" data-v-c702d684>public</span> initData<span class="token operator" data-v-c702d684>:</span> any</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>initData<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 用来测试把Portal里面的事件返回上去
     */</span>
    <span class="token function" data-v-c702d684>onButtonClick</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>outEvent <span class="token operator" data-v-c702d684>!=</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>outEvent<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>emit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'child 里面被点击了'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>因为PortalChildComponent是动态组件，所以@NgModule里面除了declarations里面需要添加PortalChildComponent，entryComponents里面也需要添加PortalChildComponent</p></div> <p data-v-c702d684>第二步，动态显示PortalChildComponent，这里我们新建一个PortalComponentComponent 组件，把PortalChildComponent动态的添加到PortalComponentComponent里面去。(注意下是怎么传递参数的,传出参数，业务绝大部分的场景都是需要给动态组件传递参数的)</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
    ApplicationRef<span class="token punctuation" data-v-c702d684>,</span>
    Component<span class="token punctuation" data-v-c702d684>,</span>
    ComponentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span> ComponentRef<span class="token punctuation" data-v-c702d684>,</span>
    ElementRef<span class="token punctuation" data-v-c702d684>,</span> EventEmitter<span class="token punctuation" data-v-c702d684>,</span>
    Injector<span class="token punctuation" data-v-c702d684>,</span> OnDestroy<span class="token punctuation" data-v-c702d684>,</span>
    OnInit<span class="token punctuation" data-v-c702d684>,</span>
    ViewContainerRef
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ComponentPortal<span class="token punctuation" data-v-c702d684>,</span> DomPortalHost<span class="token punctuation" data-v-c702d684>,</span> PortalInjector<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token constant" data-v-c702d684>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-c702d684>,</span> PortalChildComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'../portal-child-component/portal-child.component'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Subject<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;rxjs&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>takeUntil<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;rxjs/operators&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-portal-component'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>PortalComponentComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span><span class="token punctuation" data-v-c702d684>,</span> OnDestroy <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>private</span> portalHost<span class="token operator" data-v-c702d684>:</span> DomPortalHost<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _$destroy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>Subject</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
        <span class="token keyword" data-v-c702d684>private</span> elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span>
        <span class="token keyword" data-v-c702d684>private</span> injector<span class="token operator" data-v-c702d684>:</span> Injector<span class="token punctuation" data-v-c702d684>,</span>
        <span class="token keyword" data-v-c702d684>private</span> appRef<span class="token operator" data-v-c702d684>:</span> ApplicationRef<span class="token punctuation" data-v-c702d684>,</span>
        <span class="token keyword" data-v-c702d684>private</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span>
        <span class="token keyword" data-v-c702d684>private</span> componentFactoryResolver<span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span>
    <span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// 1. 创建DomPortalHost</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>portalHost <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>DomPortalHost</span><span class="token punctuation" data-v-c702d684>(</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>elementRef<span class="token punctuation" data-v-c702d684>.</span>nativeElement <span class="token keyword" data-v-c702d684>as</span> HTMLElement<span class="token punctuation" data-v-c702d684>,</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>componentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>appRef<span class="token punctuation" data-v-c702d684>,</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>injector
        <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// injectionTokens用于传递参数，如果不想传递参数，直接const templatePortal = new ComponentPortal(PortalChildComponent) 就可以了</span>
        <span class="token keyword" data-v-c702d684>const</span> injectionTokens <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>WeakMap</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        injectionTokens<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>set</span><span class="token punctuation" data-v-c702d684>(</span><span class="token constant" data-v-c702d684>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token string" data-v-c702d684>'构建组件传递的参数'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 2. 创建ComponentPortal</span>
        <span class="token keyword" data-v-c702d684>const</span> templatePortal <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>PortalChildComponent
            <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewContainerRef
            <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>PortalInjector</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>injector<span class="token punctuation" data-v-c702d684>,</span> injectionTokens<span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>componentFactoryResolver<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 3. ComponentPortal attach 到DomPortalHost里面去, 并且把ComponentPortal里面的时间返回上来</span>
        <span class="token comment" data-v-c702d684>// 如果不需要传出参数，this.portalHost.attach(templatePortal); 就可以了</span>
        <span class="token keyword" data-v-c702d684>const</span> portalComponentRef<span class="token operator" data-v-c702d684>:</span> ComponentRef<span class="token operator" data-v-c702d684>&lt;</span>PortalChildComponent<span class="token operator" data-v-c702d684>&gt;</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>portalHost<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attachComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>templatePortal<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 处理返回回来的事件</span>
        <span class="token keyword" data-v-c702d684>const</span> eventEmitter<span class="token operator" data-v-c702d684>:</span> EventEmitter<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>string</span><span class="token operator" data-v-c702d684>&gt;</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>EventEmitter<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>string</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        portalComponentRef<span class="token punctuation" data-v-c702d684>.</span>instance<span class="token punctuation" data-v-c702d684>.</span>outEvent <span class="token operator" data-v-c702d684>=</span> eventEmitter<span class="token punctuation" data-v-c702d684>;</span>
        eventEmitter<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>pipe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function" data-v-c702d684>takeUntil</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_$destroy<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>handlerPortalEvent</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token keyword" data-v-c702d684>private</span> <span class="token function" data-v-c702d684>handlerPortalEvent</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'收到了Portal返回上来的事件信息:'</span> <span class="token operator" data-v-c702d684>+</span> event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnDestroy</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_$destroy<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>next</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_$destroy<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>complete</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>总结</p> <ol data-v-c702d684><li data-v-c702d684>第一动态组件需要在declarations和entryComponents里面申明。</li> <li data-v-c702d684>第二动态组件传入参数。(@Input())</li> <li data-v-c702d684>第三动态组件传出参数。(@Output())</li></ol></div> <h3 id="动态显示templateportal" data-v-c702d684><a href="#动态显示templateportal" class="header-anchor" data-v-c702d684>#</a> 动态显示TemplatePortal</h3> <p data-v-c702d684>动态显示嵌入视图(Embedded View),由Template提供，和我们常说的ng-template标签对应。把ng-template的内容在指定的位置显示出来。下面的例子我们创建一个PortalTemplateComponent组件，然后把ng-template标签对应的内容在这个组件里面显示出来。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
   ApplicationRef<span class="token punctuation" data-v-c702d684>,</span>
   Component<span class="token punctuation" data-v-c702d684>,</span>
   ComponentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span>
   ElementRef<span class="token punctuation" data-v-c702d684>,</span>
   Injector<span class="token punctuation" data-v-c702d684>,</span>
   OnInit<span class="token punctuation" data-v-c702d684>,</span>
   TemplateRef<span class="token punctuation" data-v-c702d684>,</span>
   ViewChild<span class="token punctuation" data-v-c702d684>,</span>
   ViewContainerRef
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>DomPortalHost<span class="token punctuation" data-v-c702d684>,</span> TemplatePortal<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/portal&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
   selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-portal-template'</span><span class="token punctuation" data-v-c702d684>,</span>
   template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
       &lt;!-- 我们定义一个ng-template节点，并且需要传递一个参数 --&gt;
       &lt;ng-template #portalTemplate let-data&gt;
           &lt;div&gt;参数: {{ data }}&lt;/div&gt;
       &lt;/ng-template&gt;
   </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>PortalTemplateComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
   <span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>ViewChild</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'portalTemplate'</span><span class="token punctuation" data-v-c702d684>)</span> testTemplate<span class="token operator" data-v-c702d684>:</span> TemplateRef<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
   <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
       <span class="token keyword" data-v-c702d684>private</span> elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span>
       <span class="token keyword" data-v-c702d684>private</span> injector<span class="token operator" data-v-c702d684>:</span> Injector<span class="token punctuation" data-v-c702d684>,</span>
       <span class="token keyword" data-v-c702d684>private</span> appRef<span class="token operator" data-v-c702d684>:</span> ApplicationRef<span class="token punctuation" data-v-c702d684>,</span>
       <span class="token keyword" data-v-c702d684>private</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span>
       <span class="token keyword" data-v-c702d684>private</span> componentFactoryResolver<span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span>
   <span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
   <span class="token punctuation" data-v-c702d684>}</span>
   <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
       <span class="token comment" data-v-c702d684>// 1. DomPortalHost</span>
       <span class="token keyword" data-v-c702d684>const</span> portalHost <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>DomPortalHost</span><span class="token punctuation" data-v-c702d684>(</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>elementRef<span class="token punctuation" data-v-c702d684>.</span>nativeElement <span class="token keyword" data-v-c702d684>as</span> HTMLElement<span class="token punctuation" data-v-c702d684>,</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>componentFactoryResolver<span class="token punctuation" data-v-c702d684>,</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>appRef<span class="token punctuation" data-v-c702d684>,</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>injector
       <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
       <span class="token comment" data-v-c702d684>// 2. TemplatePortal</span>
       <span class="token keyword" data-v-c702d684>const</span> templatePortal <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>TemplatePortal</span><span class="token punctuation" data-v-c702d684>(</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>testTemplate<span class="token punctuation" data-v-c702d684>,</span>
           <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewContainerRef<span class="token punctuation" data-v-c702d684>,</span>
           <span class="token punctuation" data-v-c702d684>{</span>
               $implicit<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;我是传递进来的数据&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
           <span class="token punctuation" data-v-c702d684>}</span>
       <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
       <span class="token comment" data-v-c702d684>// 3. attach</span>
       portalHost<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>templatePortal<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
   <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684></div></div><h3 id="cdkportal指令的使用" data-v-c702d684><a href="#cdkportal指令的使用" class="header-anchor" data-v-c702d684>#</a> CdkPortal指令的使用</h3> <p data-v-c702d684>模板语法中某个标签使用了CdkPortal指令，可以简单的认为这个标签对应的元素就已经被封装成TemplatePortal了。</p> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>添加了CdkPortal指令的元素是不会在页面中显示出来的，除非你给CdkPortal指定了CdkPortalOutlet的位置。即使是div元素你给添加了*cdkPortal也是不会显示出来的。</p></div> <p data-v-c702d684>比如我们有如下的代码，ng-templat和div都添加了CdkPortal指令。如果我们不做任何处理，他们是不会显示的。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>!</span><span class="token operator" data-v-c702d684>--</span> #divPortal<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;cdkPortal&quot;</span><span class="token punctuation" data-v-c702d684>,</span>CdkPortal指令有exportAs<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'cdkPortal'</span>元数据，所以我们才可以这么写来获取，来获取CdkPortal对象  <span class="token operator" data-v-c702d684>--</span><span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template #divPortal<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;cdkPortal&quot;</span> cdkPortal <span class="token keyword" data-v-c702d684>let</span><span class="token operator" data-v-c702d684>-</span>obj <span class="token keyword" data-v-c702d684>let</span><span class="token operator" data-v-c702d684>-</span>location<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;location&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>
    <span class="token operator" data-v-c702d684>&lt;</span>h2<span class="token operator" data-v-c702d684>&gt;</span>ng<span class="token operator" data-v-c702d684>-</span>template <span class="token function" data-v-c702d684>指定的内容</span><span class="token punctuation" data-v-c702d684>(</span>first<span class="token punctuation" data-v-c702d684>)</span> 外部参数 <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>{</span>obj<span class="token punctuation" data-v-c702d684>.</span>age<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>}</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>!</span><span class="token operator" data-v-c702d684>--</span> 不建议在div上添加<span class="token operator" data-v-c702d684>*</span>cdkPortal指令，完全可以用ng<span class="token operator" data-v-c702d684>-</span>template代替 <span class="token operator" data-v-c702d684>--</span><span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>div <span class="token operator" data-v-c702d684>*</span>cdkPortal<span class="token operator" data-v-c702d684>&gt;</span>
    <span class="token operator" data-v-c702d684>&lt;</span>h2<span class="token operator" data-v-c702d684>&gt;</span>ng<span class="token operator" data-v-c702d684>-</span>template <span class="token function" data-v-c702d684>指定的内容</span><span class="token punctuation" data-v-c702d684>(</span>last<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>div<span class="token operator" data-v-c702d684>&gt;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684></div></div><p data-v-c702d684>接下来得给他们指定一个位置让他们显示出来。在显示之前，咱们得在对应的ts文件里面得到cdkPortal指令对应的TemplatePortal。使用@ViewChildren，@ViewChild找到他们。</p> <ol data-v-c702d684><li data-v-c702d684>通过@ViewChildren获取CdkPortal，@ViewChildren selector参数是TemplatePortalDirective，这样我们就拿到了当前html里面所有添加了CdkPortal指令的对象的TemplatePortal。</li></ol> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684> <span class="token comment" data-v-c702d684>// 获取到对应html里面所有添加了cdkPortal指令的元素的TemplatePortal</span>
    <span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>ViewChildren</span></span><span class="token punctuation" data-v-c702d684>(</span>TemplatePortalDirective<span class="token punctuation" data-v-c702d684>)</span> templatePortals<span class="token operator" data-v-c702d684>:</span> QueryList<span class="token operator" data-v-c702d684>&lt;</span>TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684></div></div><ol start="2" data-v-c702d684><li data-v-c702d684>通过@ViewChild获取指定添加了CdkPortal指令的TemplatePortal，html模板语法里面对应CdkPortal指令标签需要写上#templatePortal=“cdkPortal”</li></ol> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>// 获取单个的cdkPortal指令的元素的TemplatePortal 【#templatePortal=&quot;cdkPortal&quot;】</span>
    <span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>ViewChild</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'templatePortal'</span><span class="token punctuation" data-v-c702d684>)</span> divTemplatePortal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684></div></div><p data-v-c702d684>CdkPortal指令对应的视图内容(嵌入视图)已经自动帮我们封装成了TemplatePortal，我们也已经拿到了这些TemplatePortal，剩下的就是在什么位置显示他们了。有两种方式显示他们，第一种自己new DomPortalHost来attach，这个我们上面的例子中有实际的例子、第二种通过CdkPortalOutlet指令来显示。这个也是我们下面要讲到的内容。</p> <h3 id="cdkportaloutlet指令使用" data-v-c702d684><a href="#cdkportaloutlet指令使用" class="header-anchor" data-v-c702d684>#</a> CdkPortalOutlet指令使用</h3> <p data-v-c702d684>CdkPortalOutlet表示添加了该指令的元素是一个PortalOutlet，可以在他上面添加Portal元素。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>TemplatePortal<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-portal'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- Portal显示的位置 --&gt;
        &lt;div class=&quot;demo-portal-host&quot;&gt;
            &lt;!-- cdkPortalOutlet来指定动态内容需要放置的地方，参数是selectedPortal他是一个ComponentPortal或者TemplatePortal
             显示的内容会根据selectedPortal的改变而改变--&gt;
            &lt;ng-template cdkPortalHost [cdkPortalOutlet]=&quot;templatePortal&quot; (attached)=&quot;onPortalAttached()&quot;&gt;&lt;/ng-template&gt;
        &lt;/div&gt;

        &lt;!-- #divPortal=&quot;cdkPortal&quot;,CdkPortal指令有exportAs: 'cdkPortal'元数据，所以我们才可以这么写来获取，来获取CdkPortal对象  --&gt;
        &lt;ng-template #templatePortal=&quot;cdkPortal&quot; cdkPortal&gt;
            &lt;h2&gt; cdkPortalHost cdkPortal 配合使用动态显示&lt;/h2&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-portal.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkPortalComponent</span>  <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// cdkPortal指令对应的Portal</span>
    <span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>ViewChild</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'templatePortal'</span><span class="token punctuation" data-v-c702d684>)</span> templatePortal<span class="token operator" data-v-c702d684>:</span> TemplatePortal<span class="token operator" data-v-c702d684>&lt;</span><span class="token builtin" data-v-c702d684>any</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>onPortalAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'PortalOutlet 有元素attach上来了'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684></div></div><h3 id="用法汇总实例" data-v-c702d684><a href="#用法汇总实例" class="header-anchor" data-v-c702d684>#</a> 用法汇总实例</h3> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span>h2 <span class="token keyword" data-v-c702d684>class</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;title&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>我是component<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template #portalComponentOutlet cdkPortalOutlet<span class="token operator" data-v-c702d684>&gt;</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span>h2 <span class="token keyword" data-v-c702d684>class</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;title&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>我是template<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template #portalTemplateOutlet cdkPortalOutlet<span class="token operator" data-v-c702d684>&gt;</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span>h2 <span class="token keyword" data-v-c702d684>class</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;title&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>我是会变得<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template <span class="token punctuation" data-v-c702d684>[</span>cdkPortalOutlet<span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;greeting&quot;</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span>h2 <span class="token keyword" data-v-c702d684>class</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;title&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>我是自动获取的<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>h2<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template <span class="token punctuation" data-v-c702d684>[</span>cdkPortalOutlet<span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;myCdkPortal2&quot;</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template cdkPortal #myCdkPortal<span class="token operator" data-v-c702d684>&gt;</span>
  我是自动获取的，我是自动获取的
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>

<span class="token operator" data-v-c702d684>&lt;</span>ng<span class="token operator" data-v-c702d684>-</span>template #tpl<span class="token operator" data-v-c702d684>&gt;</span>
  ng template portal
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>ng<span class="token operator" data-v-c702d684>-</span>template<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
  Component<span class="token punctuation" data-v-c702d684>,</span>
  OnInit<span class="token punctuation" data-v-c702d684>,</span>
  ViewChild<span class="token punctuation" data-v-c702d684>,</span>
  TemplateRef<span class="token punctuation" data-v-c702d684>,</span>
  ViewContainerRef
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
  CdkPortalOutlet<span class="token punctuation" data-v-c702d684>,</span>
  ComponentPortal<span class="token punctuation" data-v-c702d684>,</span>
  TemplatePortal<span class="token punctuation" data-v-c702d684>,</span>
  CdkPortal
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/portal&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> PortalCompComponent <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;./portal-comp/portal-comp.component&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;app-portal&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;./portal.component.html&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>&quot;./portal.component.scss&quot;</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>PortalComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  greeting<span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>;</span>
  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;portalComponentOutlet&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token punctuation" data-v-c702d684>{</span> read<span class="token operator" data-v-c702d684>:</span> CdkPortalOutlet <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
  portalComponentOutlet<span class="token operator" data-v-c702d684>:</span> CdkPortalOutlet<span class="token punctuation" data-v-c702d684>;</span>

  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;portalTemplateOutlet&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token punctuation" data-v-c702d684>{</span> read<span class="token operator" data-v-c702d684>:</span> CdkPortalOutlet <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
  portalTemplateOutlet<span class="token operator" data-v-c702d684>:</span> CdkPortalOutlet<span class="token punctuation" data-v-c702d684>;</span>

  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;myCdkPortal&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token punctuation" data-v-c702d684>{</span> read<span class="token operator" data-v-c702d684>:</span> CdkPortal <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
  myCdkPortal2<span class="token operator" data-v-c702d684>:</span> CdkPortal<span class="token punctuation" data-v-c702d684>;</span>

  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;tpl&quot;</span><span class="token punctuation" data-v-c702d684>)</span> tpl<span class="token operator" data-v-c702d684>:</span> TemplateRef<span class="token operator" data-v-c702d684>&lt;</span>any<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>

  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> view<span class="token operator" data-v-c702d684>:</span> ViewContainerRef</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>

  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>myCdkPortal2<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>let</span> componentPortal <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>PortalCompComponent<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>let</span> templatePortal <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>TemplatePortal</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>tpl<span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>view<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>// attach后不可变</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>portalComponentOutlet<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>componentPortal<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// attach后不可变</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>portalTemplateOutlet<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span>templatePortal<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>// 可以检测自动变更 推荐</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>greeting <span class="token operator" data-v-c702d684>=</span> componentPortal<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>setInterval</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
      <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>greeting <span class="token operator" data-v-c702d684>===</span> templatePortal<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>greeting <span class="token operator" data-v-c702d684>=</span> componentPortal<span class="token punctuation" data-v-c702d684>;</span>
      <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>greeting <span class="token operator" data-v-c702d684>=</span> templatePortal<span class="token punctuation" data-v-c702d684>;</span>
      <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>1000</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684></div></div><h2 id="angular-cdk-overlay" data-v-c702d684><a href="#angular-cdk-overlay" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/overlay</h2> <p data-v-c702d684>cdk Overlay主要用来实现在界面上创建浮动面板，例如弹窗(Dialog)，下拉框(select)等等都可以通过cdk Overlay来实现。OverlayRef(Overlay service里面的create函数创建)就对应着Portals里面的PortalOutlet，Overlay里面我们需要放置的内容就对应着Portals里面的Portal。</p> <p data-v-c702d684>Overlay的使用也很简单，关键在两个地方：位置策略、滑动策略。一个处理overlay的显示位置，一个处理有滑动的时候overlay的动作。</p> <h3 id="位置策略-positionstrategy" data-v-c702d684><a href="#位置策略-positionstrategy" class="header-anchor" data-v-c702d684>#</a> 位置策略(PositionStrategy)</h3> <p data-v-c702d684>位置策略(PositionStrategy)：用来确定overlay在页面中的显示位置。overlay里面提供了OverlayPositionBuilder类来构建PositionStrategy。overlay也给我们提供了三种PositionStrategy：GlobalPositionStrategy、ConnectedPositionStrategy和FlexibleConnectedPositionStrategy。</p> <h4 id="globalpositionstrategy" data-v-c702d684><a href="#globalpositionstrategy" class="header-anchor" data-v-c702d684>#</a> GlobalPositionStrategy</h4> <p data-v-c702d684>当overlay的PositionStrategy设置成GlobalPositionStrategy的时候，overlay的位置是相对整个窗口而言的。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>GlobalPositionStrategy</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>PositionStrategy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay距离上边
     */</span>
    <span class="token function" data-v-c702d684>top</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay距离左边
     */</span>
    <span class="token function" data-v-c702d684>left</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay距离下边
     */</span>
    <span class="token function" data-v-c702d684>bottom</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay距离右边
     */</span>
    <span class="token function" data-v-c702d684>right</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay宽度
     */</span>
    <span class="token function" data-v-c702d684>width</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay 高度
     */</span>
    <span class="token function" data-v-c702d684>height</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 水平居中
     */</span>
    <span class="token function" data-v-c702d684>centerHorizontally</span><span class="token punctuation" data-v-c702d684>(</span>offset<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 垂直居中
     */</span>
    <span class="token function" data-v-c702d684>centerVertically</span><span class="token punctuation" data-v-c702d684>(</span>offset<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token builtin" data-v-c702d684>string</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684></div></div><h4 id="connectedpositionstrategy" data-v-c702d684><a href="#connectedpositionstrategy" class="header-anchor" data-v-c702d684>#</a> ConnectedPositionStrategy</h4> <p data-v-c702d684>当overlay的位置需要依赖于另外一个视图的位置的时候采用该ConnectedPositionStrategy来确定overlay的位置。因为ConnectedPositionStrategy完全可以用FlexibleConnectedPositionStrategy来代替。所有我们直接看FlexibleConnectedPositionStrategy。</p> <h4 id="flexibleconnectedpositionstrategy" data-v-c702d684><a href="#flexibleconnectedpositionstrategy" class="header-anchor" data-v-c702d684>#</a> FlexibleConnectedPositionStrategy</h4> <p data-v-c702d684>overlay的位置依赖于某个视图的位置。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>GlobalPositionStrategy</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>PositionStrategy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 当origin视图位置改变之后，可以调用该函数来重写设置overlay的位置
     */</span>
    <span class="token function" data-v-c702d684>reapplyLastPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * Sets the list of Scrollable containers that host the origin element so that
     * on reposition we can evaluate if it or the overlay has been clipped or outside view. Every
     * Scrollable must be an ancestor element of the strategy's origin element.
     * 看上面英文的意思是，当origin视图包含在CdkScrollable里面的时候，需要设置。我现在还没搞明白这个函数的使用，等后续看了scrolling 看下
     */</span>
    <span class="token function" data-v-c702d684>withScrollableContainers</span><span class="token punctuation" data-v-c702d684>(</span>scrollables<span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置overlay的位置 (我们要重点解释下为什么是数组，比如有这种情况，你本来想把overlay放在origin视图的下面的，有可能会有这种情况吧
     * 比如，放下面已经放不下了，在窗口外面去了，这个时候就会去取数组里面的第二个元素布局了)
     * ConnectedPosition其实也很好理解，origin视图的哪个点（originX，originY）和overlay（overlayX， overlayY）重合确定位置
     */</span>
    <span class="token function" data-v-c702d684>withPositions</span><span class="token punctuation" data-v-c702d684>(</span>positions<span class="token operator" data-v-c702d684>:</span> ConnectedPosition<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置overlay相对窗口的margin。确定位置判断的时候会用到
     */</span>
    <span class="token function" data-v-c702d684>withViewportMargin</span><span class="token punctuation" data-v-c702d684>(</span>margin<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置是否限制在窗体内，设置为true的时候withScrollableContainers里面的数组就有效果了
     */</span>
    <span class="token function" data-v-c702d684>withFlexibleDimensions</span><span class="token punctuation" data-v-c702d684>(</span>flexibleDimensions<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** Sets whether the overlay can grow after the initial open via flexible width/height. */</span>
    <span class="token function" data-v-c702d684>withGrowAfterOpen</span><span class="token punctuation" data-v-c702d684>(</span>growAfterOpen<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** Sets whether the overlay can be pushed on-screen if none of the provided positions fit. */</span>
    <span class="token function" data-v-c702d684>withPush</span><span class="token punctuation" data-v-c702d684>(</span>canPush<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * ScrollStrategy设置RepositionScrollStrategy的时候，
     * 如果是true，overlay会一直跟着origin视图。false的时候，overlay滑倒窗口边缘的时候就不会动了
     */</span>
    <span class="token function" data-v-c702d684>withLockedPosition</span><span class="token punctuation" data-v-c702d684>(</span>isLocked<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置origin视图(overlay依赖的视图)
     */</span>
    <span class="token function" data-v-c702d684>setOrigin</span><span class="token punctuation" data-v-c702d684>(</span>origin<span class="token operator" data-v-c702d684>:</span> ElementRef <span class="token operator" data-v-c702d684>|</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 默认x的偏移量
     */</span>
    <span class="token function" data-v-c702d684>withDefaultOffsetX</span><span class="token punctuation" data-v-c702d684>(</span>offset<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 默认y偏移量
     */</span>
    <span class="token function" data-v-c702d684>withDefaultOffsetY</span><span class="token punctuation" data-v-c702d684>(</span>offset<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684></div></div><h3 id="滑动策略-scrollstrategy" data-v-c702d684><a href="#滑动策略-scrollstrategy" class="header-anchor" data-v-c702d684>#</a> 滑动策略(ScrollStrategy)</h3> <p data-v-c702d684>滑动策略(ScrollStrategy)：当PositionStrategy是ConnectedPositionStrategy或者FlexibleConnectedPositionStrategy的时候，如果overlay依赖的控件位置改变的时候overlay的位置应该怎么变化。</p> <p data-v-c702d684>overlay里面通过ScrollStrategyOptions来创建ScrollStrategy。同样overlay里面也给我们提供了四种ScrollStrategy：NoopScrollStrategy、CloseScrollStrategy、BlockScrollStrategy和RepositionScrollStrategy。</p> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>ScrollStrategy的使用一般配合PositionStrategy的ConnectedPositionStrategy、FlexibleConnectedPositionStrategy来使用。因为GlobalPositionStrategy的时候很少有scroll的情况。所以下面提到的origin指的是overlay依赖的那个视图。</p></div> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>ScrollStrategy</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>NoopScrollStrategy</td> <td style="text-align:left;" data-v-c702d684>origin滚动的时候，overlay位置不动</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>CloseScrollStrategy</td> <td style="text-align:left;" data-v-c702d684>origin位置变动的时候，overlay会自动关掉</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>BlockScrollStrategy</td> <td style="text-align:left;" data-v-c702d684>origin的滚动也消失了，直接把origin的滚动干没了</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>RepositionScrollStrategy</td> <td style="text-align:left;" data-v-c702d684>overlay会跟着origin位置的变动而变动</td></tr></tbody></table> <h3 id="overlay-service" data-v-c702d684><a href="#overlay-service" class="header-anchor" data-v-c702d684>#</a> Overlay(Service)</h3> <p data-v-c702d684>Overlay是一个Service。Overlay主要用来帮我们干三件事：创建OverlayRef(对应overlay视图，然后我们就可以把自定义的组件或者ng-tempalate里面的内容attach到OverlayRef上。这样就是overlay了)、创建PositionStrategy、创建ScrollStrategy。Overlay主要方法介绍：</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>Overlay</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * ScrollStrategyOptions - ScrollStrategy构造
     */</span>
    scrollStrategies<span class="token operator" data-v-c702d684>:</span> ScrollStrategyOptions<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 构造函数，这个我们不用管，我们只需要知道service怎么用就可以了
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
        scrollStrategies<span class="token operator" data-v-c702d684>:</span> ScrollStrategyOptions<span class="token punctuation" data-v-c702d684>,</span> _overlayContainer<span class="token operator" data-v-c702d684>:</span> OverlayContainer
        <span class="token punctuation" data-v-c702d684>,</span> _componentFactoryResolver<span class="token operator" data-v-c702d684>:</span> ComponentFactoryResolver
        <span class="token punctuation" data-v-c702d684>,</span> _positionBuilder<span class="token operator" data-v-c702d684>:</span> OverlayPositionBuilder
        <span class="token punctuation" data-v-c702d684>,</span> _keyboardDispatcher<span class="token operator" data-v-c702d684>:</span> OverlayKeyboardDispatcher
        <span class="token punctuation" data-v-c702d684>,</span> _injector<span class="token operator" data-v-c702d684>:</span> Injector<span class="token punctuation" data-v-c702d684>,</span> _ngZone<span class="token operator" data-v-c702d684>:</span> NgZone
        <span class="token punctuation" data-v-c702d684>,</span> _document<span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>,</span> _directionality<span class="token operator" data-v-c702d684>:</span> Directionality
        <span class="token punctuation" data-v-c702d684>,</span> _location<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> Location <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>undefined</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 创建OverlayRef
     */</span>
    <span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>config<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> OverlayConfig<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> OverlayRef<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * OverlayPositionBuilder - PositionStrategy构造器
     */</span>
    <span class="token function" data-v-c702d684>position</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> OverlayPositionBuilder<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>默认情况下overlay是直接添加在body的第一次层节点下面的，这部分的内容是通过OverlayContainer Service来实现的。有兴趣的可以看下OverlayContainer内部的实现。同时cdk Overlay里面也给提供了FullscreenOverlayContainer Service用来应对可能我们某些组件需要设置全屏的情况，比如有一个播放节点video。有全屏播放的功能。在全屏播放的时候你也想弹出overlay来的。这个时候就得添加providers: <code data-v-c702d684>[{provide: OverlayContainer, useClass: FullscreenOverlayContainer}]</code>。</p></div> <h3 id="overlay-directive" data-v-c702d684><a href="#overlay-directive" class="header-anchor" data-v-c702d684>#</a> Overlay(directive)</h3> <p data-v-c702d684>cdk Overlay里面给提供了两个指令CdkOverlayOrigin和CdkConnectedOverlay。一个对应origin(overlay定位依赖的视图),一个对应overlay。</p> <h4 id="cdkoverlayorigin" data-v-c702d684><a href="#cdkoverlayorigin" class="header-anchor" data-v-c702d684>#</a> CdkOverlayOrigin</h4> <p data-v-c702d684>添加了CdkOverlayOrigin指令的视图表示该视图是overlay的origin视图。CdkOverlayOrigin指令的使用非常简单没有@Input、@Output。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: <code data-v-c702d684>[cdk-overlay-origin] [overlay-origin] [cdkOverlayOrigin]</code></li> <li data-v-c702d684>Exported as: cdkOverlayOrigin</li></ul> <h4 id="cdkconnectedoverlay" data-v-c702d684><a href="#cdkconnectedoverlay" class="header-anchor" data-v-c702d684>#</a> CdkConnectedOverlay</h4> <p data-v-c702d684>添加了CdkConnectedOverlay指令的嵌入视图元素(一般都是加载ng-template上)表明该嵌入元素是一个overlay。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdk-connected-overlay] [connected-overlay] [cdkConnectedOverlay]</li> <li data-v-c702d684>Exported as: cdkConnectedOverlay</li></ul> <p data-v-c702d684>CdkConnectedOverlay指令提供的属性有:</p> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>backdropClass: string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayBackdropClass’)</td> <td style="text-align:left;" data-v-c702d684>背景层class</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>flexibleDimensions: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayFlexibleDimensions’)</td> <td style="text-align:left;" data-v-c702d684>overlay是否需要限制在窗口内</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>growAfterOpen: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayGrowAfterOpen’)</td> <td style="text-align:left;" data-v-c702d684>覆盖层是否可以在初始打开后增长</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>hasBackdrop: any</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayHasBackdrop’)</td> <td style="text-align:left;" data-v-c702d684>是否给overlay设置背景层 RepositionScrollStrategy的时候overlay是否一致跟着origin走，就算origin滑出到屏幕</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>height: number</td> <td style="text-align:left;" data-v-c702d684>string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayHeight’)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>lockPosition: any</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayLockPosition’)</td> <td style="text-align:left;" data-v-c702d684></td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>minHeight: number</td> <td style="text-align:left;" data-v-c702d684>string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayMinHeight’)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>minWidth: number</td> <td style="text-align:left;" data-v-c702d684>string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayMinWidth’)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>offsetX: number</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayOffsetX’)</td> <td style="text-align:left;" data-v-c702d684>overlay x偏移</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>offsetY: number</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayOffsetY’)</td> <td style="text-align:left;" data-v-c702d684>overlay y偏移</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>open: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayOpen’)</td> <td style="text-align:left;" data-v-c702d684>overlay显示隐藏</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>origin: CdkOverlayOrigin</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayOrigin’)</td> <td style="text-align:left;" data-v-c702d684>设置overlay的origin(依赖的视图)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>panelClass: string</td> <td style="text-align:left;" data-v-c702d684>string[]</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayPanelClass’)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>positions: ConnectedPosition[]</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayPositions’)</td> <td style="text-align:left;" data-v-c702d684>overlay位置设定</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>push: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayPush’)</td> <td style="text-align:left;" data-v-c702d684>如果我们给overlay提供的位置都不适合的时候，是否可以重叠显示</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>scrollStrategy: ScrollStrategy</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayScrollStrategy’)</td> <td style="text-align:left;" data-v-c702d684>ScrollStrategy</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>viewportMargin: number</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayViewportMargin’)</td> <td style="text-align:left;" data-v-c702d684>overlay窗口margin</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>width: number</td> <td style="text-align:left;" data-v-c702d684>string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkConnectedOverlayWidth’)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>attach: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>overlay attach的时候回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>backdropClick: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>点击了overlay背景层的回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>detach: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()	overlay detach的时候调用</td> <td style="text-align:left;" data-v-c702d684></td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>overlayKeydown: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>overlay显示的时候有键盘按键按下</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>positionChange: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>overlay位置改变的时候的回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>dir: Direction</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>overlay里面的布局方向</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>overlayRef: OverlayRef</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684>overlay对应的OverlayRef(对overlay的一个封装，类似ElementRef)</td></tr></tbody></table> <h3 id="overlay使用" data-v-c702d684><a href="#overlay使用" class="header-anchor" data-v-c702d684>#</a> Overlay使用</h3> <ol data-v-c702d684><li data-v-c702d684>使用之前要加上Overlay库里面的css同时导入OverlayModule.</li></ol> <div class="language-less line-numbers-mode" data-v-c702d684><pre class="language-less" data-v-c702d684><code data-v-c702d684><span class="token variable" data-v-c702d684>@import</span> <span class="token string" data-v-c702d684>'~@angular/cdk/overlay-prebuilt.css'</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684></div></div><ol start="2" data-v-c702d684><li data-v-c702d684>导入OverlayModule</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>NgModule<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>OverlayModule<span class="token punctuation" data-v-c702d684>,</span> OverlayContainer<span class="token punctuation" data-v-c702d684>,</span> FullscreenOverlayContainer<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/overlay&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>NgModule</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    imports<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>
        OverlayModule<span class="token punctuation" data-v-c702d684>,</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayModule</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684></div></div><ol start="3" data-v-c702d684><li data-v-c702d684>在实例之前我们先自定义一个非常简单的动态组件，后面的实例我们都会用到这个组件，注意哦这个动态组件除了在declarations里面需要申明，在entryComponents里面也需要申明。</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-overlay-panel'</span><span class="token punctuation" data-v-c702d684>,</span>
  template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
    &lt;p class=&quot;wu-overlay-pane&quot;&gt;Overlay展示&lt;/p&gt;
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
  styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
    .wu-overlay-pane {
      margin: 0;
      padding: 10px;
      border: 1px solid black;
      background-color: skyblue;
    }
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>OverlayPanelComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span> <span class="token punctuation" data-v-c702d684>}</span>
  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>

@<span class="token function" data-v-c702d684>NgModule</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    declarations<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>
        OverlayPanelComponent
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    entryComponents<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>
        OverlayPanelComponent
    <span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayModule</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684></div></div><h4 id="显示屏幕中间" data-v-c702d684><a href="#显示屏幕中间" class="header-anchor" data-v-c702d684>#</a> 显示屏幕中间</h4> <p data-v-c702d684>这里主要是GlobalPositionStrategy的使用，以及hasBackdrop的使用。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Overlay<span class="token punctuation" data-v-c702d684>,</span> OverlayConfig<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ComponentPortal<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-overlay'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 全局显示 页面中心显示 (点击的时候显示) --&gt;
        &lt;button (click)=&quot;showOverlayGlobalPanelCenter()&quot;&gt;页面中心显示&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    preserveWhitespaces<span class="token operator" data-v-c702d684>:</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> overlay<span class="token operator" data-v-c702d684>:</span> Overlay
        <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>public</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * overlay 在整个屏幕的中间显示
     */</span>
    <span class="token function" data-v-c702d684>showOverlayGlobalPanelCenter</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// config: OverlayConfig overlay的配置，配置显示位置，和滑动策略</span>
        <span class="token keyword" data-v-c702d684>const</span> config <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>OverlayConfig</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        config<span class="token punctuation" data-v-c702d684>.</span>positionStrategy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>position</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>global</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token comment" data-v-c702d684>// 全局显示</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>centerHorizontally</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token comment" data-v-c702d684>// 水平居中</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>centerVertically</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 垂直居中</span>
        config<span class="token punctuation" data-v-c702d684>.</span>hasBackdrop <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>true</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 设置overlay后面有一层背景, 当然你也可以设置backdropClass 来设置这层背景的class</span>
        <span class="token keyword" data-v-c702d684>const</span> overlayRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>config<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// OverlayRef, overlay层</span>
        overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>backdropClick</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token comment" data-v-c702d684>// 点击了backdrop背景</span>
            overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// OverlayPanelComponent是动态组件</span>
        <span class="token comment" data-v-c702d684>// 创建一个ComponentPortal，attach到OverlayRef，这个时候我们这个overlay层就显示出来了。</span>
        overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewContainerRef<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 监听overlayRef上的键盘按键事件</span>
        overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>keydownEvents</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> KeyboardEvent</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>overlayRef<span class="token punctuation" data-v-c702d684>.</span>_keydownEventSubscriptions <span class="token operator" data-v-c702d684>+</span> <span class="token string" data-v-c702d684>' times'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
            console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684></div></div><h4 id="自己控制位置" data-v-c702d684><a href="#自己控制位置" class="header-anchor" data-v-c702d684>#</a> 自己控制位置</h4> <p data-v-c702d684>这里主要是GlobalPositionStrategy的使用，GlobalPositionStrategy自定义位置。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> Inject<span class="token punctuation" data-v-c702d684>,</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Overlay<span class="token punctuation" data-v-c702d684>,</span> OverlayConfig<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ComponentPortal<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token constant" data-v-c702d684>DOCUMENT</span><span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/common'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-overlay'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 全局显示 页面中显示位置自己控制 --&gt;
        &lt;button (click)=&quot;showOverlayGlobalPanelPosition()&quot;&gt;页面中显示，自己控制位置&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    preserveWhitespaces<span class="token operator" data-v-c702d684>:</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    globalOverlayPosition <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> overlay<span class="token operator" data-v-c702d684>:</span> Overlay
        <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>public</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef
        <span class="token punctuation" data-v-c702d684>,</span> @<span class="token function" data-v-c702d684>Inject</span><span class="token punctuation" data-v-c702d684>(</span><span class="token constant" data-v-c702d684>DOCUMENT</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token keyword" data-v-c702d684>public</span> _document<span class="token operator" data-v-c702d684>:</span> any</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay 在整个屏幕位置，自己控制位置
     */</span>
    <span class="token function" data-v-c702d684>showOverlayGlobalPanelPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>const</span> config <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>OverlayConfig</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        config<span class="token punctuation" data-v-c702d684>.</span>positionStrategy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>position</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>global</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>left</span><span class="token punctuation" data-v-c702d684>(</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token interpolation" data-v-c702d684><span class="token interpolation-punctuation punctuation" data-v-c702d684>${</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-c702d684>}</span></span><span class="token string" data-v-c702d684>px</span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token comment" data-v-c702d684>// 自己控制位置</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>top</span><span class="token punctuation" data-v-c702d684>(</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token interpolation" data-v-c702d684><span class="token interpolation-punctuation punctuation" data-v-c702d684>${</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-c702d684>}</span></span><span class="token string" data-v-c702d684>px</span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>globalOverlayPosition <span class="token operator" data-v-c702d684>+=</span> <span class="token number" data-v-c702d684>30</span><span class="token punctuation" data-v-c702d684>;</span>
        config<span class="token punctuation" data-v-c702d684>.</span>hasBackdrop <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>true</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>const</span> overlayRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>config<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>backdropClick</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 点击背景关掉弹窗</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        overlayRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewContainerRef<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684></div></div><h4 id="显示ng-template内容" data-v-c702d684><a href="#显示ng-template内容" class="header-anchor" data-v-c702d684>#</a> 显示ng-template内容</h4> <p data-v-c702d684>下面演示如何在overlay上显示ng-template里面的内容。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Overlay<span class="token punctuation" data-v-c702d684>,</span> OverlayConfig<span class="token punctuation" data-v-c702d684>,</span> OverlayRef<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>TemplatePortalDirective<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-overlay'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 鼠标移入的时候显示 ng-template对应的内容，移出的时候不显示 --&gt;
        &lt;button style=&quot;margin-left: 10px&quot; (mouseenter)=&quot;showOverlayPanelTemplate()&quot;
                (mouseleave)=&quot;dismissOverlayPanelTemplate()&quot;&gt;
            显示 ng-template 内容
        &lt;/button&gt;
        &lt;!-- ng-template overlay 将要显示的内容 --&gt;
        &lt;ng-template cdk-portal #overlayGlobalTemplate=&quot;cdkPortal&quot;&gt;
            &lt;p class=&quot;template-overlay-pane&quot;&gt; ng-temtortelliniTemplateplate显示 &lt;/p&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .template-overlay-pane {
            padding: 10px;
            border: 1px solid black;
            background-color: skyblue;
        }</span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    preserveWhitespaces<span class="token operator" data-v-c702d684>:</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    globalOverlayPosition <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _overlayTemplateRef<span class="token operator" data-v-c702d684>:</span> OverlayRef<span class="token punctuation" data-v-c702d684>;</span>

    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'overlayGlobalTemplate'</span><span class="token punctuation" data-v-c702d684>)</span> templateGlobalPortals<span class="token operator" data-v-c702d684>:</span> TemplatePortalDirective<span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> overlay<span class="token operator" data-v-c702d684>:</span> Overlay</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * 显示 ng-template 的内容
     */</span>
    <span class="token function" data-v-c702d684>showOverlayPanelTemplate</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>const</span> config <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>OverlayConfig</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        config<span class="token punctuation" data-v-c702d684>.</span>positionStrategy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>position</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>global</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>centerHorizontally</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>top</span><span class="token punctuation" data-v-c702d684>(</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token interpolation" data-v-c702d684><span class="token interpolation-punctuation punctuation" data-v-c702d684>${</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-c702d684>}</span></span><span class="token string" data-v-c702d684>px</span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>globalOverlayPosition <span class="token operator" data-v-c702d684>+=</span> <span class="token number" data-v-c702d684>30</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayTemplateRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>config<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayTemplateRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>templateGlobalPortals<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * 移除 ng-template 内容
     */</span>
    <span class="token function" data-v-c702d684>dismissOverlayPanelTemplate</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayTemplateRef <span class="token operator" data-v-c702d684>&amp;&amp;</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayTemplateRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>hasAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayTemplateRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684></div></div><h4 id="依赖于某个视图显示" data-v-c702d684><a href="#依赖于某个视图显示" class="header-anchor" data-v-c702d684>#</a> 依赖于某个视图显示</h4> <p data-v-c702d684>主要是FlexibleConnectedPositionStrategy的使用，通过FlexibleConnectedPositionStrategy来控制显示的位置(ConnectedPosition)。同时也有ScrollStrategy的使用。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>,</span> ViewContainerRef<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Overlay<span class="token punctuation" data-v-c702d684>,</span> OverlayConfig<span class="token punctuation" data-v-c702d684>,</span> OverlayRef<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ComponentPortal<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/portal'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-overlay'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 依附某个组件或者template显示,鼠标移入的时候显示，移出来的时候不显示 --&gt;
        &lt;button style=&quot;margin-left: 10px&quot; #connectComponentOrigin
                (mouseenter)=&quot;showOverlayPanelConnectComponent()&quot;
                (mouseleave)=&quot;dismissOverlayPanelConnectComponent()&quot;&gt;
            overlay connect 组件显示
        &lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    preserveWhitespaces<span class="token operator" data-v-c702d684>:</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    <span class="token keyword" data-v-c702d684>private</span> _overlayConnectRef<span class="token operator" data-v-c702d684>:</span> OverlayRef<span class="token punctuation" data-v-c702d684>;</span>

    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'connectComponentOrigin'</span><span class="token punctuation" data-v-c702d684>)</span> _overlayConnectComponentOrigin<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> overlay<span class="token operator" data-v-c702d684>:</span> Overlay
        <span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>public</span> viewContainerRef<span class="token operator" data-v-c702d684>:</span> ViewContainerRef</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * overlay connect origin 显示，依附某个组件显示
     */</span>
    <span class="token function" data-v-c702d684>showOverlayPanelConnectComponent</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>const</span> strategy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>position</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>flexibleConnectedTo</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectComponentOrigin<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withPositions</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>{</span>
                originX<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'center'</span><span class="token punctuation" data-v-c702d684>,</span>
                originY<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'bottom'</span><span class="token punctuation" data-v-c702d684>,</span>
                overlayX<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'center'</span><span class="token punctuation" data-v-c702d684>,</span>
                overlayY<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'top'</span><span class="token punctuation" data-v-c702d684>,</span>
                offsetX<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span>
                offsetY<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span>
            <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 这么理解 origin 组件(依附空组件) 的那个点(originX, originY) 和 overlay组件的点(overlayX, overlayY)</span>
        <span class="token comment" data-v-c702d684>// 重合，从而确定overlay组件显示的位置</span>
        strategy<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withLockedPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token boolean" data-v-c702d684>true</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>const</span> config <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>OverlayConfig</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>positionStrategy<span class="token operator" data-v-c702d684>:</span> strategy<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        config<span class="token punctuation" data-v-c702d684>.</span>scrollStrategy <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span>scrollStrategies<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>reposition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 更随滑动的策略</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>overlay<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>config<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>attach</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ComponentPortal</span><span class="token punctuation" data-v-c702d684>(</span>OverlayPanelComponent<span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewContainerRef<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token function" data-v-c702d684>dismissOverlayPanelConnectComponent</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectRef <span class="token operator" data-v-c702d684>&amp;&amp;</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>hasAttached</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_overlayConnectRef<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>dispose</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684></div></div><h4 id="指令使用" data-v-c702d684><a href="#指令使用" class="header-anchor" data-v-c702d684>#</a> 指令使用</h4> <p data-v-c702d684>下面演示cdk-overlay-origin和cdk-connected-overlay怎么配合起来使用，怎么把两个指令关联起来。</p> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Overlay<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-overlay'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;button cdk-overlay-origin #trigger=&quot;cdkOverlayOrigin&quot; (click)=&quot;isMenuOpen = !isMenuOpen&quot;&gt;
            指令实现
        &lt;/button&gt;
        &lt;ng-template cdk-connected-overlay
                     [cdkConnectedOverlayOrigin]=&quot;trigger&quot;
                     [cdkConnectedOverlayWidth]=&quot;500&quot;
                     cdkConnectedOverlayHasBackdrop
                     [cdkConnectedOverlayOpen]=&quot;isMenuOpen&quot;
                     (backdropClick)=&quot;isMenuOpen=false&quot;&gt;
            &lt;div class=&quot;menu-wrap&quot;&gt;
                我是通过指令实现的Overlay
            &lt;/div&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-overlay.component.less'</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    preserveWhitespaces<span class="token operator" data-v-c702d684>:</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkOverlayComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * overlay是否显示
     */</span>
    isMenuOpen <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>public</span> overlay<span class="token operator" data-v-c702d684>:</span> Overlay<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>   
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684></div></div><h2 id="angular-cdk-scrolling" data-v-c702d684><a href="#angular-cdk-scrolling" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/scrolling</h2> <p data-v-c702d684>scrolling 对滚动事件做出响应的工具包。</p> <p data-v-c702d684>想要在我们项目中使用cdk Scrolling功能，需要在我们模块里面 <code data-v-c702d684>import {ScrollDispatchModule} from ‘@angular/cdk/scrolling’;</code></p> <p data-v-c702d684>然而<code data-v-c702d684>ScrollDispatcher/CdkScrollable/ViewportRuler</code>来自<code data-v-c702d684>@angular/cdk/overlay</code>。</p> <h3 id="cdkscrollable-scrolldispatcher" data-v-c702d684><a href="#cdkscrollable-scrolldispatcher" class="header-anchor" data-v-c702d684>#</a> cdkScrollable/ScrollDispatcher</h3> <p data-v-c702d684>cdkScrollable指令单独使用的时候没有特别的效果，cdkScrollable指令一般用来配合ScrollDispatcher Service使用。任何添加了cdkScrollable指令的视图元素都会注册到ScrollDispatcher里面去。然后可以在ScrollDispatcher里面去监听元素的滑动事件。</p> <h4 id="scrolldispatcher常用方法介绍" data-v-c702d684><a href="#scrolldispatcher常用方法介绍" class="header-anchor" data-v-c702d684>#</a> ScrollDispatcher常用方法介绍</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ScrollDispatcher</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 订阅全局`scroll`和`resize`
     */</span>
    _globalSubscription<span class="token operator" data-v-c702d684>:</span> Subscription <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 注册到ScrollDispatcher里面的元素(添加了CdkScrollable指令的元素)
     */</span>
    scrollContainers<span class="token operator" data-v-c702d684>:</span> Map<span class="token operator" data-v-c702d684>&lt;</span>CdkScrollable<span class="token punctuation" data-v-c702d684>,</span> Subscription<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 注册CdkScrollable(我们不用管，我们在某个视图元素上添加CdkScrollable指令会自动注册的)
     */</span>
    <span class="token function" data-v-c702d684>register</span><span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 取消注册
     */</span>
    <span class="token function" data-v-c702d684>deregister</span><span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 可以去订阅任务一个注册CdkScrollable的scroll事件
     *
     * **Note:** 为了避免每次滚动都发送状态变化检测,内部采用的是NgZone.runOutsideAngular。所以如果你想每次都检测变化就采用NgZone.run的放
     * 有疑问可以去搜下NgZone的使用
     */</span>
    <span class="token function" data-v-c702d684>scrolled</span><span class="token punctuation" data-v-c702d684>(</span>auditTimeInMs<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>CdkScrollable <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>void</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听elementRef视图元素的祖先元素有滚动事件，当然了对应的祖先元素需要添加CdkScrollable指令
     * auditTimeInMs参数是为了防止事件发送过快，可以设置多长时间收一次事件
     */</span>
    <span class="token function" data-v-c702d684>ancestorScrolled</span><span class="token punctuation" data-v-c702d684>(</span>elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> auditTimeInMs<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>CdkScrollable <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>void</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     *  elementRef添加了CdkScrollable指令的祖先元素
     */</span>
    <span class="token function" data-v-c702d684>getAncestorScrollContainers</span><span class="token punctuation" data-v-c702d684>(</span>elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684></div></div><h4 id="cdkscrollable-scrolldispatcher使用" data-v-c702d684><a href="#cdkscrollable-scrolldispatcher使用" class="header-anchor" data-v-c702d684>#</a> cdkScrollable/ScrollDispatcher使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkScrollable<span class="token punctuation" data-v-c702d684>,</span> ScrollDispatcher<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-scrolling'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 通过cdkScrollable指令配合ScrollDispatcher来监听节点的scrolling --&gt;
        &lt;div cdkScrollable class=&quot;scrolling-parent&quot;&gt;
            &lt;div #scrollingParent class=&quot;scrolling-item&quot;&gt;item 1&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 2&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 3&lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- 这个div没有添加cdkScrollable指令，所以这个div的scrolling事件ScrollDispatcher获取不到 --&gt;
        &lt;div class=&quot;scrolling-parent&quot;&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 1&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 2&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 3&lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .scrolling-parent {
            height: 100px;
            width: 200px;
            border: 1px solid black;
            padding: 8px;
            overflow-y: auto;
        }
        .scrolling-item {
            height: 50px;
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkScrollingComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span><span class="token punctuation" data-v-c702d684>,</span> AfterViewInit <span class="token punctuation" data-v-c702d684>{</span>

    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'scrollingParent'</span><span class="token punctuation" data-v-c702d684>)</span>
    childDiv<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> scrollDispatcher<span class="token operator" data-v-c702d684>:</span> ScrollDispatcher</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * 监听所有ScrollDispatcher里面注册的CdkScrollable的scroll事件
         */</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>scrolled</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>scrollable<span class="token operator" data-v-c702d684>:</span> CdkScrollable</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
                console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'发生scroll了，來源于：'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getElementRef</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
            <span class="token punctuation" data-v-c702d684>}</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * 第二个参数auditTimeInMs表示事件延时多少秒发生
         * 当祖先设置了cdkScrollable指令，在孩子里面也能抓到scrolling事件
         */</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>ancestorScrolled</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>childDiv<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>scrollable<span class="token operator" data-v-c702d684>:</span> CdkScrollable</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
                console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'祖先发生scroll了，來源于：'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>scrollable<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getElementRef</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
            <span class="token punctuation" data-v-c702d684>}</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 获取ScrollDispatcher里面所有注册了scrolling的组件信息</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span>scrollContainers<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684></div></div><h3 id="viewportruler" data-v-c702d684><a href="#viewportruler" class="header-anchor" data-v-c702d684>#</a> ViewportRuler</h3> <p data-v-c702d684>ViewportRuler也是cdk Scrolling里面提供的一个Service。用来测量浏览器的视图窗口信息。</p> <h4 id="viewportruler常用方法" data-v-c702d684><a href="#viewportruler常用方法" class="header-anchor" data-v-c702d684>#</a> ViewportRuler常用方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ViewportRuler</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 获取浏览器窗口的宽度和高度 
     */</span>
    <span class="token function" data-v-c702d684>getViewportSize</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Readonly<span class="token operator" data-v-c702d684>&lt;</span><span class="token punctuation" data-v-c702d684>{</span>
        width<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>;</span>
        height<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 获取浏览器窗口的rect信息(left、top、right、bottom) 
     */</span>
    <span class="token function" data-v-c702d684>getViewportRect</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ClientRect<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 获取浏览器窗口的滑动位置(top、left) 
     */</span>
    <span class="token function" data-v-c702d684>getViewportScrollPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> ViewportScrollPosition<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听浏览器窗口大小变化
     */</span>
    <span class="token function" data-v-c702d684>change</span><span class="token punctuation" data-v-c702d684>(</span>throttleTime<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>Event<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684></div></div><h4 id="viewportruler使用实例" data-v-c702d684><a href="#viewportruler使用实例" class="header-anchor" data-v-c702d684>#</a> ViewportRuler使用实例</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ViewportRuler<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-scrolling'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkScrollingComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> viewPortRuler<span class="token operator" data-v-c702d684>:</span> ViewportRuler</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * ViewportRuler 用来监听窗口的大小
         */</span>
        <span class="token comment" data-v-c702d684>// { width, height }</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPortRuler<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportSize</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// { bottom, height, left, right, top, width }</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPortRuler<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportRect</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// { top, left }</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPortRuler<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportScrollPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// native resize event object</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPortRuler<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>change</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>resizeEvent</span> <span class="token operator" data-v-c702d684>=&gt;</span> console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>resizeEvent<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684></div></div><h3 id="示例汇总" data-v-c702d684><a href="#示例汇总" class="header-anchor" data-v-c702d684>#</a> 示例汇总</h3> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token comment" data-v-c702d684>// ScrollDispatcher 滚动调度器</span>
  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scrollAble&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token punctuation" data-v-c702d684>{</span> read<span class="token operator" data-v-c702d684>:</span> CdkScrollable <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
  scrollAble<span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>;</span>
  @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scrollAble2&quot;</span><span class="token punctuation" data-v-c702d684>)</span> scrollable2<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
    <span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> scrollDispatcher<span class="token operator" data-v-c702d684>:</span> ScrollDispatcher<span class="token punctuation" data-v-c702d684>,</span>
    <span class="token keyword" data-v-c702d684>public</span> ele<span class="token operator" data-v-c702d684>:</span> ElementRef</span>
  <span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
  <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 获取所有cdkScrollable</span>
    <span class="token keyword" data-v-c702d684>const</span> scrollContainers <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span>scrollContainers<span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scrollContainers&quot;</span><span class="token punctuation" data-v-c702d684>,</span> scrollContainers<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 注销一个cdkScrollable</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>deregister</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollAble<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 注册一个cdkScrollable</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>register</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollAble<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 获取上级滚动容器</span>
    <span class="token keyword" data-v-c702d684>let</span> elementRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollAble<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getElementRef</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>let</span> ancestorScrollContainers <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getAncestorScrollContainers</span><span class="token punctuation" data-v-c702d684>(</span>
      elementRef
    <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>let</span> ancestorScrollContainers2 <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getAncestorScrollContainers</span><span class="token punctuation" data-v-c702d684>(</span>
      <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollable2
    <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;ancestorScrollContainers&quot;</span><span class="token punctuation" data-v-c702d684>,</span> ancestorScrollContainers<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;ancestorScrollContainers2&quot;</span><span class="token punctuation" data-v-c702d684>,</span> ancestorScrollContainers2<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 滚动监听</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollDispatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>scrolled</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>res</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
      console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>res<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// CdkScrollable 可滚动指令,用于注册可滚动元素</span>
@<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scrollAble&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token punctuation" data-v-c702d684>{</span> read<span class="token operator" data-v-c702d684>:</span> CdkScrollable <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
scrollAble<span class="token operator" data-v-c702d684>:</span> CdkScrollable<span class="token punctuation" data-v-c702d684>;</span>
<span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> scrollDispatcher<span class="token operator" data-v-c702d684>:</span> ScrollDispatcher</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
<span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
<span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 元素是否滚动了</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollAble<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>elementScrolled</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>res</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
      console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scroll able scrolling&quot;</span><span class="token punctuation" data-v-c702d684>,</span> res<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 获取scroll able 的 ElementRef</span>
    <span class="token keyword" data-v-c702d684>let</span> scrollable1ElementRef <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>scrollAble<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getElementRef</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;scroll able element ref&quot;</span><span class="token punctuation" data-v-c702d684>,</span> scrollable1ElementRef<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// ViewportRuler 视口</span>
<span class="token comment" data-v-c702d684>//import { ViewportRuler} from '@angular/material/core/overlay/position/viewport-ruler'</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ViewportRuler<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token comment" data-v-c702d684>// 注入视口尺寸服务</span>
<span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> viewPort<span class="token operator" data-v-c702d684>:</span> ViewportRuler</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
<span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 监控视口变化</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPort<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>change</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>res</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
      <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewPortInfo</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewPortInfo</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// 获取视口信息</span>
<span class="token function" data-v-c702d684>getViewPortInfo</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>let</span> viewRect <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPort<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportRect</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;view rect&quot;</span><span class="token punctuation" data-v-c702d684>,</span> viewRect<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// { width, height }</span>
    <span class="token keyword" data-v-c702d684>let</span> viewPortScrollPosition <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPort<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportScrollPosition</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;viewPortScrollPosition&quot;</span><span class="token punctuation" data-v-c702d684>,</span> viewPortScrollPosition<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>  <span class="token comment" data-v-c702d684>// { top, left }</span>
    <span class="token keyword" data-v-c702d684>let</span> viewPortSize <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPort<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>getViewportSize</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;viewPortSize&quot;</span><span class="token punctuation" data-v-c702d684>,</span> viewPortSize<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>  
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>viewPortRuler<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>change</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>resizeEvent</span> <span class="token operator" data-v-c702d684>=&gt;</span> console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>resizeEvent<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>  <span class="token comment" data-v-c702d684>// native resize event object</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684></div></div><h3 id="cdkvirtualscrollviewport" data-v-c702d684><a href="#cdkvirtualscrollviewport" class="header-anchor" data-v-c702d684>#</a> CdkVirtualScrollViewport</h3> <p data-v-c702d684>angular cdk 里面给提供了一个scrolling的组件CdkVirtualScrollViewport - cdk-virtual-scroll-viewport。CdkVirtualScrollViewport组件在list展示的时候非常有用，比如有我们list里面的item有1000项的时候。CdkVirtualScrollViewport 并不会直接给我们加载出1000项。只会加载部分项。一边滑动一边加载。如果有做过android的话，应该会知道ListView里面的回收机制。CdkVirtualScrollViewport组件做的也是类似的事情。</p> <h4 id="cdkvirtualscrollviewport主要方法" data-v-c702d684><a href="#cdkvirtualscrollviewport主要方法" class="header-anchor" data-v-c702d684>#</a> CdkVirtualScrollViewport主要方法:</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkVirtualScrollViewport</span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>CdkScrollable</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span><span class="token punctuation" data-v-c702d684>,</span> OnDestroy <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * CdkVirtualScrollViewport组件里面每个item的大小(通过orientation来知道是高度还宽度)
     */</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
    <span class="token keyword" data-v-c702d684>get</span> <span class="token function" data-v-c702d684>itemSize</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> number <span class="token punctuation" data-v-c702d684>{</span> <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_itemSize<span class="token punctuation" data-v-c702d684>;</span> <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * 多加载滚动范围之后多少像素的距离(最小值)，比如CdkVirtualScrollViewport的高度是200px,minBufferPx
     * 是100px;  item有好多的情况下不用全部绘制出来。绘制200像素的内容就好了。
     */</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
    <span class="token keyword" data-v-c702d684>get</span> <span class="token function" data-v-c702d684>minBufferPx</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> number <span class="token punctuation" data-v-c702d684>{</span> <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_minBufferPx<span class="token punctuation" data-v-c702d684>;</span> <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * 多加载滚动范围之后多少像素的距离(最大值)
     */</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
    <span class="token keyword" data-v-c702d684>get</span> <span class="token function" data-v-c702d684>maxBufferPx</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> number <span class="token punctuation" data-v-c702d684>{</span> <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_maxBufferPx<span class="token punctuation" data-v-c702d684>;</span> <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * viewport 方向
     */</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> orientation<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'horizontal'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'vertical'</span> <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>'vertical'</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 活动过程中，当前可见第一项的index
     */</span>
    @<span class="token function" data-v-c702d684>Output</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> scrolledIndexChange<span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>number<span class="token operator" data-v-c702d684>&gt;</span> <span class="token operator" data-v-c702d684>=</span>
        Observable<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>observer<span class="token operator" data-v-c702d684>:</span> Observer<span class="token operator" data-v-c702d684>&lt;</span>number<span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_scrollStrategy<span class="token punctuation" data-v-c702d684>.</span>scrolledIndexChange<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>index</span> <span class="token operator" data-v-c702d684>=&gt;</span>
                Promise<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>resolve</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>then</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>ngZone<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>run</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> observer<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>next</span><span class="token punctuation" data-v-c702d684>(</span>index<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置滑动位置
     */</span>
    <span class="token function" data-v-c702d684>scrollToOffset</span><span class="token punctuation" data-v-c702d684>(</span>offset<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>,</span> behavior<span class="token operator" data-v-c702d684>:</span> ScrollBehavior <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>'auto'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置滑动的index
     */</span>
    <span class="token function" data-v-c702d684>scrollToIndex</span><span class="token punctuation" data-v-c702d684>(</span>index<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>,</span>  behavior<span class="token operator" data-v-c702d684>:</span> ScrollBehavior <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>'auto'</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 测量可滑动的大小
     */</span>
    <span class="token function" data-v-c702d684>measureScrollOffset</span><span class="token punctuation" data-v-c702d684>(</span>from<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'top'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'left'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'right'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'bottom'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'start'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'end'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> number <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 测量所有item在一起的高度
     */</span>
    <span class="token function" data-v-c702d684>measureRenderedContentSize</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>上面主要方法介绍我把CdkVirtualScrollViewport组件和CdkFixedSizeVirtualScroll指令揉到一起去介绍了，因为它俩本来就是一起配合使用的。</p></div> <h4 id="cdkvirtualforof指令" data-v-c702d684><a href="#cdkvirtualforof指令" class="header-anchor" data-v-c702d684>#</a> CdkVirtualForOf指令</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684>Selector<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>cdkVirtualFor<span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>[</span>cdkVirtualForOf<span class="token punctuation" data-v-c702d684>]</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684></div></div><p data-v-c702d684>CdkVirtualScrollViewport适用于list的情况，list循环的时候得配合CdkVirtualForOf指令来使用，CdkVirtualForOf的用法和ngFor的用法是一样的。CdkVirtualForOf指令是专门为CdkVirtualScrollViewport组件提供的。 就不用ngFor指令了。切记，如果想咱们平常一样用ngFor指令去循环，很多CdkVirtualScrollViewport组件里面特有的功能就用不了了。</p> <h4 id="cdkvirtualforof的使用" data-v-c702d684><a href="#cdkvirtualforof的使用" class="header-anchor" data-v-c702d684>#</a> CdkVirtualForOf的使用</h4> <p data-v-c702d684>主要是知道CdkVirtualForOf里面有哪些参数是可用的</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkVirtualScrollViewport<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/scrolling&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-virtual-scroll'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- itemSize是每个item的高度 --&gt;
        &lt;cdk-virtual-scroll-viewport #scrollComponent [itemSize]=&quot;18 * 7&quot; class=&quot;example-viewport&quot;&gt;
            &lt;!-- cdkVirtualFor的可以用参数如下 --&gt;
            &lt;div *cdkVirtualFor=&quot;let item of items;
                       let index = index;
                       let count = count;
                       let first = first;
                       let last = last;
                       let even = even;
                       let odd = odd;&quot; [class.example-alternate]=&quot;odd&quot;&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Item: {{item}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Index: {{index}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Count: {{count}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;First: {{first ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Last: {{last ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Even: {{even ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Odd: {{odd ? 'Yes' : 'No'}}&lt;/div&gt;
            &lt;/div&gt;
        &lt;/cdk-virtual-scroll-viewport&gt;

        &lt;button style=&quot;margin-top: 8px; margin-bottom: 8px; background-color: #007bff; color: red&quot;
                (click)=&quot;onButtonClick()&quot;&gt;
            点击跳转到第10个item
        &lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .example-viewport {
            height: 200px;
            width: 200px;
            border: 1px solid black;
        }

        .example-item-detail {
            height: 18px;
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>VirtualScrollComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'scrollComponent'</span><span class="token punctuation" data-v-c702d684>)</span>
    <span class="token keyword" data-v-c702d684>private</span> _scrollViewport<span class="token operator" data-v-c702d684>:</span> CdkVirtualScrollViewport<span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     * CdkVirtualScrollViewport组件的数据源
     */</span>
    items <span class="token operator" data-v-c702d684>=</span> Array<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>from</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>length<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>100000</span><span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>map</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>_<span class="token punctuation" data-v-c702d684>,</span> i</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>Item #</span><span class="token interpolation" data-v-c702d684><span class="token interpolation-punctuation punctuation" data-v-c702d684>${</span>i<span class="token interpolation-punctuation punctuation" data-v-c702d684>}</span></span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     * 点击按钮的时候跳转到第10项
     */</span>
    <span class="token function" data-v-c702d684>onButtonClick</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_scrollViewport<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>scrollToIndex</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>10</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684></div></div><p data-v-c702d684>水平方向滚动的CdkVirtualScrollViewport组件，主要是知道orientation属性的使用</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ChangeDetectionStrategy<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-virtual-scroll-horizontal'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div class=&quot;cdk-virtual-scroll-data-source-example&quot;&gt;
            &lt;cdk-virtual-scroll-viewport orientation=&quot;horizontal&quot; itemSize=&quot;50&quot; class=&quot;example-viewport&quot;&gt;
                &lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;example-item&quot;&gt;{{item}}&lt;/div&gt;
            &lt;/cdk-virtual-scroll-viewport&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .cdk-virtual-scroll-data-source-example .example-viewport {
            height: 200px;
            width: 200px;
            border: 1px solid black;
        }
        .cdk-virtual-scroll-data-source-example .example-viewport .cdk-virtual-scroll-content-wrapper {
            display: flex;
            flex-direction: row;
        }
        .cdk-virtual-scroll-data-source-example .example-item {
            width: 50px;
            height: 100%;
            writing-mode: vertical-lr;
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    changeDetection<span class="token operator" data-v-c702d684>:</span> ChangeDetectionStrategy<span class="token punctuation" data-v-c702d684>.</span>OnPush<span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>VirtualScrollHorizontalComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * CdkVirtualScrollViewport组件里面的数据源
     */</span>
    items <span class="token operator" data-v-c702d684>=</span> Array<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>from</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>length<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>100000</span><span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>map</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>_<span class="token punctuation" data-v-c702d684>,</span> i</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>Item #</span><span class="token interpolation" data-v-c702d684><span class="token interpolation-punctuation punctuation" data-v-c702d684>${</span>i<span class="token interpolation-punctuation punctuation" data-v-c702d684>}</span></span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684></div></div><h2 id="angular-cdk-drag-drop" data-v-c702d684><a href="#angular-cdk-drag-drop" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/drag-drop</h2> <p data-v-c702d684>Angualr drag-drop里面的功能能让我们非常方便的处理页面上视图的拖拽(自由拖拽、列表排序拖拽、列表之间拖拽)问题。drag-drop使用之前也需要导入DragDropModule模块</p> <h3 id="cdkdrag" data-v-c702d684><a href="#cdkdrag" class="header-anchor" data-v-c702d684>#</a> CdkDrag</h3> <p data-v-c702d684>CdkDrag是一个指令。添加了CdkDrag指令的视图，表明该视图是可以拖拽的。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: <code data-v-c702d684>[cdkDrag]</code></li> <li data-v-c702d684>Exported as: cdkDrag</li></ul> <h4 id="cdkdrag属性" data-v-c702d684><a href="#cdkdrag属性" class="header-anchor" data-v-c702d684>#</a> CdkDrag属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>描述</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>data: T</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDragData’)</td> <td style="text-align:left;" data-v-c702d684>CdkDrag指令对应组件元素实例上的数据</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>disabled: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDragDisabled’)</td> <td style="text-align:left;" data-v-c702d684>是否禁用从此容器启动拖动序列(我试了下这个属性好像没效果)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>lockAxis: <code data-v-c702d684>‘x’ | ‘y’</code></td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDragLockAxis’)</td> <td style="text-align:left;" data-v-c702d684>拖曳方向</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>rootElementSelector: string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDragRootElement’)</td> <td style="text-align:left;" data-v-c702d684>传递可拖动元素替代的根元素(换句话说现在是拖动根元素了)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>dropped: <code data-v-c702d684>EventEmitter&lt;CdkDragDrop&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragDropped’)</td> <td style="text-align:left;" data-v-c702d684>当一个拖拽的元素松开的时候，并且是在一个container(容器)里面的时候会回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>ended: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragEnded’)</td> <td style="text-align:left;" data-v-c702d684>拖拽结束的时候调用</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>entered: <code data-v-c702d684>EventEmitter&lt;CdkDragEnter&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragEntered’)</td> <td style="text-align:left;" data-v-c702d684>拖拽的时候进入到一个新的容器的时候回调(两个list之间拖拽的时候用到CdkDropList)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>exited: <code data-v-c702d684>EventEmitter&lt;CdkDragExit&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragExited’)</td> <td style="text-align:left;" data-v-c702d684>拖拽的时候退出当前容器的时候回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>moved: <code data-v-c702d684>Observable&lt;CdkDragMove&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragMoved’)</td> <td style="text-align:left;" data-v-c702d684>在拖拽的过程中会回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>started: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDragStarted’)</td> <td style="text-align:left;" data-v-c702d684>在开始拖拽的时候调用</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>dropContainer: CdkDropListContainer</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684></td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>element: ElementRef</td> <td style="text-align:left;" data-v-c702d684>无</td> <td style="text-align:left;" data-v-c702d684></td></tr></tbody></table> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>上面表格中大量的提到了容器，我们可以把下文中提到的CdkDropList指令对应的视图元素当做是一个视图。</p></div> <h4 id="cdkdrag使用" data-v-c702d684><a href="#cdkdrag使用" class="header-anchor" data-v-c702d684>#</a> CdkDrag使用</h4> <p data-v-c702d684>很简单，就是我们在想要拖动的视图元素上添加CdkDrag指令。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-drop'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div class=&quot;dragParent&quot; style=&quot;width: 500px; height: 500px; background-color: #f1f1f1&quot;&gt;
            &lt;div class=&quot;example-box&quot; cdkDrag cdkDragRootElement=&quot;.dragParent&quot;&gt;
                可以到处拖拽
            &lt;/div&gt;
        &lt;/div&gt;

    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .example-box {
            width: 100px;
            height: 100px;
            border: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            cursor: move;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #fff;
            border-radius: 4px;
            position: relative;
            z-index: 1;
            transition: box-shadow 200ms cubic-bezier(0, 0, 0.2, 1);
            box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2),
            0 2px 2px 0 rgba(0, 0, 0, 0.14),
            0 1px 5px 0 rgba(0, 0, 0, 0.12);
        }

        .example-box:active {
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropDropComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112026966.gif" alt="" data-v-c702d684></p> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>上图中因为我设置CdkDrag指令的cdkDragRootElement属性为灰色的div，所以拖动的是整个灰色的div。</p></div> <h3 id="cdkdroplist" data-v-c702d684><a href="#cdkdroplist" class="header-anchor" data-v-c702d684>#</a> CdkDropList</h3> <p data-v-c702d684>可以拖拽item的一个集合，说白了就是把一些可拖元素始放到一起来。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: <code data-v-c702d684>[cdkDropList]</code> cdk-drop-list</li> <li data-v-c702d684>Exported as: cdkDropList</li></ul> <h4 id="cdkdroplist属性" data-v-c702d684><a href="#cdkdroplist属性" class="header-anchor" data-v-c702d684>#</a> CdkDropList属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性名字</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>描述</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>connectedTo: (CdkDropList	string)[]</td> <td style="text-align:left;" data-v-c702d684>CdkDropList</td> <td style="text-align:left;" data-v-c702d684></td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>data: T</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDropListData’)</td> <td style="text-align:left;" data-v-c702d684>拖拽容器上的数据(通常是一个数组或者list)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>disabled: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDropListDisabled’)</td> <td style="text-align:left;" data-v-c702d684>是否禁用从此容器启动拖动序列</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>enterPredicate: (drag: CdkDrag, drop: CdkDropList) =&gt; boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDropListEnterPredicate’)</td> <td style="text-align:left;" data-v-c702d684>指定哪些item是可以拖拽到当前容器</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>id: string</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>唯一的id,cdkDropListConnectedTo属性的时候可以使用</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>lockAxis: <code data-v-c702d684>‘x’ | ‘y’</code></td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDropListLockAxis’)</td> <td style="text-align:left;" data-v-c702d684>指定容器内所有的item的拖拽放下(垂直，水平)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>orientation: <code data-v-c702d684>‘horizontal’ | ‘vertical’</code></td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkDropListOrientation’)</td> <td style="text-align:left;" data-v-c702d684>容器里面item的摆放方向(垂直，水平)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>dropped: <code data-v-c702d684>EventEmitter&lt;CdkDragDrop&lt;T, any&gt;&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDropListDropped’)</td> <td style="text-align:left;" data-v-c702d684>拖拽结束的时候，当有item落到当前容器的时候回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>entered: <code data-v-c702d684>EventEmitter&lt;CdkDragEnter&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDropListEntered’)</td> <td style="text-align:left;" data-v-c702d684>当item进入当前容器的时候回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>exited:<code data-v-c702d684>EventEmitter&lt;CdkDragExit&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDropListExited’)</td> <td style="text-align:left;" data-v-c702d684>当item离开当前容器的时候回调</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>sorted: <code data-v-c702d684>EventEmitter&lt;CdkDragSortEvent&gt;</code></td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkDropListSorted’)</td> <td style="text-align:left;" data-v-c702d684>拖拽过程中交换item的时候回调</td></tr></tbody></table> <h4 id="cdkdroplist使用" data-v-c702d684><a href="#cdkdroplist使用" class="header-anchor" data-v-c702d684>#</a> CdkDropList使用</h4> <ol data-v-c702d684><li data-v-c702d684>水平方向的CdkDropList( cdkDropListOrientation属性的使用)</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkDragDrop<span class="token punctuation" data-v-c702d684>,</span> moveItemInArray<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-orientation-drag'</span><span class="token punctuation" data-v-c702d684>,</span>
  template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      &lt;div cdkDropList cdkDropListOrientation=&quot;horizontal&quot; class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
          &lt;div class=&quot;example-box&quot; *ngFor=&quot;let timePeriod of timePeriods&quot; cdkDrag&gt;{{timePeriod}}&lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
  styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      .example-list {
          width: 1000px;
          max-width: 100%;
          border: solid 1px #ccc;
          min-height: 60px;
          display: flex;
          flex-direction: row;
          background: white;
          border-radius: 4px;
          overflow: hidden;
      }
      .example-box {
          padding: 20px 10px;
          border-right: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
          flex-grow: 1;
          flex-basis: 0;
      }
      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }
      .cdk-drag-placeholder {
          opacity: 0;
      }
      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }
      .example-box:last-child {
          border: none;
      }
      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropOrientationDragComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    timePeriods <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token string" data-v-c702d684>'Bronze age'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Iron age'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Middle ages'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Early modern period'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Long nineteenth century'</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 移动item的时候，item之间的位置变换
     * @param event
     */</span>
    <span class="token function" data-v-c702d684>drop</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> CdkDragDrop<span class="token operator" data-v-c702d684>&lt;</span>string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token function" data-v-c702d684>moveItemInArray</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>timePeriods<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112056485.gif" alt="" data-v-c702d684></p> <ol start="2" data-v-c702d684><li data-v-c702d684>两个list之间数据交换
CdkDropList指令cdkDropListConnectedTo属性的使用。同时为方便大家的使用cdk drag-drop也给提供了transferArrayItem()、moveItemInArray()用于两个list之间交互item和单个list之间item位置变换。</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkDragDrop<span class="token punctuation" data-v-c702d684>,</span> moveItemInArray<span class="token punctuation" data-v-c702d684>,</span> transferArrayItem<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-transferring-item'</span><span class="token punctuation" data-v-c702d684>,</span>
  template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;左边list&lt;/h2&gt;
          &lt;div
                  cdkDropList
                  #todoList=&quot;cdkDropList&quot;
                  [cdkDropListData]=&quot;leftSource&quot;
                  [cdkDropListConnectedTo]=&quot;[doneList]&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
              &lt;div class=&quot;example-box&quot; *ngFor=&quot;let item of leftSource&quot; cdkDrag&gt;{{item}}&lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;右边list&lt;/h2&gt;
          &lt;div
                  cdkDropList
                  #doneList=&quot;cdkDropList&quot;
                  [cdkDropListData]=&quot;rightSource&quot;
                  [cdkDropListConnectedTo]=&quot;[todoList]&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
              &lt;div class=&quot;example-box&quot; *ngFor=&quot;let item of rightSource&quot; cdkDrag&gt;{{item}}&lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
  styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      .example-container {
          width: 400px;
          max-width: 100%;
          margin: 0 25px 25px 0;
          display: inline-block;
          vertical-align: top;
      }

      .example-list {
          border: solid 1px #ccc;
          min-height: 60px;
          background: white;
          border-radius: 4px;
          overflow: hidden;
          display: block;
      }

      .example-box {
          padding: 20px 10px;
          border-bottom: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
      }

      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }

      .cdk-drag-placeholder {
          opacity: 0;
      }

      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

      .example-box:last-child {
          border: none;
      }

      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropTransferringItemComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    <span class="token comment" data-v-c702d684>/**
     * 左边类别数据源
     */</span>
    leftSource <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token string" data-v-c702d684>'Get to work'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Pick up groceries'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Go home'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Fall asleep'</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     * 右边列表数据源
     */</span>
    rightSource <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token string" data-v-c702d684>'Get up'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Brush teeth'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Take a shower'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Check e-mail'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Walk dog'</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>/**
     * 拖动的时候，list交换item或者单个list里面item位置的变换
     * @param event
     */</span>
    <span class="token function" data-v-c702d684>drop</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> CdkDragDrop<span class="token operator" data-v-c702d684>&lt;</span>string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>previousContainer <span class="token operator" data-v-c702d684>===</span> event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token function" data-v-c702d684>moveItemInArray</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token function" data-v-c702d684>transferArrayItem</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>previousContainer<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684><span class="line-number" data-v-c702d684>96</span><br data-v-c702d684><span class="line-number" data-v-c702d684>97</span><br data-v-c702d684><span class="line-number" data-v-c702d684>98</span><br data-v-c702d684><span class="line-number" data-v-c702d684>99</span><br data-v-c702d684><span class="line-number" data-v-c702d684>100</span><br data-v-c702d684><span class="line-number" data-v-c702d684>101</span><br data-v-c702d684><span class="line-number" data-v-c702d684>102</span><br data-v-c702d684><span class="line-number" data-v-c702d684>103</span><br data-v-c702d684><span class="line-number" data-v-c702d684>104</span><br data-v-c702d684><span class="line-number" data-v-c702d684>105</span><br data-v-c702d684><span class="line-number" data-v-c702d684>106</span><br data-v-c702d684><span class="line-number" data-v-c702d684>107</span><br data-v-c702d684><span class="line-number" data-v-c702d684>108</span><br data-v-c702d684><span class="line-number" data-v-c702d684>109</span><br data-v-c702d684><span class="line-number" data-v-c702d684>110</span><br data-v-c702d684><span class="line-number" data-v-c702d684>111</span><br data-v-c702d684><span class="line-number" data-v-c702d684>112</span><br data-v-c702d684><span class="line-number" data-v-c702d684>113</span><br data-v-c702d684><span class="line-number" data-v-c702d684>114</span><br data-v-c702d684><span class="line-number" data-v-c702d684>115</span><br data-v-c702d684><span class="line-number" data-v-c702d684>116</span><br data-v-c702d684><span class="line-number" data-v-c702d684>117</span><br data-v-c702d684><span class="line-number" data-v-c702d684>118</span><br data-v-c702d684><span class="line-number" data-v-c702d684>119</span><br data-v-c702d684><span class="line-number" data-v-c702d684>120</span><br data-v-c702d684><span class="line-number" data-v-c702d684>121</span><br data-v-c702d684><span class="line-number" data-v-c702d684>122</span><br data-v-c702d684><span class="line-number" data-v-c702d684>123</span><br data-v-c702d684><span class="line-number" data-v-c702d684>124</span><br data-v-c702d684><span class="line-number" data-v-c702d684>125</span><br data-v-c702d684><span class="line-number" data-v-c702d684>126</span><br data-v-c702d684><span class="line-number" data-v-c702d684>127</span><br data-v-c702d684><span class="line-number" data-v-c702d684>128</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112152287.gif" alt="" data-v-c702d684></p> <ol start="3" data-v-c702d684><li data-v-c702d684>可以自己去控制哪些item可以拖进来
我们有一个这样的例子，左边的list里面不接受其他list的数据拖进来，右边的list只接受其他list里面的偶数。</li></ol> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkDrag<span class="token punctuation" data-v-c702d684>,</span> CdkDragDrop<span class="token punctuation" data-v-c702d684>,</span> moveItemInArray<span class="token punctuation" data-v-c702d684>,</span> transferArrayItem<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-controlling-with-item'</span><span class="token punctuation" data-v-c702d684>,</span>
  template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;不接受其他list的数据&lt;/h2&gt;
          &lt;div
                  id=&quot;all&quot;
                  cdkDropList
                  [cdkDropListData]=&quot;all&quot;
                  cdkDropListConnectedTo=&quot;even&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;
                  [cdkDropListEnterPredicate]=&quot;noReturnPredicate&quot;&gt;
              &lt;div
                      class=&quot;example-box&quot;
                      *ngFor=&quot;let number of all&quot;
                      [cdkDragData]=&quot;number&quot;
                      cdkDrag&gt;
                  {{number}}
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;只接受其他list里面的偶数&lt;/h2&gt;
          &lt;div
                  id=&quot;even&quot;
                  cdkDropList
                  [cdkDropListData]=&quot;even&quot;
                  cdkDropListConnectedTo=&quot;all&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;
                  [cdkDropListEnterPredicate]=&quot;evenPredicate&quot;&gt;
              &lt;div
                      class=&quot;example-box&quot;
                      *ngFor=&quot;let number of even&quot;
                      cdkDrag
                      [cdkDragData]=&quot;number&quot;&gt;{{number}}
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
  styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
      .example-container {
          width: 400px;
          max-width: 100%;
          margin: 0 25px 25px 0;
          display: inline-block;
          vertical-align: top;
      }

      .example-list {
          border: solid 1px #ccc;
          min-height: 60px;
          background: white;
          border-radius: 4px;
          overflow: hidden;
          display: block;
      }

      .example-box {
          padding: 20px 10px;
          border-bottom: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
      }

      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }

      .cdk-drag-placeholder {
          opacity: 0;
      }

      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

      .example-box:last-child {
          border: none;
      }

      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

  </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropControllingWithItemComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    all <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>2</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>3</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>4</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>5</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>6</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>7</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>8</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>9</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>
    even <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token number" data-v-c702d684>10</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>drop</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> CdkDragDrop<span class="token operator" data-v-c702d684>&lt;</span>string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>previousContainer <span class="token operator" data-v-c702d684>===</span> event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token function" data-v-c702d684>moveItemInArray</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token function" data-v-c702d684>transferArrayItem</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>previousContainer<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>container<span class="token punctuation" data-v-c702d684>.</span>data<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span>
                event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/** 只接受其他list里面的偶数 */</span>
    <span class="token function" data-v-c702d684>evenPredicate</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>item<span class="token operator" data-v-c702d684>:</span> CdkDrag<span class="token operator" data-v-c702d684>&lt;</span>number<span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> item<span class="token punctuation" data-v-c702d684>.</span>data <span class="token operator" data-v-c702d684>%</span> <span class="token number" data-v-c702d684>2</span> <span class="token operator" data-v-c702d684>===</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/** 不让其他list里面的数据移入到这个里面来 */</span>
    <span class="token function" data-v-c702d684>noReturnPredicate</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684><span class="line-number" data-v-c702d684>96</span><br data-v-c702d684><span class="line-number" data-v-c702d684>97</span><br data-v-c702d684><span class="line-number" data-v-c702d684>98</span><br data-v-c702d684><span class="line-number" data-v-c702d684>99</span><br data-v-c702d684><span class="line-number" data-v-c702d684>100</span><br data-v-c702d684><span class="line-number" data-v-c702d684>101</span><br data-v-c702d684><span class="line-number" data-v-c702d684>102</span><br data-v-c702d684><span class="line-number" data-v-c702d684>103</span><br data-v-c702d684><span class="line-number" data-v-c702d684>104</span><br data-v-c702d684><span class="line-number" data-v-c702d684>105</span><br data-v-c702d684><span class="line-number" data-v-c702d684>106</span><br data-v-c702d684><span class="line-number" data-v-c702d684>107</span><br data-v-c702d684><span class="line-number" data-v-c702d684>108</span><br data-v-c702d684><span class="line-number" data-v-c702d684>109</span><br data-v-c702d684><span class="line-number" data-v-c702d684>110</span><br data-v-c702d684><span class="line-number" data-v-c702d684>111</span><br data-v-c702d684><span class="line-number" data-v-c702d684>112</span><br data-v-c702d684><span class="line-number" data-v-c702d684>113</span><br data-v-c702d684><span class="line-number" data-v-c702d684>114</span><br data-v-c702d684><span class="line-number" data-v-c702d684>115</span><br data-v-c702d684><span class="line-number" data-v-c702d684>116</span><br data-v-c702d684><span class="line-number" data-v-c702d684>117</span><br data-v-c702d684><span class="line-number" data-v-c702d684>118</span><br data-v-c702d684><span class="line-number" data-v-c702d684>119</span><br data-v-c702d684><span class="line-number" data-v-c702d684>120</span><br data-v-c702d684><span class="line-number" data-v-c702d684>121</span><br data-v-c702d684><span class="line-number" data-v-c702d684>122</span><br data-v-c702d684><span class="line-number" data-v-c702d684>123</span><br data-v-c702d684><span class="line-number" data-v-c702d684>124</span><br data-v-c702d684><span class="line-number" data-v-c702d684>125</span><br data-v-c702d684><span class="line-number" data-v-c702d684>126</span><br data-v-c702d684><span class="line-number" data-v-c702d684>127</span><br data-v-c702d684><span class="line-number" data-v-c702d684>128</span><br data-v-c702d684><span class="line-number" data-v-c702d684>129</span><br data-v-c702d684><span class="line-number" data-v-c702d684>130</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112252530.gif" alt="" data-v-c702d684></p> <h3 id="cdkdroplistgroup" data-v-c702d684><a href="#cdkdroplistgroup" class="header-anchor" data-v-c702d684>#</a> CdkDropListGroup</h3> <p data-v-c702d684>CdkDropListGroup指令的范围比CdkDropList要大一级。CdkDropListGroup可以包含多个CdkDropList。而且当CdkDropListGroup包含多个CdkDropList的时候，这些CdkDropList直接是相互connect的(CdkDropList就不用去写cdkDropListConnectedTo属性了)。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdkDropListGroup]</li> <li data-v-c702d684>Exported as: cdkDropListGroup</li></ul> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>CdkDropListGroup使用场景：当我们在多个list之间的item需要相互拖动的时候派上用场。</p></div> <h3 id="cdkdraghandle" data-v-c702d684><a href="#cdkdraghandle" class="header-anchor" data-v-c702d684>#</a> CdkDragHandle</h3> <p data-v-c702d684>拖动CdkDrag实例的句柄，简单来说就是指定一个元素。当我们拖动这个元素的时候整个CdkDrag实例都会动。</p> <h4 id="cdkdraghandle的使用" data-v-c702d684><a href="#cdkdraghandle的使用" class="header-anchor" data-v-c702d684>#</a> CdkDragHandle的使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-handle-drag-area'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div class=&quot;example-box&quot; cdkDrag&gt;
            I can only be dragged using the handle
            &lt;div class=&quot;example-handle&quot; cdkDragHandle&gt;
                &lt;svg width=&quot;24px&quot; fill=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
                    &lt;path d=&quot;M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z&quot;&gt;

                    &lt;/path&gt;
                    &lt;path d=&quot;M0 0h24v24H0z&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;
                &lt;/svg&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .example-box {
            width: 200px;
            height: 200px;
            padding: 10px;
            box-sizing: border-box;
            border: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #fff;
            border-radius: 4px;
            position: relative;
            z-index: 1;
            transition: box-shadow 200ms cubic-bezier(0, 0, 0.2, 1);
            box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2),
            0 2px 2px 0 rgba(0, 0, 0, 0.14),
            0 1px 5px 0 rgba(0, 0, 0, 0.12);
        }
        .example-box:active {
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }
        .example-handle {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ccc;
            cursor: move;
            width: 24px;
            height: 24px;
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropHandleDragAreaComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112326258.gif" alt="" data-v-c702d684></p> <h3 id="cdkdragpreview" data-v-c702d684><a href="#cdkdragpreview" class="header-anchor" data-v-c702d684>#</a> CdkDragPreview</h3> <p data-v-c702d684>简单点就是drag拖动过程中拖动的item的展示形式。</p> <h4 id="cdkdragpreview的使用" data-v-c702d684><a href="#cdkdragpreview的使用" class="header-anchor" data-v-c702d684>#</a> CdkDragPreview的使用</h4> <p data-v-c702d684>比如一个这里的例子，展示影片名字列表，在拖动的时候展示影片对应的图片。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkDragDrop<span class="token punctuation" data-v-c702d684>,</span> moveItemInArray<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-customizing-drag-preview'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div cdkDropList class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
            &lt;div class=&quot;example-box&quot; *ngFor=&quot;let movie of movies&quot; cdkDrag&gt;
                {{movie.title}}
                &lt;img *cdkDragPreview [src]=&quot;movie.poster&quot; [alt]=&quot;movie.title&quot;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .example-list {
            width: 500px;
            max-width: 100%;
            border: solid 1px #ccc;
            min-height: 60px;
            display: block;
            background: white;
            border-radius: 4px;
            overflow: hidden;
        }

        .example-box {
            padding: 20px 10px;
            border-bottom: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            box-sizing: border-box;
            cursor: move;
            background: white;
            font-size: 14px;
        }

        .cdk-drag-preview {
            box-sizing: border-box;
            border-radius: 4px;
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }

        .cdk-drag-placeholder {
            opacity: 0;
        }

        .cdk-drag-animating {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-box:last-child {
            border: none;
        }

        .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropCustomizingDragPreviewComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    movies <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode I - The Phantom Menace'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/4/40/Star_Wars_Phantom_Menace_poster.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode II - Attack of the Clones'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/3/32/Star_Wars_-_Episode_II_Attack_of_the_Clones_%28movie_poster%29.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode III - Revenge of the Sith'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/9/93/Star_Wars_Episode_III_Revenge_of_the_Sith_poster.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode IV - A New Hope'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/8/87/StarWarsMoviePoster1977.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode V - The Empire Strikes Back'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/3/3c/SW_-_Empire_Strikes_Back.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode VI - Return of the Jedi'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/b/b2/ReturnOfTheJediPoster1983.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode VII - The Force Awakens'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/a/a2/Star_Wars_The_Force_Awakens_Theatrical_Poster.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            title<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'Episode VIII - The Last Jedi'</span><span class="token punctuation" data-v-c702d684>,</span>
            poster<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'https://upload.wikimedia.org/wikipedia/en/7/7f/Star_Wars_The_Last_Jedi.jpg'</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>drop</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> CdkDragDrop<span class="token operator" data-v-c702d684>&lt;</span><span class="token punctuation" data-v-c702d684>{</span> title<span class="token operator" data-v-c702d684>:</span> string<span class="token punctuation" data-v-c702d684>,</span> poster<span class="token operator" data-v-c702d684>:</span> string <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token function" data-v-c702d684>moveItemInArray</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>movies<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684><span class="line-number" data-v-c702d684>96</span><br data-v-c702d684><span class="line-number" data-v-c702d684>97</span><br data-v-c702d684><span class="line-number" data-v-c702d684>98</span><br data-v-c702d684><span class="line-number" data-v-c702d684>99</span><br data-v-c702d684><span class="line-number" data-v-c702d684>100</span><br data-v-c702d684><span class="line-number" data-v-c702d684>101</span><br data-v-c702d684><span class="line-number" data-v-c702d684>102</span><br data-v-c702d684><span class="line-number" data-v-c702d684>103</span><br data-v-c702d684><span class="line-number" data-v-c702d684>104</span><br data-v-c702d684><span class="line-number" data-v-c702d684>105</span><br data-v-c702d684><span class="line-number" data-v-c702d684>106</span><br data-v-c702d684><span class="line-number" data-v-c702d684>107</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112426225.gif" alt="" data-v-c702d684></p> <h3 id="cdkdragplaceholder" data-v-c702d684><a href="#cdkdragplaceholder" class="header-anchor" data-v-c702d684>#</a> CdkDragPlaceholder</h3> <p data-v-c702d684>简单来说就是drag过程中，drag item对应的container里面item的占位符。</p> <h4 id="cdkdragplaceholder使用" data-v-c702d684><a href="#cdkdragplaceholder使用" class="header-anchor" data-v-c702d684>#</a> CdkDragPlaceholder使用</h4> <p data-v-c702d684>如下的例子，拖动的时候，CdkDragPlaceholder对应加个灰色的背景</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkDragDrop<span class="token punctuation" data-v-c702d684>,</span> moveItemInArray<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/drag-drop&quot;</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-drag-drop-customizing-drag-place-holder'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div cdkDropList class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
            &lt;div class=&quot;example-box&quot; *ngFor=&quot;let movie of movies&quot; cdkDrag&gt;
                &lt;div class=&quot;example-custom-placeholder&quot; *cdkDragPlaceholder&gt;&lt;/div&gt;
                {{movie}}
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .example-list {
            width: 500px;
            max-width: 100%;
            border: solid 1px #ccc;
            min-height: 60px;
            display: block;
            background: white;
            border-radius: 4px;
            overflow: hidden;
        }

        .example-box {
            padding: 20px 10px;
            border-bottom: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            box-sizing: border-box;
            cursor: move;
            background: white;
            font-size: 14px;
        }

        .cdk-drag-preview {
            box-sizing: border-box;
            border-radius: 4px;
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }

        .cdk-drag-animating {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-box:last-child {
            border: none;
        }

        .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-custom-placeholder {
            background: #ccc;
            border: dotted 3px #999;
            min-height: 60px;
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>DragDropCustomizingDragPlaceHolderComponent</span> <span class="token punctuation" data-v-c702d684>{</span>

    movies <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token string" data-v-c702d684>'Episode I - The Phantom Menace'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode II - Attack of the Clones'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode III - Revenge of the Sith'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode IV - A New Hope'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode V - The Empire Strikes Back'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode VI - Return of the Jedi'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode VII - The Force Awakens'</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token string" data-v-c702d684>'Episode VIII - The Last Jedi'</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>drop</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> CdkDragDrop<span class="token operator" data-v-c702d684>&lt;</span>string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token function" data-v-c702d684>moveItemInArray</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>movies<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>previousIndex<span class="token punctuation" data-v-c702d684>,</span> event<span class="token punctuation" data-v-c702d684>.</span>currentIndex<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181218112454651.gif" alt="" data-v-c702d684></p> <h2 id="angular-cdk-observers" data-v-c702d684><a href="#angular-cdk-observers" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/observers</h2> <p data-v-c702d684>observers 监听dom变化,想使用Observers里面的功能需要先<code data-v-c702d684>import {ObserversModule} from '@angular/cdk/observers';</code>再<code data-v-c702d684>provider ObserversModule</code></p> <h3 id="contentobserver" data-v-c702d684><a href="#contentobserver" class="header-anchor" data-v-c702d684>#</a> ContentObserver</h3> <p data-v-c702d684>ContentObserver是cdk Observers模块里面提供的一个service。用来监听某个视图元素内容的变化。ContentObserver里面的方法也比较简单。ContentObserver里面的方法如下。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ContentObserver</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听视图元素内容的变化，参数--Element
     */</span>
    <span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> Element<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>MutationRecord<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听视图元素内容的变化，参数--ElementRef
     */</span>
    <span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token operator" data-v-c702d684>&lt;</span>Element<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>MutationRecord<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684></div></div><h4 id="contentobserver的使用" data-v-c702d684><a href="#contentobserver的使用" class="header-anchor" data-v-c702d684>#</a> ContentObserver的使用</h4> <p data-v-c702d684>针对ContentObserver Service的使用，我们举一个非常简单的例子。每秒去变化一下内容。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ContentObserver<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/observers'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-observers'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div #observerSource&gt;
            {{content}}
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkObserversComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'observerSource'</span><span class="token punctuation" data-v-c702d684>)</span>
    observerSource<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>
    content <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * ContentObserver service
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> observer<span class="token operator" data-v-c702d684>:</span> ContentObserver</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * 启动一个定时任务，去改变内容
         */</span>
        <span class="token function" data-v-c702d684>setInterval</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>content<span class="token operator" data-v-c702d684>++</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>3000</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// ContentObserver 监听视图元素内容的变化，只是简单的打印</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>observer<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>observerSource<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> MutationRecord<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684></div></div><h3 id="cdkobservecontent" data-v-c702d684><a href="#cdkobservecontent" class="header-anchor" data-v-c702d684>#</a> CdkObserveContent</h3> <p data-v-c702d684>CdkObserveContent是cdk Observers里面提供的指令。可以监听添加了CdkObserveContent指令视图元素的内容的变化。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdkObserveContent]</li> <li data-v-c702d684>Exported as: cdkObserveContent</li></ul> <h4 id="cdkobservecontent指令属性" data-v-c702d684><a href="#cdkobservecontent指令属性" class="header-anchor" data-v-c702d684>#</a> CdkObserveContent指令属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>debounce: number</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>有的时候视图元素内容的变化是很频繁的，用来设置多长时间监听变化的事件</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>disabled: any</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkObserveContentDisabled’)</td> <td style="text-align:left;" data-v-c702d684>动态设置是否监听变化事件</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>event: EventEmitter&lt;MutationRecord[]&gt;</td> <td style="text-align:left;" data-v-c702d684>@Output(‘cdkObserveContent’)</td> <td style="text-align:left;" data-v-c702d684>内容变化回调事件</td></tr></tbody></table> <h4 id="cdkobservecontent指令的使用" data-v-c702d684><a href="#cdkobservecontent指令的使用" class="header-anchor" data-v-c702d684>#</a> CdkObserveContent指令的使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-observers'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div cdkObserveContent (cdkObserveContent)=&quot;onContentChange($event)&quot;&gt;
            {{content}}
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkObserversComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    content <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token function" data-v-c702d684>setInterval</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>content<span class="token operator" data-v-c702d684>++</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>3000</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>onContentChange</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event<span class="token operator" data-v-c702d684>:</span> MutationRecord<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684></div></div><p data-v-c702d684>关于angular里面内容变化这块的内容，我倒是想到了另一个东西NgZone。用来应对在模板中咱们动态绑定了一个值。但是这个值频繁的在变化。如果不做其他的处理我们知道Angular会跟踪变化，并且把变化的内容实时的展示在页面上。这样肯定是会有性能的损耗的。这个时候NgZone就派上用场了。NgZone里面提供了两个函数：runOutsideAngular() 使你的上下文不会触发Angular跟踪变化、run()方法让Angular重新跟踪变化。</p> <h2 id="angular-cdk-layout" data-v-c702d684><a href="#angular-cdk-layout" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/layout</h2> <p data-v-c702d684>cdk Layout是cdk 提供的响应式布局工具，提供了实用程序来构建响应屏幕大小更改的响应UI，其服务可以轻松检测窗口大小并与媒体查询匹配。这使得你可以完全控制UI并适应不同的屏幕尺寸。layout使用之前也要<code data-v-c702d684>provider LayoutModule</code>:<code data-v-c702d684>import {LayoutModule} from '@angular/cdk/layout';</code>layout 响应式布局工具包含：</p> <ul data-v-c702d684><li data-v-c702d684>breakpoints 屏幕尺寸</li> <li data-v-c702d684>breakpointObserver 观察器</li> <li data-v-c702d684>mediaMatcher 媒体查询匹配</li></ul> <h3 id="breakpointobserver" data-v-c702d684><a href="#breakpointobserver" class="header-anchor" data-v-c702d684>#</a> BreakpointObserver</h3> <p data-v-c702d684>BreakpointObserver是cdk Layout里面提供的Service。用于评估媒体查询和对其变化作出反应的一个Service。</p> <h4 id="breakpointobserver属性方法" data-v-c702d684><a href="#breakpointobserver属性方法" class="header-anchor" data-v-c702d684>#</a> BreakpointObserver属性方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>BreakpointObserver</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 简单的一次性匹配，判断当前屏幕是否符合匹配条件
     */</span>
    <span class="token function" data-v-c702d684>isMatched</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>:</span> string <span class="token operator" data-v-c702d684>|</span> string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听设置的条件。在条件满足的时候，或者不满足的时候触发
     */</span>
    <span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span>value<span class="token operator" data-v-c702d684>:</span> string <span class="token operator" data-v-c702d684>|</span> string<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>BreakpointState<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684></div></div><h4 id="breakpointobserver使用" data-v-c702d684><a href="#breakpointobserver使用" class="header-anchor" data-v-c702d684>#</a> BreakpointObserver使用</h4> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>BreakpointObserver<span class="token punctuation" data-v-c702d684>,</span> Breakpoints<span class="token punctuation" data-v-c702d684>,</span> BreakpointState<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/layout'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-layout'</span><span class="token punctuation" data-v-c702d684>,</span>
    templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'./cdk-layout.component.html'</span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-layout.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkLayoutComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>public</span> breakpointObserver<span class="token operator" data-v-c702d684>:</span> BreakpointObserver<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// 简单的一次性匹配，可以使用isMatching方法。如果组件初始化时窗口至少为40rem高，则输出到控制台</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>breakpointObserver<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isMatched</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'(min-height: 40rem)'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'窗口至少为40rem高!'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'窗口没有40rem高!'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
        <span class="token comment" data-v-c702d684>// 注意哦，不会一直回调哦，只会在第一次满足或者不满足条件的时候回调。</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>breakpointObserver
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'(min-width: 500px)'</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span>state<span class="token operator" data-v-c702d684>:</span> BreakpointState<span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
                <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>state<span class="token punctuation" data-v-c702d684>.</span>matches<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
                    <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'窗口宽度大于或者等于500px!'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
                    <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'窗口不满足宽度大于或者等于500px!'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token punctuation" data-v-c702d684>}</span>
            <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token comment" data-v-c702d684>// 也可以使用Breakpoints对象，而不是使用手写的媒体查询，它为我们提供了常见断点的键。如果多个参数，当有一个条件满足或者不满足的时候就会触发</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>breakpointObserver
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>[</span>Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Small<span class="token punctuation" data-v-c702d684>,</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>HandsetPortrait<span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span>state<span class="token operator" data-v-c702d684>:</span> BreakpointState<span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
                <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span>state<span class="token punctuation" data-v-c702d684>.</span>matches<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
                    <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>
                        <span class="token string" data-v-c702d684>'Breakpoints.Small or Breakpoints.HandsetPortrait'</span>
                    <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
                <span class="token punctuation" data-v-c702d684>}</span>
            <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684></div></div><h3 id="mediamatcher" data-v-c702d684><a href="#mediamatcher" class="header-anchor" data-v-c702d684>#</a> MediaMatcher</h3> <p data-v-c702d684>MediaMatcher也是一个Service，用于媒体查询匹配。</p> <h4 id="mediamatcher属性方法" data-v-c702d684><a href="#mediamatcher属性方法" class="header-anchor" data-v-c702d684>#</a> MediaMatcher属性方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>MediaMatcher</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 评估给定的媒体查询并返回可从中检索结果的本机MediaQueryList。
     * 确认布局引擎将触发所提供的选择器查询st。
     */</span>
    <span class="token function" data-v-c702d684>matchMedia</span><span class="token punctuation" data-v-c702d684>(</span>query<span class="token operator" data-v-c702d684>:</span> string<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> MediaQueryList<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span> 
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684></div></div><h4 id="mediamatcher使用" data-v-c702d684><a href="#mediamatcher使用" class="header-anchor" data-v-c702d684>#</a> MediaMatcher使用</h4> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> OnDestroy<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>MediaMatcher<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/layout'</span><span class="token punctuation" data-v-c702d684>;</span>

<span class="token decorator" data-v-c702d684><span class="token at operator" data-v-c702d684>@</span><span class="token function" data-v-c702d684>Component</span></span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-layout'</span><span class="token punctuation" data-v-c702d684>,</span>
    templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'./cdk-layout.component.html'</span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-layout.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkLayoutComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span><span class="token punctuation" data-v-c702d684>,</span> OnDestroy <span class="token punctuation" data-v-c702d684>{</span>
    matcher<span class="token operator" data-v-c702d684>:</span> MediaQueryList<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>public</span> mediaMatcher<span class="token operator" data-v-c702d684>:</span> MediaMatcher<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>matcher <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>mediaMatcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>matchMedia</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'(min-width: 500px)'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>matcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>addListener</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>matchMediaListener<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnDestroy</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>matcher<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>removeListener</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>matchMediaListener<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>matchMediaListener</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token builtin" data-v-c702d684>console</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>matches <span class="token operator" data-v-c702d684>?</span> <span class="token string" data-v-c702d684>'match'</span> <span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'no match'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>如果你在测试的时候发现没有打印，你可以试着去改变浏览器窗口的大小。</p></div> <h3 id="breakpoints" data-v-c702d684><a href="#breakpoints" class="header-anchor" data-v-c702d684>#</a> Breakpoints</h3> <p data-v-c702d684>Breakpoints里面的内容是cdk里面提供的一些屏幕尺寸常量。如下所示。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>const</span> Breakpoints <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>{</span>
  XSmall<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(max-width: 599.99px)'</span><span class="token punctuation" data-v-c702d684>,</span>
  Small<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 600px) and (max-width: 959.99px)'</span><span class="token punctuation" data-v-c702d684>,</span>
  Medium<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 960px) and (max-width: 1279.99px)'</span><span class="token punctuation" data-v-c702d684>,</span>
  Large<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 1280px) and (max-width: 1919.99px)'</span><span class="token punctuation" data-v-c702d684>,</span>
  XLarge<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 1920px)'</span><span class="token punctuation" data-v-c702d684>,</span>

  Handset<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(max-width: 599.99px) and (orientation: portrait), '</span> <span class="token operator" data-v-c702d684>+</span>
           <span class="token string" data-v-c702d684>'(max-width: 959.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>
  Tablet<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), '</span> <span class="token operator" data-v-c702d684>+</span>
          <span class="token string" data-v-c702d684>'(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>
  Web<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 840px) and (orientation: portrait), '</span> <span class="token operator" data-v-c702d684>+</span>
       <span class="token string" data-v-c702d684>'(min-width: 1280px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>

  HandsetPortrait<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(max-width: 599.99px) and (orientation: portrait)'</span><span class="token punctuation" data-v-c702d684>,</span>
  TabletPortrait<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)'</span><span class="token punctuation" data-v-c702d684>,</span>
  WebPortrait<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 840px) and (orientation: portrait)'</span><span class="token punctuation" data-v-c702d684>,</span>

  HandsetLandscape<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(max-width: 959.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>
  TabletLandscape<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>
  WebLandscape<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'(min-width: 1280px) and (orientation: landscape)'</span><span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684></div></div><h3 id="示例汇总-2" data-v-c702d684><a href="#示例汇总-2" class="header-anchor" data-v-c702d684>#</a> 示例汇总</h3> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
  BreakpointObserver<span class="token punctuation" data-v-c702d684>,</span>
  BreakpointState<span class="token punctuation" data-v-c702d684>,</span>
  MediaMatcher<span class="token punctuation" data-v-c702d684>,</span>
  Breakpoints
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/layout&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Observable <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;rxjs/Observable&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;layout&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;./layout.component.html&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>&quot;./layout.component.scss&quot;</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>LayoutComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  isHandset<span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>BreakpointState<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>public</span> bm<span class="token operator" data-v-c702d684>:</span> BreakpointObserver<span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>public</span> media<span class="token operator" data-v-c702d684>:</span> MediaMatcher</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>
  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 手持设备</span>
    <span class="token keyword" data-v-c702d684>let</span> Handset <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Handset<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 手持landscape屏</span>
    <span class="token keyword" data-v-c702d684>let</span> HandsetLandscape <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>HandsetLandscape<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>//手持portrait屏</span>
    <span class="token keyword" data-v-c702d684>let</span> HandsetPortrait <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>HandsetPortrait<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 多媒体</span>
    <span class="token keyword" data-v-c702d684>let</span> Medium <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Medium<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 平板电脑</span>
    <span class="token keyword" data-v-c702d684>let</span> Tablet <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Tablet<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 平板电脑 Landscape</span>
    <span class="token keyword" data-v-c702d684>let</span> TabletLandscape <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>TabletLandscape<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 平板电脑 Portrait</span>
    <span class="token keyword" data-v-c702d684>let</span> TabletPortrait <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>TabletPortrait<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// web</span>
    <span class="token keyword" data-v-c702d684>let</span> Web <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Web<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// web landscape</span>
    <span class="token keyword" data-v-c702d684>let</span> WebLandscape <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>WebLandscape<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// web portrait</span>
    <span class="token keyword" data-v-c702d684>let</span> WebPortrait <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>WebPortrait<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 大屏幕</span>
    <span class="token keyword" data-v-c702d684>let</span> Large <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Large<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 更大屏幕</span>
    <span class="token keyword" data-v-c702d684>let</span> XLarge <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>XLarge<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 更小屏幕</span>
    <span class="token keyword" data-v-c702d684>let</span> XSmall <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>XSmall<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// 小屏幕</span>
    <span class="token keyword" data-v-c702d684>let</span> Small <span class="token operator" data-v-c702d684>=</span> Breakpoints<span class="token punctuation" data-v-c702d684>.</span>Small<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>let</span> isSmall <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>media<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>matchMedia</span><span class="token punctuation" data-v-c702d684>(</span>Small<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;is small matcher&quot;</span><span class="token punctuation" data-v-c702d684>,</span> isSmall<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;is small&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>bm<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isMatched</span><span class="token punctuation" data-v-c702d684>(</span>Small<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token keyword" data-v-c702d684>let</span> isXSmall <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>media<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>matchMedia</span><span class="token punctuation" data-v-c702d684>(</span>XSmall<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;is xsmall matcher&quot;</span><span class="token punctuation" data-v-c702d684>,</span> isXSmall<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;is xsmall&quot;</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>bm<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isMatched</span><span class="token punctuation" data-v-c702d684>(</span>XSmall<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token comment" data-v-c702d684>// 是否满足多个条件</span>
    <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>bm
      <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>observe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>[</span>
        Handset<span class="token punctuation" data-v-c702d684>,</span>
        HandsetLandscape<span class="token punctuation" data-v-c702d684>,</span>
        Handset<span class="token punctuation" data-v-c702d684>,</span>
        Medium<span class="token punctuation" data-v-c702d684>,</span>
        Tablet<span class="token punctuation" data-v-c702d684>,</span>
        TabletLandscape<span class="token punctuation" data-v-c702d684>,</span>
        TabletPortrait<span class="token punctuation" data-v-c702d684>,</span>
        Web<span class="token punctuation" data-v-c702d684>,</span>
        WebLandscape<span class="token punctuation" data-v-c702d684>,</span>
        WebPortrait<span class="token punctuation" data-v-c702d684>,</span>
        Large<span class="token punctuation" data-v-c702d684>,</span>
        XLarge<span class="token punctuation" data-v-c702d684>,</span>
        Small<span class="token punctuation" data-v-c702d684>,</span>
        XSmall
      <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span>
      <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>res</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span>res<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
      <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684></div></div><h2 id="angular-cdk-bidi" data-v-c702d684><a href="#angular-cdk-bidi" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/bidi</h2> <p data-v-c702d684>cdk Bidirectionality提供给我们的功能，就是用来设置布局方向。 使用之前先<code data-v-c702d684>provider BidiModule</code>:<code data-v-c702d684>import {BidiModule} from '@angular/cdk/bidi';</code>bidi里面咱们需要知道的就两个东西：一个Service Directionality、一个指令 Dir。bidi主要内容：</p> <ul data-v-c702d684><li data-v-c702d684>Directionality</li> <li data-v-c702d684>Direction</li> <li data-v-c702d684>DIR_DOCUMENT</li> <li data-v-c702d684>Dir</li> <li data-v-c702d684>BidiModule</li></ul> <h3 id="directionality" data-v-c702d684><a href="#directionality" class="header-anchor" data-v-c702d684>#</a> Directionality</h3> <p data-v-c702d684>Directionality Service两个作用：获取当前应用程序的布局方向、监听应用程序布局方向的变化。</p> <h4 id="directionality-service属性方法" data-v-c702d684><a href="#directionality-service属性方法" class="header-anchor" data-v-c702d684>#</a> Directionality Service属性方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>Directionality</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/** 当前应用程序的布局方向 'ltr' or 'rtl' */</span>
    readonly value<span class="token operator" data-v-c702d684>:</span> Direction<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 当前应用程序的布局方向发生改变了的回调函数 'ltr' / 'rtl' state changes. */</span>
    readonly change<span class="token operator" data-v-c702d684>:</span> EventEmitter<span class="token operator" data-v-c702d684>&lt;</span>Direction<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684></div></div><h4 id="directionality-service使用" data-v-c702d684><a href="#directionality-service使用" class="header-anchor" data-v-c702d684>#</a> Directionality Service使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> Inject<span class="token punctuation" data-v-c702d684>,</span> OnDestroy<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token constant" data-v-c702d684>DIR_DOCUMENT</span><span class="token punctuation" data-v-c702d684>,</span> Directionality<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/bidi'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Subscription<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;rxjs&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-bidi'</span><span class="token punctuation" data-v-c702d684>,</span>
    templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'./cdk-bidi.component.html'</span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-bidi.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkBidiComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>private</span> _dirChangeSubscription <span class="token operator" data-v-c702d684>=</span> Subscription<span class="token punctuation" data-v-c702d684>.</span><span class="token constant" data-v-c702d684>EMPTY</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
        <span class="token parameter" data-v-c702d684>@<span class="token function" data-v-c702d684>Inject</span><span class="token punctuation" data-v-c702d684>(</span><span class="token constant" data-v-c702d684>DIR_DOCUMENT</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token keyword" data-v-c702d684>public</span> dirDoc<span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>,</span>
        <span class="token keyword" data-v-c702d684>public</span> directionality<span class="token operator" data-v-c702d684>:</span> Directionality</span>
    <span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_dirChangeSubscription <span class="token operator" data-v-c702d684>=</span> directionality<span class="token punctuation" data-v-c702d684>.</span>change<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'bbb'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnDestroy</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_dirChangeSubscription<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>unsubscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684></div></div><h3 id="dir" data-v-c702d684><a href="#dir" class="header-anchor" data-v-c702d684>#</a> Dir</h3> <p data-v-c702d684>Dir指令用于设置布局方向和监听布局方向的变化。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [dir]</li> <li data-v-c702d684>Exported as: dir</li></ul> <h4 id="dir指令属性" data-v-c702d684><a href="#dir指令属性" class="header-anchor" data-v-c702d684>#</a> Dir指令属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>change: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output(‘dirChange’)</td> <td style="text-align:left;" data-v-c702d684>当前视图布局方向发生改变的时候调用</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>value: Direction</td> <td style="text-align:left;" data-v-c702d684></td> <td style="text-align:left;" data-v-c702d684>当前视图元素的布局方向</td></tr></tbody></table> <h4 id="dir指令使用" data-v-c702d684><a href="#dir指令使用" class="header-anchor" data-v-c702d684>#</a> Dir指令使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-bidi'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!--从左到右--&gt;
        &lt;p dir=&quot;LTR&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            从左到右排列
        &lt;/p&gt;
        &lt;!--从右到左--&gt;
        &lt;p dir=&quot;RTL&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            从右到左排列
        &lt;/p&gt;
        &lt;div dir=&quot;RTL&quot; style=&quot;border: solid 1px #ccc; padding: 10px&quot;&gt;
            &lt;div style=&quot;margin-left: 8px; margin-right: 8px; display: inline-block; 
            width: 250px; background-color: #cccccc; padding: 4px; color: red&quot;
                 dir=&quot;LTR&quot;&gt;第一个位置--内容靠左
            &lt;/div&gt;
            &lt;div style=&quot;margin-left: 8px; margin-right: 8px; display: inline-block; 
            width: 250px; background-color: #cccccc; padding: 4px; color: red&quot;
                 dir=&quot;RTL&quot;&gt;第二个位置--内容靠右
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!--可以控制方向--&gt;
        &lt;p [dir]=&quot;dir&quot; (dirChange)=&quot;dirChange()&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            可以动态切换方向
        &lt;/p&gt;
        &lt;button (click)=&quot;switchDir()&quot;&gt;切换方向&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkBidiComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    dir <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>switchDir</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>===</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;ltr&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>dirChange</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'aaa'</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684></div></div><h4 id="示例汇总-3" data-v-c702d684><a href="#示例汇总-3" class="header-anchor" data-v-c702d684>#</a> 示例汇总</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>!</span><span class="token operator" data-v-c702d684>--</span>从左到右<span class="token operator" data-v-c702d684>--</span><span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>p dir<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;LTR&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>
  bidi works<span class="token operator" data-v-c702d684>!</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>p<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>!</span><span class="token operator" data-v-c702d684>--</span>从右到左<span class="token operator" data-v-c702d684>--</span><span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>p dir<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;RTL&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>
  bidi works<span class="token operator" data-v-c702d684>!</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>p<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>!</span><span class="token operator" data-v-c702d684>--</span>可以控制方向<span class="token operator" data-v-c702d684>--</span><span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>p <span class="token punctuation" data-v-c702d684>[</span>dir<span class="token punctuation" data-v-c702d684>]</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;dir&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>
  bidi works<span class="token operator" data-v-c702d684>!</span>
<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>p<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token operator" data-v-c702d684>&lt;</span>a href<span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;javascript:;&quot;</span> <span class="token punctuation" data-v-c702d684>(</span>click<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>=</span><span class="token string" data-v-c702d684>&quot;switchDir()&quot;</span><span class="token operator" data-v-c702d684>&gt;</span>改变<span class="token operator" data-v-c702d684>&lt;</span><span class="token operator" data-v-c702d684>/</span>a<span class="token operator" data-v-c702d684>&gt;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> Component<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>,</span> Inject <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span> <span class="token constant" data-v-c702d684>DIR_DOCUMENT</span><span class="token punctuation" data-v-c702d684>,</span> Directionality <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/bidi&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
  selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;bidi&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;./bidi.component.html&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
  styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>&quot;./bidi.component.scss&quot;</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>BidiComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
  dir<span class="token operator" data-v-c702d684>:</span> string <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span>
    <span class="token parameter" data-v-c702d684>@<span class="token function" data-v-c702d684>Inject</span><span class="token punctuation" data-v-c702d684>(</span><span class="token constant" data-v-c702d684>DIR_DOCUMENT</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token keyword" data-v-c702d684>public</span> dirDoc<span class="token operator" data-v-c702d684>:</span> any<span class="token punctuation" data-v-c702d684>,</span>
    <span class="token keyword" data-v-c702d684>public</span> directionlity<span class="token operator" data-v-c702d684>:</span> Directionality</span>
  <span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span><span class="token punctuation" data-v-c702d684>}</span>

  <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 获取document</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dirDoc<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// ltr 获取当前值</span>
    <span class="token keyword" data-v-c702d684>let</span> dir <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>directionlity<span class="token punctuation" data-v-c702d684>.</span>value<span class="token punctuation" data-v-c702d684>;</span>
    console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;dir is &quot;</span><span class="token punctuation" data-v-c702d684>,</span> dir<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  <span class="token punctuation" data-v-c702d684>}</span>

  <span class="token function" data-v-c702d684>switchDir</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>===</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
      <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;ltr&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>else</span> <span class="token punctuation" data-v-c702d684>{</span>
      <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>dir <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>&quot;rtl&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
  <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684></div></div><h2 id="angular-cdk-a11y" data-v-c702d684><a href="#angular-cdk-a11y" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/a11y</h2> <p data-v-c702d684>cdk ally里面提供的功能运用场景是 select, menu 这种有 list options 的组件, 负责处理键盘上下按钮时 option active 的逻辑。cdk ally使用之前也要<code data-v-c702d684>provider A11yModule</code>:<code data-v-c702d684>import {A11yModule} from '@angular/cdk/a11y';</code></p> <h3 id="listkeymanager" data-v-c702d684><a href="#listkeymanager" class="header-anchor" data-v-c702d684>#</a> ListKeyManager</h3> <p data-v-c702d684>ListKeyManager主要做的事情就是去管理一堆的list 里面哪个item处于active状态(active代表一种状态，比如处于活动转换，获取焦点状态等等)。而且ListKeyManager管理的item必须实现ListKeyManagerOption接口。换句话说ListKeyManager用于管理一系列list的item,这些item就是ListKeyManagerOption。通过ListKeyManager来控制那个ListKeyManagerOption对应的item处于active状态。所以咱们先看下ListKeyManagerOption和ListKeyManager里面一些常见的方法。</p> <h4 id="listkeymanageroption" data-v-c702d684><a href="#listkeymanageroption" class="header-anchor" data-v-c702d684>#</a> ListKeyManagerOption</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>interface</span> <span class="token class-name" data-v-c702d684>ListKeyManagerOption</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/** 当前item是否disabled. */</span>
    disabled<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 获取当前item对应的label,配合ListKeyManager里面withTypeAhead函数的使用
     *  适用于输入框的情况，比如输入框下面有一些list item。当输入框输入字符的时候list item 里面的active
     *  item 和输入的文字匹配
     */</span>
    getLabel<span class="token operator" data-v-c702d684>?</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> string<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684></div></div><h4 id="listkeymanager常用方法" data-v-c702d684><a href="#listkeymanager常用方法" class="header-anchor" data-v-c702d684>#</a> ListKeyManager常用方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ListKeyManager</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token constant" data-v-c702d684>T</span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>ListKeyManagerOption</span><span class="token operator" data-v-c702d684>&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * tab 按键的时候触发的
     */</span>
    tabOut<span class="token operator" data-v-c702d684>:</span> Subject<span class="token operator" data-v-c702d684>&lt;</span><span class="token keyword" data-v-c702d684>void</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 当ListKeyManager里面的list item ,active item 改变的时候触发*/</span>
    change<span class="token operator" data-v-c702d684>:</span> Subject<span class="token operator" data-v-c702d684>&lt;</span>number<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置那些ListKeyManager管理的list里在移动(比如tab 按键切换)过程中那些item需要跳过。
     */</span>
    <span class="token function" data-v-c702d684>skipPredicate</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function-variable function" data-v-c702d684>predicate</span><span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>item<span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>T</span></span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置是否循环移动(当active item是最好一个的时候，继续下一个跳到第一个)
     */</span>
    <span class="token function" data-v-c702d684>withWrap</span><span class="token punctuation" data-v-c702d684>(</span>shouldWrap<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * active item 移动方向垂直(对应键盘方向键的 上下按键)
     */</span>
    <span class="token function" data-v-c702d684>withVerticalOrientation</span><span class="token punctuation" data-v-c702d684>(</span>enabled<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * active item 移动方向水平(对应键盘方向键的 左右按键)
     */</span>
    <span class="token function" data-v-c702d684>withHorizontalOrientation</span><span class="token punctuation" data-v-c702d684>(</span>direction<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'ltr'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token string" data-v-c702d684>'rtl'</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 用来处理组合按键的情况，比如 altr + 方向键的时候。同样达到方向按键的效果
     */</span>
    <span class="token function" data-v-c702d684>withAllowedModifierKeys</span><span class="token punctuation" data-v-c702d684>(</span>keys<span class="token operator" data-v-c702d684>:</span> ListKeyManagerModifierKey<span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置typeahead 模式 配合ListKeyManagerOption的getLabel()函数使用，一般用于配合有输入框的情况下使用，比如输入框输入一个字符，active item 会自动设置到包含这个字符item
     */</span>
    <span class="token function" data-v-c702d684>withTypeAhead</span><span class="token punctuation" data-v-c702d684>(</span>debounceInterval<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置 active item 对应的index
     */</span>
    <span class="token function" data-v-c702d684>setActiveItem</span><span class="token punctuation" data-v-c702d684>(</span>index<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置 active item 对应的item
     */</span>
    <span class="token function" data-v-c702d684>setActiveItem</span><span class="token punctuation" data-v-c702d684>(</span>item<span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>T</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置按键
     */</span>
    <span class="token function" data-v-c702d684>onKeydown</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token operator" data-v-c702d684>:</span> KeyboardEvent<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 当前active item 对应的事件 */</span>
    readonly activeItemIndex<span class="token operator" data-v-c702d684>:</span> number <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 当前active item 对应的item */</span>
    readonly activeItem<span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>T</span> <span class="token operator" data-v-c702d684>|</span> <span class="token keyword" data-v-c702d684>null</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 设置第一个位置的item 为active item(当然了如果第一个item 是disable,则设置第二个) */</span>
    <span class="token function" data-v-c702d684>setFirstItemActive</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 设置最后一个位置的item 为 active item */</span>
    <span class="token function" data-v-c702d684>setLastItemActive</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 设置下一个item 为active item */</span>
    <span class="token function" data-v-c702d684>setNextItemActive</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 设置上一个item 为active item */</span>
    <span class="token function" data-v-c702d684>setPreviousItemActive</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置active item,但是不产生其他的效果
     */</span>
    <span class="token function" data-v-c702d684>updateActiveItem</span><span class="token punctuation" data-v-c702d684>(</span>index<span class="token operator" data-v-c702d684>:</span> number<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置active item,但是不产生其他的效果
     */</span>
    <span class="token function" data-v-c702d684>updateActiveItem</span><span class="token punctuation" data-v-c702d684>(</span>item<span class="token operator" data-v-c702d684>:</span> <span class="token constant" data-v-c702d684>T</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684></div></div><h4 id="listkeymanager的使用" data-v-c702d684><a href="#listkeymanager的使用" class="header-anchor" data-v-c702d684>#</a> ListKeyManager的使用</h4> <p data-v-c702d684>接下来咱们通过ListKeyManager的两个具体继承类ActiveDescendantKeyManager和FocusKeyManager来说明ListKeyManager的具体使用。其实ActiveDescendantKeyManager里面管理的item必须实现Highlightable接口、FocusKeyManager里面管理的item必须实现FocusableOption。</p> <ol data-v-c702d684><li data-v-c702d684>ActiveDescendantKeyManager的使用
ActiveDescendantKeyManager里面管理的list item 必须实现Highlightable接口。</li></ol> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>ActiveDescendantKeyManager继承了ListKeyManager类，Highlightable实现了ListKeyManagerOption接口</p></div> <p data-v-c702d684>ActiveDescendantKeyManager使用场景：如果想ListKeyManager管理的list里面active的item标记为活动状态，其他的标记为非活动状态情况下使用。而且每个item都必须实现Highlightable接口。接下来咱们通过一个具体的实例来简单的说明下。咱们自定义一个item组件ItemActiveOptionComponent，这个组件实现Highlightable接口。组件里面做的事情也很简单就是去改变active item的class样式。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> HostBinding<span class="token punctuation" data-v-c702d684>,</span> Input<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Highlightable<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-item-active-option'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div [class.disabled]=&quot;disabled&quot;&gt;
            &lt;ng-content&gt;&lt;/ng-content&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        .active {
            background-color: lightblue;
            color: #fff;
        }

        .disabled {
            opacity: 0.3;
        }
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ItemActiveOptionComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>Highlightable</span> <span class="token punctuation" data-v-c702d684>{</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> item<span class="token punctuation" data-v-c702d684>;</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> disabled <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token keyword" data-v-c702d684>private</span> _isActive <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
    @<span class="token function" data-v-c702d684>HostBinding</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'class.active'</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token keyword" data-v-c702d684>get</span> <span class="token function" data-v-c702d684>isActive</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_isActive<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置 active对应的class
     */</span>
    <span class="token function" data-v-c702d684>setActiveStyles</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_isActive <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>true</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置非active对应的class
     */</span>
    <span class="token function" data-v-c702d684>setInactiveStyles</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_isActive <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>getLabel</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>item<span class="token punctuation" data-v-c702d684>.</span>name<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// cdk-active-descendant.component.less</span>
<span class="token punctuation" data-v-c702d684>.</span>form<span class="token operator" data-v-c702d684>-</span>control <span class="token punctuation" data-v-c702d684>{</span>
  display<span class="token operator" data-v-c702d684>:</span> block<span class="token punctuation" data-v-c702d684>;</span>
  width<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>100</span><span class="token operator" data-v-c702d684>%</span><span class="token punctuation" data-v-c702d684>;</span>
  height<span class="token operator" data-v-c702d684>:</span> <span class="token function" data-v-c702d684>calc</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>2.25</span>rem <span class="token operator" data-v-c702d684>+</span> <span class="token number" data-v-c702d684>2</span>px<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  padding<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.375</span>rem <span class="token number" data-v-c702d684>.75</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  font<span class="token operator" data-v-c702d684>-</span>size<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  line<span class="token operator" data-v-c702d684>-</span>height<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1.5</span><span class="token punctuation" data-v-c702d684>;</span>
  color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>495057</span><span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>clip<span class="token operator" data-v-c702d684>:</span> padding<span class="token operator" data-v-c702d684>-</span>box<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>px solid #ced4da<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  transition<span class="token operator" data-v-c702d684>:</span> border<span class="token operator" data-v-c702d684>-</span>color <span class="token number" data-v-c702d684>.15</span>s ease<span class="token operator" data-v-c702d684>-</span><span class="token keyword" data-v-c702d684>in</span><span class="token operator" data-v-c702d684>-</span>out<span class="token punctuation" data-v-c702d684>,</span> box<span class="token operator" data-v-c702d684>-</span>shadow <span class="token number" data-v-c702d684>.15</span>s ease<span class="token operator" data-v-c702d684>-</span><span class="token keyword" data-v-c702d684>in</span><span class="token operator" data-v-c702d684>-</span>out<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>form<span class="token operator" data-v-c702d684>-</span>control<span class="token operator" data-v-c702d684>:</span>focus <span class="token punctuation" data-v-c702d684>{</span>
  color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>495057</span><span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>80</span>bdff<span class="token punctuation" data-v-c702d684>;</span>
  outline<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
  box<span class="token operator" data-v-c702d684>-</span>shadow<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0.2</span>rem <span class="token function" data-v-c702d684>rgba</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>123</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>255</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>.25</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>


<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token operator" data-v-c702d684>:</span>first<span class="token operator" data-v-c702d684>-</span>child <span class="token punctuation" data-v-c702d684>{</span>
  margin<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>-</span>left<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>-</span>right<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item  <span class="token punctuation" data-v-c702d684>{</span>
  position<span class="token operator" data-v-c702d684>:</span> relative<span class="token punctuation" data-v-c702d684>;</span>
  display<span class="token operator" data-v-c702d684>:</span> block<span class="token punctuation" data-v-c702d684>;</span>
  padding<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.75</span>rem <span class="token number" data-v-c702d684>1.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  margin<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>:</span> <span class="token operator" data-v-c702d684>-</span><span class="token number" data-v-c702d684>1</span>px<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>px solid <span class="token function" data-v-c702d684>rgba</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>.125</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token operator" data-v-c702d684>:</span>last<span class="token operator" data-v-c702d684>-</span>child <span class="token punctuation" data-v-c702d684>{</span>
  margin<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>-</span>right<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>-</span>left<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token punctuation" data-v-c702d684>.</span>active  <span class="token punctuation" data-v-c702d684>{</span>
  z<span class="token operator" data-v-c702d684>-</span>index<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>2</span><span class="token punctuation" data-v-c702d684>;</span>
  color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>007</span>bff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>007</span>bff<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684></div></div><p data-v-c702d684>ActiveDescendantKeyManager的使用，咱们放在这个组件里面实现。ActiveDescendantKeyManager里面管理的item就是咱们上面自定义的ItemActiveOptionComponent。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> QueryList<span class="token punctuation" data-v-c702d684>,</span> ViewChildren<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ItemActiveOptionComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;./active-item-option/item-active-option.component&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ActiveDescendantKeyManager<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>

@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-active-descendant'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- 输入框 --&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;input class=&quot;form-control&quot; placeholder=&quot;Search...&quot; (keyup)=&quot;onKeyDown($event)&quot; #input&gt;
        &lt;/div&gt;

        &lt;section class=&quot;list-group&quot;&gt;
            &lt;!-- ActiveDescendantKeyManager要管理的item --&gt;
            &lt;app-item-active-option *ngFor=&quot;let user of users | filter: 'name' : input.value; index as index&quot;
                                    [item]=&quot;user&quot; class=&quot;list-group-item&quot;&gt;
                {{user.name}}
            &lt;/app-item-active-option&gt;
        &lt;/section&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'cdk-active-descendant.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkActiveDescendantComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span> <span class="token punctuation" data-v-c702d684>{</span>

    <span class="token comment" data-v-c702d684>/**
     * 找到所有的item(ListKeyManagerOption - Highlightable)
     */</span>
    @<span class="token function" data-v-c702d684>ViewChildren</span><span class="token punctuation" data-v-c702d684>(</span>ItemActiveOptionComponent<span class="token punctuation" data-v-c702d684>)</span> items<span class="token operator" data-v-c702d684>:</span> QueryList<span class="token operator" data-v-c702d684>&lt;</span>ItemActiveOptionComponent<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// list item source list</span>
    users <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934d965e7501f4e1c6f&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Caroline Hodges&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029348f7eed8b6f5f02db&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Delores Rivas&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029346f48c8407c64d0d5&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Darlene Franklin&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029341eff315fa87f9e21&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Alfreda Love&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029342e8917c6ccdb9865&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Marcy Ratliff&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029349dbb48013460e01f&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Beulah Nielsen&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934f4f1586e5e72d74a&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Morton Kerr&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029347918bb204bf7014e&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Autumn Tillman&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934b86f80e1fc60c626&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Diane Bennett&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029348999f59215020349&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;June Eaton&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token keyword" data-v-c702d684>private</span> keyManager<span class="token operator" data-v-c702d684>:</span> ActiveDescendantKeyManager<span class="token operator" data-v-c702d684>&lt;</span>ItemActiveOptionComponent<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// new ActiveDescendantKeyManager</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>keyManager <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>ActiveDescendantKeyManager</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>items<span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withWrap</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token comment" data-v-c702d684>// 循环</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withTypeAhead</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span> <span class="token comment" data-v-c702d684>// 支持搜索</span>

    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token function" data-v-c702d684>onKeyDown</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// 传递事件进去</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>keyManager<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>onKeydown</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/20181220090109772.gif" alt="" data-v-c702d684></p> <ol start="2" data-v-c702d684><li data-v-c702d684>FocusKeyManager的使用
FocusKeyManager里面管理的item必须实现FocusableOption接口。</li></ol> <div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>FocusKeyManager继承了ListKeyManager类，FocusableOption实现了ListKeyManagerOption接口</p></div> <p data-v-c702d684>FocusKeyManager使用场景：如果想ListKeyManager管理的list里面active item想直接接受到浏览器的焦点focus的时候使用。每个item都必须实现FocusableOption接口。下面自定义一个组件ItemFocusOptionComponent,并且这个组件实现了FocusableOption接口，FocusableOption接口的focus()方法里面设置当前item获取焦点。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> HostBinding<span class="token punctuation" data-v-c702d684>,</span> Input<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>FocusableOption<span class="token punctuation" data-v-c702d684>,</span> FocusOrigin<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-item-focus-option'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;ng-content&gt;&lt;/ng-content&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styles<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>
            <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>:host:focus {
            background: lightblue;
            color: #fff;
        }</span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
    <span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>ItemFocusOptionComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>FocusableOption</span> <span class="token punctuation" data-v-c702d684>{</span>
    @<span class="token function" data-v-c702d684>Input</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> item<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 屏蔽掉默认的键盘事件，js里面自己控制键盘事件
     */</span>
    @<span class="token function" data-v-c702d684>HostBinding</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'tabindex'</span><span class="token punctuation" data-v-c702d684>)</span> tabindex <span class="token operator" data-v-c702d684>=</span> <span class="token string" data-v-c702d684>'-1'</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> host<span class="token operator" data-v-c702d684>:</span> ElementRef</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>getLabel</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>return</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>item<span class="token punctuation" data-v-c702d684>.</span>name<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置获取焦点
     */</span>
    <span class="token function" data-v-c702d684>focus</span><span class="token punctuation" data-v-c702d684>(</span>origin<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> FocusOrigin<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>host<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>focus</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// cdk-focus.component.less 样式文件</span>
<span class="token punctuation" data-v-c702d684>.</span>form<span class="token operator" data-v-c702d684>-</span>control <span class="token punctuation" data-v-c702d684>{</span>
  display<span class="token operator" data-v-c702d684>:</span> block<span class="token punctuation" data-v-c702d684>;</span>
  width<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>100</span><span class="token operator" data-v-c702d684>%</span><span class="token punctuation" data-v-c702d684>;</span>
  height<span class="token operator" data-v-c702d684>:</span> <span class="token function" data-v-c702d684>calc</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>2.25</span>rem <span class="token operator" data-v-c702d684>+</span> <span class="token number" data-v-c702d684>2</span>px<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
  padding<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.375</span>rem <span class="token number" data-v-c702d684>.75</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  font<span class="token operator" data-v-c702d684>-</span>size<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  line<span class="token operator" data-v-c702d684>-</span>height<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1.5</span><span class="token punctuation" data-v-c702d684>;</span>
  color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>495057</span><span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>clip<span class="token operator" data-v-c702d684>:</span> padding<span class="token operator" data-v-c702d684>-</span>box<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>px solid #ced4da<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  transition<span class="token operator" data-v-c702d684>:</span> border<span class="token operator" data-v-c702d684>-</span>color <span class="token number" data-v-c702d684>.15</span>s ease<span class="token operator" data-v-c702d684>-</span><span class="token keyword" data-v-c702d684>in</span><span class="token operator" data-v-c702d684>-</span>out<span class="token punctuation" data-v-c702d684>,</span> box<span class="token operator" data-v-c702d684>-</span>shadow <span class="token number" data-v-c702d684>.15</span>s ease<span class="token operator" data-v-c702d684>-</span><span class="token keyword" data-v-c702d684>in</span><span class="token operator" data-v-c702d684>-</span>out<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>form<span class="token operator" data-v-c702d684>-</span>control<span class="token operator" data-v-c702d684>:</span>focus <span class="token punctuation" data-v-c702d684>{</span>
  color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>495057</span><span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>80</span>bdff<span class="token punctuation" data-v-c702d684>;</span>
  outline<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
  box<span class="token operator" data-v-c702d684>-</span>shadow<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0</span> <span class="token number" data-v-c702d684>0.2</span>rem <span class="token function" data-v-c702d684>rgba</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>123</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>255</span><span class="token punctuation" data-v-c702d684>,</span><span class="token number" data-v-c702d684>.25</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>


<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token operator" data-v-c702d684>:</span>first<span class="token operator" data-v-c702d684>-</span>child <span class="token punctuation" data-v-c702d684>{</span>
  margin<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>-</span>left<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>top<span class="token operator" data-v-c702d684>-</span>right<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item  <span class="token punctuation" data-v-c702d684>{</span>
  position<span class="token operator" data-v-c702d684>:</span> relative<span class="token punctuation" data-v-c702d684>;</span>
  display<span class="token operator" data-v-c702d684>:</span> block<span class="token punctuation" data-v-c702d684>;</span>
  padding<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.75</span>rem <span class="token number" data-v-c702d684>1.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  margin<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>:</span> <span class="token operator" data-v-c702d684>-</span><span class="token number" data-v-c702d684>1</span>px<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>1</span>px solid <span class="token function" data-v-c702d684>rgba</span><span class="token punctuation" data-v-c702d684>(</span><span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>.125</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token operator" data-v-c702d684>:</span>last<span class="token operator" data-v-c702d684>-</span>child <span class="token punctuation" data-v-c702d684>{</span>
  margin<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>0</span><span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>-</span>right<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>bottom<span class="token operator" data-v-c702d684>-</span>left<span class="token operator" data-v-c702d684>-</span>radius<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>.25</span>rem<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>.</span>list<span class="token operator" data-v-c702d684>-</span>group<span class="token operator" data-v-c702d684>-</span>item<span class="token punctuation" data-v-c702d684>.</span>focus <span class="token punctuation" data-v-c702d684>{</span>
  z<span class="token operator" data-v-c702d684>-</span>index<span class="token operator" data-v-c702d684>:</span> <span class="token number" data-v-c702d684>2</span><span class="token punctuation" data-v-c702d684>;</span>
  color<span class="token operator" data-v-c702d684>:</span> #fff<span class="token punctuation" data-v-c702d684>;</span>
  background<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>007</span>bff<span class="token punctuation" data-v-c702d684>;</span>
  border<span class="token operator" data-v-c702d684>-</span>color<span class="token operator" data-v-c702d684>:</span> #<span class="token number" data-v-c702d684>007</span>bff<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
<span class="token comment" data-v-c702d684>// FocusKeyManager的具体使用</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> QueryList<span class="token punctuation" data-v-c702d684>,</span> ViewChildren<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>FocusableOption<span class="token punctuation" data-v-c702d684>,</span> FocusKeyManager<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>ItemFocusOptionComponent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;./focus-item-option/item-focus-option.component&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-focus'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;section class=&quot;list-group&quot; (keyup)=&quot;onKeyDown($event)&quot;&gt;
            &lt;app-item-focus-option *ngFor=&quot;let user of users; index as index&quot;
                                   [item]=&quot;user&quot; class=&quot;list-group-item&quot;
                                   (click)=&quot;selectItem(index)&quot;&gt;
                {{user.name}}
            &lt;/app-item-focus-option&gt;
        &lt;/section&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./cdk-focus.component.less'</span><span class="token punctuation" data-v-c702d684>]</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkFocusComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>// 获取搜有实现了FocusableOption接口的item</span>
    @<span class="token function" data-v-c702d684>ViewChildren</span><span class="token punctuation" data-v-c702d684>(</span>ItemFocusOptionComponent<span class="token punctuation" data-v-c702d684>)</span> items<span class="token operator" data-v-c702d684>:</span> QueryList<span class="token operator" data-v-c702d684>&lt;</span>ItemFocusOptionComponent<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>// list source</span>
    users <span class="token operator" data-v-c702d684>=</span> <span class="token punctuation" data-v-c702d684>[</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934d965e7501f4e1c6f&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Caroline Hodges&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029348f7eed8b6f5f02db&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Delores Rivas&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029346f48c8407c64d0d5&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Darlene Franklin&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029341eff315fa87f9e21&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Alfreda Love&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029342e8917c6ccdb9865&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Marcy Ratliff&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029349dbb48013460e01f&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Beulah Nielsen&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934f4f1586e5e72d74a&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Morton Kerr&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029347918bb204bf7014e&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Autumn Tillman&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b902934b86f80e1fc60c626&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;Diane Bennett&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span>
        <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token string" data-v-c702d684>&quot;id&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;5b9029348999f59215020349&quot;</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token string" data-v-c702d684>&quot;name&quot;</span><span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>&quot;June Eaton&quot;</span>
        <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token keyword" data-v-c702d684>private</span> keyManager<span class="token operator" data-v-c702d684>:</span> FocusKeyManager<span class="token operator" data-v-c702d684>&lt;</span>ItemFocusOptionComponent<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// 创建FocusKeyManager对象</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>keyManager <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>FocusKeyManager</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>items<span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withWrap</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span>
            <span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>withTypeAhead</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * 传递按键事件
     * @param event
     */</span>
    <span class="token function" data-v-c702d684>onKeyDown</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>keyManager<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>onKeydown</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

    <span class="token comment" data-v-c702d684>/**
     * 点击选中
     * @param index
     */</span>
    <span class="token function" data-v-c702d684>selectItem</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>index<span class="token operator" data-v-c702d684>:</span> number</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>keyManager<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>setActiveItem</span><span class="token punctuation" data-v-c702d684>(</span>index<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684><span class="line-number" data-v-c702d684>48</span><br data-v-c702d684><span class="line-number" data-v-c702d684>49</span><br data-v-c702d684><span class="line-number" data-v-c702d684>50</span><br data-v-c702d684><span class="line-number" data-v-c702d684>51</span><br data-v-c702d684><span class="line-number" data-v-c702d684>52</span><br data-v-c702d684><span class="line-number" data-v-c702d684>53</span><br data-v-c702d684><span class="line-number" data-v-c702d684>54</span><br data-v-c702d684><span class="line-number" data-v-c702d684>55</span><br data-v-c702d684><span class="line-number" data-v-c702d684>56</span><br data-v-c702d684><span class="line-number" data-v-c702d684>57</span><br data-v-c702d684><span class="line-number" data-v-c702d684>58</span><br data-v-c702d684><span class="line-number" data-v-c702d684>59</span><br data-v-c702d684><span class="line-number" data-v-c702d684>60</span><br data-v-c702d684><span class="line-number" data-v-c702d684>61</span><br data-v-c702d684><span class="line-number" data-v-c702d684>62</span><br data-v-c702d684><span class="line-number" data-v-c702d684>63</span><br data-v-c702d684><span class="line-number" data-v-c702d684>64</span><br data-v-c702d684><span class="line-number" data-v-c702d684>65</span><br data-v-c702d684><span class="line-number" data-v-c702d684>66</span><br data-v-c702d684><span class="line-number" data-v-c702d684>67</span><br data-v-c702d684><span class="line-number" data-v-c702d684>68</span><br data-v-c702d684><span class="line-number" data-v-c702d684>69</span><br data-v-c702d684><span class="line-number" data-v-c702d684>70</span><br data-v-c702d684><span class="line-number" data-v-c702d684>71</span><br data-v-c702d684><span class="line-number" data-v-c702d684>72</span><br data-v-c702d684><span class="line-number" data-v-c702d684>73</span><br data-v-c702d684><span class="line-number" data-v-c702d684>74</span><br data-v-c702d684><span class="line-number" data-v-c702d684>75</span><br data-v-c702d684><span class="line-number" data-v-c702d684>76</span><br data-v-c702d684><span class="line-number" data-v-c702d684>77</span><br data-v-c702d684><span class="line-number" data-v-c702d684>78</span><br data-v-c702d684><span class="line-number" data-v-c702d684>79</span><br data-v-c702d684><span class="line-number" data-v-c702d684>80</span><br data-v-c702d684><span class="line-number" data-v-c702d684>81</span><br data-v-c702d684><span class="line-number" data-v-c702d684>82</span><br data-v-c702d684><span class="line-number" data-v-c702d684>83</span><br data-v-c702d684><span class="line-number" data-v-c702d684>84</span><br data-v-c702d684><span class="line-number" data-v-c702d684>85</span><br data-v-c702d684><span class="line-number" data-v-c702d684>86</span><br data-v-c702d684><span class="line-number" data-v-c702d684>87</span><br data-v-c702d684><span class="line-number" data-v-c702d684>88</span><br data-v-c702d684><span class="line-number" data-v-c702d684>89</span><br data-v-c702d684><span class="line-number" data-v-c702d684>90</span><br data-v-c702d684><span class="line-number" data-v-c702d684>91</span><br data-v-c702d684><span class="line-number" data-v-c702d684>92</span><br data-v-c702d684><span class="line-number" data-v-c702d684>93</span><br data-v-c702d684><span class="line-number" data-v-c702d684>94</span><br data-v-c702d684><span class="line-number" data-v-c702d684>95</span><br data-v-c702d684><span class="line-number" data-v-c702d684>96</span><br data-v-c702d684><span class="line-number" data-v-c702d684>97</span><br data-v-c702d684><span class="line-number" data-v-c702d684>98</span><br data-v-c702d684><span class="line-number" data-v-c702d684>99</span><br data-v-c702d684><span class="line-number" data-v-c702d684>100</span><br data-v-c702d684><span class="line-number" data-v-c702d684>101</span><br data-v-c702d684><span class="line-number" data-v-c702d684>102</span><br data-v-c702d684><span class="line-number" data-v-c702d684>103</span><br data-v-c702d684><span class="line-number" data-v-c702d684>104</span><br data-v-c702d684><span class="line-number" data-v-c702d684>105</span><br data-v-c702d684><span class="line-number" data-v-c702d684>106</span><br data-v-c702d684><span class="line-number" data-v-c702d684>107</span><br data-v-c702d684><span class="line-number" data-v-c702d684>108</span><br data-v-c702d684><span class="line-number" data-v-c702d684>109</span><br data-v-c702d684><span class="line-number" data-v-c702d684>110</span><br data-v-c702d684><span class="line-number" data-v-c702d684>111</span><br data-v-c702d684><span class="line-number" data-v-c702d684>112</span><br data-v-c702d684><span class="line-number" data-v-c702d684>113</span><br data-v-c702d684><span class="line-number" data-v-c702d684>114</span><br data-v-c702d684><span class="line-number" data-v-c702d684>115</span><br data-v-c702d684><span class="line-number" data-v-c702d684>116</span><br data-v-c702d684><span class="line-number" data-v-c702d684>117</span><br data-v-c702d684><span class="line-number" data-v-c702d684>118</span><br data-v-c702d684><span class="line-number" data-v-c702d684>119</span><br data-v-c702d684><span class="line-number" data-v-c702d684>120</span><br data-v-c702d684><span class="line-number" data-v-c702d684>121</span><br data-v-c702d684><span class="line-number" data-v-c702d684>122</span><br data-v-c702d684><span class="line-number" data-v-c702d684>123</span><br data-v-c702d684><span class="line-number" data-v-c702d684>124</span><br data-v-c702d684><span class="line-number" data-v-c702d684>125</span><br data-v-c702d684><span class="line-number" data-v-c702d684>126</span><br data-v-c702d684><span class="line-number" data-v-c702d684>127</span><br data-v-c702d684><span class="line-number" data-v-c702d684>128</span><br data-v-c702d684><span class="line-number" data-v-c702d684>129</span><br data-v-c702d684><span class="line-number" data-v-c702d684>130</span><br data-v-c702d684><span class="line-number" data-v-c702d684>131</span><br data-v-c702d684><span class="line-number" data-v-c702d684>132</span><br data-v-c702d684><span class="line-number" data-v-c702d684>133</span><br data-v-c702d684><span class="line-number" data-v-c702d684>134</span><br data-v-c702d684><span class="line-number" data-v-c702d684>135</span><br data-v-c702d684><span class="line-number" data-v-c702d684>136</span><br data-v-c702d684><span class="line-number" data-v-c702d684>137</span><br data-v-c702d684><span class="line-number" data-v-c702d684>138</span><br data-v-c702d684><span class="line-number" data-v-c702d684>139</span><br data-v-c702d684><span class="line-number" data-v-c702d684>140</span><br data-v-c702d684><span class="line-number" data-v-c702d684>141</span><br data-v-c702d684><span class="line-number" data-v-c702d684>142</span><br data-v-c702d684><span class="line-number" data-v-c702d684>143</span><br data-v-c702d684><span class="line-number" data-v-c702d684>144</span><br data-v-c702d684><span class="line-number" data-v-c702d684>145</span><br data-v-c702d684><span class="line-number" data-v-c702d684>146</span><br data-v-c702d684><span class="line-number" data-v-c702d684>147</span><br data-v-c702d684><span class="line-number" data-v-c702d684>148</span><br data-v-c702d684><span class="line-number" data-v-c702d684>149</span><br data-v-c702d684><span class="line-number" data-v-c702d684>150</span><br data-v-c702d684><span class="line-number" data-v-c702d684>151</span><br data-v-c702d684><span class="line-number" data-v-c702d684>152</span><br data-v-c702d684><span class="line-number" data-v-c702d684>153</span><br data-v-c702d684><span class="line-number" data-v-c702d684>154</span><br data-v-c702d684><span class="line-number" data-v-c702d684>155</span><br data-v-c702d684><span class="line-number" data-v-c702d684>156</span><br data-v-c702d684><span class="line-number" data-v-c702d684>157</span><br data-v-c702d684><span class="line-number" data-v-c702d684>158</span><br data-v-c702d684><span class="line-number" data-v-c702d684>159</span><br data-v-c702d684><span class="line-number" data-v-c702d684>160</span><br data-v-c702d684><span class="line-number" data-v-c702d684>161</span><br data-v-c702d684><span class="line-number" data-v-c702d684>162</span><br data-v-c702d684><span class="line-number" data-v-c702d684>163</span><br data-v-c702d684><span class="line-number" data-v-c702d684>164</span><br data-v-c702d684><span class="line-number" data-v-c702d684>165</span><br data-v-c702d684><span class="line-number" data-v-c702d684>166</span><br data-v-c702d684><span class="line-number" data-v-c702d684>167</span><br data-v-c702d684><span class="line-number" data-v-c702d684>168</span><br data-v-c702d684><span class="line-number" data-v-c702d684>169</span><br data-v-c702d684><span class="line-number" data-v-c702d684>170</span><br data-v-c702d684><span class="line-number" data-v-c702d684>171</span><br data-v-c702d684><span class="line-number" data-v-c702d684>172</span><br data-v-c702d684><span class="line-number" data-v-c702d684>173</span><br data-v-c702d684><span class="line-number" data-v-c702d684>174</span><br data-v-c702d684><span class="line-number" data-v-c702d684>175</span><br data-v-c702d684></div></div><p data-v-c702d684><img src="/vuebloger/img/post/2018122009021547.gif" alt="" data-v-c702d684></p> <h3 id="focustrap" data-v-c702d684><a href="#focustrap" class="header-anchor" data-v-c702d684>#</a> FocusTrap</h3> <p data-v-c702d684>focusTrap是cdk ally模块里面提供的一个指令。用于捕获元素中的Tab键焦点。同时控制焦点的范围,Tab切换焦点的时候不会跳出这个区域。举个例子比如有一个视图元素添加了FocusTrap指令，这个视图元素里面有三个input。这样Tab键切换焦点的时候焦点会在这三个input之间切换。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdkTrapFocus]</li> <li data-v-c702d684>Exported as: cdkTrapFocus
还有几个其他的指令可以配合FocusTrap指令来使用:cdkFocusRegionStart、cdkFocusRegionEnd、cdkFocusInitial。咱们上面不是说了FocusTrap指令会控制焦点的范围。cdkFocusRegionStart和cdkFocusRegionEnd指令有可以进一步的控制焦点的范围</li> <li data-v-c702d684>cdkFocusRegionStart：FocusTrap范围的起点</li> <li data-v-c702d684>cdkFocusRegionEnd：FocusTrap范围的终点</li> <li data-v-c702d684>cdkFocusInitial：区间出现时，一开始获取focus的item。</li></ul> <h4 id="focustrap指令属性介绍" data-v-c702d684><a href="#focustrap指令属性介绍" class="header-anchor" data-v-c702d684>#</a> FocusTrap指令属性介绍</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>FocusTrap属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>autoCapture: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkTrapFocusAutoCapture’)</td> <td style="text-align:left;" data-v-c702d684>初始化的时候元素是否自动获取焦点</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>enabled: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input(‘cdkTrapFocus’)</td> <td style="text-align:left;" data-v-c702d684>false Tab切换焦点的时候会跑到外面去，true Tab切换焦点的时候焦点不会跑到外面去</td></tr></tbody></table> <h4 id="focustrap指令使用" data-v-c702d684><a href="#focustrap指令使用" class="header-anchor" data-v-c702d684>#</a> FocusTrap指令使用</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-accessibility'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;!-- FocusTrap的使用，- 控制焦点的范围,tab切换焦点的时候不会跳出这个区域 --&gt;
        &lt;div cdkTrapFocus style=&quot;border: solid 1px #ccc; padding: 10px&quot;&gt;
            &lt;!-- Tab and Shift + Tab will not leave this element. --&gt;
            &lt;input placeholder=&quot;Email&quot;&gt;
            &lt;input type=&quot;password&quot; placeholder=&quot;Password&quot; style=&quot;margin-left: 10px&quot;&gt;
            &lt;button type=&quot;submit&quot; style=&quot;margin-left: 10px&quot;&gt;Submit&lt;/button&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkAccessibilityComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684></div></div><h4 id="cdkfocusregionstart-end-initial使用" data-v-c702d684><a href="#cdkfocusregionstart-end-initial使用" class="header-anchor" data-v-c702d684>#</a> cdkFocusRegionStart/End/Initial使用</h4> <p data-v-c702d684>cdkFocusRegionStart和cdkFocusRegionEnd的使用应该很好理解。就是用来控制范围的。关键是cdkFocusInitial的使用，cdkFocusInitial必须要配合cdkTrapFocus指令的cdkTrapFocusAutoCapture=true使用。而且我试了下cdkFocusInitial一开始是没有效果，没都是隐藏显示的时候才有效果，才获取到焦点。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-accessibility'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div *ngIf=&quot;displayFocusTrap&quot; cdkTrapFocus cdkTrapFocusAutoCapture=&quot;true&quot;
             style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;2&quot; cdkFocusRegionStart&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;3&quot; cdkFocusInitial&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;4&quot; cdkFocusRegionEnd&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;displayFocusTrap=!displayFocusTrap&quot;&gt;显示&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkAccessibilityComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    displayFocusTrap <span class="token operator" data-v-c702d684>=</span> <span class="token boolean" data-v-c702d684>false</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684></div></div><h3 id="focusmonitor" data-v-c702d684><a href="#focusmonitor" class="header-anchor" data-v-c702d684>#</a> FocusMonitor</h3> <p data-v-c702d684>FocusMonitor是cdk ally里面提供的一个Service。用于监控焦点。FocusMonitor里面常用方法如下</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>FocusMonitor</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnDestroy</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 监听元素的焦点获取
     */</span>
    <span class="token function" data-v-c702d684>monitor</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>,</span> checkChildren<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>FocusOrigin<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>monitor</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token operator" data-v-c702d684>&lt;</span>HTMLElement<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>,</span> checkChildren<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> Observable<span class="token operator" data-v-c702d684>&lt;</span>FocusOrigin<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 停止监听元素的焦点获取
     */</span>
    <span class="token function" data-v-c702d684>stopMonitoring</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>stopMonitoring</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token operator" data-v-c702d684>&lt;</span>HTMLElement<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 设置元素获取焦点
     * @param element 元素
     * @param origin 设置的焦点是通过哪个来的 'touch' | 'mouse' | 'keyboard' | 'program' | null
     * @param options 用于配置focus行为的选项.
     */</span>
    <span class="token function" data-v-c702d684>focusVia</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>,</span> origin<span class="token operator" data-v-c702d684>:</span> FocusOrigin<span class="token punctuation" data-v-c702d684>,</span> options<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> FocusOptions<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>focusVia</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token operator" data-v-c702d684>&lt;</span>HTMLElement<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>,</span> origin<span class="token operator" data-v-c702d684>:</span> FocusOrigin<span class="token punctuation" data-v-c702d684>,</span> options<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> FocusOptions<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684></div></div><h4 id="focusmonitor的使用" data-v-c702d684><a href="#focusmonitor的使用" class="header-anchor" data-v-c702d684>#</a> FocusMonitor的使用</h4> <p data-v-c702d684>一个简单的例子，咱们仅仅是在元素获取焦点的时候做一个简单的打印。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> OnDestroy<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>FocusMonitor<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-focus-monitor'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div cdkTrapFocus style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;FocusMonitor item 1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 2&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 3&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 4&quot;&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkFocusMonitorComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span><span class="token punctuation" data-v-c702d684>,</span> OnDestroy <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> _elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span>
                <span class="token keyword" data-v-c702d684>private</span> _focusMonitor<span class="token operator" data-v-c702d684>:</span> FocusMonitor</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>/**
         * 这里我们只是做了一个简单的打印
         */</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_focusMonitor<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>monitor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_elementRef<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>,</span> <span class="token boolean" data-v-c702d684>true</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>mode</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            console<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>log</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'元素获取到焦点 focused 来源 '</span> <span class="token operator" data-v-c702d684>+</span> mode<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnDestroy</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_focusMonitor<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>stopMonitoring</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_elementRef<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684></div></div><h3 id="focustrapfactory" data-v-c702d684><a href="#focustrapfactory" class="header-anchor" data-v-c702d684>#</a> FocusTrapFactory</h3> <p data-v-c702d684>FocusTrapFactory也是cdk ally里面提供的一个Service。他的功能就是用来给元素添加cdkFocusTrap指令。FocusTrapFactory常用函数就一个，如下</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>FocusTrapFactory</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 给指定的元素添加cdkFocusTrap指令，deferCaptureElements参数正好对应cdkFocusTrap指令
     * @Input('cdkTrapFocusAutoCapture')功能
     */</span>
    <span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>,</span> deferCaptureElements<span class="token operator" data-v-c702d684>?</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> FocusTrap<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684></div></div><h4 id="focustrapfactory使用" data-v-c702d684><a href="#focustrapfactory使用" class="header-anchor" data-v-c702d684>#</a> FocusTrapFactory使用</h4> <p data-v-c702d684>通过FocusTrapFactory的crete函数达到cdkFocusTrap指令的效果。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AfterViewInit<span class="token punctuation" data-v-c702d684>,</span> Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>FocusTrap<span class="token punctuation" data-v-c702d684>,</span> FocusTrapFactory<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-focus-trap-factory'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;div style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;FocusTrapFactory item 1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 2&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 3&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 4&quot;&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkFocusTrapFactoryComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token keyword" data-v-c702d684>private</span> _focusTrap<span class="token operator" data-v-c702d684>:</span> FocusTrap<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> _elementRef<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span>
                <span class="token keyword" data-v-c702d684>private</span> _focusTrapFactory<span class="token operator" data-v-c702d684>:</span> FocusTrapFactory</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngAfterViewInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_focusTrap <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_focusTrapFactory<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>create</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_elementRef<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>

<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684></div></div><h3 id="interactivitychecker" data-v-c702d684><a href="#interactivitychecker" class="header-anchor" data-v-c702d684>#</a> InteractivityChecker</h3> <p data-v-c702d684>InteractivityChecker是一个Service，用于检查元素的一些状态。常见方法如下。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>InteractivityChecker</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/**
     * 元素是否 disabled.
     */</span>
    <span class="token function" data-v-c702d684>isDisabled</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 元素是否visible
     *
     * This will capture states like `display: none` and `visibility: hidden`, but not things like
     * being clipped by an `overflow: hidden` parent or being outside the viewport.
     *
     * @returns Whether the element is visible.
     */</span>
    <span class="token function" data-v-c702d684>isVisible</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 元素是否接受Tab按键，不如Tab按键切换焦点
     */</span>
    <span class="token function" data-v-c702d684>isTabbable</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 元素是否可以获取焦点
     */</span>
    <span class="token function" data-v-c702d684>isFocusable</span><span class="token punctuation" data-v-c702d684>(</span>element<span class="token operator" data-v-c702d684>:</span> HTMLElement<span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684></div></div><h4 id="interactivitychecker使用" data-v-c702d684><a href="#interactivitychecker使用" class="header-anchor" data-v-c702d684>#</a> InteractivityChecker使用</h4> <p data-v-c702d684>举一个非常简单的例子，打印出button的各种状态。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>,</span> ElementRef<span class="token punctuation" data-v-c702d684>,</span> OnInit<span class="token punctuation" data-v-c702d684>,</span> ViewChild<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>InteractivityChecker<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-interactivity-checker'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
        &lt;button #interactivityCheckerButton&gt;InteractivityChecker测试&lt;/button&gt;
        &lt;p&gt;上面button是否disable: {{disable}}&lt;/p&gt;
        &lt;p&gt;上面button是否visible: {{visible}}&lt;/p&gt;
        &lt;p&gt;上面button是否可以tabable: {{tabable}}&lt;/p&gt;
        &lt;p&gt;上面button是否可以focusable: {{focusable}}&lt;/p&gt;
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkInteractivityCheckerComponent</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    @<span class="token function" data-v-c702d684>ViewChild</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>'interactivityCheckerButton'</span><span class="token punctuation" data-v-c702d684>)</span> button<span class="token operator" data-v-c702d684>:</span> ElementRef<span class="token punctuation" data-v-c702d684>;</span>
    disable<span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    visible<span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    tabable<span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    focusable<span class="token operator" data-v-c702d684>:</span> boolean<span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> _interactivityChecker<span class="token operator" data-v-c702d684>:</span> InteractivityChecker</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>ngOnInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>disable <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_interactivityChecker<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isDisabled</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>button<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>visible <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_interactivityChecker<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isVisible</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>button<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>tabable <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_interactivityChecker<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isTabbable</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>button<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>focusable <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_interactivityChecker<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>isFocusable</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>button<span class="token punctuation" data-v-c702d684>.</span>nativeElement<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684></div></div><h3 id="liveannouncer" data-v-c702d684><a href="#liveannouncer" class="header-anchor" data-v-c702d684>#</a> LiveAnnouncer</h3> <p data-v-c702d684>LiveAnnouncer也是一个Service。用于在屏幕上发布一个消息。把消息显示在屏幕上。关于这一部分的内容估计的去看下W3C关于WAI-ARIA的使用。我们就举一个简单的例子。</p> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Component<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>LiveAnnouncer<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'app-cdk-live-announcer'</span><span class="token punctuation" data-v-c702d684>,</span>
    template<span class="token operator" data-v-c702d684>:</span> <span class="token template-string" data-v-c702d684><span class="token template-punctuation string" data-v-c702d684>`</span><span class="token string" data-v-c702d684>
    </span><span class="token template-punctuation string" data-v-c702d684>`</span></span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkLiveAnnouncerComponent</span> <span class="token punctuation" data-v-c702d684>{</span>
    index <span class="token operator" data-v-c702d684>=</span> <span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/**
     * 会在屏幕上输出Hey Google，三秒之后又会换成Hey Google 2
     */</span>
    <span class="token function" data-v-c702d684>constructor</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684><span class="token keyword" data-v-c702d684>private</span> liveAnnouncer<span class="token operator" data-v-c702d684>:</span> LiveAnnouncer</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        liveAnnouncer<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>announce</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;Hey Google&quot;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token function" data-v-c702d684>setTimeout</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>timerTask</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token number" data-v-c702d684>3000</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
    <span class="token function" data-v-c702d684>timerTask</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>index <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>index <span class="token operator" data-v-c702d684>+</span> <span class="token number" data-v-c702d684>1</span><span class="token punctuation" data-v-c702d684>;</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>liveAnnouncer<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>announce</span><span class="token punctuation" data-v-c702d684>(</span><span class="token string" data-v-c702d684>&quot;Hey Google &quot;</span> <span class="token operator" data-v-c702d684>+</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>index<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>toString</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>,</span> <span class="token string" data-v-c702d684>&quot;off&quot;</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684></div></div><h2 id="angular-cdk-stepper" data-v-c702d684><a href="#angular-cdk-stepper" class="header-anchor" data-v-c702d684>#</a> @angular/cdk/stepper</h2> <p data-v-c702d684>cdk Stepper 让我们能够更好的处理类似于工作流的情况(任务分为多个步骤，上一步操作完成之后进入下一步的操作，比如咱们休假申请单要经过多个领导的审批的情况)。要使用Stepper先<code data-v-c702d684>provider CdkStepperModule</code>:<code data-v-c702d684>import {CdkStepperModule} from '@angular/cdk/stepper';</code></p> <p data-v-c702d684>cdk Stepper看起来复杂其实里面的东西不是很多。整个Stepper都是围绕一个组件CdkStep(cdk-step)和6个指令(CdkStepper、CdkStepLabel、CdkStepperNext、CdkStepperPrevious、CdkStepHeader)来展开的。咱们上面不是说了么，cdk Stepper一般用来处理多个步骤任务。这里每个任务的内容用CdkStep组件来表示，所以有多少个步骤就会 有多少个CdkStep组件。CdkStepper指令呢则是用来管理这些组件比如跳到下一步，上一步，完成等等(所以cdk Stepper使用的时候我们需要另外定义一个组件继承自CdkStepper指令，我们可以把他当做是工作流组件)。CdkStepperNext、CdkStepperPrevious两个指令正好对应上一步下一步，一般会添加在button上面包含在CdkStep组件里面，因为每个步骤都可能有上一步，下一步这样的。CdkStepLabel指令则是对每一个步骤的描述你也可以认为是每个步骤的标题。CdkStepHeader指令一般则是用来表示当前进行到哪一步了。一般也是会自定义一个组件继承CdkStepHeader实现。</p> <h3 id="cdkstep" data-v-c702d684><a href="#cdkstep" class="header-anchor" data-v-c702d684>#</a> CdkStep</h3> <p data-v-c702d684>CdkStep其实是一个组件来着。表示每个步骤的内容。所以任务有多少步就会有多少个CdkStep。比如如下代码有两个步骤所以有两个CdkStep(cdk-step)：</p> <div class="language-html line-numbers-mode" data-v-c702d684><pre class="language-html" data-v-c702d684><code data-v-c702d684><span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>h1</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>cdk stepper<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>h1</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>yx-stepper</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-c702d684>[stepControl]</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>frmStep1<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>#step1</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>cdkStep<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>ng-template</span> <span class="token attr-name" data-v-c702d684>cdkStepLabel</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>第一步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>ng-template</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>form</span> <span class="token attr-name" data-v-c702d684>#frmStep1</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>ngForm<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
            <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>input</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>text<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>name</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>a<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>value</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>a<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>/&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>form</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>button</span> <span class="token special-attr" data-v-c702d684><span class="token attr-name" data-v-c702d684>style</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span><span class="token value css language-css" data-v-c702d684><span class="token property" data-v-c702d684>margin</span><span class="token punctuation" data-v-c702d684>:</span> 8px</span><span class="token punctuation" data-v-c702d684>&quot;</span></span></span> <span class="token attr-name" data-v-c702d684>cdkStepperNext</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>button<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>下一步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>button</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-c702d684>cdkStep</span> <span class="token attr-name" data-v-c702d684>#step2</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>cdkStep<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>ng-template</span> <span class="token attr-name" data-v-c702d684>cdkStepLabel</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>第二步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>ng-template</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>form</span> <span class="token attr-name" data-v-c702d684>#frmStep2</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>ngForm<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
            <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>input</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>text<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>name</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>b<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>value</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>b<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>/&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>form</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>button</span> <span class="token attr-name" data-v-c702d684>cdkStepperPrevious</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>button<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>上一步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>button</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>button</span> <span class="token special-attr" data-v-c702d684><span class="token attr-name" data-v-c702d684>style</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span><span class="token value css language-css" data-v-c702d684><span class="token property" data-v-c702d684>margin</span><span class="token punctuation" data-v-c702d684>:</span> 8px</span><span class="token punctuation" data-v-c702d684>&quot;</span></span></span> <span class="token attr-name" data-v-c702d684>cdkStepperNext</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>button<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>完成<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>button</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>yx-stepper</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684></div></div><p data-v-c702d684>每个CdkStep组件里面的内容对应每个步骤的内容。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: cdk-step</li> <li data-v-c702d684>Exported as: cdkStep</li></ul> <h4 id="cdkstep组件属性" data-v-c702d684><a href="#cdkstep组件属性" class="header-anchor" data-v-c702d684>#</a> CdkStep组件属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>内容</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>ariaLabel: string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘aria-label’)</td> <td style="text-align:left;" data-v-c702d684>添加aria-label属性</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>ariaLabelledby: string</td> <td style="text-align:left;" data-v-c702d684>@Input(‘aria-labelledby’)</td> <td style="text-align:left;" data-v-c702d684>添加aria-labelledby属性</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>completed: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前步骤是否标记为完成状态</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>editable: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前步骤标记为完成之后，是否还可以回到该步骤</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>errorMessage: string</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>错误信息</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>hasError: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>是否有错误</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>label: string</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前步骤对应的label,和cdkStepLabel指令的作用是一样的(可以简单的把他认为是步骤的标题)</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>optional: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前步骤是否是可选的</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>state: StepState</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前步骤的状态</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>stepControl: AbstractControl</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>用于验证当前步骤的合法性</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>content: TemplateRef</td> <td style="text-align:left;" data-v-c702d684></td> <td style="text-align:left;" data-v-c702d684>当前步骤 试图元素内容</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>interacted: false</td> <td style="text-align:left;" data-v-c702d684></td> <td style="text-align:left;" data-v-c702d684>用户是否看到当前步骤内容</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>stepLabel: CdkStepLabel</td> <td style="text-align:left;" data-v-c702d684></td> <td style="text-align:left;" data-v-c702d684>当前步骤label内容</td></tr></tbody></table> <h4 id="cdkstep组件方法" data-v-c702d684><a href="#cdkstep组件方法" class="header-anchor" data-v-c702d684>#</a> CdkStep组件方法</h4> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> declare <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkStep</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>OnChanges</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token operator" data-v-c702d684>...</span>
    <span class="token comment" data-v-c702d684>/** 选中当前步骤(select哪个步骤则选中那个步骤) */</span>
    <span class="token function" data-v-c702d684>select</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 设置当前步骤到无效状态 */</span>
    <span class="token function" data-v-c702d684>reset</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token operator" data-v-c702d684>...</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684></div></div><div class="custom-block tip" data-v-c702d684><p class="custom-block-title" data-v-c702d684>温馨提示</p> <p data-v-c702d684>CdkStep组件里面大部分的方法都需要配合我们下面要讲的CdkStepper指令来使用</p></div> <h3 id="cdkstepper" data-v-c702d684><a href="#cdkstepper" class="header-anchor" data-v-c702d684>#</a> CdkStepper</h3> <p data-v-c702d684>CdkStepper是一个指令，用来管理所有的步骤，即CdkStepper是用来管理CdkStep组件的。一般的做法是自定义一个组件继承CdkStepper指令。并且CdkStep组件是这个组件的子组件。比如如下的代码我们定义一个StepperComponent组件继承CdkStepper指令：</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdkStepper]</li> <li data-v-c702d684>Exported as: cdkStepper</li></ul> <div class="language-js line-numbers-mode" data-v-c702d684><pre class="language-js" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>
    AfterContentInit<span class="token punctuation" data-v-c702d684>,</span>
    ChangeDetectionStrategy<span class="token punctuation" data-v-c702d684>,</span>
    Component<span class="token punctuation" data-v-c702d684>,</span>
    ContentChildren<span class="token punctuation" data-v-c702d684>,</span>
    EventEmitter<span class="token punctuation" data-v-c702d684>,</span>
    Output<span class="token punctuation" data-v-c702d684>,</span>
    QueryList<span class="token punctuation" data-v-c702d684>,</span>
    ViewEncapsulation
<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/core'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>AnimationEvent<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/animations'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>CdkStep<span class="token punctuation" data-v-c702d684>,</span> CdkStepper<span class="token punctuation" data-v-c702d684>,</span> StepContentPositionState<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'@angular/cdk/stepper'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>Subject<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'rxjs'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>distinctUntilChanged<span class="token punctuation" data-v-c702d684>,</span> takeUntil<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'rxjs/operators'</span><span class="token punctuation" data-v-c702d684>;</span>
<span class="token keyword" data-v-c702d684>import</span> <span class="token punctuation" data-v-c702d684>{</span>yxStepperAnimations<span class="token punctuation" data-v-c702d684>}</span> <span class="token keyword" data-v-c702d684>from</span> <span class="token string" data-v-c702d684>'./stepper-animations'</span><span class="token punctuation" data-v-c702d684>;</span>
@<span class="token function" data-v-c702d684>Component</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>{</span>
    selector<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'yx-stepper'</span><span class="token punctuation" data-v-c702d684>,</span>
    templateUrl<span class="token operator" data-v-c702d684>:</span> <span class="token string" data-v-c702d684>'./stepper.component.html'</span><span class="token punctuation" data-v-c702d684>,</span>
    styleUrls<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token string" data-v-c702d684>'./stepper.component.less'</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    providers<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span><span class="token punctuation" data-v-c702d684>{</span>provide<span class="token operator" data-v-c702d684>:</span> CdkStepper<span class="token punctuation" data-v-c702d684>,</span> useExisting<span class="token operator" data-v-c702d684>:</span> StepperComponent<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    animations<span class="token operator" data-v-c702d684>:</span> <span class="token punctuation" data-v-c702d684>[</span>yxStepperAnimations<span class="token punctuation" data-v-c702d684>.</span>horizontalStepTransition<span class="token punctuation" data-v-c702d684>]</span><span class="token punctuation" data-v-c702d684>,</span>
    encapsulation<span class="token operator" data-v-c702d684>:</span> ViewEncapsulation<span class="token punctuation" data-v-c702d684>.</span>None<span class="token punctuation" data-v-c702d684>,</span>
    changeDetection<span class="token operator" data-v-c702d684>:</span> ChangeDetectionStrategy<span class="token punctuation" data-v-c702d684>.</span>OnPush<span class="token punctuation" data-v-c702d684>,</span>
<span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span>
<span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>StepperComponent</span> <span class="token keyword" data-v-c702d684>extends</span> <span class="token class-name" data-v-c702d684>CdkStepper</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterContentInit</span> <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token comment" data-v-c702d684>/** Steps that the stepper holds. */</span>
    @<span class="token function" data-v-c702d684>ContentChildren</span><span class="token punctuation" data-v-c702d684>(</span>CdkStep<span class="token punctuation" data-v-c702d684>)</span> _steps<span class="token operator" data-v-c702d684>:</span> QueryList<span class="token operator" data-v-c702d684>&lt;</span>CdkStep<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** Event emitted when the current step is done transitioning in. */</span>
    @<span class="token function" data-v-c702d684>Output</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> readonly animationDone<span class="token operator" data-v-c702d684>:</span> EventEmitter<span class="token operator" data-v-c702d684>&lt;</span><span class="token keyword" data-v-c702d684>void</span><span class="token operator" data-v-c702d684>&gt;</span> <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>EventEmitter</span><span class="token operator" data-v-c702d684>&lt;</span><span class="token keyword" data-v-c702d684>void</span><span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    _animationDone <span class="token operator" data-v-c702d684>=</span> <span class="token keyword" data-v-c702d684>new</span> <span class="token class-name" data-v-c702d684>Subject</span><span class="token operator" data-v-c702d684>&lt;</span>AnimationEvent<span class="token operator" data-v-c702d684>&gt;</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token function" data-v-c702d684>ngAfterContentInit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
        <span class="token comment" data-v-c702d684>// Mark the component for change detection whenever the content children query changes</span>
        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_steps<span class="token punctuation" data-v-c702d684>.</span>changes<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>pipe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token function" data-v-c702d684>takeUntil</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_destroyed<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>_stateChanged</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>

        <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_animationDone<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>pipe</span><span class="token punctuation" data-v-c702d684>(</span>
            <span class="token comment" data-v-c702d684>// This needs a `distinctUntilChanged` in order to avoid emitting the same event twice due</span>
            <span class="token comment" data-v-c702d684>// to a bug in animations where the `.done` callback gets invoked twice on some browsers.</span>
            <span class="token comment" data-v-c702d684>// See https://github.com/angular/angular/issues/24084</span>
            <span class="token function" data-v-c702d684>distinctUntilChanged</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>x<span class="token punctuation" data-v-c702d684>,</span> y</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>=&gt;</span> x<span class="token punctuation" data-v-c702d684>.</span>fromState <span class="token operator" data-v-c702d684>===</span> y<span class="token punctuation" data-v-c702d684>.</span>fromState <span class="token operator" data-v-c702d684>&amp;&amp;</span> x<span class="token punctuation" data-v-c702d684>.</span>toState <span class="token operator" data-v-c702d684>===</span> y<span class="token punctuation" data-v-c702d684>.</span>toState<span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>,</span>
            <span class="token function" data-v-c702d684>takeUntil</span><span class="token punctuation" data-v-c702d684>(</span><span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>_destroyed<span class="token punctuation" data-v-c702d684>)</span>
        <span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>subscribe</span><span class="token punctuation" data-v-c702d684>(</span><span class="token parameter" data-v-c702d684>event</span> <span class="token operator" data-v-c702d684>=&gt;</span> <span class="token punctuation" data-v-c702d684>{</span>
            <span class="token keyword" data-v-c702d684>if</span> <span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>(</span>event<span class="token punctuation" data-v-c702d684>.</span>toState <span class="token keyword" data-v-c702d684>as</span> StepContentPositionState<span class="token punctuation" data-v-c702d684>)</span> <span class="token operator" data-v-c702d684>===</span> <span class="token string" data-v-c702d684>'current'</span><span class="token punctuation" data-v-c702d684>)</span> <span class="token punctuation" data-v-c702d684>{</span>
                <span class="token keyword" data-v-c702d684>this</span><span class="token punctuation" data-v-c702d684>.</span>animationDone<span class="token punctuation" data-v-c702d684>.</span><span class="token function" data-v-c702d684>emit</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
            <span class="token punctuation" data-v-c702d684>}</span>
        <span class="token punctuation" data-v-c702d684>}</span><span class="token punctuation" data-v-c702d684>)</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token punctuation" data-v-c702d684>}</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684><span class="line-number" data-v-c702d684>11</span><br data-v-c702d684><span class="line-number" data-v-c702d684>12</span><br data-v-c702d684><span class="line-number" data-v-c702d684>13</span><br data-v-c702d684><span class="line-number" data-v-c702d684>14</span><br data-v-c702d684><span class="line-number" data-v-c702d684>15</span><br data-v-c702d684><span class="line-number" data-v-c702d684>16</span><br data-v-c702d684><span class="line-number" data-v-c702d684>17</span><br data-v-c702d684><span class="line-number" data-v-c702d684>18</span><br data-v-c702d684><span class="line-number" data-v-c702d684>19</span><br data-v-c702d684><span class="line-number" data-v-c702d684>20</span><br data-v-c702d684><span class="line-number" data-v-c702d684>21</span><br data-v-c702d684><span class="line-number" data-v-c702d684>22</span><br data-v-c702d684><span class="line-number" data-v-c702d684>23</span><br data-v-c702d684><span class="line-number" data-v-c702d684>24</span><br data-v-c702d684><span class="line-number" data-v-c702d684>25</span><br data-v-c702d684><span class="line-number" data-v-c702d684>26</span><br data-v-c702d684><span class="line-number" data-v-c702d684>27</span><br data-v-c702d684><span class="line-number" data-v-c702d684>28</span><br data-v-c702d684><span class="line-number" data-v-c702d684>29</span><br data-v-c702d684><span class="line-number" data-v-c702d684>30</span><br data-v-c702d684><span class="line-number" data-v-c702d684>31</span><br data-v-c702d684><span class="line-number" data-v-c702d684>32</span><br data-v-c702d684><span class="line-number" data-v-c702d684>33</span><br data-v-c702d684><span class="line-number" data-v-c702d684>34</span><br data-v-c702d684><span class="line-number" data-v-c702d684>35</span><br data-v-c702d684><span class="line-number" data-v-c702d684>36</span><br data-v-c702d684><span class="line-number" data-v-c702d684>37</span><br data-v-c702d684><span class="line-number" data-v-c702d684>38</span><br data-v-c702d684><span class="line-number" data-v-c702d684>39</span><br data-v-c702d684><span class="line-number" data-v-c702d684>40</span><br data-v-c702d684><span class="line-number" data-v-c702d684>41</span><br data-v-c702d684><span class="line-number" data-v-c702d684>42</span><br data-v-c702d684><span class="line-number" data-v-c702d684>43</span><br data-v-c702d684><span class="line-number" data-v-c702d684>44</span><br data-v-c702d684><span class="line-number" data-v-c702d684>45</span><br data-v-c702d684><span class="line-number" data-v-c702d684>46</span><br data-v-c702d684><span class="line-number" data-v-c702d684>47</span><br data-v-c702d684></div></div><h4 id="cdkstepper属性" data-v-c702d684><a href="#cdkstepper属性" class="header-anchor" data-v-c702d684>#</a> CdkStepper属性</h4> <table data-v-c702d684><thead data-v-c702d684><tr data-v-c702d684><th style="text-align:left;" data-v-c702d684>属性</th> <th style="text-align:left;" data-v-c702d684>类型</th> <th style="text-align:left;" data-v-c702d684>解释</th></tr></thead> <tbody data-v-c702d684><tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>linear: boolean</td> <td style="text-align:left;" data-v-c702d684>@Input()	任务流是否是线性的，</td> <td style="text-align:left;" data-v-c702d684>前一个任务完成才能进行下一个任务</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>selected: CdkStep</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前选中的任务</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>selectedIndex: number</td> <td style="text-align:left;" data-v-c702d684>@Input()</td> <td style="text-align:left;" data-v-c702d684>当前选中任务的index</td></tr> <tr data-v-c702d684><td style="text-align:left;" data-v-c702d684>selectionChange: EventEmitter</td> <td style="text-align:left;" data-v-c702d684>@Output()</td> <td style="text-align:left;" data-v-c702d684>选中任务改变时候的回调函数</td></tr></tbody></table> <h4 id="cdkstepper方法" data-v-c702d684><a href="#cdkstepper方法" class="header-anchor" data-v-c702d684>#</a> CdkStepper方法</h4> <div class="language-ts line-numbers-mode" data-v-c702d684><pre class="language-ts" data-v-c702d684><code data-v-c702d684><span class="token keyword" data-v-c702d684>export</span> <span class="token keyword" data-v-c702d684>declare</span> <span class="token keyword" data-v-c702d684>class</span> <span class="token class-name" data-v-c702d684>CdkStepper</span> <span class="token keyword" data-v-c702d684>implements</span> <span class="token class-name" data-v-c702d684>AfterViewInit</span><span class="token punctuation" data-v-c702d684>,</span> OnDestroy <span class="token punctuation" data-v-c702d684>{</span>
    <span class="token operator" data-v-c702d684>...</span>
    <span class="token comment" data-v-c702d684>/** 切换到下一个任务 */</span>
    <span class="token function" data-v-c702d684>next</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 切换到上一个任务 */</span>
    <span class="token function" data-v-c702d684>previous</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token comment" data-v-c702d684>/** 重置所有的任务 */</span>
    <span class="token function" data-v-c702d684>reset</span><span class="token punctuation" data-v-c702d684>(</span><span class="token punctuation" data-v-c702d684>)</span><span class="token operator" data-v-c702d684>:</span> <span class="token keyword" data-v-c702d684>void</span><span class="token punctuation" data-v-c702d684>;</span>
    <span class="token operator" data-v-c702d684>...</span>
<span class="token punctuation" data-v-c702d684>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684><span class="line-number" data-v-c702d684>8</span><br data-v-c702d684><span class="line-number" data-v-c702d684>9</span><br data-v-c702d684><span class="line-number" data-v-c702d684>10</span><br data-v-c702d684></div></div><h3 id="cdksteplabel" data-v-c702d684><a href="#cdksteplabel" class="header-anchor" data-v-c702d684>#</a> CdkStepLabel</h3> <p data-v-c702d684>指令，每个步骤需要显示的label内容，比如如下代码第一步部分就是某个任务的label。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: [cdkStepLabel]</li></ul> <div class="language-html line-numbers-mode" data-v-c702d684><pre class="language-html" data-v-c702d684><code data-v-c702d684><span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-c702d684>[stepControl]</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>frmStep1<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>#step1</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>cdkStep<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>ng-template</span> <span class="token attr-name" data-v-c702d684>cdkStepLabel</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>第一步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>ng-template</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>form</span> <span class="token attr-name" data-v-c702d684>#frmStep1</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>ngForm<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
        <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>input</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>text<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>name</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>a<span class="token punctuation" data-v-c702d684>&quot;</span></span> <span class="token attr-name" data-v-c702d684>value</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>a<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>/&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>form</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
    <span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;</span>button</span> <span class="token special-attr" data-v-c702d684><span class="token attr-name" data-v-c702d684>style</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span><span class="token value css language-css" data-v-c702d684><span class="token property" data-v-c702d684>margin</span><span class="token punctuation" data-v-c702d684>:</span> 8px</span><span class="token punctuation" data-v-c702d684>&quot;</span></span></span> <span class="token attr-name" data-v-c702d684>cdkStepperNext</span> <span class="token attr-name" data-v-c702d684>type</span><span class="token attr-value" data-v-c702d684><span class="token punctuation attr-equals" data-v-c702d684>=</span><span class="token punctuation" data-v-c702d684>&quot;</span>button<span class="token punctuation" data-v-c702d684>&quot;</span></span><span class="token punctuation" data-v-c702d684>&gt;</span></span>下一步<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>button</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
<span class="token tag" data-v-c702d684><span class="token tag" data-v-c702d684><span class="token punctuation" data-v-c702d684>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-c702d684>&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper" data-v-c702d684><span class="line-number" data-v-c702d684>1</span><br data-v-c702d684><span class="line-number" data-v-c702d684>2</span><br data-v-c702d684><span class="line-number" data-v-c702d684>3</span><br data-v-c702d684><span class="line-number" data-v-c702d684>4</span><br data-v-c702d684><span class="line-number" data-v-c702d684>5</span><br data-v-c702d684><span class="line-number" data-v-c702d684>6</span><br data-v-c702d684><span class="line-number" data-v-c702d684>7</span><br data-v-c702d684></div></div><h3 id="cdksteppernext" data-v-c702d684><a href="#cdksteppernext" class="header-anchor" data-v-c702d684>#</a> CdkStepperNext</h3> <p data-v-c702d684>添加在button上的指令，跳到下一个任务。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: button[cdkStepperNext]</li></ul> <h3 id="cdkstepperprevious" data-v-c702d684><a href="#cdkstepperprevious" class="header-anchor" data-v-c702d684>#</a> CdkStepperPrevious</h3> <p data-v-c702d684>添加在button上的指令，跳到上一个任务。</p> <ul data-v-c702d684><li data-v-c702d684>Selector: button[cdkStepperPrevious]</li></ul> <h3 id="cdkstepheader" data-v-c702d684><a href="#cdkstepheader" class="header-anchor" data-v-c702d684>#</a> CdkStepHeader</h3> <p data-v-c702d684>指令，每个任务的头部信息，任务指示器。</p> <p data-v-c702d684>关于cdk参考示例代码，有兴趣的大家可以看看例子这里的<a href="https://github.com/tuacy/angular-cdk-study" target="_blank" rel="noopener noreferrer" data-v-c702d684>例子<span data-v-c702d684><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,其中cdk stepper部分内容在workflow-stepper文件下面。实现效果图如下：</p> <p data-v-c702d684><img src="/vuebloger/img/post/20190105231823718.gif" alt="" data-v-c702d684></p> <h2 id="推荐链接" data-v-c702d684><a href="#推荐链接" class="header-anchor" data-v-c702d684>#</a> 推荐链接</h2> <ul data-v-c702d684><li data-v-c702d684><a href="https://www.npmjs.com/package/@angular/cdk" target="_blank" rel="noopener noreferrer" data-v-c702d684>cdk npm<span data-v-c702d684><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li data-v-c702d684><a href="https://material.angular.io/cdk/categories" target="_blank" rel="noopener noreferrer" data-v-c702d684>cdk文档<span data-v-c702d684><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/6/2021, 7:32:37 AM</span></div></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/vuebloger/assets/js/app.98919d7b.js" defer></script><script src="/vuebloger/assets/js/5.82db9be2.js" defer></script><script src="/vuebloger/assets/js/1.b1b3586e.js" defer></script><script src="/vuebloger/assets/js/61.503d35d8.js" defer></script><script src="/vuebloger/assets/js/35.b80e4e89.js" defer></script>
  </body>
</html>
