<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>angular-cdk详解 | 邹先生博客记录</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/vuebloger/img/logo.jpeg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/vuebloger/assets/css/0.styles.12296c3f.css" as="style"><link rel="preload" href="/vuebloger/assets/js/app.39b3045d.js" as="script"><link rel="preload" href="/vuebloger/assets/js/7.e348d6b7.js" as="script"><link rel="preload" href="/vuebloger/assets/js/1.14d9dcb0.js" as="script"><link rel="preload" href="/vuebloger/assets/js/44.b0621b94.js" as="script"><link rel="preload" href="/vuebloger/assets/js/31.3518b77b.js" as="script"><link rel="prefetch" href="/vuebloger/assets/js/10.2fc7b3fc.js"><link rel="prefetch" href="/vuebloger/assets/js/100.1c6b4fbd.js"><link rel="prefetch" href="/vuebloger/assets/js/101.97e27c50.js"><link rel="prefetch" href="/vuebloger/assets/js/102.e5a2deab.js"><link rel="prefetch" href="/vuebloger/assets/js/103.32ac5ba2.js"><link rel="prefetch" href="/vuebloger/assets/js/104.640de69c.js"><link rel="prefetch" href="/vuebloger/assets/js/105.fcca8dcd.js"><link rel="prefetch" href="/vuebloger/assets/js/106.d3b4dcd4.js"><link rel="prefetch" href="/vuebloger/assets/js/107.759a9484.js"><link rel="prefetch" href="/vuebloger/assets/js/108.54cb9825.js"><link rel="prefetch" href="/vuebloger/assets/js/109.2405adcf.js"><link rel="prefetch" href="/vuebloger/assets/js/11.61fef990.js"><link rel="prefetch" href="/vuebloger/assets/js/110.b91858ef.js"><link rel="prefetch" href="/vuebloger/assets/js/111.632d87dc.js"><link rel="prefetch" href="/vuebloger/assets/js/112.1650baa8.js"><link rel="prefetch" href="/vuebloger/assets/js/113.546ba6d2.js"><link rel="prefetch" href="/vuebloger/assets/js/114.afc5a900.js"><link rel="prefetch" href="/vuebloger/assets/js/12.831b2cd3.js"><link rel="prefetch" href="/vuebloger/assets/js/13.930f2726.js"><link rel="prefetch" href="/vuebloger/assets/js/14.cdb322ee.js"><link rel="prefetch" href="/vuebloger/assets/js/15.2b2864bd.js"><link rel="prefetch" href="/vuebloger/assets/js/16.8fb37ecf.js"><link rel="prefetch" href="/vuebloger/assets/js/17.c190a72e.js"><link rel="prefetch" href="/vuebloger/assets/js/18.32a8ddc4.js"><link rel="prefetch" href="/vuebloger/assets/js/19.a6e920f2.js"><link rel="prefetch" href="/vuebloger/assets/js/20.8f5eaf18.js"><link rel="prefetch" href="/vuebloger/assets/js/21.6de1dc73.js"><link rel="prefetch" href="/vuebloger/assets/js/22.003a0968.js"><link rel="prefetch" href="/vuebloger/assets/js/23.755fbc7b.js"><link rel="prefetch" href="/vuebloger/assets/js/24.f72a210e.js"><link rel="prefetch" href="/vuebloger/assets/js/25.0d5e9ebb.js"><link rel="prefetch" href="/vuebloger/assets/js/26.1baa8ed4.js"><link rel="prefetch" href="/vuebloger/assets/js/27.cff734d3.js"><link rel="prefetch" href="/vuebloger/assets/js/28.443d29d0.js"><link rel="prefetch" href="/vuebloger/assets/js/29.1bbf7457.js"><link rel="prefetch" href="/vuebloger/assets/js/30.b4dac900.js"><link rel="prefetch" href="/vuebloger/assets/js/32.8fa8e754.js"><link rel="prefetch" href="/vuebloger/assets/js/33.e9ecdcf5.js"><link rel="prefetch" href="/vuebloger/assets/js/34.3a93b63f.js"><link rel="prefetch" href="/vuebloger/assets/js/35.01e7f3c1.js"><link rel="prefetch" href="/vuebloger/assets/js/36.c6f3d3e2.js"><link rel="prefetch" href="/vuebloger/assets/js/37.74e2cbc2.js"><link rel="prefetch" href="/vuebloger/assets/js/38.fee8d0ba.js"><link rel="prefetch" href="/vuebloger/assets/js/39.b24b1f5a.js"><link rel="prefetch" href="/vuebloger/assets/js/4.c7248bb6.js"><link rel="prefetch" href="/vuebloger/assets/js/40.e6dedebe.js"><link rel="prefetch" href="/vuebloger/assets/js/41.33fc599c.js"><link rel="prefetch" href="/vuebloger/assets/js/42.9ba7610e.js"><link rel="prefetch" href="/vuebloger/assets/js/43.d31c9220.js"><link rel="prefetch" href="/vuebloger/assets/js/45.98d0efda.js"><link rel="prefetch" href="/vuebloger/assets/js/46.42b90d67.js"><link rel="prefetch" href="/vuebloger/assets/js/47.cb027916.js"><link rel="prefetch" href="/vuebloger/assets/js/48.b3f2b1d3.js"><link rel="prefetch" href="/vuebloger/assets/js/49.a1ee3758.js"><link rel="prefetch" href="/vuebloger/assets/js/5.cb43f664.js"><link rel="prefetch" href="/vuebloger/assets/js/50.b8fc3649.js"><link rel="prefetch" href="/vuebloger/assets/js/51.079ac320.js"><link rel="prefetch" href="/vuebloger/assets/js/52.3d3e6768.js"><link rel="prefetch" href="/vuebloger/assets/js/53.28ccd73f.js"><link rel="prefetch" href="/vuebloger/assets/js/54.e88b5073.js"><link rel="prefetch" href="/vuebloger/assets/js/55.66be78b3.js"><link rel="prefetch" href="/vuebloger/assets/js/56.3b7d2865.js"><link rel="prefetch" href="/vuebloger/assets/js/57.62e2c23a.js"><link rel="prefetch" href="/vuebloger/assets/js/58.33cf59e0.js"><link rel="prefetch" href="/vuebloger/assets/js/59.aa23eb6e.js"><link rel="prefetch" href="/vuebloger/assets/js/6.7d6d6bf3.js"><link rel="prefetch" href="/vuebloger/assets/js/60.43eca62a.js"><link rel="prefetch" href="/vuebloger/assets/js/61.afde05f3.js"><link rel="prefetch" href="/vuebloger/assets/js/62.5c628d68.js"><link rel="prefetch" href="/vuebloger/assets/js/63.eb06e04f.js"><link rel="prefetch" href="/vuebloger/assets/js/64.e1ff5f6c.js"><link rel="prefetch" href="/vuebloger/assets/js/65.706c019d.js"><link rel="prefetch" href="/vuebloger/assets/js/66.17af5e36.js"><link rel="prefetch" href="/vuebloger/assets/js/67.8fcb1099.js"><link rel="prefetch" href="/vuebloger/assets/js/68.29293823.js"><link rel="prefetch" href="/vuebloger/assets/js/69.b905cf69.js"><link rel="prefetch" href="/vuebloger/assets/js/70.fa5e80e5.js"><link rel="prefetch" href="/vuebloger/assets/js/71.1157139f.js"><link rel="prefetch" href="/vuebloger/assets/js/72.a7dd38b1.js"><link rel="prefetch" href="/vuebloger/assets/js/73.a48ea02e.js"><link rel="prefetch" href="/vuebloger/assets/js/74.1342013a.js"><link rel="prefetch" href="/vuebloger/assets/js/75.13621e01.js"><link rel="prefetch" href="/vuebloger/assets/js/76.b44b084d.js"><link rel="prefetch" href="/vuebloger/assets/js/77.424e06cb.js"><link rel="prefetch" href="/vuebloger/assets/js/78.74a78c34.js"><link rel="prefetch" href="/vuebloger/assets/js/79.a2fc33f8.js"><link rel="prefetch" href="/vuebloger/assets/js/8.b7ec17f9.js"><link rel="prefetch" href="/vuebloger/assets/js/80.19a1ff7e.js"><link rel="prefetch" href="/vuebloger/assets/js/81.771ac916.js"><link rel="prefetch" href="/vuebloger/assets/js/82.cb79a226.js"><link rel="prefetch" href="/vuebloger/assets/js/83.d8e5a649.js"><link rel="prefetch" href="/vuebloger/assets/js/84.d5b9176f.js"><link rel="prefetch" href="/vuebloger/assets/js/85.69e9d8e1.js"><link rel="prefetch" href="/vuebloger/assets/js/86.0d01c452.js"><link rel="prefetch" href="/vuebloger/assets/js/87.d27781eb.js"><link rel="prefetch" href="/vuebloger/assets/js/88.569e125b.js"><link rel="prefetch" href="/vuebloger/assets/js/89.0c7accb5.js"><link rel="prefetch" href="/vuebloger/assets/js/9.6529d756.js"><link rel="prefetch" href="/vuebloger/assets/js/90.e32e8f67.js"><link rel="prefetch" href="/vuebloger/assets/js/91.a5cdd295.js"><link rel="prefetch" href="/vuebloger/assets/js/92.95203972.js"><link rel="prefetch" href="/vuebloger/assets/js/93.06e32369.js"><link rel="prefetch" href="/vuebloger/assets/js/94.0d184ec2.js"><link rel="prefetch" href="/vuebloger/assets/js/95.5a3c328b.js"><link rel="prefetch" href="/vuebloger/assets/js/96.b060bc22.js"><link rel="prefetch" href="/vuebloger/assets/js/97.0f9e444b.js"><link rel="prefetch" href="/vuebloger/assets/js/98.b4a194b4.js"><link rel="prefetch" href="/vuebloger/assets/js/99.3167c0e7.js"><link rel="prefetch" href="/vuebloger/assets/js/vendors~docsearch.02f16de3.js">
    <link rel="stylesheet" href="/vuebloger/assets/css/0.styles.12296c3f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuebloger/" class="home-link router-link-active"><img src="/vuebloger/img/logo.jpeg" alt="邹先生博客记录" class="logo"> <span class="site-name can-hide">邹先生博客记录</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <div style="margin-left:20px;margin-right:20px;">
    音乐
    <div role="switch" class="el-switch"><input type="checkbox" name="" true-value="true" class="el-switch__input"><!----><span class="el-switch__core" style="width:40px;"></span><!----></div> <audio><source src="/vuebloger/mp3/065b_520b_0409_111c898908eab454414c3c326fe77c36.mp3" type="audio/mpeg"></audio></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/technology/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>angular-cdk详解</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk初识" class="sidebar-link">angular-cdk初识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-coercion" class="sidebar-link">@angular/cdk/coercion</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-keycodes" class="sidebar-link">@angular/cdk/keycodes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes常用键码" class="sidebar-link">keycodes常用键码</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes方法" class="sidebar-link">Keycodes方法</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#keycodes使用" class="sidebar-link">Keycodes使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-platform" class="sidebar-link">@angular/cdk/platform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform提供的service" class="sidebar-link">Platform提供的Service</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform里面提供的方法" class="sidebar-link">Platform里面提供的方法</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#platform使用" class="sidebar-link">Platform使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-portal" class="sidebar-link">@angular/cdk/portal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#portals指令" class="sidebar-link">Portals指令</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#portals类-接口" class="sidebar-link">Portals类/接口</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#动态显示componentportal" class="sidebar-link">动态显示ComponentPortal</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#动态显示templateportal" class="sidebar-link">动态显示TemplatePortal</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkportal指令的使用" class="sidebar-link">CdkPortal指令的使用</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkportaloutlet指令使用" class="sidebar-link">CdkPortalOutlet指令使用</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#用法汇总实例" class="sidebar-link">用法汇总实例</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-overlay" class="sidebar-link">@angular/cdk/overlay</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#位置策略-positionstrategy" class="sidebar-link">位置策略(PositionStrategy)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#滑动策略-scrollstrategy" class="sidebar-link">滑动策略(ScrollStrategy)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay-service" class="sidebar-link">Overlay(Service)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay-directive" class="sidebar-link">Overlay(directive)</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#overlay使用" class="sidebar-link">Overlay使用</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-scrolling" class="sidebar-link">@angular/cdk/scrolling</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkscrollable-scrolldispatcher" class="sidebar-link">cdkScrollable/ScrollDispatcher</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#viewportruler" class="sidebar-link">ViewportRuler</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#示例汇总" class="sidebar-link">示例汇总</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkvirtualscrollviewport" class="sidebar-link">CdkVirtualScrollViewport</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-drag-drop" class="sidebar-link">@angular/cdk/drag-drop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdrag" class="sidebar-link">CdkDrag</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdroplist" class="sidebar-link">CdkDropList</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdroplistgroup" class="sidebar-link">CdkDropListGroup</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdraghandle" class="sidebar-link">CdkDragHandle</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdragpreview" class="sidebar-link">CdkDragPreview</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkdragplaceholder" class="sidebar-link">CdkDragPlaceholder</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-observers" class="sidebar-link">@angular/cdk/observers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#contentobserver" class="sidebar-link">ContentObserver</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkobservecontent" class="sidebar-link">CdkObserveContent</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-layout" class="sidebar-link">@angular/cdk/layout</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#breakpointobserver" class="sidebar-link">BreakpointObserver</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#mediamatcher" class="sidebar-link">MediaMatcher</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#breakpoints" class="sidebar-link">Breakpoints</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#示例汇总-2" class="sidebar-link">示例汇总</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-bidi" class="sidebar-link">@angular/cdk/bidi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#directionality" class="sidebar-link">Directionality</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#dir" class="sidebar-link">Dir</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-a11y" class="sidebar-link">@angular/cdk/a11y</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#listkeymanager" class="sidebar-link">ListKeyManager</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focustrap" class="sidebar-link">FocusTrap</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focusmonitor" class="sidebar-link">FocusMonitor</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#focustrapfactory" class="sidebar-link">FocusTrapFactory</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#interactivitychecker" class="sidebar-link">InteractivityChecker</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#liveannouncer" class="sidebar-link">LiveAnnouncer</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#angular-cdk-stepper" class="sidebar-link">@angular/cdk/stepper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstep" class="sidebar-link">CdkStep</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepper" class="sidebar-link">CdkStepper</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdksteplabel" class="sidebar-link">CdkStepLabel</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdksteppernext" class="sidebar-link">CdkStepperNext</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepperprevious" class="sidebar-link">CdkStepperPrevious</a></li><li class="sidebar-sub-header"><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#cdkstepheader" class="sidebar-link">CdkStepHeader</a></li></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#相关策略" class="sidebar-link">相关策略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/technology/angular-cdk%E8%AF%A6%E8%A7%A3.html#资料" class="sidebar-link">资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content__default" data-v-5ae91aa9 data-v-5ae91aa9><h2 id="angular-cdk初识" data-v-5ae91aa9><a href="#angular-cdk初识" class="header-anchor" data-v-5ae91aa9>#</a> angular-cdk初识</h2> <p data-v-5ae91aa9>cdk(Component Dev Kit组件开发包)是Angular官方在开发基于Material Design的组件库时抽象出来单独的一个开发包，里面封装了一些开发组件时的公共逻辑并且跟Material Design 设计无关，可以用来封装自己的组件库或者直接在业务开发中使用。cdk库里面的功能模块有以下几个部分：</p> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>cdk库模块</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Coercion</td> <td style="text-align:left;" data-v-5ae91aa9>常用类型转换工具</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Keycodes</td> <td style="text-align:left;" data-v-5ae91aa9>常用键码</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Accessibility</td> <td style="text-align:left;" data-v-5ae91aa9>放置一些方便与使用者互动的功能</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Bidirectionality</td> <td style="text-align:left;" data-v-5ae91aa9>布局方向</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Dragand Drop</td> <td style="text-align:left;" data-v-5ae91aa9>组件托拽工具类</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Layout</td> <td style="text-align:left;" data-v-5ae91aa9>响应式布局工具</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Observers</td> <td style="text-align:left;" data-v-5ae91aa9>监听内容变化</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Overlay</td> <td style="text-align:left;" data-v-5ae91aa9>处理页面的弹出层</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Platform</td> <td style="text-align:left;" data-v-5ae91aa9>获取平台信息，以及平台支持的功能</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Portal</td> <td style="text-align:left;" data-v-5ae91aa9>动态内容呈现</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Scrolling</td> <td style="text-align:left;" data-v-5ae91aa9>处理滚动</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Text field</td> <td style="text-align:left;" data-v-5ae91aa9>处理文字的输入</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Stepper</td> <td style="text-align:left;" data-v-5ae91aa9>类似工作流里面经常用到的分步填写表单</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Table</td> <td style="text-align:left;" data-v-5ae91aa9>表格</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>Tree</td> <td style="text-align:left;" data-v-5ae91aa9>树</td></tr></tbody></table> <h2 id="angular-cdk-coercion" data-v-5ae91aa9><a href="#angular-cdk-coercion" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/coercion</h2> <p data-v-5ae91aa9>coercion模块提供常用类型转换工具，转number、转boolean、转array、转CSS pixel value。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  coerceArray<span class="token punctuation" data-v-5ae91aa9>,</span>
  coerceBooleanProperty<span class="token punctuation" data-v-5ae91aa9>,</span>
  coerceNumberProperty<span class="token punctuation" data-v-5ae91aa9>,</span>
  _isNumberValue<span class="token punctuation" data-v-5ae91aa9>,</span>
   coerceCssPixelValue<span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/coercion&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;coercion&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;./coercion.component.html&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>&quot;./coercion.component.scss&quot;</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CoercionComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> a <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 转化为array</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> aa <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>coerceArray</span><span class="token punctuation" data-v-5ae91aa9>(</span>a<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>aa<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 转化为boolean</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> b <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>coerceBooleanProperty</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;true&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>b<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 转化为number</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> c <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>coerceNumberProperty</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;10.0&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>c<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;是否是number类型: &quot;</span> <span class="token operator" data-v-5ae91aa9>+</span> <span class="token function" data-v-5ae91aa9>coerceNumberProperty</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'a'</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>coerceNumberFallback</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 判断是否number</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> isNum <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>_isNumberValue</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'d'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>isNum<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 转CSS pixel value</span>
     console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;转CSS像素: &quot;</span> <span class="token operator" data-v-5ae91aa9>+</span> <span class="token function" data-v-5ae91aa9>coerceCssPixelValue</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'10'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 当转number的时候发生了错误时候的返回值
     */</span>
    <span class="token function" data-v-5ae91aa9>coerceNumberFallback</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token number" data-v-5ae91aa9>10</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-keycodes" data-v-5ae91aa9><a href="#angular-cdk-keycodes" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/keycodes</h2> <h3 id="keycodes常用键码" data-v-5ae91aa9><a href="#keycodes常用键码" class="header-anchor" data-v-5ae91aa9>#</a> keycodes常用键码</h3> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>MAC_ENTER</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>3</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>BACKSPACE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>8</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>TAB</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>9</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUM_CENTER</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>12</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>ENTER</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>13</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SHIFT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>16</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>CONTROL</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>17</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>ALT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>18</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PAUSE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>19</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>CAPS_LOCK</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>20</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>ESCAPE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>27</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SPACE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>32</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PAGE_UP</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>33</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PAGE_DOWN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>34</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>END</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>35</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>HOME</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>36</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>LEFT_ARROW</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>37</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>UP_ARROW</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>38</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>RIGHT_ARROW</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>39</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>DOWN_ARROW</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>40</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PLUS_SIGN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>43</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PRINT_SCREEN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>44</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>INSERT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>45</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>DELETE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>46</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>ZERO</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>48</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>ONE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>49</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>TWO</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>50</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>THREE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>51</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FOUR</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>52</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FIVE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>53</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SIX</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>54</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SEVEN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>55</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>EIGHT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>56</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NINE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>57</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_SEMICOLON</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>59</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_EQUALS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>61</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>QUESTION_MARK</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>63</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>AT_SIGN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>64</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>A</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>65</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>B</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>66</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>C</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>67</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>D</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>68</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>E</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>69</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>70</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>G</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>71</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>H</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>72</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>I</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>73</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>J</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>74</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>K</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>75</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>L</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>76</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>M</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>77</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>N</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>78</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>O</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>79</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>P</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>80</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>Q</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>81</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>R</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>82</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>S</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>83</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>T</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>84</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>U</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>85</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>V</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>86</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>W</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>87</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>X</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>88</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>Y</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>89</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>Z</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>90</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>META</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>91</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>MAC_WK_CMD_LEFT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>91</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>MAC_WK_CMD_RIGHT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>93</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>CONTEXT_MENU</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>93</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_ZERO</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>96</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_ONE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>97</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_TWO</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>98</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_THREE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>99</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_FOUR</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>100</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_FIVE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>101</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_SIX</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>102</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_SEVEN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>103</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_EIGHT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>104</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_NINE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>105</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_MULTIPLY</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>106</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_PLUS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>107</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_MINUS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>109</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_PERIOD</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>110</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUMPAD_DIVIDE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>111</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F1</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>112</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F2</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>113</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F3</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>114</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F4</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>115</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F5</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>116</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F6</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>117</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F7</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>118</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F8</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>119</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F9</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>120</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F10</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>121</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F11</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>122</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>F12</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>123</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>NUM_LOCK</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>144</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SCROLL_LOCK</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>145</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FIRST_MEDIA</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>166</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_MINUS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>173</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>MUTE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>173</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>VOLUME_DOWN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>174</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>VOLUME_UP</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>175</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_MUTE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>181</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_VOLUME_DOWN</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>182</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>LAST_MEDIA</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>183</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>FF_VOLUME_UP</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>183</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SEMICOLON</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>186</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>EQUALS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>187</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>COMMA</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>188</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>DASH</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>189</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SLASH</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>191</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>APOSTROPHE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>192</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>TILDE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>192</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>OPEN_SQUARE_BRACKET</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>219</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>BACKSLASH</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>220</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>CLOSE_SQUARE_BRACKET</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>221</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>SINGLE_QUOTE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>222</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>MAC_META</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>224</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>96</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>97</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>98</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>99</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>100</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>101</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>102</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>103</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>104</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>105</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>106</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>107</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>108</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>109</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>110</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>111</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>112</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>113</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>114</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>115</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>116</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>117</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>118</span><br data-v-5ae91aa9></div></div><h3 id="keycodes方法" data-v-5ae91aa9><a href="#keycodes方法" class="header-anchor" data-v-5ae91aa9>#</a> Keycodes方法</h3> <p data-v-5ae91aa9>就提供了一个方法hasModifierKey，判断是否按下了组合键。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>type</span> ModifierKey <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>'altKey'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'shiftKey'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'ctrlKey'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'metaKey'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 判断是否是按下了组合按钮，比如 alt + c 键
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>function</span> <span class="token function" data-v-5ae91aa9>hasModifierKey</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> KeyboardEvent<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token operator" data-v-5ae91aa9>...</span>modifiers<span class="token operator" data-v-5ae91aa9>:</span> ModifierKey<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span></span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>boolean</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9></div></div><h3 id="keycodes使用" data-v-5ae91aa9><a href="#keycodes使用" class="header-anchor" data-v-5ae91aa9>#</a> Keycodes使用</h3> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token constant" data-v-5ae91aa9>DELETE</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token constant" data-v-5ae91aa9>ENTER</span><span class="token punctuation" data-v-5ae91aa9>,</span> hasModifierKey<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token constant" data-v-5ae91aa9>MAC_ENTER</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token constant" data-v-5ae91aa9>TAB</span><span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/keycodes'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-key-codes'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;input placeholder=&quot;keycodes测试&quot; (keyup)=&quot;onKeyDown($event)&quot; #input&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-key-codes.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkKeyCodesComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token function" data-v-5ae91aa9>onKeyDown</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 组合按键判断(如果按下的是 ctr按键 + 其他的按键的时候 返回true)
         */</span>
        <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function" data-v-5ae91aa9>hasModifierKey</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token string" data-v-5ae91aa9>'ctrlKey'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 打印按键值
         */</span>
        <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>keyCode<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 通过 cdk 判断按键类型
         */</span>
        <span class="token keyword" data-v-5ae91aa9>switch</span> <span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>keyCode<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>case</span> <span class="token constant" data-v-5ae91aa9>MAC_ENTER</span><span class="token operator" data-v-5ae91aa9>:</span>
            <span class="token keyword" data-v-5ae91aa9>case</span> <span class="token constant" data-v-5ae91aa9>ENTER</span><span class="token operator" data-v-5ae91aa9>:</span>
                <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'当前按键: Enter键'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token keyword" data-v-5ae91aa9>break</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            <span class="token keyword" data-v-5ae91aa9>case</span> <span class="token constant" data-v-5ae91aa9>TAB</span><span class="token operator" data-v-5ae91aa9>:</span>
                <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'当前按键: Tab键'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token keyword" data-v-5ae91aa9>break</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            <span class="token keyword" data-v-5ae91aa9>case</span> <span class="token constant" data-v-5ae91aa9>DELETE</span><span class="token operator" data-v-5ae91aa9>:</span>
                <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'当前按键: Delete键'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token keyword" data-v-5ae91aa9>break</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-platform" data-v-5ae91aa9><a href="#angular-cdk-platform" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/platform</h2> <p data-v-5ae91aa9>platform用于获取当前平台的信息以及当前平台支持的功能,Platform里面给提供了PlatformModule模块，使用之前先imports</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>PlatformModule<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/platform'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>NgModule</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    imports<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        PlatformModule<span class="token punctuation" data-v-5ae91aa9>,</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>AppModule</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9></div></div><h3 id="platform提供的service" data-v-5ae91aa9><a href="#platform提供的service" class="header-anchor" data-v-5ae91aa9>#</a> Platform提供的Service</h3> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>Platform类属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>ANDROID</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否android系统</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>IOS</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否IOS系统</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>isBrowser</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否浏览器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>EDGE</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否edge浏览器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>FIREFOX</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否firefox浏览器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>SAFARI</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台是否safari浏览器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>TRIDENT</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台浏览器的render engine是否为Microsoft Trident</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>WEBKIT</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台浏览器的render engine是否为Webkit</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>BLINK</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前平台浏览器的render engine是否为Blink</td></tr></tbody></table> <h3 id="platform里面提供的方法" data-v-5ae91aa9><a href="#platform里面提供的方法" class="header-anchor" data-v-5ae91aa9>#</a> Platform里面提供的方法</h3> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>Platform模块方法</th> <th style="text-align:left;" data-v-5ae91aa9>参数</th> <th style="text-align:left;" data-v-5ae91aa9>返回值</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>getSupportedInputTypes</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>Set</td> <td style="text-align:left;" data-v-5ae91aa9>当前浏览器支持的输入类型(比如color, button, checkbox, date等)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>supportsPassiveEventListeners</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前浏览器是否支持被动事件监听器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>normalizePassiveListenerOptions</td> <td style="text-align:left;" data-v-5ae91aa9>AddEventListenerOptions</td> <td style="text-align:left;" data-v-5ae91aa9>AddEventListenerOptions 或者 boolean</td> <td style="text-align:left;" data-v-5ae91aa9>目前还不清楚是干啥的，待补充</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>supportsScrollBehavior</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>boolean</td> <td style="text-align:left;" data-v-5ae91aa9>当前浏览器是否支持滑动行为</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>getRtlScrollAxisType</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>RtlScrollAxisType</td> <td style="text-align:left;" data-v-5ae91aa9>获取当前浏览器使用的RTL滚动轴的类型(Chrome的是NORMAL, Firefox和 Safari的是NEGATED, IE和Edge的是INVERTED.)</td></tr></tbody></table> <h3 id="platform使用" data-v-5ae91aa9><a href="#platform使用" class="header-anchor" data-v-5ae91aa9>#</a> Platform使用</h3> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>// Platform 服务</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  Platform<span class="token punctuation" data-v-5ae91aa9>,</span>
  supportsPassiveEventListeners<span class="token punctuation" data-v-5ae91aa9>,</span>
  getSupportedInputTypes<span class="token punctuation" data-v-5ae91aa9>,</span>
  supportsScrollBehavior
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/platform&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;platform&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;./platform.component.html&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>&quot;./platform.component.scss&quot;</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>PlatformComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> plat<span class="token operator" data-v-5ae91aa9>:</span> Platform</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>

  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 是否支持被动监听</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> isSupportsPassiveEventListeners <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>supportsPassiveEventListeners</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;isSupportsPassiveEventListeners&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>isSupportsPassiveEventListeners<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
   <span class="token comment" data-v-5ae91aa9>// 是否支持滑动行为</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> supportsScrollBehavior <span class="token operator" data-v-5ae91aa9>=</span> <span class="token function" data-v-5ae91aa9>supportsScrollBehavior</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;supportsScrollBehavior&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>supportsScrollBehavior<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 支持输入的类型</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> supportedInputTypes <span class="token operator" data-v-5ae91aa9>=</span> Array<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>from</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function" data-v-5ae91aa9>getSupportedInputTypes</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>join</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>', '</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;supportedInputTypes&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> supportedInputTypes<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否安卓</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>ANDROID</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>ANDROID</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否IOS</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>IOS</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>IOS</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否BLINK引擎</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>BLINK</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>BLINK</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否DEGE浏览器</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>EDGE</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>EDGE</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否FIREFOX浏览器</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>FIREFOX</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>FIREFOX</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否SAFARI</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>SAFARI</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>SAFARI</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否TRIDENT</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>TRIDENT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>TRIDENT</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否WEBKIT</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> <span class="token constant" data-v-5ae91aa9>WEBKIT</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>WEBKIT</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 是否浏览器</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> isBrowser <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>plat<span class="token punctuation" data-v-5ae91aa9>.</span>isBrowser<span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-portal" data-v-5ae91aa9><a href="#angular-cdk-portal" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/portal</h2> <p data-v-5ae91aa9>portal将动态内容(这个内容可以是Component也可以是一个TemplateRef)呈现到应用程序中。即把Portal放到指定位置(我们把他叫做插槽PortalOutlet)。Portal有两个子类ComponentPortal(对应组件)或者TemplatePortal(对应TemplateRef)。</p> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>Portal:表示内容。PortalOutlet: 放置内容的位置。</p> <p data-v-5ae91aa9>在使用Portals之前我们先要import PortalModule。</p></div> <h3 id="portals指令" data-v-5ae91aa9><a href="#portals指令" class="header-anchor" data-v-5ae91aa9>#</a> Portals指令</h3> <h4 id="cdkportal" data-v-5ae91aa9><a href="#cdkportal" class="header-anchor" data-v-5ae91aa9>#</a> CdkPortal</h4> <ol data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortal extends TemplatePortal</li></ol> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: <code data-v-5ae91aa9>[cdk-portal] [cdkPortal] [portal]</code></li> <li data-v-5ae91aa9>Exported as: cdkPortal</li> <li data-v-5ae91aa9>CdkPortal指令继承自TemplatePortal，CdkPortal指令代表当前元素是一个Portal，这个Portal是可以放置到PortalOutlet里面去的。</li> <li data-v-5ae91aa9>注意：CdkPortal指令没有提供@Input()和@Output()。</li></ul> <ol start="2" data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortal指令里面的属性(其实就是TemplatePortal的属性)</li></ol> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>CdkPortal属性</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>context: <code data-v-5ae91aa9>C | undefined</code></td> <td style="text-align:left;" data-v-5ae91aa9>ng-template需要传递的参数，可以参考ngTemplateOutletContext的用法</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>isAttached: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>是否attach到节点里面去了</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>templateRef: TemplateRef</td> <td style="text-align:left;" data-v-5ae91aa9>嵌入视图</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>viewContainerRef: ViewContainerRef</td> <td style="text-align:left;" data-v-5ae91aa9>视图容器(内部会通过上下文拿到)，内部应该是要通过视图容器来插入元素</td></tr></tbody></table> <ol start="3" data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortal指令里面的方法</li></ol> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * 把CdkPortal对应的Portal attach 到 PortalOutlet里面去(把组件显示出来)
 * @Param host PortalOutlet
 * @Param context ng-template需要传入的内容
 */</span>
<span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet<span class="token punctuation" data-v-5ae91aa9>,</span> context<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>undefined</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 把CdkPortal对应的Portal从PortalOutlet detach移除掉
 */</span>
<span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9></div></div><h4 id="cdkportaloutlet" data-v-5ae91aa9><a href="#cdkportaloutlet" class="header-anchor" data-v-5ae91aa9>#</a> CdkPortalOutlet</h4> <ol data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortalOutlet extends BasePortalOutlet</li></ol> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: <code data-v-5ae91aa9>[cdkPortalOutlet], [cdkPortalHost], [portalHost]</code></li></ul> <ol start="2" data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortalOutlet指令里面的属性</li></ol> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9></th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>portal: <code data-v-5ae91aa9>Portal | null</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Input(cdkPortalOutlet)</td> <td style="text-align:left;" data-v-5ae91aa9>CdkPortalOutlet位置attach的Portal</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>attached: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>当有Portal attach到CdkPortalOutlet位置的时候会回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>attachedRef: CdkPortalOutletAttachedRef</td> <td style="text-align:left;" data-v-5ae91aa9></td> <td style="text-align:left;" data-v-5ae91aa9>已经attach的宿主视图或者嵌入视图(ComponentRef-Component提供</td></tr></tbody></table> <ol start="3" data-v-5ae91aa9><li data-v-5ae91aa9>CdkPortalOutlet指令里面的方法</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/** 是否有Portal attach到当前PortalOutlet上了 */</span>
<span class="token function" data-v-5ae91aa9>hasAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 把Portal(ComponentPortal、TemplatePortal) attach 到PortalOutlet上去
 */</span>
attach<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> ComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
attach<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> EmbeddedViewRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 把ComponentPortal attach 到PortalOutlet上去，使用ComponentFactoryResolver
 */</span>
attachComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> ComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 把TemplatePortal attach 到PortalOutlet上去，使用ComponentFactoryResolver
 */</span>
attachTemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> EmbeddedViewRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 把当前PortalOutlet里面的Portal detach掉
 */</span>
<span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 永久性的dispatch掉Portal
 */</span>
<span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9></div></div><h3 id="portals类-接口" data-v-5ae91aa9><a href="#portals类-接口" class="header-anchor" data-v-5ae91aa9>#</a> Portals类/接口</h3> <h4 id="portal类" data-v-5ae91aa9><a href="#portal类" class="header-anchor" data-v-5ae91aa9>#</a> Portal类</h4> <p data-v-5ae91aa9>Portal类代表我们将要显示的动态内容。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * Portal代表动态内容(可以代表)
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>abstract</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>Portal</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _attachedHost<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Portal attach 到PortalOutlet里面去 */</span>
    <span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 把Portal从PortalOutlet里面移除掉*/</span>
    <span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 当前portal是否attach到PortalOutlet上了
     */</span>
    <span class="token keyword" data-v-5ae91aa9>readonly</span> isAttached<span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>boolean</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 在 attach() 和 detach()调用的时候，这个函数会被PortalOutlet调用。我们使用的时候是不需要调用这个函数的
     */</span>
    <span class="token function" data-v-5ae91aa9>setAttachedHost</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9></div></div><h4 id="componentportal-extends-portal" data-v-5ae91aa9><a href="#componentportal-extends-portal" class="header-anchor" data-v-5ae91aa9>#</a> ComponentPortal extends Portal</h4> <p data-v-5ae91aa9>ComponentPortal类是组件视图对应的Portal，重点在构造函数。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * Portal代表动态内容(可以代表)
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>abstract</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>Portal</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _attachedHost<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Portal attach 到PortalOutlet里面去 */</span>
    <span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 把Portal从PortalOutlet里面移除掉*/</span>
    <span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 当前portal是否attach到PortalOutlet上了
     */</span>
    <span class="token keyword" data-v-5ae91aa9>readonly</span> isAttached<span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>boolean</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 在 attach() 和 detach()调用的时候，这个函数会被PortalOutlet调用。我们使用的时候是不需要调用这个函数的
     */</span>
    <span class="token function" data-v-5ae91aa9>setAttachedHost</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9></div></div><h4 id="componentportal-extends-portal-2" data-v-5ae91aa9><a href="#componentportal-extends-portal-2" class="header-anchor" data-v-5ae91aa9>#</a> ComponentPortal extends Portal</h4> <p data-v-5ae91aa9>ComponentPortal类是组件视图对应的Portal，重点在构造函数。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * ComponentPortal组件对应的Portal
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>Portal</span><span class="token operator" data-v-5ae91aa9>&lt;</span>ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    component<span class="token operator" data-v-5ae91aa9>:</span> ComponentType<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    viewContainerRef<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    injector<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> Injector <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    componentFactoryResolver<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 构造函数
     * @param component: 组件
     * @param viewContainerRef: 试图容器
     * @param injector: 注入器(用它来给组件传递参数)，关于怎么传递参数，我们会在下面的实例里面讲到
     * @param componentFactoryResolver： 组件工厂解析器
     */</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>component<span class="token operator" data-v-5ae91aa9>:</span> ComponentType<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>,</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>,</span> injector<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> Injector <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>,</span> componentFactoryResolver<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9></div></div><h4 id="templateportal-extends-portal" data-v-5ae91aa9><a href="#templateportal-extends-portal" class="header-anchor" data-v-5ae91aa9>#</a> TemplatePortal extends Portal</h4> <p data-v-5ae91aa9>TemplatePortal类是嵌入视图对应的Portal，</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * TemplatePortal是嵌入试图对应的Portal
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>TemplatePortal</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span> <span class="token operator" data-v-5ae91aa9>=</span> any<span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>Portal</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    templateRef<span class="token operator" data-v-5ae91aa9>:</span> TemplateRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    context<span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>undefined</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     *
     * @param template: 嵌入试图对应的模板
     * @param viewContainerRef： 试图容器
     * @param context： 嵌入试图需要传递的参数
     */</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>template<span class="token operator" data-v-5ae91aa9>:</span> TemplateRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>,</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span> context<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    readonly origin<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>host<span class="token operator" data-v-5ae91aa9>:</span> PortalOutlet<span class="token punctuation" data-v-5ae91aa9>,</span> context<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>undefined</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>C</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9></div></div><h4 id="portaloutlet" data-v-5ae91aa9><a href="#portaloutlet" class="header-anchor" data-v-5ae91aa9>#</a> PortalOutlet</h4> <p data-v-5ae91aa9>PortalOutlet是代表我们动态内容需要放置的地方(插槽)，用来放置ComponentPortal或者TemplatePortal。 PortalOutlet是一个接口。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * Portal所要放置的位置
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>interface</span> <span class="token class-name" data-v-5ae91aa9>PortalOutlet</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 把Portal对应的内容放置在PortalOutlet
     */</span>
    <span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> Portal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>any</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * D把PortalOutlet的内容移除掉
     */</span>
    <span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>any</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 在destroyed之前清理掉 PortalOutlet里面的内容，一帮我们自己很少调用
     */</span>
    <span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 判断PortalOutlet里面是否attach了Portal
     */</span>
    <span class="token function" data-v-5ae91aa9>hasAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>boolean</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9></div></div><h4 id="baseportaloutlet-implements-portaloutlet" data-v-5ae91aa9><a href="#baseportaloutlet-implements-portaloutlet" class="header-anchor" data-v-5ae91aa9>#</a> BasePortalOutlet implements PortalOutlet</h4> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
 * BasePortalOutlet是一个抽象类，实现了PortalOutlet，话句话说BasePortalOutlet实现了ComponentPortal、 TemplatePortal的放置
 * ComponentPortal and TemplatePortal.
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>abstract</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>BasePortalOutlet</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>PortalOutlet</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>protected</span> _attachedPortal<span class="token operator" data-v-5ae91aa9>:</span> Portal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _disposeFn<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _isDisposed<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 判断PortalOutlet里面是否attach了Portal
     */</span>
    <span class="token function" data-v-5ae91aa9>hasAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>boolean</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 在PortalOutlet里面放置ComponentPortal
     */</span>
    attach<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> ComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 在PortalOutlet里面放置TemplatePortal
     */</span>
    attach<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> EmbeddedViewRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>any</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>any</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>abstract</span> attachComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> ComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>abstract</span> attachTemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> EmbeddedViewRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 把PortalOutlet的内容移除掉
     */</span>
    <span class="token function" data-v-5ae91aa9>detach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     *  永久性的移除PortalOutlet的内容，在destroy之前调用
     */</span>
    <span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** @docs-private */</span>
    <span class="token function" data-v-5ae91aa9>setDisposeFn</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function-variable function" data-v-5ae91aa9>fn</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _invokeDisposeFn<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9></div></div><h4 id="domportaloutlet-extends-baseportaloutlet" data-v-5ae91aa9><a href="#domportaloutlet-extends-baseportaloutlet" class="header-anchor" data-v-5ae91aa9>#</a> DomPortalOutlet extends BasePortalOutlet</h4> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>/**
* Dom 形式下的PortalOutlet
*/</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DomPortalOutlet</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>BasePortalOutlet</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * PortalOutlet 对应的Element，Portal的内容将会添加在这个Element下面
     */</span>
    outletElement<span class="token operator" data-v-5ae91aa9>:</span> Element<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _componentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _appRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _defaultInjector<span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     *
     * @param outletElement: PortalOutlet对应的节点Element，Portal添加的位置
     * @param _componentFactoryResolver：组件工厂解析器
     * @param _appRef：变化检测工具类
     * @param _defaultInjector：注入器，用于传递参数
     */</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
        <span class="token comment" data-v-5ae91aa9>/** Element into which the content is projected. */</span>
        outletElement<span class="token operator" data-v-5ae91aa9>:</span> Element<span class="token punctuation" data-v-5ae91aa9>,</span> _componentFactoryResolver<span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span> _appRef<span class="token operator" data-v-5ae91aa9>:</span> ApplicationRef<span class="token punctuation" data-v-5ae91aa9>,</span> _defaultInjector<span class="token operator" data-v-5ae91aa9>:</span> Injector<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * attach ComponentPortal
     */</span>
    attachComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> ComponentPortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * attach TemplatePortal
     */</span>
    attachTemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span>portal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> EmbeddedViewRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>C</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 情况DomPortalOutlet下面所有的Portal
     */</span>
    <span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Gets the root HTMLElement for an instantiated component. */</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _getComponentRootNode<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9></div></div><h3 id="动态显示componentportal" data-v-5ae91aa9><a href="#动态显示componentportal" class="header-anchor" data-v-5ae91aa9>#</a> 动态显示ComponentPortal</h3> <p data-v-5ae91aa9>动态显示宿主视图(Host View),由Component提供，也就是我们常说的组件了。第一步，我们肯定会有一个自定义的组件的。比如我们新建一个非常简单的组件PortalChildComponent，并且给组件传递一个参数.</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> EventEmitter<span class="token punctuation" data-v-5ae91aa9>,</span> Inject<span class="token punctuation" data-v-5ae91aa9>,</span> InjectionToken<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>/**
 * 用于动态创建PortalChildComponent的时候传递参数
 */</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>const</span> <span class="token constant" data-v-5ae91aa9>PORTAL_CHILD_DATA</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>InjectionToken</span><span class="token operator" data-v-5ae91aa9>&lt;</span>any<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'PORTAL_CHILD_DATA'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-portal-child'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;h1&gt;portal child show&lt;/h1&gt;
        &lt;button (click)=&quot;onButtonClick()&quot;&gt;点击&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>PortalChildComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    outEvent<span class="token operator" data-v-5ae91aa9>:</span> EventEmitter<span class="token operator" data-v-5ae91aa9>&lt;</span>string<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 构造函数
     * @param initData 创建组件的时候传递过来的参数(为了测试用了any类型，推荐根据业务使用特定的类型，尽量不要使用any)
     */</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>@<span class="token function" data-v-5ae91aa9>Inject</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token constant" data-v-5ae91aa9>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token keyword" data-v-5ae91aa9>public</span> initData<span class="token operator" data-v-5ae91aa9>:</span> any</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>initData<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 用来测试把Portal里面的事件返回上去
     */</span>
    <span class="token function" data-v-5ae91aa9>onButtonClick</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>outEvent <span class="token operator" data-v-5ae91aa9>!=</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>outEvent<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>emit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'child 里面被点击了'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>因为PortalChildComponent是动态组件，所以@NgModule里面除了declarations里面需要添加PortalChildComponent，entryComponents里面也需要添加PortalChildComponent</p></div> <p data-v-5ae91aa9>第二步，动态显示PortalChildComponent，这里我们新建一个PortalComponentComponent 组件，把PortalChildComponent动态的添加到PortalComponentComponent里面去。(注意下是怎么传递参数的,传出参数，业务绝大部分的场景都是需要给动态组件传递参数的)</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    ApplicationRef<span class="token punctuation" data-v-5ae91aa9>,</span>
    Component<span class="token punctuation" data-v-5ae91aa9>,</span>
    ComponentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span> ComponentRef<span class="token punctuation" data-v-5ae91aa9>,</span>
    ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> EventEmitter<span class="token punctuation" data-v-5ae91aa9>,</span>
    Injector<span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy<span class="token punctuation" data-v-5ae91aa9>,</span>
    OnInit<span class="token punctuation" data-v-5ae91aa9>,</span>
    ViewContainerRef
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ComponentPortal<span class="token punctuation" data-v-5ae91aa9>,</span> DomPortalHost<span class="token punctuation" data-v-5ae91aa9>,</span> PortalInjector<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token constant" data-v-5ae91aa9>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-5ae91aa9>,</span> PortalChildComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'../portal-child-component/portal-child.component'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Subject<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;rxjs&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>takeUntil<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;rxjs/operators&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-portal-component'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>PortalComponentComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> portalHost<span class="token operator" data-v-5ae91aa9>:</span> DomPortalHost<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _$destroy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>Subject</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
        <span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token keyword" data-v-5ae91aa9>private</span> injector<span class="token operator" data-v-5ae91aa9>:</span> Injector<span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token keyword" data-v-5ae91aa9>private</span> appRef<span class="token operator" data-v-5ae91aa9>:</span> ApplicationRef<span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token keyword" data-v-5ae91aa9>private</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token keyword" data-v-5ae91aa9>private</span> componentFactoryResolver<span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span></span>
    <span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// 1. 创建DomPortalHost</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>portalHost <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>DomPortalHost</span><span class="token punctuation" data-v-5ae91aa9>(</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>elementRef<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement <span class="token keyword" data-v-5ae91aa9>as</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>componentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>appRef<span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>injector
        <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// injectionTokens用于传递参数，如果不想传递参数，直接const templatePortal = new ComponentPortal(PortalChildComponent) 就可以了</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> injectionTokens <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>WeakMap</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        injectionTokens<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token keyword" data-v-5ae91aa9>set</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token constant" data-v-5ae91aa9>PORTAL_CHILD_DATA</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token string" data-v-5ae91aa9>'构建组件传递的参数'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 2. 创建ComponentPortal</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> templatePortal <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>PortalChildComponent
            <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewContainerRef
            <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>PortalInjector</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>injector<span class="token punctuation" data-v-5ae91aa9>,</span> injectionTokens<span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>componentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 3. ComponentPortal attach 到DomPortalHost里面去, 并且把ComponentPortal里面的时间返回上来</span>
        <span class="token comment" data-v-5ae91aa9>// 如果不需要传出参数，this.portalHost.attach(templatePortal); 就可以了</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> portalComponentRef<span class="token operator" data-v-5ae91aa9>:</span> ComponentRef<span class="token operator" data-v-5ae91aa9>&lt;</span>PortalChildComponent<span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>portalHost<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attachComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>templatePortal<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 处理返回回来的事件</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> eventEmitter<span class="token operator" data-v-5ae91aa9>:</span> EventEmitter<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>string</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>EventEmitter</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>string</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        portalComponentRef<span class="token punctuation" data-v-5ae91aa9>.</span>instance<span class="token punctuation" data-v-5ae91aa9>.</span>outEvent <span class="token operator" data-v-5ae91aa9>=</span> eventEmitter<span class="token punctuation" data-v-5ae91aa9>;</span>
        eventEmitter<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>pipe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function" data-v-5ae91aa9>takeUntil</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_$destroy<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>handlerPortalEvent</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> <span class="token function" data-v-5ae91aa9>handlerPortalEvent</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'收到了Portal返回上来的事件信息:'</span> <span class="token operator" data-v-5ae91aa9>+</span> event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnDestroy</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_$destroy<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>next</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_$destroy<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>complete</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>总结</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>第一动态组件需要在declarations和entryComponents里面申明。</li> <li data-v-5ae91aa9>第二动态组件传入参数。(@Input())</li> <li data-v-5ae91aa9>第三动态组件传出参数。(@Output())</li></ul></div> <h3 id="动态显示templateportal" data-v-5ae91aa9><a href="#动态显示templateportal" class="header-anchor" data-v-5ae91aa9>#</a> 动态显示TemplatePortal</h3> <p data-v-5ae91aa9>动态显示嵌入视图(Embedded View),由Template提供，和我们常说的ng-template标签对应。把ng-template的内容在指定的位置显示出来。下面的例子我们创建一个PortalTemplateComponent组件，然后把ng-template标签对应的内容在这个组件里面显示出来。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
   ApplicationRef<span class="token punctuation" data-v-5ae91aa9>,</span>
   Component<span class="token punctuation" data-v-5ae91aa9>,</span>
   ComponentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span>
   ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span>
   Injector<span class="token punctuation" data-v-5ae91aa9>,</span>
   OnInit<span class="token punctuation" data-v-5ae91aa9>,</span>
   TemplateRef<span class="token punctuation" data-v-5ae91aa9>,</span>
   ViewChild<span class="token punctuation" data-v-5ae91aa9>,</span>
   ViewContainerRef
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>DomPortalHost<span class="token punctuation" data-v-5ae91aa9>,</span> TemplatePortal<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/portal&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
   selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-portal-template'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
   template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
       &lt;!-- 我们定义一个ng-template节点，并且需要传递一个参数 --&gt;
       &lt;ng-template #portalTemplate let-data&gt;
           &lt;div&gt;参数: {{ data }}&lt;/div&gt;
       &lt;/ng-template&gt;
   </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>PortalTemplateComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
   @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'portalTemplate'</span><span class="token punctuation" data-v-5ae91aa9>)</span> testTemplate<span class="token operator" data-v-5ae91aa9>:</span> TemplateRef<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
   <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
       <span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span>
       <span class="token keyword" data-v-5ae91aa9>private</span> injector<span class="token operator" data-v-5ae91aa9>:</span> Injector<span class="token punctuation" data-v-5ae91aa9>,</span>
       <span class="token keyword" data-v-5ae91aa9>private</span> appRef<span class="token operator" data-v-5ae91aa9>:</span> ApplicationRef<span class="token punctuation" data-v-5ae91aa9>,</span>
       <span class="token keyword" data-v-5ae91aa9>private</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span>
       <span class="token keyword" data-v-5ae91aa9>private</span> componentFactoryResolver<span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span></span>
   <span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
   <span class="token punctuation" data-v-5ae91aa9>}</span>
   <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
       <span class="token comment" data-v-5ae91aa9>// 1. DomPortalHost</span>
       <span class="token keyword" data-v-5ae91aa9>const</span> portalHost <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>DomPortalHost</span><span class="token punctuation" data-v-5ae91aa9>(</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>elementRef<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement <span class="token keyword" data-v-5ae91aa9>as</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>componentFactoryResolver<span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>appRef<span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>injector
       <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
       <span class="token comment" data-v-5ae91aa9>// 2. TemplatePortal</span>
       <span class="token keyword" data-v-5ae91aa9>const</span> templatePortal <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>TemplatePortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>testTemplate<span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token punctuation" data-v-5ae91aa9>{</span>
               $implicit<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;我是传递进来的数据&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
           <span class="token punctuation" data-v-5ae91aa9>}</span>
       <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
       <span class="token comment" data-v-5ae91aa9>// 3. attach</span>
       portalHost<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>templatePortal<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
   <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9></div></div><h3 id="cdkportal指令的使用" data-v-5ae91aa9><a href="#cdkportal指令的使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkPortal指令的使用</h3> <p data-v-5ae91aa9>模板语法中某个标签使用了CdkPortal指令，可以简单的认为这个标签对应的元素就已经被封装成TemplatePortal了。</p> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>添加了CdkPortal指令的元素是不会在页面中显示出来的，除非你给CdkPortal指定了CdkPortalOutlet的位置。即使是div元素你给添加了*cdkPortal也是不会显示出来的。</p></div> <p data-v-5ae91aa9>比如我们有如下的代码，ng-templat和div都添加了CdkPortal指令。如果我们不做任何处理，他们是不会显示的。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>!</span><span class="token operator" data-v-5ae91aa9>--</span> #divPortal<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;cdkPortal&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>CdkPortal指令有exportAs<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'cdkPortal'</span>元数据，所以我们才可以这么写来获取，来获取CdkPortal对象  <span class="token operator" data-v-5ae91aa9>--</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template #divPortal<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;cdkPortal&quot;</span> cdkPortal <span class="token keyword" data-v-5ae91aa9>let</span><span class="token operator" data-v-5ae91aa9>-</span>obj <span class="token keyword" data-v-5ae91aa9>let</span><span class="token operator" data-v-5ae91aa9>-</span>location<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;location&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
    <span class="token operator" data-v-5ae91aa9>&lt;</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template <span class="token function" data-v-5ae91aa9>指定的内容</span><span class="token punctuation" data-v-5ae91aa9>(</span>first<span class="token punctuation" data-v-5ae91aa9>)</span> 外部参数 <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>{</span>obj<span class="token punctuation" data-v-5ae91aa9>.</span>age<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>}</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>!</span><span class="token operator" data-v-5ae91aa9>--</span> 不建议在div上添加<span class="token operator" data-v-5ae91aa9>*</span>cdkPortal指令，完全可以用ng<span class="token operator" data-v-5ae91aa9>-</span>template代替 <span class="token operator" data-v-5ae91aa9>--</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>div <span class="token operator" data-v-5ae91aa9>*</span>cdkPortal<span class="token operator" data-v-5ae91aa9>&gt;</span>
    <span class="token operator" data-v-5ae91aa9>&lt;</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template <span class="token function" data-v-5ae91aa9>指定的内容</span><span class="token punctuation" data-v-5ae91aa9>(</span>last<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>div<span class="token operator" data-v-5ae91aa9>&gt;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>接下来得给他们指定一个位置让他们显示出来。在显示之前，咱们得在对应的ts文件里面得到cdkPortal指令对应的TemplatePortal。使用@ViewChildren，@ViewChild找到他们。</p> <ol data-v-5ae91aa9><li data-v-5ae91aa9>通过@ViewChildren获取CdkPortal，@ViewChildren selector参数是TemplatePortalDirective，这样我们就拿到了当前html里面所有添加了CdkPortal指令的对象的TemplatePortal。</li></ol> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9> <span class="token comment" data-v-5ae91aa9>// 获取到对应html里面所有添加了cdkPortal指令的元素的TemplatePortal</span>
    @<span class="token function" data-v-5ae91aa9>ViewChildren</span><span class="token punctuation" data-v-5ae91aa9>(</span>TemplatePortalDirective<span class="token punctuation" data-v-5ae91aa9>)</span> templatePortals<span class="token operator" data-v-5ae91aa9>:</span> QueryList<span class="token operator" data-v-5ae91aa9>&lt;</span>TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9></div></div><ol start="2" data-v-5ae91aa9><li data-v-5ae91aa9>通过@ViewChild获取指定添加了CdkPortal指令的TemplatePortal，html模板语法里面对应CdkPortal指令标签需要写上#templatePortal=“cdkPortal”</li></ol> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>// 获取单个的cdkPortal指令的元素的TemplatePortal 【#templatePortal=&quot;cdkPortal&quot;】</span>
    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'templatePortal'</span><span class="token punctuation" data-v-5ae91aa9>)</span> divTemplatePortal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>CdkPortal指令对应的视图内容(嵌入视图)已经自动帮我们封装成了TemplatePortal，我们也已经拿到了这些TemplatePortal，剩下的就是在什么位置显示他们了。有两种方式显示他们，第一种自己new DomPortalHost来attach，这个我们上面的例子中有实际的例子、第二种通过CdkPortalOutlet指令来显示。这个也是我们下面要讲到的内容。</p> <h3 id="cdkportaloutlet指令使用" data-v-5ae91aa9><a href="#cdkportaloutlet指令使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkPortalOutlet指令使用</h3> <p data-v-5ae91aa9>CdkPortalOutlet表示添加了该指令的元素是一个PortalOutlet，可以在他上面添加Portal元素。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>TemplatePortal<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-portal'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- Portal显示的位置 --&gt;
        &lt;div class=&quot;demo-portal-host&quot;&gt;
            &lt;!-- cdkPortalOutlet来指定动态内容需要放置的地方，参数是selectedPortal他是一个ComponentPortal或者TemplatePortal
             显示的内容会根据selectedPortal的改变而改变--&gt;
            &lt;ng-template cdkPortalHost [cdkPortalOutlet]=&quot;templatePortal&quot; (attached)=&quot;onPortalAttached()&quot;&gt;&lt;/ng-template&gt;
        &lt;/div&gt;

        &lt;!-- #divPortal=&quot;cdkPortal&quot;,CdkPortal指令有exportAs: 'cdkPortal'元数据，所以我们才可以这么写来获取，来获取CdkPortal对象  --&gt;
        &lt;ng-template #templatePortal=&quot;cdkPortal&quot; cdkPortal&gt;
            &lt;h2&gt; cdkPortalHost cdkPortal 配合使用动态显示&lt;/h2&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-portal.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkPortalComponent</span>  <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// cdkPortal指令对应的Portal</span>
    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'templatePortal'</span><span class="token punctuation" data-v-5ae91aa9>)</span> templatePortal<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortal<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token builtin" data-v-5ae91aa9>any</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>onPortalAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'PortalOutlet 有元素attach上来了'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9></div></div><h3 id="用法汇总实例" data-v-5ae91aa9><a href="#用法汇总实例" class="header-anchor" data-v-5ae91aa9>#</a> 用法汇总实例</h3> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token operator" data-v-5ae91aa9>&lt;</span>h2 <span class="token keyword" data-v-5ae91aa9>class</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;title&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>我是component<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template #portalComponentOutlet cdkPortalOutlet<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span>h2 <span class="token keyword" data-v-5ae91aa9>class</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;title&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>我是template<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template #portalTemplateOutlet cdkPortalOutlet<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span>h2 <span class="token keyword" data-v-5ae91aa9>class</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;title&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>我是会变得<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template <span class="token punctuation" data-v-5ae91aa9>[</span>cdkPortalOutlet<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;greeting&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span>h2 <span class="token keyword" data-v-5ae91aa9>class</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;title&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>我是自动获取的<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>h2<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template <span class="token punctuation" data-v-5ae91aa9>[</span>cdkPortalOutlet<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;myCdkPortal2&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template cdkPortal #myCdkPortal<span class="token operator" data-v-5ae91aa9>&gt;</span>
  我是自动获取的，我是自动获取的
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>

<span class="token operator" data-v-5ae91aa9>&lt;</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template #tpl<span class="token operator" data-v-5ae91aa9>&gt;</span>
  ng template portal
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>ng<span class="token operator" data-v-5ae91aa9>-</span>template<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  Component<span class="token punctuation" data-v-5ae91aa9>,</span>
  OnInit<span class="token punctuation" data-v-5ae91aa9>,</span>
  ViewChild<span class="token punctuation" data-v-5ae91aa9>,</span>
  TemplateRef<span class="token punctuation" data-v-5ae91aa9>,</span>
  ViewContainerRef
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  CdkPortalOutlet<span class="token punctuation" data-v-5ae91aa9>,</span>
  ComponentPortal<span class="token punctuation" data-v-5ae91aa9>,</span>
  TemplatePortal<span class="token punctuation" data-v-5ae91aa9>,</span>
  CdkPortal
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/portal&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> PortalCompComponent <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;./portal-comp/portal-comp.component&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;app-portal&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;./portal.component.html&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>&quot;./portal.component.scss&quot;</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>PortalComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  greeting<span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>;</span>
  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;portalComponentOutlet&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token punctuation" data-v-5ae91aa9>{</span> read<span class="token operator" data-v-5ae91aa9>:</span> CdkPortalOutlet <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
  portalComponentOutlet<span class="token operator" data-v-5ae91aa9>:</span> CdkPortalOutlet<span class="token punctuation" data-v-5ae91aa9>;</span>

  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;portalTemplateOutlet&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token punctuation" data-v-5ae91aa9>{</span> read<span class="token operator" data-v-5ae91aa9>:</span> CdkPortalOutlet <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
  portalTemplateOutlet<span class="token operator" data-v-5ae91aa9>:</span> CdkPortalOutlet<span class="token punctuation" data-v-5ae91aa9>;</span>

  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;myCdkPortal&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token punctuation" data-v-5ae91aa9>{</span> read<span class="token operator" data-v-5ae91aa9>:</span> CdkPortal <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
  myCdkPortal2<span class="token operator" data-v-5ae91aa9>:</span> CdkPortal<span class="token punctuation" data-v-5ae91aa9>;</span>

  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;tpl&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span> tpl<span class="token operator" data-v-5ae91aa9>:</span> TemplateRef<span class="token operator" data-v-5ae91aa9>&lt;</span>any<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>

  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> view<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>

  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>myCdkPortal2<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> componentPortal <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>PortalCompComponent<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> templatePortal <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>TemplatePortal</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>tpl<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>view<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>// attach后不可变</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>portalComponentOutlet<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>componentPortal<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// attach后不可变</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>portalTemplateOutlet<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span>templatePortal<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>// 可以检测自动变更 推荐</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>greeting <span class="token operator" data-v-5ae91aa9>=</span> componentPortal<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>setInterval</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>greeting <span class="token operator" data-v-5ae91aa9>===</span> templatePortal<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>greeting <span class="token operator" data-v-5ae91aa9>=</span> componentPortal<span class="token punctuation" data-v-5ae91aa9>;</span>
      <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>greeting <span class="token operator" data-v-5ae91aa9>=</span> templatePortal<span class="token punctuation" data-v-5ae91aa9>;</span>
      <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>1000</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-overlay" data-v-5ae91aa9><a href="#angular-cdk-overlay" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/overlay</h2> <p data-v-5ae91aa9>cdk Overlay主要用来实现在界面上创建浮动面板，例如弹窗(Dialog)，下拉框(select)等等都可以通过cdk Overlay来实现。OverlayRef(Overlay service里面的create函数创建)就对应着Portals里面的PortalOutlet，Overlay里面我们需要放置的内容就对应着Portals里面的Portal。</p> <p data-v-5ae91aa9>Overlay的使用也很简单，关键在两个地方：位置策略、滑动策略。一个处理overlay的显示位置，一个处理有滑动的时候overlay的动作。</p> <h3 id="位置策略-positionstrategy" data-v-5ae91aa9><a href="#位置策略-positionstrategy" class="header-anchor" data-v-5ae91aa9>#</a> 位置策略(PositionStrategy)</h3> <p data-v-5ae91aa9>位置策略(PositionStrategy)：用来确定overlay在页面中的显示位置。overlay里面提供了OverlayPositionBuilder类来构建PositionStrategy。overlay也给我们提供了三种PositionStrategy：GlobalPositionStrategy、ConnectedPositionStrategy和FlexibleConnectedPositionStrategy。</p> <h4 id="globalpositionstrategy" data-v-5ae91aa9><a href="#globalpositionstrategy" class="header-anchor" data-v-5ae91aa9>#</a> GlobalPositionStrategy</h4> <p data-v-5ae91aa9>当overlay的PositionStrategy设置成GlobalPositionStrategy的时候，overlay的位置是相对整个窗口而言的。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>GlobalPositionStrategy</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>PositionStrategy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay距离上边
     */</span>
    <span class="token function" data-v-5ae91aa9>top</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay距离左边
     */</span>
    <span class="token function" data-v-5ae91aa9>left</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay距离下边
     */</span>
    <span class="token function" data-v-5ae91aa9>bottom</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay距离右边
     */</span>
    <span class="token function" data-v-5ae91aa9>right</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay宽度
     */</span>
    <span class="token function" data-v-5ae91aa9>width</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay 高度
     */</span>
    <span class="token function" data-v-5ae91aa9>height</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 水平居中
     */</span>
    <span class="token function" data-v-5ae91aa9>centerHorizontally</span><span class="token punctuation" data-v-5ae91aa9>(</span>offset<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 垂直居中
     */</span>
    <span class="token function" data-v-5ae91aa9>centerVertically</span><span class="token punctuation" data-v-5ae91aa9>(</span>offset<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token builtin" data-v-5ae91aa9>string</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9></div></div><h4 id="connectedpositionstrategy" data-v-5ae91aa9><a href="#connectedpositionstrategy" class="header-anchor" data-v-5ae91aa9>#</a> ConnectedPositionStrategy</h4> <p data-v-5ae91aa9>当overlay的位置需要依赖于另外一个视图的位置的时候采用该ConnectedPositionStrategy来确定overlay的位置。因为ConnectedPositionStrategy完全可以用FlexibleConnectedPositionStrategy来代替。所有我们直接看FlexibleConnectedPositionStrategy。</p> <h4 id="flexibleconnectedpositionstrategy" data-v-5ae91aa9><a href="#flexibleconnectedpositionstrategy" class="header-anchor" data-v-5ae91aa9>#</a> FlexibleConnectedPositionStrategy</h4> <p data-v-5ae91aa9>overlay的位置依赖于某个视图的位置。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>GlobalPositionStrategy</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>PositionStrategy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 当origin视图位置改变之后，可以调用该函数来重写设置overlay的位置
     */</span>
    <span class="token function" data-v-5ae91aa9>reapplyLastPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * Sets the list of Scrollable containers that host the origin element so that
     * on reposition we can evaluate if it or the overlay has been clipped or outside view. Every
     * Scrollable must be an ancestor element of the strategy's origin element.
     * 看上面英文的意思是，当origin视图包含在CdkScrollable里面的时候，需要设置。我现在还没搞明白这个函数的使用，等后续看了scrolling 看下
     */</span>
    <span class="token function" data-v-5ae91aa9>withScrollableContainers</span><span class="token punctuation" data-v-5ae91aa9>(</span>scrollables<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置overlay的位置 (我们要重点解释下为什么是数组，比如有这种情况，你本来想把overlay放在origin视图的下面的，有可能会有这种情况吧
     * 比如，放下面已经放不下了，在窗口外面去了，这个时候就会去取数组里面的第二个元素布局了)
     * ConnectedPosition其实也很好理解，origin视图的哪个点（originX，originY）和overlay（overlayX， overlayY）重合确定位置
     */</span>
    <span class="token function" data-v-5ae91aa9>withPositions</span><span class="token punctuation" data-v-5ae91aa9>(</span>positions<span class="token operator" data-v-5ae91aa9>:</span> ConnectedPosition<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置overlay相对窗口的margin。确定位置判断的时候会用到
     */</span>
    <span class="token function" data-v-5ae91aa9>withViewportMargin</span><span class="token punctuation" data-v-5ae91aa9>(</span>margin<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置是否限制在窗体内，设置为true的时候withScrollableContainers里面的数组就有效果了
     */</span>
    <span class="token function" data-v-5ae91aa9>withFlexibleDimensions</span><span class="token punctuation" data-v-5ae91aa9>(</span>flexibleDimensions<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Sets whether the overlay can grow after the initial open via flexible width/height. */</span>
    <span class="token function" data-v-5ae91aa9>withGrowAfterOpen</span><span class="token punctuation" data-v-5ae91aa9>(</span>growAfterOpen<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Sets whether the overlay can be pushed on-screen if none of the provided positions fit. */</span>
    <span class="token function" data-v-5ae91aa9>withPush</span><span class="token punctuation" data-v-5ae91aa9>(</span>canPush<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * ScrollStrategy设置RepositionScrollStrategy的时候，
     * 如果是true，overlay会一直跟着origin视图。false的时候，overlay滑倒窗口边缘的时候就不会动了
     */</span>
    <span class="token function" data-v-5ae91aa9>withLockedPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span>isLocked<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置origin视图(overlay依赖的视图)
     */</span>
    <span class="token function" data-v-5ae91aa9>setOrigin</span><span class="token punctuation" data-v-5ae91aa9>(</span>origin<span class="token operator" data-v-5ae91aa9>:</span> ElementRef <span class="token operator" data-v-5ae91aa9>|</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 默认x的偏移量
     */</span>
    <span class="token function" data-v-5ae91aa9>withDefaultOffsetX</span><span class="token punctuation" data-v-5ae91aa9>(</span>offset<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 默认y偏移量
     */</span>
    <span class="token function" data-v-5ae91aa9>withDefaultOffsetY</span><span class="token punctuation" data-v-5ae91aa9>(</span>offset<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9></div></div><h3 id="滑动策略-scrollstrategy" data-v-5ae91aa9><a href="#滑动策略-scrollstrategy" class="header-anchor" data-v-5ae91aa9>#</a> 滑动策略(ScrollStrategy)</h3> <p data-v-5ae91aa9>滑动策略(ScrollStrategy)：当PositionStrategy是ConnectedPositionStrategy或者FlexibleConnectedPositionStrategy的时候，如果overlay依赖的控件位置改变的时候overlay的位置应该怎么变化。</p> <p data-v-5ae91aa9>overlay里面通过ScrollStrategyOptions来创建ScrollStrategy。同样overlay里面也给我们提供了四种ScrollStrategy：NoopScrollStrategy、CloseScrollStrategy、BlockScrollStrategy和RepositionScrollStrategy。</p> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>TIP</p> <p data-v-5ae91aa9>ScrollStrategy的使用一般配合PositionStrategy的ConnectedPositionStrategy、FlexibleConnectedPositionStrategy来使用。因为GlobalPositionStrategy的时候很少有scroll的情况。所以文章中提到的origin指的是overlay依赖的那个视图。</p></div> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>ScrollStrategy</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>NoopScrollStrategy</td> <td style="text-align:left;" data-v-5ae91aa9>origin滚动的时候，overlay位置不动</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>CloseScrollStrategy</td> <td style="text-align:left;" data-v-5ae91aa9>origin位置变动的时候，overlay会自动关掉</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>BlockScrollStrategy</td> <td style="text-align:left;" data-v-5ae91aa9>origin的滚动也消失了，直接把origin的滚动干没了</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>RepositionScrollStrategy</td> <td style="text-align:left;" data-v-5ae91aa9>overlay会跟着origin位置的变动而变动</td></tr></tbody></table> <h3 id="overlay-service" data-v-5ae91aa9><a href="#overlay-service" class="header-anchor" data-v-5ae91aa9>#</a> Overlay(Service)</h3> <p data-v-5ae91aa9>Overlay是一个Service。Overlay主要用来帮我们干三件事：创建OverlayRef(对应overlay视图，然后我们就可以把自定义的组件或者ng-tempalate里面的内容attach到OverlayRef上。这样就是overlay了)、创建PositionStrategy、创建ScrollStrategy。Overlay主要方法介绍：</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>Overlay</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * ScrollStrategyOptions - ScrollStrategy构造
     */</span>
    scrollStrategies<span class="token operator" data-v-5ae91aa9>:</span> ScrollStrategyOptions<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 构造函数，这个我们不用管，我们只需要知道service怎么用就可以了
     */</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
        scrollStrategies<span class="token operator" data-v-5ae91aa9>:</span> ScrollStrategyOptions<span class="token punctuation" data-v-5ae91aa9>,</span> _overlayContainer<span class="token operator" data-v-5ae91aa9>:</span> OverlayContainer
        <span class="token punctuation" data-v-5ae91aa9>,</span> _componentFactoryResolver<span class="token operator" data-v-5ae91aa9>:</span> ComponentFactoryResolver
        <span class="token punctuation" data-v-5ae91aa9>,</span> _positionBuilder<span class="token operator" data-v-5ae91aa9>:</span> OverlayPositionBuilder
        <span class="token punctuation" data-v-5ae91aa9>,</span> _keyboardDispatcher<span class="token operator" data-v-5ae91aa9>:</span> OverlayKeyboardDispatcher
        <span class="token punctuation" data-v-5ae91aa9>,</span> _injector<span class="token operator" data-v-5ae91aa9>:</span> Injector<span class="token punctuation" data-v-5ae91aa9>,</span> _ngZone<span class="token operator" data-v-5ae91aa9>:</span> NgZone
        <span class="token punctuation" data-v-5ae91aa9>,</span> _document<span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>,</span> _directionality<span class="token operator" data-v-5ae91aa9>:</span> Directionality
        <span class="token punctuation" data-v-5ae91aa9>,</span> _location<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> Location <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>undefined</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 创建OverlayRef
     */</span>
    <span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>config<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> OverlayConfig<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> OverlayRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * OverlayPositionBuilder - PositionStrategy构造器
     */</span>
    <span class="token function" data-v-5ae91aa9>position</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> OverlayPositionBuilder<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>默认情况下overlay是直接添加在body的第一次层节点下面的，这部分的内容是通过OverlayContainer Service来实现的。有兴趣的可以看下OverlayContainer内部的实现。同时cdk Overlay里面也给提供了FullscreenOverlayContainer Service用来应对可能我们某些组件需要设置全屏的情况，比如有一个播放节点video。有全屏播放的功能。在全屏播放的时候你也想弹出overlay来的。这个时候就得添加providers: <code data-v-5ae91aa9>[{provide: OverlayContainer, useClass: FullscreenOverlayContainer}]</code>。</p></div> <h3 id="overlay-directive" data-v-5ae91aa9><a href="#overlay-directive" class="header-anchor" data-v-5ae91aa9>#</a> Overlay(directive)</h3> <p data-v-5ae91aa9>cdk Overlay里面给提供了两个指令CdkOverlayOrigin和CdkConnectedOverlay。一个对应origin(overlay定位依赖的视图),一个对应overlay。</p> <h4 id="cdkoverlayorigin" data-v-5ae91aa9><a href="#cdkoverlayorigin" class="header-anchor" data-v-5ae91aa9>#</a> CdkOverlayOrigin</h4> <p data-v-5ae91aa9>添加了CdkOverlayOrigin指令的视图表示该视图是overlay的origin视图。CdkOverlayOrigin指令的使用非常简单没有@Input、@Output。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: <code data-v-5ae91aa9>[cdk-overlay-origin] [overlay-origin] [cdkOverlayOrigin]</code></li> <li data-v-5ae91aa9>Exported as: cdkOverlayOrigin</li></ul> <h4 id="cdkconnectedoverlay" data-v-5ae91aa9><a href="#cdkconnectedoverlay" class="header-anchor" data-v-5ae91aa9>#</a> CdkConnectedOverlay</h4> <p data-v-5ae91aa9>添加了CdkConnectedOverlay指令的嵌入视图元素(一般都是加载ng-template上)表明该嵌入元素是一个overlay。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdk-connected-overlay] [connected-overlay] [cdkConnectedOverlay]</li> <li data-v-5ae91aa9>Exported as: cdkConnectedOverlay</li></ul> <p data-v-5ae91aa9>CdkConnectedOverlay指令提供的属性有:</p> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>backdropClass: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayBackdropClass’)</td> <td style="text-align:left;" data-v-5ae91aa9>背景层class</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>flexibleDimensions: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayFlexibleDimensions’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay是否需要限制在窗口内</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>growAfterOpen: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayGrowAfterOpen’)</td> <td style="text-align:left;" data-v-5ae91aa9>覆盖层是否可以在初始打开后增长</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>hasBackdrop: any</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayHasBackdrop’)</td> <td style="text-align:left;" data-v-5ae91aa9>是否给overlay设置背景层 RepositionScrollStrategy的时候overlay是否一致跟着origin走，就算origin滑出到屏幕</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>height: number</td> <td style="text-align:left;" data-v-5ae91aa9>string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayHeight’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>lockPosition: any</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayLockPosition’)</td> <td style="text-align:left;" data-v-5ae91aa9></td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>minHeight: number</td> <td style="text-align:left;" data-v-5ae91aa9>string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayMinHeight’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>minWidth: number</td> <td style="text-align:left;" data-v-5ae91aa9>string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayMinWidth’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>offsetX: number</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayOffsetX’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay x偏移</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>offsetY: number</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayOffsetY’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay y偏移</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>open: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayOpen’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay显示隐藏</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>origin: CdkOverlayOrigin</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayOrigin’)</td> <td style="text-align:left;" data-v-5ae91aa9>设置overlay的origin(依赖的视图)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>panelClass: string</td> <td style="text-align:left;" data-v-5ae91aa9>string[]</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayPanelClass’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>positions: ConnectedPosition[]</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayPositions’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay位置设定</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>push: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayPush’)</td> <td style="text-align:left;" data-v-5ae91aa9>如果我们给overlay提供的位置都不适合的时候，是否可以重叠显示</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>scrollStrategy: ScrollStrategy</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayScrollStrategy’)</td> <td style="text-align:left;" data-v-5ae91aa9>ScrollStrategy</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>viewportMargin: number</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayViewportMargin’)</td> <td style="text-align:left;" data-v-5ae91aa9>overlay窗口margin</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>width: number</td> <td style="text-align:left;" data-v-5ae91aa9>string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkConnectedOverlayWidth’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>attach: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>overlay attach的时候回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>backdropClick: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>点击了overlay背景层的回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>detach: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()	overlay detach的时候调用</td> <td style="text-align:left;" data-v-5ae91aa9></td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>overlayKeydown: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>overlay显示的时候有键盘按键按下</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>positionChange: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>overlay位置改变的时候的回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>dir: Direction</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>overlay里面的布局方向</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>overlayRef: OverlayRef</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9>overlay对应的OverlayRef(对overlay的一个封装，类似ElementRef)</td></tr></tbody></table> <h3 id="overlay使用" data-v-5ae91aa9><a href="#overlay使用" class="header-anchor" data-v-5ae91aa9>#</a> Overlay使用</h3> <ol data-v-5ae91aa9><li data-v-5ae91aa9>使用之前要加上Overlay库里面的css同时导入OverlayModule.`@import '~@angular/cdk/overlay-prebuilt.css';</li> <li data-v-5ae91aa9>导入OverlayModule</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>NgModule<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>OverlayModule<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayContainer<span class="token punctuation" data-v-5ae91aa9>,</span> FullscreenOverlayContainer<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/overlay&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>NgModule</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    imports<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        OverlayModule<span class="token punctuation" data-v-5ae91aa9>,</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayModule</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9></div></div><ol start="3" data-v-5ae91aa9><li data-v-5ae91aa9>在实例之前我们先自定义一个非常简单的动态组件，后面的实例我们都会用到这个组件，注意哦这个动态组件除了在declarations里面需要申明，在entryComponents里面也需要申明。</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-overlay-panel'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
    &lt;p class=&quot;wu-overlay-pane&quot;&gt;Overlay展示&lt;/p&gt;
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
    .wu-overlay-pane {
      margin: 0;
      padding: 10px;
      border: 1px solid black;
      background-color: skyblue;
    }
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>OverlayPanelComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span> <span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

@<span class="token function" data-v-5ae91aa9>NgModule</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    declarations<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        OverlayPanelComponent
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    entryComponents<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        OverlayPanelComponent
    <span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayModule</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9></div></div><h4 id="把overlaypanelcomponent组件显示在屏幕中间" data-v-5ae91aa9><a href="#把overlaypanelcomponent组件显示在屏幕中间" class="header-anchor" data-v-5ae91aa9>#</a> 把OverlayPanelComponent组件显示在屏幕中间</h4> <p data-v-5ae91aa9>这里主要是GlobalPositionStrategy的使用，以及hasBackdrop的使用。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Overlay<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayConfig<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ComponentPortal<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-overlay'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 全局显示 页面中心显示 (点击的时候显示) --&gt;
        &lt;button (click)=&quot;showOverlayGlobalPanelCenter()&quot;&gt;页面中心显示&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    preserveWhitespaces<span class="token operator" data-v-5ae91aa9>:</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> overlay<span class="token operator" data-v-5ae91aa9>:</span> Overlay
        <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>public</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * overlay 在整个屏幕的中间显示
     */</span>
    <span class="token function" data-v-5ae91aa9>showOverlayGlobalPanelCenter</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// config: OverlayConfig overlay的配置，配置显示位置，和滑动策略</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> config <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>OverlayConfig</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>positionStrategy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>position</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>global</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token comment" data-v-5ae91aa9>// 全局显示</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>centerHorizontally</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token comment" data-v-5ae91aa9>// 水平居中</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>centerVertically</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 垂直居中</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>hasBackdrop <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>true</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 设置overlay后面有一层背景, 当然你也可以设置backdropClass 来设置这层背景的class</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> overlayRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>config<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// OverlayRef, overlay层</span>
        overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>backdropClick</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token comment" data-v-5ae91aa9>// 点击了backdrop背景</span>
            overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// OverlayPanelComponent是动态组件</span>
        <span class="token comment" data-v-5ae91aa9>// 创建一个ComponentPortal，attach到OverlayRef，这个时候我们这个overlay层就显示出来了。</span>
        overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewContainerRef<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 监听overlayRef上的键盘按键事件</span>
        overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>keydownEvents</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> KeyboardEvent</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span>_keydownEventSubscriptions <span class="token operator" data-v-5ae91aa9>+</span> <span class="token string" data-v-5ae91aa9>' times'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9></div></div><h4 id="把overlaypanelcomponent组件显示在屏幕上，自己控制位置" data-v-5ae91aa9><a href="#把overlaypanelcomponent组件显示在屏幕上，自己控制位置" class="header-anchor" data-v-5ae91aa9>#</a> 把OverlayPanelComponent组件显示在屏幕上，自己控制位置</h4> <p data-v-5ae91aa9>GlobalPositionStrategy的使用，GlobalPositionStrategy自定义位置。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> Inject<span class="token punctuation" data-v-5ae91aa9>,</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Overlay<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayConfig<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ComponentPortal<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token constant" data-v-5ae91aa9>DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/common'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-overlay'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 全局显示 页面中显示位置自己控制 --&gt;
        &lt;button (click)=&quot;showOverlayGlobalPanelPosition()&quot;&gt;页面中显示，自己控制位置&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    preserveWhitespaces<span class="token operator" data-v-5ae91aa9>:</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    globalOverlayPosition <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> overlay<span class="token operator" data-v-5ae91aa9>:</span> Overlay
        <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>public</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef
        <span class="token punctuation" data-v-5ae91aa9>,</span> @<span class="token function" data-v-5ae91aa9>Inject</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token constant" data-v-5ae91aa9>DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token keyword" data-v-5ae91aa9>public</span> _document<span class="token operator" data-v-5ae91aa9>:</span> any</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay 在整个屏幕位置，自己控制位置
     */</span>
    <span class="token function" data-v-5ae91aa9>showOverlayGlobalPanelPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> config <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>OverlayConfig</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>positionStrategy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>position</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>global</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>left</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token interpolation" data-v-5ae91aa9><span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>${</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>}</span></span><span class="token string" data-v-5ae91aa9>px</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token comment" data-v-5ae91aa9>// 自己控制位置</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>top</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token interpolation" data-v-5ae91aa9><span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>${</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>}</span></span><span class="token string" data-v-5ae91aa9>px</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>globalOverlayPosition <span class="token operator" data-v-5ae91aa9>+=</span> <span class="token number" data-v-5ae91aa9>30</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>hasBackdrop <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>true</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> overlayRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>config<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>backdropClick</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 点击背景关掉弹窗</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        overlayRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewContainerRef<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9></div></div><h4 id="overlay里面显示ng-template内容" data-v-5ae91aa9><a href="#overlay里面显示ng-template内容" class="header-anchor" data-v-5ae91aa9>#</a> overlay里面显示ng-template内容</h4> <p data-v-5ae91aa9>怎么在overlay上显示ng-template里面的内容。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Overlay<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayConfig<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayRef<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>TemplatePortalDirective<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-overlay'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 鼠标移入的时候显示 ng-template对应的内容，移出的时候不显示 --&gt;
        &lt;button style=&quot;margin-left: 10px&quot; (mouseenter)=&quot;showOverlayPanelTemplate()&quot;
                (mouseleave)=&quot;dismissOverlayPanelTemplate()&quot;&gt;
            显示 ng-template 内容
        &lt;/button&gt;
        &lt;!-- ng-template overlay 将要显示的内容 --&gt;
        &lt;ng-template cdk-portal #overlayGlobalTemplate=&quot;cdkPortal&quot;&gt;
            &lt;p class=&quot;template-overlay-pane&quot;&gt; ng-temtortelliniTemplateplate显示 &lt;/p&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .template-overlay-pane {
            padding: 10px;
            border: 1px solid black;
            background-color: skyblue;
        }</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    preserveWhitespaces<span class="token operator" data-v-5ae91aa9>:</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    globalOverlayPosition <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _overlayTemplateRef<span class="token operator" data-v-5ae91aa9>:</span> OverlayRef<span class="token punctuation" data-v-5ae91aa9>;</span>

    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'overlayGlobalTemplate'</span><span class="token punctuation" data-v-5ae91aa9>)</span> templateGlobalPortals<span class="token operator" data-v-5ae91aa9>:</span> TemplatePortalDirective<span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> overlay<span class="token operator" data-v-5ae91aa9>:</span> Overlay</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 显示 ng-template 的内容
     */</span>
    <span class="token function" data-v-5ae91aa9>showOverlayPanelTemplate</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> config <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>OverlayConfig</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>positionStrategy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>position</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>global</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>centerHorizontally</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>top</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token interpolation" data-v-5ae91aa9><span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>${</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>globalOverlayPosition<span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>}</span></span><span class="token string" data-v-5ae91aa9>px</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>globalOverlayPosition <span class="token operator" data-v-5ae91aa9>+=</span> <span class="token number" data-v-5ae91aa9>30</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayTemplateRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>config<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayTemplateRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>templateGlobalPortals<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 移除 ng-template 内容
     */</span>
    <span class="token function" data-v-5ae91aa9>dismissOverlayPanelTemplate</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayTemplateRef <span class="token operator" data-v-5ae91aa9>&amp;&amp;</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayTemplateRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>hasAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayTemplateRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9></div></div><h4 id="overlay依赖于某个视图-origin-显示" data-v-5ae91aa9><a href="#overlay依赖于某个视图-origin-显示" class="header-anchor" data-v-5ae91aa9>#</a> overlay依赖于某个视图(origin)显示</h4> <p data-v-5ae91aa9>FlexibleConnectedPositionStrategy的使用，怎么通过FlexibleConnectedPositionStrategy来控制显示的位置(ConnectedPosition)。同时也有ScrollStrategy的使用</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>,</span> ViewContainerRef<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Overlay<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayConfig<span class="token punctuation" data-v-5ae91aa9>,</span> OverlayRef<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ComponentPortal<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/portal'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'./panel/overlay-panel.component'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-overlay'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 依附某个组件或者template显示,鼠标移入的时候显示，移出来的时候不显示 --&gt;
        &lt;button style=&quot;margin-left: 10px&quot; #connectComponentOrigin
                (mouseenter)=&quot;showOverlayPanelConnectComponent()&quot;
                (mouseleave)=&quot;dismissOverlayPanelConnectComponent()&quot;&gt;
            overlay connect 组件显示
        &lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    preserveWhitespaces<span class="token operator" data-v-5ae91aa9>:</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    <span class="token keyword" data-v-5ae91aa9>private</span> _overlayConnectRef<span class="token operator" data-v-5ae91aa9>:</span> OverlayRef<span class="token punctuation" data-v-5ae91aa9>;</span>

    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'connectComponentOrigin'</span><span class="token punctuation" data-v-5ae91aa9>)</span> _overlayConnectComponentOrigin<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> overlay<span class="token operator" data-v-5ae91aa9>:</span> Overlay
        <span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>public</span> viewContainerRef<span class="token operator" data-v-5ae91aa9>:</span> ViewContainerRef</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * overlay connect origin 显示，依附某个组件显示
     */</span>
    <span class="token function" data-v-5ae91aa9>showOverlayPanelConnectComponent</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> strategy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>position</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>flexibleConnectedTo</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectComponentOrigin<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withPositions</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>{</span>
                originX<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'center'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
                originY<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'bottom'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
                overlayX<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'center'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
                overlayY<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'top'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
                offsetX<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span>
                offsetY<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 这么理解 origin 组件(依附空组件) 的那个点(originX, originY) 和 overlay组件的点(overlayX, overlayY)</span>
        <span class="token comment" data-v-5ae91aa9>// 重合，从而确定overlay组件显示的位置</span>
        strategy<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withLockedPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token boolean" data-v-5ae91aa9>true</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>const</span> config <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>OverlayConfig</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>positionStrategy<span class="token operator" data-v-5ae91aa9>:</span> strategy<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        config<span class="token punctuation" data-v-5ae91aa9>.</span>scrollStrategy <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span>scrollStrategies<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>reposition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 更随滑动的策略</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>overlay<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>config<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>attach</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ComponentPortal</span><span class="token punctuation" data-v-5ae91aa9>(</span>OverlayPanelComponent<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewContainerRef<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token function" data-v-5ae91aa9>dismissOverlayPanelConnectComponent</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectRef <span class="token operator" data-v-5ae91aa9>&amp;&amp;</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>hasAttached</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_overlayConnectRef<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>dispose</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9></div></div><h4 id="指令使用" data-v-5ae91aa9><a href="#指令使用" class="header-anchor" data-v-5ae91aa9>#</a> 指令使用</h4> <p data-v-5ae91aa9>cdk-overlay-origin和cdk-connected-overlay怎么配合起来使用，怎么把两个指令关联起来。</p> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Overlay<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-overlay'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;button cdk-overlay-origin #trigger=&quot;cdkOverlayOrigin&quot; (click)=&quot;isMenuOpen = !isMenuOpen&quot;&gt;
            指令实现
        &lt;/button&gt;
        &lt;ng-template cdk-connected-overlay
                     [cdkConnectedOverlayOrigin]=&quot;trigger&quot;
                     [cdkConnectedOverlayWidth]=&quot;500&quot;
                     cdkConnectedOverlayHasBackdrop
                     [cdkConnectedOverlayOpen]=&quot;isMenuOpen&quot;
                     (backdropClick)=&quot;isMenuOpen=false&quot;&gt;
            &lt;div class=&quot;menu-wrap&quot;&gt;
                我是通过指令实现的Overlay
            &lt;/div&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-overlay.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    preserveWhitespaces<span class="token operator" data-v-5ae91aa9>:</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkOverlayComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * overlay是否显示
     */</span>
    isMenuOpen <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> overlay<span class="token operator" data-v-5ae91aa9>:</span> Overlay</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>   
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-scrolling" data-v-5ae91aa9><a href="#angular-cdk-scrolling" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/scrolling</h2> <p data-v-5ae91aa9>scrolling 对滚动事件做出响应的工具包。</p> <p data-v-5ae91aa9>想要在我们项目中使用cdk Scrolling功能，需要在我们模块里面 <code data-v-5ae91aa9>import {ScrollDispatchModule} from ‘@angular/cdk/scrolling’;</code></p> <p data-v-5ae91aa9>然而<code data-v-5ae91aa9>ScrollDispatcher/CdkScrollable/ViewportRuler</code>来自<code data-v-5ae91aa9>@angular/cdk/overlay</code>。</p> <h3 id="cdkscrollable-scrolldispatcher" data-v-5ae91aa9><a href="#cdkscrollable-scrolldispatcher" class="header-anchor" data-v-5ae91aa9>#</a> cdkScrollable/ScrollDispatcher</h3> <p data-v-5ae91aa9>cdkScrollable指令单独使用的时候没有特别的效果，cdkScrollable指令一般用来配合ScrollDispatcher Service使用。任何添加了cdkScrollable指令的视图元素都会注册到ScrollDispatcher里面去。然后可以在ScrollDispatcher里面去监听元素的滑动事件。</p> <h4 id="scrolldispatcher常用方法介绍" data-v-5ae91aa9><a href="#scrolldispatcher常用方法介绍" class="header-anchor" data-v-5ae91aa9>#</a> ScrollDispatcher常用方法介绍</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ScrollDispatcher</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 订阅全局`scroll`和`resize`
     */</span>
    _globalSubscription<span class="token operator" data-v-5ae91aa9>:</span> Subscription <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 注册到ScrollDispatcher里面的元素(添加了CdkScrollable指令的元素)
     */</span>
    scrollContainers<span class="token operator" data-v-5ae91aa9>:</span> Map<span class="token operator" data-v-5ae91aa9>&lt;</span>CdkScrollable<span class="token punctuation" data-v-5ae91aa9>,</span> Subscription<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 注册CdkScrollable(我们不用管，我们在某个视图元素上添加CdkScrollable指令会自动注册的)
     */</span>
    <span class="token function" data-v-5ae91aa9>register</span><span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 取消注册
     */</span>
    <span class="token function" data-v-5ae91aa9>deregister</span><span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 可以去订阅任务一个注册CdkScrollable的scroll事件
     *
     * **Note:** 为了避免每次滚动都发送状态变化检测,内部采用的是NgZone.runOutsideAngular。所以如果你想每次都检测变化就采用NgZone.run的放
     * 有疑问可以去搜下NgZone的使用
     */</span>
    <span class="token function" data-v-5ae91aa9>scrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span>auditTimeInMs<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>CdkScrollable <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听elementRef视图元素的祖先元素有滚动事件，当然了对应的祖先元素需要添加CdkScrollable指令
     * auditTimeInMs参数是为了防止事件发送过快，可以设置多长时间收一次事件
     */</span>
    <span class="token function" data-v-5ae91aa9>ancestorScrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span>elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> auditTimeInMs<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>CdkScrollable <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     *  elementRef添加了CdkScrollable指令的祖先元素
     */</span>
    <span class="token function" data-v-5ae91aa9>getAncestorScrollContainers</span><span class="token punctuation" data-v-5ae91aa9>(</span>elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9></div></div><h4 id="cdkscrollable-scrolldispatcher使用" data-v-5ae91aa9><a href="#cdkscrollable-scrolldispatcher使用" class="header-anchor" data-v-5ae91aa9>#</a> cdkScrollable/ScrollDispatcher使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkScrollable<span class="token punctuation" data-v-5ae91aa9>,</span> ScrollDispatcher<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-scrolling'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 通过cdkScrollable指令配合ScrollDispatcher来监听节点的scrolling --&gt;
        &lt;div cdkScrollable class=&quot;scrolling-parent&quot;&gt;
            &lt;div #scrollingParent class=&quot;scrolling-item&quot;&gt;item 1&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 2&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 3&lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- 这个div没有添加cdkScrollable指令，所以这个div的scrolling事件ScrollDispatcher获取不到 --&gt;
        &lt;div class=&quot;scrolling-parent&quot;&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 1&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 2&lt;/div&gt;
            &lt;div class=&quot;scrolling-item&quot;&gt;item 3&lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .scrolling-parent {
            height: 100px;
            width: 200px;
            border: 1px solid black;
            padding: 8px;
            overflow-y: auto;
        }
        .scrolling-item {
            height: 50px;
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkScrollingComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> AfterViewInit <span class="token punctuation" data-v-5ae91aa9>{</span>

    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'scrollingParent'</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    childDiv<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> scrollDispatcher<span class="token operator" data-v-5ae91aa9>:</span> ScrollDispatcher</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 监听所有ScrollDispatcher里面注册的CdkScrollable的scroll事件
         */</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>scrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>scrollable<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'发生scroll了，來源于：'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getElementRef</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 第二个参数auditTimeInMs表示事件延时多少秒发生
         * 当祖先设置了cdkScrollable指令，在孩子里面也能抓到scrolling事件
         */</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>ancestorScrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>childDiv<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>scrollable<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'祖先发生scroll了，來源于：'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>scrollable<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getElementRef</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 获取ScrollDispatcher里面所有注册了scrolling的组件信息</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span>scrollContainers<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9></div></div><h3 id="viewportruler" data-v-5ae91aa9><a href="#viewportruler" class="header-anchor" data-v-5ae91aa9>#</a> ViewportRuler</h3> <p data-v-5ae91aa9>ViewportRuler也是cdk Scrolling里面提供的一个Service。用来测量浏览器的视图窗口信息。</p> <h4 id="viewportruler常用方法" data-v-5ae91aa9><a href="#viewportruler常用方法" class="header-anchor" data-v-5ae91aa9>#</a> ViewportRuler常用方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ViewportRuler</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 获取浏览器窗口的宽度和高度 
     */</span>
    <span class="token function" data-v-5ae91aa9>getViewportSize</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Readonly<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token punctuation" data-v-5ae91aa9>{</span>
        width<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>;</span>
        height<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 获取浏览器窗口的rect信息(left、top、right、bottom) 
     */</span>
    <span class="token function" data-v-5ae91aa9>getViewportRect</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ClientRect<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 获取浏览器窗口的滑动位置(top、left) 
     */</span>
    <span class="token function" data-v-5ae91aa9>getViewportScrollPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> ViewportScrollPosition<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听浏览器窗口大小变化
     */</span>
    <span class="token function" data-v-5ae91aa9>change</span><span class="token punctuation" data-v-5ae91aa9>(</span>throttleTime<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>Event<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9></div></div><h4 id="viewportruler使用实例" data-v-5ae91aa9><a href="#viewportruler使用实例" class="header-anchor" data-v-5ae91aa9>#</a> ViewportRuler使用实例</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ViewportRuler<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-scrolling'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkScrollingComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> viewPortRuler<span class="token operator" data-v-5ae91aa9>:</span> ViewportRuler</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * ViewportRuler 用来监听窗口的大小
         */</span>
        <span class="token comment" data-v-5ae91aa9>// { width, height }</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPortRuler<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportSize</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// { bottom, height, left, right, top, width }</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPortRuler<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportRect</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// { top, left }</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPortRuler<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportScrollPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// native resize event object</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPortRuler<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>change</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>resizeEvent</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>resizeEvent<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9></div></div><h3 id="示例汇总" data-v-5ae91aa9><a href="#示例汇总" class="header-anchor" data-v-5ae91aa9>#</a> 示例汇总</h3> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token comment" data-v-5ae91aa9>// ScrollDispatcher 滚动调度器</span>
  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scrollAble&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token punctuation" data-v-5ae91aa9>{</span> read<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
  scrollAble<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>;</span>
  @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scrollAble2&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span> scrollable2<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
    <span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> scrollDispatcher<span class="token operator" data-v-5ae91aa9>:</span> ScrollDispatcher<span class="token punctuation" data-v-5ae91aa9>,</span>
    <span class="token keyword" data-v-5ae91aa9>public</span> ele<span class="token operator" data-v-5ae91aa9>:</span> ElementRef</span>
  <span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 获取所有cdkScrollable</span>
    <span class="token keyword" data-v-5ae91aa9>const</span> scrollContainers <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span>scrollContainers<span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scrollContainers&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> scrollContainers<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 注销一个cdkScrollable</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>deregister</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollAble<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 注册一个cdkScrollable</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>register</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollAble<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 获取上级滚动容器</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> elementRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollAble<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getElementRef</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> ancestorScrollContainers <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getAncestorScrollContainers</span><span class="token punctuation" data-v-5ae91aa9>(</span>
      elementRef
    <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> ancestorScrollContainers2 <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getAncestorScrollContainers</span><span class="token punctuation" data-v-5ae91aa9>(</span>
      <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollable2
    <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;ancestorScrollContainers&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> ancestorScrollContainers<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;ancestorScrollContainers2&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> ancestorScrollContainers2<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 滚动监听</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollDispatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>scrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>res</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>res<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// CdkScrollable 可滚动指令,用于注册可滚动元素</span>
@<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scrollAble&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token punctuation" data-v-5ae91aa9>{</span> read<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
scrollAble<span class="token operator" data-v-5ae91aa9>:</span> CdkScrollable<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> scrollDispatcher<span class="token operator" data-v-5ae91aa9>:</span> ScrollDispatcher</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 元素是否滚动了</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollAble<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>elementScrolled</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>res</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scroll able scrolling&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> res<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 获取scroll able 的 ElementRef</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> scrollable1ElementRef <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>scrollAble<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getElementRef</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;scroll able element ref&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> scrollable1ElementRef<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// ViewportRuler 视口</span>
<span class="token comment" data-v-5ae91aa9>//import { ViewportRuler} from '@angular/material/core/overlay/position/viewport-ruler'</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ViewportRuler<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/overlay'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token comment" data-v-5ae91aa9>// 注入视口尺寸服务</span>
<span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> viewPort<span class="token operator" data-v-5ae91aa9>:</span> ViewportRuler</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 监控视口变化</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPort<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>change</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>res</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewPortInfo</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewPortInfo</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// 获取视口信息</span>
<span class="token function" data-v-5ae91aa9>getViewPortInfo</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> viewRect <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPort<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportRect</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;view rect&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> viewRect<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// { width, height }</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> viewPortScrollPosition <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPort<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportScrollPosition</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;viewPortScrollPosition&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> viewPortScrollPosition<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>  <span class="token comment" data-v-5ae91aa9>// { top, left }</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> viewPortSize <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPort<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>getViewportSize</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;viewPortSize&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> viewPortSize<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>  
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>viewPortRuler<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>change</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>resizeEvent</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>resizeEvent<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>  <span class="token comment" data-v-5ae91aa9>// native resize event object</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9></div></div><h3 id="cdkvirtualscrollviewport" data-v-5ae91aa9><a href="#cdkvirtualscrollviewport" class="header-anchor" data-v-5ae91aa9>#</a> CdkVirtualScrollViewport</h3> <p data-v-5ae91aa9>angular cdk 里面给提供了一个scrolling的组件CdkVirtualScrollViewport - cdk-virtual-scroll-viewport。CdkVirtualScrollViewport组件在list展示的时候非常有用，比如有我们list里面的item有1000项的时候。CdkVirtualScrollViewport 并不会直接给我们加载出1000项。只会加载部分项。一边滑动一边加载。如果有做过android的话，应该会知道ListView里面的回收机制。CdkVirtualScrollViewport组件做的也是类似的事情。</p> <h4 id="cdkvirtualscrollviewport主要方法" data-v-5ae91aa9><a href="#cdkvirtualscrollviewport主要方法" class="header-anchor" data-v-5ae91aa9>#</a> CdkVirtualScrollViewport主要方法:</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkVirtualScrollViewport</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>CdkScrollable</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * CdkVirtualScrollViewport组件里面每个item的大小(通过orientation来知道是高度还宽度)
     */</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    <span class="token keyword" data-v-5ae91aa9>get</span> <span class="token function" data-v-5ae91aa9>itemSize</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> number <span class="token punctuation" data-v-5ae91aa9>{</span> <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_itemSize<span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * 多加载滚动范围之后多少像素的距离(最小值)，比如CdkVirtualScrollViewport的高度是200px,minBufferPx
     * 是100px;  item有好多的情况下不用全部绘制出来。绘制200像素的内容就好了。
     */</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    <span class="token keyword" data-v-5ae91aa9>get</span> <span class="token function" data-v-5ae91aa9>minBufferPx</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> number <span class="token punctuation" data-v-5ae91aa9>{</span> <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_minBufferPx<span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 这个是CdkFixedSizeVirtualScroll里面的属性，也是可以设置在CdkVirtualScrollViewport组件上的
     * 多加载滚动范围之后多少像素的距离(最大值)
     */</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    <span class="token keyword" data-v-5ae91aa9>get</span> <span class="token function" data-v-5ae91aa9>maxBufferPx</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> number <span class="token punctuation" data-v-5ae91aa9>{</span> <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_maxBufferPx<span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * viewport 方向
     */</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> orientation<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'horizontal'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'vertical'</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>'vertical'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 活动过程中，当前可见第一项的index
     */</span>
    @<span class="token function" data-v-5ae91aa9>Output</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> scrolledIndexChange<span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>number<span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token operator" data-v-5ae91aa9>=</span>
        Observable<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>observer<span class="token operator" data-v-5ae91aa9>:</span> Observer<span class="token operator" data-v-5ae91aa9>&lt;</span>number<span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_scrollStrategy<span class="token punctuation" data-v-5ae91aa9>.</span>scrolledIndexChange<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>index</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span>
                Promise<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>resolve</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>then</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>ngZone<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>run</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> observer<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>next</span><span class="token punctuation" data-v-5ae91aa9>(</span>index<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置滑动位置
     */</span>
    <span class="token function" data-v-5ae91aa9>scrollToOffset</span><span class="token punctuation" data-v-5ae91aa9>(</span>offset<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>,</span> behavior<span class="token operator" data-v-5ae91aa9>:</span> ScrollBehavior <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>'auto'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置滑动的index
     */</span>
    <span class="token function" data-v-5ae91aa9>scrollToIndex</span><span class="token punctuation" data-v-5ae91aa9>(</span>index<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>,</span>  behavior<span class="token operator" data-v-5ae91aa9>:</span> ScrollBehavior <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>'auto'</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 测量可滑动的大小
     */</span>
    <span class="token function" data-v-5ae91aa9>measureScrollOffset</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>from</span><span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'top'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'left'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'right'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'bottom'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'start'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'end'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> number <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 测量所有item在一起的高度
     */</span>
    <span class="token function" data-v-5ae91aa9>measureRenderedContentSize</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>上面主要方法介绍我把CdkVirtualScrollViewport组件和CdkFixedSizeVirtualScroll指令揉到一起去介绍了，因为它俩本来就是一起配合使用的。</p></div> <h4 id="cdkvirtualforof指令" data-v-5ae91aa9><a href="#cdkvirtualforof指令" class="header-anchor" data-v-5ae91aa9>#</a> CdkVirtualForOf指令</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9>Selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>cdkVirtualFor<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>[</span>cdkVirtualForOf<span class="token punctuation" data-v-5ae91aa9>]</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>CdkVirtualScrollViewport适用于list的情况，list循环的时候得配合CdkVirtualForOf指令来使用，CdkVirtualForOf的用法和ngFor的用法是一样的。CdkVirtualForOf指令是专门为CdkVirtualScrollViewport组件提供的。 就不用ngFor指令了。切记。如果想咱们平常一样用ngFor指令去循环，很多CdkVirtualScrollViewport组件里面特有的功能就用不了了。</p> <h4 id="cdkvirtualforof的使用" data-v-5ae91aa9><a href="#cdkvirtualforof的使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkVirtualForOf的使用</h4> <p data-v-5ae91aa9>主要是知道CdkVirtualForOf里面有哪些参数是可用的</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkVirtualScrollViewport<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/scrolling&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-virtual-scroll'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- itemSize是每个item的高度 --&gt;
        &lt;cdk-virtual-scroll-viewport #scrollComponent [itemSize]=&quot;18 * 7&quot; class=&quot;example-viewport&quot;&gt;
            &lt;!-- cdkVirtualFor的可以用参数如下 --&gt;
            &lt;div *cdkVirtualFor=&quot;let item of items;
                       let index = index;
                       let count = count;
                       let first = first;
                       let last = last;
                       let even = even;
                       let odd = odd;&quot; [class.example-alternate]=&quot;odd&quot;&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Item: {{item}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Index: {{index}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Count: {{count}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;First: {{first ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Last: {{last ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Even: {{even ? 'Yes' : 'No'}}&lt;/div&gt;
                &lt;div class=&quot;example-item-detail&quot;&gt;Odd: {{odd ? 'Yes' : 'No'}}&lt;/div&gt;
            &lt;/div&gt;
        &lt;/cdk-virtual-scroll-viewport&gt;

        &lt;button style=&quot;margin-top: 8px; margin-bottom: 8px; background-color: #007bff; color: red&quot;
                (click)=&quot;onButtonClick()&quot;&gt;
            点击跳转到第10个item
        &lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .example-viewport {
            height: 200px;
            width: 200px;
            border: 1px solid black;
        }

        .example-item-detail {
            height: 18px;
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>VirtualScrollComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'scrollComponent'</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _scrollViewport<span class="token operator" data-v-5ae91aa9>:</span> CdkVirtualScrollViewport<span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * CdkVirtualScrollViewport组件的数据源
     */</span>
    items <span class="token operator" data-v-5ae91aa9>=</span> Array<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>from</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>length<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>100000</span><span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>map</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>_<span class="token punctuation" data-v-5ae91aa9>,</span> i</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>Item #</span><span class="token interpolation" data-v-5ae91aa9><span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>${</span>i<span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>}</span></span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 点击按钮的时候跳转到第10项
     */</span>
    <span class="token function" data-v-5ae91aa9>onButtonClick</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_scrollViewport<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>scrollToIndex</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>10</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>水平方向滚动的CdkVirtualScrollViewport组件，主要是知道orientation属性的使用</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ChangeDetectionStrategy<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-virtual-scroll-horizontal'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div class=&quot;cdk-virtual-scroll-data-source-example&quot;&gt;
            &lt;cdk-virtual-scroll-viewport orientation=&quot;horizontal&quot; itemSize=&quot;50&quot; class=&quot;example-viewport&quot;&gt;
                &lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;example-item&quot;&gt;{{item}}&lt;/div&gt;
            &lt;/cdk-virtual-scroll-viewport&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .cdk-virtual-scroll-data-source-example .example-viewport {
            height: 200px;
            width: 200px;
            border: 1px solid black;
        }
        .cdk-virtual-scroll-data-source-example .example-viewport .cdk-virtual-scroll-content-wrapper {
            display: flex;
            flex-direction: row;
        }
        .cdk-virtual-scroll-data-source-example .example-item {
            width: 50px;
            height: 100%;
            writing-mode: vertical-lr;
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    changeDetection<span class="token operator" data-v-5ae91aa9>:</span> ChangeDetectionStrategy<span class="token punctuation" data-v-5ae91aa9>.</span>OnPush<span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>VirtualScrollHorizontalComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * CdkVirtualScrollViewport组件里面的数据源
     */</span>
    items <span class="token operator" data-v-5ae91aa9>=</span> Array<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>from</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>length<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>100000</span><span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>map</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>_<span class="token punctuation" data-v-5ae91aa9>,</span> i</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>Item #</span><span class="token interpolation" data-v-5ae91aa9><span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>${</span>i<span class="token interpolation-punctuation punctuation" data-v-5ae91aa9>}</span></span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-drag-drop" data-v-5ae91aa9><a href="#angular-cdk-drag-drop" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/drag-drop</h2> <p data-v-5ae91aa9>Angualr drag-drop里面的功能能让我们非常方便的处理页面上视图的拖拽(自由拖拽、列表排序拖拽、列表之间拖拽)问题。drag-drop使用之前也需要导入DragDropModule模块</p> <h3 id="cdkdrag" data-v-5ae91aa9><a href="#cdkdrag" class="header-anchor" data-v-5ae91aa9>#</a> CdkDrag</h3> <p data-v-5ae91aa9>CdkDrag是一个指令。添加了CdkDrag指令的视图，表明该视图是可以拖拽的。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: <code data-v-5ae91aa9>[cdkDrag]</code></li> <li data-v-5ae91aa9>Exported as: cdkDrag</li></ul> <h4 id="cdkdrag属性" data-v-5ae91aa9><a href="#cdkdrag属性" class="header-anchor" data-v-5ae91aa9>#</a> CdkDrag属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>描述</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>data: T</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDragData’)</td> <td style="text-align:left;" data-v-5ae91aa9>CdkDrag指令对应组件元素实例上的数据</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>disabled: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDragDisabled’)</td> <td style="text-align:left;" data-v-5ae91aa9>是否禁用从此容器启动拖动序列(我试了下这个属性好像没效果)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>lockAxis: ‘x’</td> <td style="text-align:left;" data-v-5ae91aa9>‘y’</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDragLockAxis’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>rootElementSelector: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDragRootElement’)</td> <td style="text-align:left;" data-v-5ae91aa9>传递可拖动元素替代的根元素(换句话说现在是拖动根元素了)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>dropped: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragDrop&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragDropped’)</td> <td style="text-align:left;" data-v-5ae91aa9>当一个拖拽的元素松开的时候，并且是在一个container(容器)里面的时候会回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>ended: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragEnded’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽结束的时候调用</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>entered: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragEnter&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragEntered’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽的时候进入到一个新的容器的时候回调(两个list之间拖拽的时候用到CdkDropList)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>exited: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragExit&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragExited’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽的时候退出当前容器的时候回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>moved: <code data-v-5ae91aa9>Observable&lt;CdkDragMove&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragMoved’)</td> <td style="text-align:left;" data-v-5ae91aa9>在拖拽的过程中会回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>started: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDragStarted’)</td> <td style="text-align:left;" data-v-5ae91aa9>在开始拖拽的时候调用</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>dropContainer: CdkDropListContainer</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9></td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>element: ElementRef</td> <td style="text-align:left;" data-v-5ae91aa9>无</td> <td style="text-align:left;" data-v-5ae91aa9></td></tr></tbody></table> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>上面表格中大量的提到了容器，我们可以把下文中提到的CdkDropList指令对应的视图元素当做是一个视图。</p></div> <h4 id="cdkdrag使用" data-v-5ae91aa9><a href="#cdkdrag使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkDrag使用</h4> <p data-v-5ae91aa9>很简单，就是我们在想要拖动的视图元素上添加CdkDrag指令。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-drop'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div class=&quot;dragParent&quot; style=&quot;width: 500px; height: 500px; background-color: #f1f1f1&quot;&gt;
            &lt;div class=&quot;example-box&quot; cdkDrag cdkDragRootElement=&quot;.dragParent&quot;&gt;
                可以到处拖拽
            &lt;/div&gt;
        &lt;/div&gt;

    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .example-box {
            width: 100px;
            height: 100px;
            border: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            cursor: move;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #fff;
            border-radius: 4px;
            position: relative;
            z-index: 1;
            transition: box-shadow 200ms cubic-bezier(0, 0, 0.2, 1);
            box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2),
            0 2px 2px 0 rgba(0, 0, 0, 0.14),
            0 1px 5px 0 rgba(0, 0, 0, 0.12);
        }

        .example-box:active {
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropDropComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112026966.gif" alt="" data-v-5ae91aa9></p> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>上图中因为我设置CdkDrag指令的cdkDragRootElement属性为灰色的div，所以拖动的是整个灰色的div。</p></div> <h3 id="cdkdroplist" data-v-5ae91aa9><a href="#cdkdroplist" class="header-anchor" data-v-5ae91aa9>#</a> CdkDropList</h3> <p data-v-5ae91aa9>可以拖拽item的一个集合，说白了就是把一些可拖元素始放到一起来。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: <code data-v-5ae91aa9>[cdkDropList]</code> cdk-drop-list</li> <li data-v-5ae91aa9>Exported as: cdkDropList</li></ul> <h4 id="cdkdroplist属性" data-v-5ae91aa9><a href="#cdkdroplist属性" class="header-anchor" data-v-5ae91aa9>#</a> CdkDropList属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性名字</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>描述</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>connectedTo: (CdkDropList	string)[]</td> <td style="text-align:left;" data-v-5ae91aa9>CdkDropList</td> <td style="text-align:left;" data-v-5ae91aa9></td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>data: T</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDropListData’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽容器上的数据(通常是一个数组或者list)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>disabled: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDropListDisabled’)</td> <td style="text-align:left;" data-v-5ae91aa9>是否禁用从此容器启动拖动序列</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>enterPredicate: (drag: CdkDrag, drop: CdkDropList) =&gt; boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDropListEnterPredicate’)</td> <td style="text-align:left;" data-v-5ae91aa9>指定哪些item是可以拖拽到当前容器</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>id: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>唯一的id,cdkDropListConnectedTo属性的时候可以使用</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>lockAxis: ‘x’</td> <td style="text-align:left;" data-v-5ae91aa9>‘y’</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkDropListLockAxis’)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>orientation: ‘horizontal’</td> <td style="text-align:left;" data-v-5ae91aa9>‘vertical’	@Input(‘cdkDropListOrientation’)</td> <td style="text-align:left;" data-v-5ae91aa9>容器里面item的摆放方向(垂直，水平)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>dropped: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragDrop&lt;T, any&gt;&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDropListDropped’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽结束的时候，当有item落到当前容器的时候回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>entered: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragEnter&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDropListEntered’)</td> <td style="text-align:left;" data-v-5ae91aa9>当item进入当前容器的时候回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>exited:<code data-v-5ae91aa9>EventEmitter&lt;CdkDragExit&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDropListExited’)</td> <td style="text-align:left;" data-v-5ae91aa9>当item离开当前容器的时候回调</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>sorted: <code data-v-5ae91aa9>EventEmitter&lt;CdkDragSortEvent&gt;</code></td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkDropListSorted’)</td> <td style="text-align:left;" data-v-5ae91aa9>拖拽过程中交换item的时候回调</td></tr></tbody></table> <h4 id="cdkdroplist使用" data-v-5ae91aa9><a href="#cdkdroplist使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkDropList使用</h4> <ol data-v-5ae91aa9><li data-v-5ae91aa9>水平方向的CdkDropList( cdkDropListOrientation属性的使用)</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkDragDrop<span class="token punctuation" data-v-5ae91aa9>,</span> moveItemInArray<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-orientation-drag'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      &lt;div cdkDropList cdkDropListOrientation=&quot;horizontal&quot; class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
          &lt;div class=&quot;example-box&quot; *ngFor=&quot;let timePeriod of timePeriods&quot; cdkDrag&gt;{{timePeriod}}&lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      .example-list {
          width: 1000px;
          max-width: 100%;
          border: solid 1px #ccc;
          min-height: 60px;
          display: flex;
          flex-direction: row;
          background: white;
          border-radius: 4px;
          overflow: hidden;
      }
      .example-box {
          padding: 20px 10px;
          border-right: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
          flex-grow: 1;
          flex-basis: 0;
      }
      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }
      .cdk-drag-placeholder {
          opacity: 0;
      }
      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }
      .example-box:last-child {
          border: none;
      }
      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropOrientationDragComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    timePeriods <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token string" data-v-5ae91aa9>'Bronze age'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Iron age'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Middle ages'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Early modern period'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Long nineteenth century'</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 移动item的时候，item之间的位置变换
     * @param event
     */</span>
    <span class="token function" data-v-5ae91aa9>drop</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> CdkDragDrop<span class="token operator" data-v-5ae91aa9>&lt;</span>string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token function" data-v-5ae91aa9>moveItemInArray</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>timePeriods<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112056485.gif" alt="" data-v-5ae91aa9></p> <ol start="2" data-v-5ae91aa9><li data-v-5ae91aa9>两个list之间数据交换
CdkDropList指令cdkDropListConnectedTo属性的使用。同时为方便大家的使用cdk drag-drop也给提供了transferArrayItem()、moveItemInArray()用于两个list之间交互item和单个list之间item位置变换。</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkDragDrop<span class="token punctuation" data-v-5ae91aa9>,</span> moveItemInArray<span class="token punctuation" data-v-5ae91aa9>,</span> transferArrayItem<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-transferring-item'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;左边list&lt;/h2&gt;
          &lt;div
                  cdkDropList
                  #todoList=&quot;cdkDropList&quot;
                  [cdkDropListData]=&quot;leftSource&quot;
                  [cdkDropListConnectedTo]=&quot;[doneList]&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
              &lt;div class=&quot;example-box&quot; *ngFor=&quot;let item of leftSource&quot; cdkDrag&gt;{{item}}&lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;右边list&lt;/h2&gt;
          &lt;div
                  cdkDropList
                  #doneList=&quot;cdkDropList&quot;
                  [cdkDropListData]=&quot;rightSource&quot;
                  [cdkDropListConnectedTo]=&quot;[todoList]&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
              &lt;div class=&quot;example-box&quot; *ngFor=&quot;let item of rightSource&quot; cdkDrag&gt;{{item}}&lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      .example-container {
          width: 400px;
          max-width: 100%;
          margin: 0 25px 25px 0;
          display: inline-block;
          vertical-align: top;
      }

      .example-list {
          border: solid 1px #ccc;
          min-height: 60px;
          background: white;
          border-radius: 4px;
          overflow: hidden;
          display: block;
      }

      .example-box {
          padding: 20px 10px;
          border-bottom: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
      }

      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }

      .cdk-drag-placeholder {
          opacity: 0;
      }

      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

      .example-box:last-child {
          border: none;
      }

      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropTransferringItemComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 左边类别数据源
     */</span>
    leftSource <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token string" data-v-5ae91aa9>'Get to work'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Pick up groceries'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Go home'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Fall asleep'</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 右边列表数据源
     */</span>
    rightSource <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token string" data-v-5ae91aa9>'Get up'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Brush teeth'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Take a shower'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Check e-mail'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Walk dog'</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 拖动的时候，list交换item或者单个list里面item位置的变换
     * @param event
     */</span>
    <span class="token function" data-v-5ae91aa9>drop</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> CdkDragDrop<span class="token operator" data-v-5ae91aa9>&lt;</span>string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>previousContainer <span class="token operator" data-v-5ae91aa9>===</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token function" data-v-5ae91aa9>moveItemInArray</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token function" data-v-5ae91aa9>transferArrayItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>previousContainer<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>96</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>97</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>98</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>99</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>100</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>101</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>102</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>103</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>104</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>105</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>106</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>107</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>108</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>109</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>110</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>111</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>112</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>113</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>114</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>115</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>116</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>117</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>118</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>119</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>120</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>121</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>122</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>123</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>124</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>125</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>126</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>127</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>128</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112152287.gif" alt="" data-v-5ae91aa9></p> <ol start="3" data-v-5ae91aa9><li data-v-5ae91aa9>可以自己去控制哪些item可以拖进来
我们有一个这样的例子，左边的list里面不接受其他list的数据拖进来，右边的list只接受其他list里面的偶数。</li></ol> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkDrag<span class="token punctuation" data-v-5ae91aa9>,</span> CdkDragDrop<span class="token punctuation" data-v-5ae91aa9>,</span> moveItemInArray<span class="token punctuation" data-v-5ae91aa9>,</span> transferArrayItem<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-controlling-with-item'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;不接受其他list的数据&lt;/h2&gt;
          &lt;div
                  id=&quot;all&quot;
                  cdkDropList
                  [cdkDropListData]=&quot;all&quot;
                  cdkDropListConnectedTo=&quot;even&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;
                  [cdkDropListEnterPredicate]=&quot;noReturnPredicate&quot;&gt;
              &lt;div
                      class=&quot;example-box&quot;
                      *ngFor=&quot;let number of all&quot;
                      [cdkDragData]=&quot;number&quot;
                      cdkDrag&gt;
                  {{number}}
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;

      &lt;div class=&quot;example-container&quot;&gt;
          &lt;h2&gt;只接受其他list里面的偶数&lt;/h2&gt;
          &lt;div
                  id=&quot;even&quot;
                  cdkDropList
                  [cdkDropListData]=&quot;even&quot;
                  cdkDropListConnectedTo=&quot;all&quot;
                  class=&quot;example-list&quot;
                  (cdkDropListDropped)=&quot;drop($event)&quot;
                  [cdkDropListEnterPredicate]=&quot;evenPredicate&quot;&gt;
              &lt;div
                      class=&quot;example-box&quot;
                      *ngFor=&quot;let number of even&quot;
                      cdkDrag
                      [cdkDragData]=&quot;number&quot;&gt;{{number}}
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
      .example-container {
          width: 400px;
          max-width: 100%;
          margin: 0 25px 25px 0;
          display: inline-block;
          vertical-align: top;
      }

      .example-list {
          border: solid 1px #ccc;
          min-height: 60px;
          background: white;
          border-radius: 4px;
          overflow: hidden;
          display: block;
      }

      .example-box {
          padding: 20px 10px;
          border-bottom: solid 1px #ccc;
          color: rgba(0, 0, 0, 0.87);
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          box-sizing: border-box;
          cursor: move;
          background: white;
          font-size: 14px;
      }

      .cdk-drag-preview {
          box-sizing: border-box;
          border-radius: 4px;
          box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
          0 8px 10px 1px rgba(0, 0, 0, 0.14),
          0 3px 14px 2px rgba(0, 0, 0, 0.12);
      }

      .cdk-drag-placeholder {
          opacity: 0;
      }

      .cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

      .example-box:last-child {
          border: none;
      }

      .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
      }

  </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropControllingWithItemComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    all <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>2</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>3</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>4</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>5</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>6</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>7</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>8</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>9</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    even <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token number" data-v-5ae91aa9>10</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>drop</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> CdkDragDrop<span class="token operator" data-v-5ae91aa9>&lt;</span>string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>previousContainer <span class="token operator" data-v-5ae91aa9>===</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token function" data-v-5ae91aa9>moveItemInArray</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token function" data-v-5ae91aa9>transferArrayItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>previousContainer<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>container<span class="token punctuation" data-v-5ae91aa9>.</span>data<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span>
                event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/** 只接受其他list里面的偶数 */</span>
    <span class="token function" data-v-5ae91aa9>evenPredicate</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>item<span class="token operator" data-v-5ae91aa9>:</span> CdkDrag<span class="token operator" data-v-5ae91aa9>&lt;</span>number<span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> item<span class="token punctuation" data-v-5ae91aa9>.</span>data <span class="token operator" data-v-5ae91aa9>%</span> <span class="token number" data-v-5ae91aa9>2</span> <span class="token operator" data-v-5ae91aa9>===</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/** 不让其他list里面的数据移入到这个里面来 */</span>
    <span class="token function" data-v-5ae91aa9>noReturnPredicate</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>96</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>97</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>98</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>99</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>100</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>101</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>102</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>103</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>104</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>105</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>106</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>107</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>108</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>109</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>110</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>111</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>112</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>113</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>114</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>115</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>116</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>117</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>118</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>119</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>120</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>121</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>122</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>123</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>124</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>125</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>126</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>127</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>128</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>129</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>130</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112252530.gif" alt="" data-v-5ae91aa9></p> <h3 id="cdkdroplistgroup" data-v-5ae91aa9><a href="#cdkdroplistgroup" class="header-anchor" data-v-5ae91aa9>#</a> CdkDropListGroup</h3> <p data-v-5ae91aa9>CdkDropListGroup指令的范围比CdkDropList要大一级。CdkDropListGroup可以包含多个CdkDropList。而且当CdkDropListGroup包含多个CdkDropList的时候，这些CdkDropList直接是相互connect的(CdkDropList就不用去写cdkDropListConnectedTo属性了)。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdkDropListGroup]</li> <li data-v-5ae91aa9>Exported as: cdkDropListGroup</li></ul> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>CdkDropListGroup使用场景：当我们在多个list之间的item需要相互拖动的时候派上用场。</p></div> <h3 id="cdkdraghandle" data-v-5ae91aa9><a href="#cdkdraghandle" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragHandle</h3> <p data-v-5ae91aa9>拖动CdkDrag实例的句柄，简单来说就是指定一个元素。当我们拖动这个元素的时候整个CdkDrag实例都会动。</p> <h4 id="cdkdraghandle的使用" data-v-5ae91aa9><a href="#cdkdraghandle的使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragHandle的使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-handle-drag-area'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div class=&quot;example-box&quot; cdkDrag&gt;
            I can only be dragged using the handle
            &lt;div class=&quot;example-handle&quot; cdkDragHandle&gt;
                &lt;svg width=&quot;24px&quot; fill=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
                    &lt;path d=&quot;M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z&quot;&gt;

                    &lt;/path&gt;
                    &lt;path d=&quot;M0 0h24v24H0z&quot; fill=&quot;none&quot;&gt;&lt;/path&gt;
                &lt;/svg&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .example-box {
            width: 200px;
            height: 200px;
            padding: 10px;
            box-sizing: border-box;
            border: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #fff;
            border-radius: 4px;
            position: relative;
            z-index: 1;
            transition: box-shadow 200ms cubic-bezier(0, 0, 0.2, 1);
            box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2),
            0 2px 2px 0 rgba(0, 0, 0, 0.14),
            0 1px 5px 0 rgba(0, 0, 0, 0.12);
        }
        .example-box:active {
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }
        .example-handle {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ccc;
            cursor: move;
            width: 24px;
            height: 24px;
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropHandleDragAreaComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112326258.gif" alt="" data-v-5ae91aa9></p> <h3 id="cdkdragpreview" data-v-5ae91aa9><a href="#cdkdragpreview" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragPreview</h3> <p data-v-5ae91aa9>简单点就是drag拖动过程中拖动的item的展示形式。</p> <h4 id="cdkdragpreview的使用" data-v-5ae91aa9><a href="#cdkdragpreview的使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragPreview的使用</h4> <p data-v-5ae91aa9>比如一个这里的例子，展示影片名字列表，在拖动的时候展示影片对应的图片。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkDragDrop<span class="token punctuation" data-v-5ae91aa9>,</span> moveItemInArray<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/drag-drop'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-customizing-drag-preview'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div cdkDropList class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
            &lt;div class=&quot;example-box&quot; *ngFor=&quot;let movie of movies&quot; cdkDrag&gt;
                {{movie.title}}
                &lt;img *cdkDragPreview [src]=&quot;movie.poster&quot; [alt]=&quot;movie.title&quot;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .example-list {
            width: 500px;
            max-width: 100%;
            border: solid 1px #ccc;
            min-height: 60px;
            display: block;
            background: white;
            border-radius: 4px;
            overflow: hidden;
        }

        .example-box {
            padding: 20px 10px;
            border-bottom: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            box-sizing: border-box;
            cursor: move;
            background: white;
            font-size: 14px;
        }

        .cdk-drag-preview {
            box-sizing: border-box;
            border-radius: 4px;
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }

        .cdk-drag-placeholder {
            opacity: 0;
        }

        .cdk-drag-animating {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-box:last-child {
            border: none;
        }

        .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropCustomizingDragPreviewComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    movies <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode I - The Phantom Menace'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/4/40/Star_Wars_Phantom_Menace_poster.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode II - Attack of the Clones'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/3/32/Star_Wars_-_Episode_II_Attack_of_the_Clones_%28movie_poster%29.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode III - Revenge of the Sith'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/9/93/Star_Wars_Episode_III_Revenge_of_the_Sith_poster.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode IV - A New Hope'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/8/87/StarWarsMoviePoster1977.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode V - The Empire Strikes Back'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/3/3c/SW_-_Empire_Strikes_Back.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode VI - Return of the Jedi'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/b/b2/ReturnOfTheJediPoster1983.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode VII - The Force Awakens'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/a/a2/Star_Wars_The_Force_Awakens_Theatrical_Poster.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            title<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'Episode VIII - The Last Jedi'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            poster<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'https://upload.wikimedia.org/wikipedia/en/7/7f/Star_Wars_The_Last_Jedi.jpg'</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>drop</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> CdkDragDrop<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token punctuation" data-v-5ae91aa9>{</span> title<span class="token operator" data-v-5ae91aa9>:</span> string<span class="token punctuation" data-v-5ae91aa9>,</span> poster<span class="token operator" data-v-5ae91aa9>:</span> string <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token function" data-v-5ae91aa9>moveItemInArray</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>movies<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>96</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>97</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>98</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>99</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>100</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>101</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>102</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>103</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>104</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>105</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>106</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>107</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112426225.gif" alt="" data-v-5ae91aa9></p> <h3 id="cdkdragplaceholder" data-v-5ae91aa9><a href="#cdkdragplaceholder" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragPlaceholder</h3> <p data-v-5ae91aa9>简单来说就是drag过程中，drag item对应的container里面item的占位符。</p> <h4 id="cdkdragplaceholder使用" data-v-5ae91aa9><a href="#cdkdragplaceholder使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkDragPlaceholder使用</h4> <p data-v-5ae91aa9>如下的例子，拖动的时候，CdkDragPlaceholder对应加个灰色的背景</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkDragDrop<span class="token punctuation" data-v-5ae91aa9>,</span> moveItemInArray<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/drag-drop&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-drag-drop-customizing-drag-place-holder'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div cdkDropList class=&quot;example-list&quot; (cdkDropListDropped)=&quot;drop($event)&quot;&gt;
            &lt;div class=&quot;example-box&quot; *ngFor=&quot;let movie of movies&quot; cdkDrag&gt;
                &lt;div class=&quot;example-custom-placeholder&quot; *cdkDragPlaceholder&gt;&lt;/div&gt;
                {{movie}}
            &lt;/div&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .example-list {
            width: 500px;
            max-width: 100%;
            border: solid 1px #ccc;
            min-height: 60px;
            display: block;
            background: white;
            border-radius: 4px;
            overflow: hidden;
        }

        .example-box {
            padding: 20px 10px;
            border-bottom: solid 1px #ccc;
            color: rgba(0, 0, 0, 0.87);
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            box-sizing: border-box;
            cursor: move;
            background: white;
            font-size: 14px;
        }

        .cdk-drag-preview {
            box-sizing: border-box;
            border-radius: 4px;
            box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
            0 8px 10px 1px rgba(0, 0, 0, 0.14),
            0 3px 14px 2px rgba(0, 0, 0, 0.12);
        }

        .cdk-drag-animating {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-box:last-child {
            border: none;
        }

        .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder) {
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

        .example-custom-placeholder {
            background: #ccc;
            border: dotted 3px #999;
            min-height: 60px;
            transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }

    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>DragDropCustomizingDragPlaceHolderComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    movies <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token string" data-v-5ae91aa9>'Episode I - The Phantom Menace'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode II - Attack of the Clones'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode III - Revenge of the Sith'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode IV - A New Hope'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode V - The Empire Strikes Back'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode VI - Return of the Jedi'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode VII - The Force Awakens'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token string" data-v-5ae91aa9>'Episode VIII - The Last Jedi'</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>drop</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> CdkDragDrop<span class="token operator" data-v-5ae91aa9>&lt;</span>string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token function" data-v-5ae91aa9>moveItemInArray</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>movies<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>previousIndex<span class="token punctuation" data-v-5ae91aa9>,</span> event<span class="token punctuation" data-v-5ae91aa9>.</span>currentIndex<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181218112454651.gif" alt="" data-v-5ae91aa9></p> <h2 id="angular-cdk-observers" data-v-5ae91aa9><a href="#angular-cdk-observers" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/observers</h2> <p data-v-5ae91aa9>observers 监听dom变化,想使用Observers里面的功能需要先<code data-v-5ae91aa9>import {ObserversModule} from '@angular/cdk/observers';</code>再<code data-v-5ae91aa9>provider ObserversModule</code></p> <h3 id="contentobserver" data-v-5ae91aa9><a href="#contentobserver" class="header-anchor" data-v-5ae91aa9>#</a> ContentObserver</h3> <p data-v-5ae91aa9>ContentObserver是cdk Observers模块里面提供的一个service。用来监听某个视图元素内容的变化。ContentObserver里面的方法也比较简单。ContentObserver里面的方法如下。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ContentObserver</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听视图元素内容的变化，参数--Element
     */</span>
    <span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> Element<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>MutationRecord<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听视图元素内容的变化，参数--ElementRef
     */</span>
    <span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token operator" data-v-5ae91aa9>&lt;</span>Element<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>MutationRecord<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9></div></div><h4 id="contentobserver的使用" data-v-5ae91aa9><a href="#contentobserver的使用" class="header-anchor" data-v-5ae91aa9>#</a> ContentObserver的使用</h4> <p data-v-5ae91aa9>针对ContentObserver Service的使用，我们举一个非常简单的例子。每秒去变化一下内容。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ContentObserver<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/observers'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-observers'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div #observerSource&gt;
            {{content}}
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkObserversComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'observerSource'</span><span class="token punctuation" data-v-5ae91aa9>)</span>
    observerSource<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    content <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * ContentObserver service
     */</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> observer<span class="token operator" data-v-5ae91aa9>:</span> ContentObserver</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 启动一个定时任务，去改变内容
         */</span>
        <span class="token function" data-v-5ae91aa9>setInterval</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>content<span class="token operator" data-v-5ae91aa9>++</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>3000</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// ContentObserver 监听视图元素内容的变化，只是简单的打印</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>observer<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>observerSource<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> MutationRecord<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9></div></div><h3 id="cdkobservecontent" data-v-5ae91aa9><a href="#cdkobservecontent" class="header-anchor" data-v-5ae91aa9>#</a> CdkObserveContent</h3> <p data-v-5ae91aa9>CdkObserveContent是cdk Observers里面提供的指令。可以监听添加了CdkObserveContent指令视图元素的内容的变化。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdkObserveContent]</li> <li data-v-5ae91aa9>Exported as: cdkObserveContent</li></ul> <h4 id="cdkobservecontent指令属性" data-v-5ae91aa9><a href="#cdkobservecontent指令属性" class="header-anchor" data-v-5ae91aa9>#</a> CdkObserveContent指令属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>debounce: number</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>有的时候视图元素内容的变化是很频繁的，用来设置多长时间监听变化的事件</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>disabled: any</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkObserveContentDisabled’)</td> <td style="text-align:left;" data-v-5ae91aa9>动态设置是否监听变化事件</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>event: EventEmitter&lt;MutationRecord[]&gt;</td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘cdkObserveContent’)</td> <td style="text-align:left;" data-v-5ae91aa9>内容变化回调事件</td></tr></tbody></table> <h4 id="cdkobservecontent指令的使用" data-v-5ae91aa9><a href="#cdkobservecontent指令的使用" class="header-anchor" data-v-5ae91aa9>#</a> CdkObserveContent指令的使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-observers'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div cdkObserveContent (cdkObserveContent)=&quot;onContentChange($event)&quot;&gt;
            {{content}}
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkObserversComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    content <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token function" data-v-5ae91aa9>setInterval</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>content<span class="token operator" data-v-5ae91aa9>++</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>3000</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>onContentChange</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event<span class="token operator" data-v-5ae91aa9>:</span> MutationRecord<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>关于angular里面内容变化这块的内容，我倒是想到了另一个东西NgZone。用来应对在模板中咱们动态绑定了一个值。但是这个值频繁的在变化。如果不做其他的处理我们知道Angular会跟踪变化，并且把变化的内容实时的展示在页面上。这样肯定是会有性能的损耗的。这个时候NgZone就派上用场了。NgZone里面提供了两个函数：runOutsideAngular() 使你的上下文不会触发Angular跟踪变化、run()方法让Angular重新跟踪变化。</p> <h2 id="angular-cdk-layout" data-v-5ae91aa9><a href="#angular-cdk-layout" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/layout</h2> <p data-v-5ae91aa9>cdk Layout是cdk 提供的响应式布局工具，提供了实用程序来构建响应屏幕大小更改的响应UI，其服务可以轻松检测窗口大小并与媒体查询匹配。这使得你可以完全控制UI并适应不同的屏幕尺寸。layout使用之前也要provider LayoutModule:<code data-v-5ae91aa9>import {LayoutModule} from '@angular/cdk/layout';</code>layout 响应式布局工具包含：</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>breakpoints 屏幕尺寸</li> <li data-v-5ae91aa9>breakpointObserver 观察器</li> <li data-v-5ae91aa9>mediaMatcher 媒体查询匹配</li></ul> <h3 id="breakpointobserver" data-v-5ae91aa9><a href="#breakpointobserver" class="header-anchor" data-v-5ae91aa9>#</a> BreakpointObserver</h3> <p data-v-5ae91aa9>BreakpointObserver是cdk Layout里面提供的Service。用于评估媒体查询和对其变化作出反应的一个Service。</p> <h4 id="breakpointobserver属性方法" data-v-5ae91aa9><a href="#breakpointobserver属性方法" class="header-anchor" data-v-5ae91aa9>#</a> BreakpointObserver属性方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>BreakpointObserver</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 简单的一次性匹配，判断当前屏幕是否符合匹配条件
     */</span>
    <span class="token function" data-v-5ae91aa9>isMatched</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>:</span> string <span class="token operator" data-v-5ae91aa9>|</span> string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听设置的条件。在条件满足的时候，或者不满足的时候触发
     */</span>
    <span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span>value<span class="token operator" data-v-5ae91aa9>:</span> string <span class="token operator" data-v-5ae91aa9>|</span> string<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>BreakpointState<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9></div></div><h4 id="breakpointobserver使用" data-v-5ae91aa9><a href="#breakpointobserver使用" class="header-anchor" data-v-5ae91aa9>#</a> BreakpointObserver使用</h4> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>BreakpointObserver<span class="token punctuation" data-v-5ae91aa9>,</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>,</span> BreakpointState<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/layout'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-layout'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'./cdk-layout.component.html'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-layout.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkLayoutComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> breakpointObserver<span class="token operator" data-v-5ae91aa9>:</span> BreakpointObserver</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// 简单的一次性匹配，可以使用isMatching方法。如果组件初始化时窗口至少为40rem高，则输出到控制台</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>breakpointObserver<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isMatched</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'(min-height: 40rem)'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'窗口至少为40rem高!'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'窗口没有40rem高!'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
        <span class="token comment" data-v-5ae91aa9>// 注意哦，不会一直回调哦，只会在第一次满足或者不满足条件的时候回调。</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>breakpointObserver
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'(min-width: 500px)'</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>state<span class="token operator" data-v-5ae91aa9>:</span> BreakpointState</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>state<span class="token punctuation" data-v-5ae91aa9>.</span>matches<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                    <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'窗口宽度大于或者等于500px!'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                    <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'窗口不满足宽度大于或者等于500px!'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token punctuation" data-v-5ae91aa9>}</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token comment" data-v-5ae91aa9>// 也可以使用Breakpoints对象，而不是使用手写的媒体查询，它为我们提供了常见断点的键。如果多个参数，当有一个条件满足或者不满足的时候就会触发</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>breakpointObserver
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>[</span>Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Small<span class="token punctuation" data-v-5ae91aa9>,</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>HandsetPortrait<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>state<span class="token operator" data-v-5ae91aa9>:</span> BreakpointState</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span>state<span class="token punctuation" data-v-5ae91aa9>.</span>matches<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                    <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>
                        <span class="token string" data-v-5ae91aa9>'Breakpoints.Small or Breakpoints.HandsetPortrait'</span>
                    <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
                <span class="token punctuation" data-v-5ae91aa9>}</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9></div></div><h3 id="mediamatcher" data-v-5ae91aa9><a href="#mediamatcher" class="header-anchor" data-v-5ae91aa9>#</a> MediaMatcher</h3> <p data-v-5ae91aa9>MediaMatcher也是一个Service，用于媒体查询匹配。</p> <h4 id="mediamatcher属性方法" data-v-5ae91aa9><a href="#mediamatcher属性方法" class="header-anchor" data-v-5ae91aa9>#</a> MediaMatcher属性方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>MediaMatcher</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 评估给定的媒体查询并返回可从中检索结果的本机MediaQueryList。
     * 确认布局引擎将触发所提供的选择器查询st。
     */</span>
    <span class="token function" data-v-5ae91aa9>matchMedia</span><span class="token punctuation" data-v-5ae91aa9>(</span>query<span class="token operator" data-v-5ae91aa9>:</span> string<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> MediaQueryList<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span> 
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9></div></div><h4 id="mediamatcher使用" data-v-5ae91aa9><a href="#mediamatcher使用" class="header-anchor" data-v-5ae91aa9>#</a> MediaMatcher使用</h4> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>MediaMatcher<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/layout'</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-layout'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'./cdk-layout.component.html'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-layout.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkLayoutComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy <span class="token punctuation" data-v-5ae91aa9>{</span>
    matcher<span class="token operator" data-v-5ae91aa9>:</span> MediaQueryList<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> mediaMatcher<span class="token operator" data-v-5ae91aa9>:</span> MediaMatcher</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>matcher <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>mediaMatcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>matchMedia</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'(min-width: 500px)'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>matcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>addListener</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>matchMediaListener<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnDestroy</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>matcher<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>removeListener</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>matchMediaListener<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>matchMediaListener</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token builtin" data-v-5ae91aa9>console</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>matches <span class="token operator" data-v-5ae91aa9>?</span> <span class="token string" data-v-5ae91aa9>'match'</span> <span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'no match'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>如果你在测试的时候发现没有打印，你可以试着去改变浏览器窗口的大小。</p></div> <h3 id="breakpoints" data-v-5ae91aa9><a href="#breakpoints" class="header-anchor" data-v-5ae91aa9>#</a> Breakpoints</h3> <p data-v-5ae91aa9>Breakpoints里面的内容是cdk里面提供的一些屏幕尺寸常量。如下所示。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>const</span> Breakpoints <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  XSmall<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(max-width: 599.99px)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  Small<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 600px) and (max-width: 959.99px)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  Medium<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 960px) and (max-width: 1279.99px)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  Large<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 1280px) and (max-width: 1919.99px)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  XLarge<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 1920px)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>

  Handset<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(max-width: 599.99px) and (orientation: portrait), '</span> <span class="token operator" data-v-5ae91aa9>+</span>
           <span class="token string" data-v-5ae91aa9>'(max-width: 959.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  Tablet<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), '</span> <span class="token operator" data-v-5ae91aa9>+</span>
          <span class="token string" data-v-5ae91aa9>'(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  Web<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 840px) and (orientation: portrait), '</span> <span class="token operator" data-v-5ae91aa9>+</span>
       <span class="token string" data-v-5ae91aa9>'(min-width: 1280px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>

  HandsetPortrait<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(max-width: 599.99px) and (orientation: portrait)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  TabletPortrait<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  WebPortrait<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 840px) and (orientation: portrait)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>

  HandsetLandscape<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(max-width: 959.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  TabletLandscape<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  WebLandscape<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'(min-width: 1280px) and (orientation: landscape)'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9></div></div><h3 id="示例汇总-2" data-v-5ae91aa9><a href="#示例汇总-2" class="header-anchor" data-v-5ae91aa9>#</a> 示例汇总</h3> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  BreakpointObserver<span class="token punctuation" data-v-5ae91aa9>,</span>
  BreakpointState<span class="token punctuation" data-v-5ae91aa9>,</span>
  MediaMatcher<span class="token punctuation" data-v-5ae91aa9>,</span>
  Breakpoints
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/layout&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Observable <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;rxjs/Observable&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;layout&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;./layout.component.html&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>&quot;./layout.component.scss&quot;</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>LayoutComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  isHandset<span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>BreakpointState<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>public</span> bm<span class="token operator" data-v-5ae91aa9>:</span> BreakpointObserver<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>public</span> media<span class="token operator" data-v-5ae91aa9>:</span> MediaMatcher</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 手持设备</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Handset <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Handset<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 手持landscape屏</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> HandsetLandscape <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>HandsetLandscape<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>//手持portrait屏</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> HandsetPortrait <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>HandsetPortrait<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 多媒体</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Medium <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Medium<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 平板电脑</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Tablet <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Tablet<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 平板电脑 Landscape</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> TabletLandscape <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>TabletLandscape<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 平板电脑 Portrait</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> TabletPortrait <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>TabletPortrait<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// web</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Web <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Web<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// web landscape</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> WebLandscape <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>WebLandscape<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// web portrait</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> WebPortrait <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>WebPortrait<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 大屏幕</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Large <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Large<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 更大屏幕</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> XLarge <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>XLarge<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 更小屏幕</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> XSmall <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>XSmall<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// 小屏幕</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> Small <span class="token operator" data-v-5ae91aa9>=</span> Breakpoints<span class="token punctuation" data-v-5ae91aa9>.</span>Small<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> isSmall <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>media<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>matchMedia</span><span class="token punctuation" data-v-5ae91aa9>(</span>Small<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;is small matcher&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> isSmall<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;is small&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>bm<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isMatched</span><span class="token punctuation" data-v-5ae91aa9>(</span>Small<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token keyword" data-v-5ae91aa9>let</span> isXSmall <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>media<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>matchMedia</span><span class="token punctuation" data-v-5ae91aa9>(</span>XSmall<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;is xsmall matcher&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> isXSmall<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;is xsmall&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>bm<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isMatched</span><span class="token punctuation" data-v-5ae91aa9>(</span>XSmall<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token comment" data-v-5ae91aa9>// 是否满足多个条件</span>
    <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>bm
      <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>observe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>[</span>
        Handset<span class="token punctuation" data-v-5ae91aa9>,</span>
        HandsetLandscape<span class="token punctuation" data-v-5ae91aa9>,</span>
        Handset<span class="token punctuation" data-v-5ae91aa9>,</span>
        Medium<span class="token punctuation" data-v-5ae91aa9>,</span>
        Tablet<span class="token punctuation" data-v-5ae91aa9>,</span>
        TabletLandscape<span class="token punctuation" data-v-5ae91aa9>,</span>
        TabletPortrait<span class="token punctuation" data-v-5ae91aa9>,</span>
        Web<span class="token punctuation" data-v-5ae91aa9>,</span>
        WebLandscape<span class="token punctuation" data-v-5ae91aa9>,</span>
        WebPortrait<span class="token punctuation" data-v-5ae91aa9>,</span>
        Large<span class="token punctuation" data-v-5ae91aa9>,</span>
        XLarge<span class="token punctuation" data-v-5ae91aa9>,</span>
        Small<span class="token punctuation" data-v-5ae91aa9>,</span>
        XSmall
      <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span>
      <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>res</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span>res<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
      <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-bidi" data-v-5ae91aa9><a href="#angular-cdk-bidi" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/bidi</h2> <p data-v-5ae91aa9>cdk Bidirectionality提供给我们的功能，就是用来设置布局方向。 使用之前先provider BidiModule<code data-v-5ae91aa9>import {BidiModule} from '@angular/cdk/bidi';</code>bidi里面咱们需要知道的就两个东西：一个Service Directionality、一个指令 Dir。bidi主要内容：</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Directionality</li> <li data-v-5ae91aa9>Direction</li> <li data-v-5ae91aa9>DIR_DOCUMENT</li> <li data-v-5ae91aa9>Dir</li> <li data-v-5ae91aa9>BidiModule</li></ul> <h3 id="directionality" data-v-5ae91aa9><a href="#directionality" class="header-anchor" data-v-5ae91aa9>#</a> Directionality</h3> <p data-v-5ae91aa9>Directionality Service两个作用：获取当前应用程序的布局方向、监听应用程序布局方向的变化。</p> <h4 id="directionality-service属性方法" data-v-5ae91aa9><a href="#directionality-service属性方法" class="header-anchor" data-v-5ae91aa9>#</a> Directionality Service属性方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>Directionality</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/** 当前应用程序的布局方向 'ltr' or 'rtl' */</span>
    readonly value<span class="token operator" data-v-5ae91aa9>:</span> Direction<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 当前应用程序的布局方向发生改变了的回调函数 'ltr' / 'rtl' state changes. */</span>
    readonly change<span class="token operator" data-v-5ae91aa9>:</span> EventEmitter<span class="token operator" data-v-5ae91aa9>&lt;</span>Direction<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9></div></div><h4 id="directionality-service使用" data-v-5ae91aa9><a href="#directionality-service使用" class="header-anchor" data-v-5ae91aa9>#</a> Directionality Service使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> Inject<span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token constant" data-v-5ae91aa9>DIR_DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>,</span> Directionality<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/bidi'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Subscription<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;rxjs&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-bidi'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'./cdk-bidi.component.html'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-bidi.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkBidiComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _dirChangeSubscription <span class="token operator" data-v-5ae91aa9>=</span> Subscription<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token constant" data-v-5ae91aa9>EMPTY</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
        <span class="token parameter" data-v-5ae91aa9>@<span class="token function" data-v-5ae91aa9>Inject</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token constant" data-v-5ae91aa9>DIR_DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token keyword" data-v-5ae91aa9>public</span> dirDoc<span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token keyword" data-v-5ae91aa9>public</span> directionality<span class="token operator" data-v-5ae91aa9>:</span> Directionality</span>
    <span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_dirChangeSubscription <span class="token operator" data-v-5ae91aa9>=</span> directionality<span class="token punctuation" data-v-5ae91aa9>.</span>change<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'bbb'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnDestroy</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_dirChangeSubscription<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>unsubscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9></div></div><h3 id="dir" data-v-5ae91aa9><a href="#dir" class="header-anchor" data-v-5ae91aa9>#</a> Dir</h3> <p data-v-5ae91aa9>Dir指令用于设置布局方向和监听布局方向的变化。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [dir]</li> <li data-v-5ae91aa9>Exported as: dir</li></ul> <h4 id="dir指令属性" data-v-5ae91aa9><a href="#dir指令属性" class="header-anchor" data-v-5ae91aa9>#</a> Dir指令属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>change: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output(‘dirChange’)</td> <td style="text-align:left;" data-v-5ae91aa9>当前视图布局方向发生改变的时候调用</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>value: Direction</td> <td style="text-align:left;" data-v-5ae91aa9></td> <td style="text-align:left;" data-v-5ae91aa9>当前视图元素的布局方向</td></tr></tbody></table> <h4 id="dir指令使用" data-v-5ae91aa9><a href="#dir指令使用" class="header-anchor" data-v-5ae91aa9>#</a> Dir指令使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-bidi'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!--从左到右--&gt;
        &lt;p dir=&quot;LTR&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            从左到右排列
        &lt;/p&gt;
        &lt;!--从右到左--&gt;
        &lt;p dir=&quot;RTL&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            从右到左排列
        &lt;/p&gt;
        &lt;div dir=&quot;RTL&quot; style=&quot;border: solid 1px #ccc; padding: 10px&quot;&gt;
            &lt;div style=&quot;margin-left: 8px; margin-right: 8px; display: inline-block; 
            width: 250px; background-color: #cccccc; padding: 4px; color: red&quot;
                 dir=&quot;LTR&quot;&gt;第一个位置--内容靠左
            &lt;/div&gt;
            &lt;div style=&quot;margin-left: 8px; margin-right: 8px; display: inline-block; 
            width: 250px; background-color: #cccccc; padding: 4px; color: red&quot;
                 dir=&quot;RTL&quot;&gt;第二个位置--内容靠右
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!--可以控制方向--&gt;
        &lt;p [dir]=&quot;dir&quot; (dirChange)=&quot;dirChange()&quot; style=&quot;border: solid 1px #ccc; color: red; padding: 10px&quot;&gt;
            可以动态切换方向
        &lt;/p&gt;
        &lt;button (click)=&quot;switchDir()&quot;&gt;切换方向&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkBidiComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>switchDir</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>===</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;ltr&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>dirChange</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'aaa'</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9></div></div><h4 id="示例汇总-3" data-v-5ae91aa9><a href="#示例汇总-3" class="header-anchor" data-v-5ae91aa9>#</a> 示例汇总</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>!</span><span class="token operator" data-v-5ae91aa9>--</span>从左到右<span class="token operator" data-v-5ae91aa9>--</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>p dir<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;LTR&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
  bidi works<span class="token operator" data-v-5ae91aa9>!</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>p<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>!</span><span class="token operator" data-v-5ae91aa9>--</span>从右到左<span class="token operator" data-v-5ae91aa9>--</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>p dir<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;RTL&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
  bidi works<span class="token operator" data-v-5ae91aa9>!</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>p<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>!</span><span class="token operator" data-v-5ae91aa9>--</span>可以控制方向<span class="token operator" data-v-5ae91aa9>--</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>p <span class="token punctuation" data-v-5ae91aa9>[</span>dir<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;dir&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>
  bidi works<span class="token operator" data-v-5ae91aa9>!</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>p<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token operator" data-v-5ae91aa9>&lt;</span>a href<span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;javascript:;&quot;</span> <span class="token punctuation" data-v-5ae91aa9>(</span>click<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>=</span><span class="token string" data-v-5ae91aa9>&quot;switchDir()&quot;</span><span class="token operator" data-v-5ae91aa9>&gt;</span>改变<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token operator" data-v-5ae91aa9>/</span>a<span class="token operator" data-v-5ae91aa9>&gt;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>,</span> Inject <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/core&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span> <span class="token constant" data-v-5ae91aa9>DIR_DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>,</span> Directionality <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/bidi&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
  selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;bidi&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;./bidi.component.html&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
  styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>&quot;./bidi.component.scss&quot;</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>BidiComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
  dir<span class="token operator" data-v-5ae91aa9>:</span> string <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span>
    <span class="token parameter" data-v-5ae91aa9>@<span class="token function" data-v-5ae91aa9>Inject</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token constant" data-v-5ae91aa9>DIR_DOCUMENT</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token keyword" data-v-5ae91aa9>public</span> dirDoc<span class="token operator" data-v-5ae91aa9>:</span> any<span class="token punctuation" data-v-5ae91aa9>,</span>
    <span class="token keyword" data-v-5ae91aa9>public</span> directionlity<span class="token operator" data-v-5ae91aa9>:</span> Directionality</span>
  <span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span><span class="token punctuation" data-v-5ae91aa9>}</span>

  <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 获取document</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dirDoc<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// ltr 获取当前值</span>
    <span class="token keyword" data-v-5ae91aa9>let</span> dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>directionlity<span class="token punctuation" data-v-5ae91aa9>.</span>value<span class="token punctuation" data-v-5ae91aa9>;</span>
    console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;dir is &quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span> dir<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>

  <span class="token function" data-v-5ae91aa9>switchDir</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>===</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;ltr&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>else</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
      <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>dir <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>&quot;rtl&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
  <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-a11y" data-v-5ae91aa9><a href="#angular-cdk-a11y" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/a11y</h2> <p data-v-5ae91aa9>cdk ally里面提供的功能运用场景是 select, menu 这种有 list options 的组件, 负责处理键盘上下按钮时 option active 的逻辑。cdk ally使用之前也要provider导入A11yModule模块。<code data-v-5ae91aa9>import {A11yModule} from '@angular/cdk/a11y';</code></p> <h3 id="listkeymanager" data-v-5ae91aa9><a href="#listkeymanager" class="header-anchor" data-v-5ae91aa9>#</a> ListKeyManager</h3> <p data-v-5ae91aa9>ListKeyManager主要做的事情就是去管理一堆的list 里面哪个item处于active状态(active代表一种状态，比如处于活动转换，获取焦点状态等等)。而且ListKeyManager管理的item必须实现ListKeyManagerOption接口。换句话说ListKeyManager用于管理一系列list的item,这些item就是ListKeyManagerOption。通过ListKeyManager来控制那个ListKeyManagerOption对应的item处于active状态。所以咱们先看下ListKeyManagerOption和ListKeyManager里面一些常见的方法。</p> <h4 id="listkeymanageroption" data-v-5ae91aa9><a href="#listkeymanageroption" class="header-anchor" data-v-5ae91aa9>#</a> ListKeyManagerOption</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>interface</span> <span class="token class-name" data-v-5ae91aa9>ListKeyManagerOption</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/** 当前item是否disabled. */</span>
    disabled<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 获取当前item对应的label,配合ListKeyManager里面withTypeAhead函数的使用
     *  适用于输入框的情况，比如输入框下面有一些list item。当输入框输入字符的时候list item 里面的active
     *  item 和输入的文字匹配
     */</span>
    getLabel<span class="token operator" data-v-5ae91aa9>?</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> string<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9></div></div><h4 id="listkeymanager常用方法" data-v-5ae91aa9><a href="#listkeymanager常用方法" class="header-anchor" data-v-5ae91aa9>#</a> ListKeyManager常用方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ListKeyManager</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token constant" data-v-5ae91aa9>T</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>ListKeyManagerOption</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * tab 按键的时候触发的
     */</span>
    tabOut<span class="token operator" data-v-5ae91aa9>:</span> Subject<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token keyword" data-v-5ae91aa9>void</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 当ListKeyManager里面的list item ,active item 改变的时候触发*/</span>
    change<span class="token operator" data-v-5ae91aa9>:</span> Subject<span class="token operator" data-v-5ae91aa9>&lt;</span>number<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置那些ListKeyManager管理的list里在移动(比如tab 按键切换)过程中那些item需要跳过。
     */</span>
    <span class="token function" data-v-5ae91aa9>skipPredicate</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function-variable function" data-v-5ae91aa9>predicate</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>item<span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span></span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置是否循环移动(当active item是最好一个的时候，继续下一个跳到第一个)
     */</span>
    <span class="token function" data-v-5ae91aa9>withWrap</span><span class="token punctuation" data-v-5ae91aa9>(</span>shouldWrap<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * active item 移动方向垂直(对应键盘方向键的 上下按键)
     */</span>
    <span class="token function" data-v-5ae91aa9>withVerticalOrientation</span><span class="token punctuation" data-v-5ae91aa9>(</span>enabled<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * active item 移动方向水平(对应键盘方向键的 左右按键)
     */</span>
    <span class="token function" data-v-5ae91aa9>withHorizontalOrientation</span><span class="token punctuation" data-v-5ae91aa9>(</span>direction<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'ltr'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token string" data-v-5ae91aa9>'rtl'</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 用来处理组合按键的情况，比如 altr + 方向键的时候。同样达到方向按键的效果
     */</span>
    <span class="token function" data-v-5ae91aa9>withAllowedModifierKeys</span><span class="token punctuation" data-v-5ae91aa9>(</span>keys<span class="token operator" data-v-5ae91aa9>:</span> ListKeyManagerModifierKey<span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置typeahead 模式 配合ListKeyManagerOption的getLabel()函数使用，一般用于配合有输入框的情况下使用，比如输入框输入一个字符，active item 会自动设置到包含这个字符item
     */</span>
    <span class="token function" data-v-5ae91aa9>withTypeAhead</span><span class="token punctuation" data-v-5ae91aa9>(</span>debounceInterval<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置 active item 对应的index
     */</span>
    <span class="token function" data-v-5ae91aa9>setActiveItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>index<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置 active item 对应的item
     */</span>
    <span class="token function" data-v-5ae91aa9>setActiveItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>item<span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置按键
     */</span>
    <span class="token function" data-v-5ae91aa9>onKeydown</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token operator" data-v-5ae91aa9>:</span> KeyboardEvent<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 当前active item 对应的事件 */</span>
    readonly activeItemIndex<span class="token operator" data-v-5ae91aa9>:</span> number <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 当前active item 对应的item */</span>
    readonly activeItem<span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span> <span class="token operator" data-v-5ae91aa9>|</span> <span class="token keyword" data-v-5ae91aa9>null</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 设置第一个位置的item 为active item(当然了如果第一个item 是disable,则设置第二个) */</span>
    <span class="token function" data-v-5ae91aa9>setFirstItemActive</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 设置最后一个位置的item 为 active item */</span>
    <span class="token function" data-v-5ae91aa9>setLastItemActive</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 设置下一个item 为active item */</span>
    <span class="token function" data-v-5ae91aa9>setNextItemActive</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 设置上一个item 为active item */</span>
    <span class="token function" data-v-5ae91aa9>setPreviousItemActive</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置active item,但是不产生其他的效果
     */</span>
    <span class="token function" data-v-5ae91aa9>updateActiveItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>index<span class="token operator" data-v-5ae91aa9>:</span> number<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置active item,但是不产生其他的效果
     */</span>
    <span class="token function" data-v-5ae91aa9>updateActiveItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>item<span class="token operator" data-v-5ae91aa9>:</span> <span class="token constant" data-v-5ae91aa9>T</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9></div></div><h4 id="listkeymanager的使用" data-v-5ae91aa9><a href="#listkeymanager的使用" class="header-anchor" data-v-5ae91aa9>#</a> ListKeyManager的使用</h4> <p data-v-5ae91aa9>接下来咱们通过ListKeyManager的两个具体继承类ActiveDescendantKeyManager和FocusKeyManager来说明ListKeyManager的具体使用。其实ActiveDescendantKeyManager里面管理的item必须实现Highlightable接口、FocusKeyManager里面管理的item必须实现FocusableOption。</p> <ol data-v-5ae91aa9><li data-v-5ae91aa9>ActiveDescendantKeyManager的使用
ActiveDescendantKeyManager里面管理的list item 必须实现Highlightable接口。</li></ol> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>ActiveDescendantKeyManager继承了ListKeyManager类，Highlightable实现了ListKeyManagerOption接口</p></div> <p data-v-5ae91aa9>ActiveDescendantKeyManager使用场景：如果想ListKeyManager管理的list里面active的item标记为活动状态，其他的标记为非活动状态情况下使用。而且每个item都必须实现Highlightable接口。接下来咱们通过一个具体的实例来简单的说明下。咱们自定义一个item组件ItemActiveOptionComponent，这个组件实现Highlightable接口。组件里面做的事情也很简单就是去改变active item的class样式。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> HostBinding<span class="token punctuation" data-v-5ae91aa9>,</span> Input<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Highlightable<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-item-active-option'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div [class.disabled]=&quot;disabled&quot;&gt;
            &lt;ng-content&gt;&lt;/ng-content&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        .active {
            background-color: lightblue;
            color: #fff;
        }

        .disabled {
            opacity: 0.3;
        }
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ItemActiveOptionComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>Highlightable</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> item<span class="token punctuation" data-v-5ae91aa9>;</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> disabled <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _isActive <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    @<span class="token function" data-v-5ae91aa9>HostBinding</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'class.active'</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token keyword" data-v-5ae91aa9>get</span> <span class="token function" data-v-5ae91aa9>isActive</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_isActive<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置 active对应的class
     */</span>
    <span class="token function" data-v-5ae91aa9>setActiveStyles</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_isActive <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>true</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置非active对应的class
     */</span>
    <span class="token function" data-v-5ae91aa9>setInactiveStyles</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_isActive <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>getLabel</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>item<span class="token punctuation" data-v-5ae91aa9>.</span>name<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// cdk-active-descendant.component.less</span>
<span class="token punctuation" data-v-5ae91aa9>.</span>form<span class="token operator" data-v-5ae91aa9>-</span>control <span class="token punctuation" data-v-5ae91aa9>{</span>
  display<span class="token operator" data-v-5ae91aa9>:</span> block<span class="token punctuation" data-v-5ae91aa9>;</span>
  width<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>100</span><span class="token operator" data-v-5ae91aa9>%</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  height<span class="token operator" data-v-5ae91aa9>:</span> <span class="token function" data-v-5ae91aa9>calc</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>2.25</span>rem <span class="token operator" data-v-5ae91aa9>+</span> <span class="token number" data-v-5ae91aa9>2</span>px<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  padding<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.375</span>rem <span class="token number" data-v-5ae91aa9>.75</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  font<span class="token operator" data-v-5ae91aa9>-</span>size<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  line<span class="token operator" data-v-5ae91aa9>-</span>height<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1.5</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>495057</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>clip<span class="token operator" data-v-5ae91aa9>:</span> padding<span class="token operator" data-v-5ae91aa9>-</span>box<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>px solid #ced4da<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  transition<span class="token operator" data-v-5ae91aa9>:</span> border<span class="token operator" data-v-5ae91aa9>-</span>color <span class="token number" data-v-5ae91aa9>.15</span>s ease<span class="token operator" data-v-5ae91aa9>-</span><span class="token keyword" data-v-5ae91aa9>in</span><span class="token operator" data-v-5ae91aa9>-</span>out<span class="token punctuation" data-v-5ae91aa9>,</span> box<span class="token operator" data-v-5ae91aa9>-</span>shadow <span class="token number" data-v-5ae91aa9>.15</span>s ease<span class="token operator" data-v-5ae91aa9>-</span><span class="token keyword" data-v-5ae91aa9>in</span><span class="token operator" data-v-5ae91aa9>-</span>out<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>form<span class="token operator" data-v-5ae91aa9>-</span>control<span class="token operator" data-v-5ae91aa9>:</span>focus <span class="token punctuation" data-v-5ae91aa9>{</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>495057</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>80</span>bdff<span class="token punctuation" data-v-5ae91aa9>;</span>
  outline<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  box<span class="token operator" data-v-5ae91aa9>-</span>shadow<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0.2</span>rem <span class="token function" data-v-5ae91aa9>rgba</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>123</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>255</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>.25</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>


<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token operator" data-v-5ae91aa9>:</span>first<span class="token operator" data-v-5ae91aa9>-</span>child <span class="token punctuation" data-v-5ae91aa9>{</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>-</span>left<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>-</span>right<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item  <span class="token punctuation" data-v-5ae91aa9>{</span>
  position<span class="token operator" data-v-5ae91aa9>:</span> relative<span class="token punctuation" data-v-5ae91aa9>;</span>
  display<span class="token operator" data-v-5ae91aa9>:</span> block<span class="token punctuation" data-v-5ae91aa9>;</span>
  padding<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.75</span>rem <span class="token number" data-v-5ae91aa9>1.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>:</span> <span class="token operator" data-v-5ae91aa9>-</span><span class="token number" data-v-5ae91aa9>1</span>px<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>px solid <span class="token function" data-v-5ae91aa9>rgba</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>.125</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token operator" data-v-5ae91aa9>:</span>last<span class="token operator" data-v-5ae91aa9>-</span>child <span class="token punctuation" data-v-5ae91aa9>{</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>-</span>right<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>-</span>left<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token punctuation" data-v-5ae91aa9>.</span>active  <span class="token punctuation" data-v-5ae91aa9>{</span>
  z<span class="token operator" data-v-5ae91aa9>-</span>index<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>2</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>007</span>bff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>007</span>bff<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>ActiveDescendantKeyManager的使用，咱们放在这个组件里面实现。ActiveDescendantKeyManager里面管理的item就是咱们上面自定义的ItemActiveOptionComponent。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> QueryList<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChildren<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ItemActiveOptionComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;./active-item-option/item-active-option.component&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ActiveDescendantKeyManager<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>

@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-active-descendant'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- 输入框 --&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;input class=&quot;form-control&quot; placeholder=&quot;Search...&quot; (keyup)=&quot;onKeyDown($event)&quot; #input&gt;
        &lt;/div&gt;

        &lt;section class=&quot;list-group&quot;&gt;
            &lt;!-- ActiveDescendantKeyManager要管理的item --&gt;
            &lt;app-item-active-option *ngFor=&quot;let user of users | filter: 'name' : input.value; index as index&quot;
                                    [item]=&quot;user&quot; class=&quot;list-group-item&quot;&gt;
                {{user.name}}
            &lt;/app-item-active-option&gt;
        &lt;/section&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'cdk-active-descendant.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkActiveDescendantComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 找到所有的item(ListKeyManagerOption - Highlightable)
     */</span>
    @<span class="token function" data-v-5ae91aa9>ViewChildren</span><span class="token punctuation" data-v-5ae91aa9>(</span>ItemActiveOptionComponent<span class="token punctuation" data-v-5ae91aa9>)</span> items<span class="token operator" data-v-5ae91aa9>:</span> QueryList<span class="token operator" data-v-5ae91aa9>&lt;</span>ItemActiveOptionComponent<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// list item source list</span>
    users <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934d965e7501f4e1c6f&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Caroline Hodges&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029348f7eed8b6f5f02db&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Delores Rivas&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029346f48c8407c64d0d5&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Darlene Franklin&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029341eff315fa87f9e21&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Alfreda Love&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029342e8917c6ccdb9865&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Marcy Ratliff&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029349dbb48013460e01f&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Beulah Nielsen&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934f4f1586e5e72d74a&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Morton Kerr&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029347918bb204bf7014e&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Autumn Tillman&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934b86f80e1fc60c626&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Diane Bennett&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029348999f59215020349&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;June Eaton&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token keyword" data-v-5ae91aa9>private</span> keyManager<span class="token operator" data-v-5ae91aa9>:</span> ActiveDescendantKeyManager<span class="token operator" data-v-5ae91aa9>&lt;</span>ItemActiveOptionComponent<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// new ActiveDescendantKeyManager</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>keyManager <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>ActiveDescendantKeyManager</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>items<span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withWrap</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token comment" data-v-5ae91aa9>// 循环</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withTypeAhead</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span> <span class="token comment" data-v-5ae91aa9>// 支持搜索</span>

    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token function" data-v-5ae91aa9>onKeyDown</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// 传递事件进去</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>keyManager<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>onKeydown</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/20181220090109772.gif" alt="" data-v-5ae91aa9></p> <ol start="2" data-v-5ae91aa9><li data-v-5ae91aa9>FocusKeyManager的使用
FocusKeyManager里面管理的item必须实现FocusableOption接口。</li></ol> <div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>FocusKeyManager继承了ListKeyManager类，FocusableOption实现了ListKeyManagerOption接口</p></div> <p data-v-5ae91aa9>FocusKeyManager使用场景：如果想ListKeyManager管理的list里面active item想直接接受到浏览器的焦点focus的时候使用。每个item都必须实现FocusableOption接口。下面自定义一个组件ItemFocusOptionComponent,并且这个组件实现了FocusableOption接口，FocusableOption接口的focus()方法里面设置当前item获取焦点。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> HostBinding<span class="token punctuation" data-v-5ae91aa9>,</span> Input<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>FocusableOption<span class="token punctuation" data-v-5ae91aa9>,</span> FocusOrigin<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-item-focus-option'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;ng-content&gt;&lt;/ng-content&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styles<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
            <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>:host:focus {
            background: lightblue;
            color: #fff;
        }</span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
    <span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>ItemFocusOptionComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>FocusableOption</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    @<span class="token function" data-v-5ae91aa9>Input</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> item<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 屏蔽掉默认的键盘事件，js里面自己控制键盘事件
     */</span>
    @<span class="token function" data-v-5ae91aa9>HostBinding</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'tabindex'</span><span class="token punctuation" data-v-5ae91aa9>)</span> tabindex <span class="token operator" data-v-5ae91aa9>=</span> <span class="token string" data-v-5ae91aa9>'-1'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> host<span class="token operator" data-v-5ae91aa9>:</span> ElementRef</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>getLabel</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>return</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>item<span class="token punctuation" data-v-5ae91aa9>.</span>name<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置获取焦点
     */</span>
    <span class="token function" data-v-5ae91aa9>focus</span><span class="token punctuation" data-v-5ae91aa9>(</span>origin<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> FocusOrigin<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>host<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>focus</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// cdk-focus.component.less 样式文件</span>
<span class="token punctuation" data-v-5ae91aa9>.</span>form<span class="token operator" data-v-5ae91aa9>-</span>control <span class="token punctuation" data-v-5ae91aa9>{</span>
  display<span class="token operator" data-v-5ae91aa9>:</span> block<span class="token punctuation" data-v-5ae91aa9>;</span>
  width<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>100</span><span class="token operator" data-v-5ae91aa9>%</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  height<span class="token operator" data-v-5ae91aa9>:</span> <span class="token function" data-v-5ae91aa9>calc</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>2.25</span>rem <span class="token operator" data-v-5ae91aa9>+</span> <span class="token number" data-v-5ae91aa9>2</span>px<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  padding<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.375</span>rem <span class="token number" data-v-5ae91aa9>.75</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  font<span class="token operator" data-v-5ae91aa9>-</span>size<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  line<span class="token operator" data-v-5ae91aa9>-</span>height<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1.5</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>495057</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>clip<span class="token operator" data-v-5ae91aa9>:</span> padding<span class="token operator" data-v-5ae91aa9>-</span>box<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>px solid #ced4da<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  transition<span class="token operator" data-v-5ae91aa9>:</span> border<span class="token operator" data-v-5ae91aa9>-</span>color <span class="token number" data-v-5ae91aa9>.15</span>s ease<span class="token operator" data-v-5ae91aa9>-</span><span class="token keyword" data-v-5ae91aa9>in</span><span class="token operator" data-v-5ae91aa9>-</span>out<span class="token punctuation" data-v-5ae91aa9>,</span> box<span class="token operator" data-v-5ae91aa9>-</span>shadow <span class="token number" data-v-5ae91aa9>.15</span>s ease<span class="token operator" data-v-5ae91aa9>-</span><span class="token keyword" data-v-5ae91aa9>in</span><span class="token operator" data-v-5ae91aa9>-</span>out<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>form<span class="token operator" data-v-5ae91aa9>-</span>control<span class="token operator" data-v-5ae91aa9>:</span>focus <span class="token punctuation" data-v-5ae91aa9>{</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>495057</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>80</span>bdff<span class="token punctuation" data-v-5ae91aa9>;</span>
  outline<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  box<span class="token operator" data-v-5ae91aa9>-</span>shadow<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0</span> <span class="token number" data-v-5ae91aa9>0.2</span>rem <span class="token function" data-v-5ae91aa9>rgba</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>123</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>255</span><span class="token punctuation" data-v-5ae91aa9>,</span><span class="token number" data-v-5ae91aa9>.25</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>


<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token operator" data-v-5ae91aa9>:</span>first<span class="token operator" data-v-5ae91aa9>-</span>child <span class="token punctuation" data-v-5ae91aa9>{</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>-</span>left<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>top<span class="token operator" data-v-5ae91aa9>-</span>right<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item  <span class="token punctuation" data-v-5ae91aa9>{</span>
  position<span class="token operator" data-v-5ae91aa9>:</span> relative<span class="token punctuation" data-v-5ae91aa9>;</span>
  display<span class="token operator" data-v-5ae91aa9>:</span> block<span class="token punctuation" data-v-5ae91aa9>;</span>
  padding<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.75</span>rem <span class="token number" data-v-5ae91aa9>1.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>:</span> <span class="token operator" data-v-5ae91aa9>-</span><span class="token number" data-v-5ae91aa9>1</span>px<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>1</span>px solid <span class="token function" data-v-5ae91aa9>rgba</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>.125</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token operator" data-v-5ae91aa9>:</span>last<span class="token operator" data-v-5ae91aa9>-</span>child <span class="token punctuation" data-v-5ae91aa9>{</span>
  margin<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>0</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>-</span>right<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>bottom<span class="token operator" data-v-5ae91aa9>-</span>left<span class="token operator" data-v-5ae91aa9>-</span>radius<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>.25</span>rem<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>.</span>list<span class="token operator" data-v-5ae91aa9>-</span>group<span class="token operator" data-v-5ae91aa9>-</span>item<span class="token punctuation" data-v-5ae91aa9>.</span>focus <span class="token punctuation" data-v-5ae91aa9>{</span>
  z<span class="token operator" data-v-5ae91aa9>-</span>index<span class="token operator" data-v-5ae91aa9>:</span> <span class="token number" data-v-5ae91aa9>2</span><span class="token punctuation" data-v-5ae91aa9>;</span>
  color<span class="token operator" data-v-5ae91aa9>:</span> #fff<span class="token punctuation" data-v-5ae91aa9>;</span>
  background<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>007</span>bff<span class="token punctuation" data-v-5ae91aa9>;</span>
  border<span class="token operator" data-v-5ae91aa9>-</span>color<span class="token operator" data-v-5ae91aa9>:</span> #<span class="token number" data-v-5ae91aa9>007</span>bff<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token comment" data-v-5ae91aa9>// FocusKeyManager的具体使用</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> QueryList<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChildren<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>FocusableOption<span class="token punctuation" data-v-5ae91aa9>,</span> FocusKeyManager<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>ItemFocusOptionComponent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;./focus-item-option/item-focus-option.component&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-focus'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;section class=&quot;list-group&quot; (keyup)=&quot;onKeyDown($event)&quot;&gt;
            &lt;app-item-focus-option *ngFor=&quot;let user of users; index as index&quot;
                                   [item]=&quot;user&quot; class=&quot;list-group-item&quot;
                                   (click)=&quot;selectItem(index)&quot;&gt;
                {{user.name}}
            &lt;/app-item-focus-option&gt;
        &lt;/section&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./cdk-focus.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkFocusComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>// 获取搜有实现了FocusableOption接口的item</span>
    @<span class="token function" data-v-5ae91aa9>ViewChildren</span><span class="token punctuation" data-v-5ae91aa9>(</span>ItemFocusOptionComponent<span class="token punctuation" data-v-5ae91aa9>)</span> items<span class="token operator" data-v-5ae91aa9>:</span> QueryList<span class="token operator" data-v-5ae91aa9>&lt;</span>ItemFocusOptionComponent<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>// list source</span>
    users <span class="token operator" data-v-5ae91aa9>=</span> <span class="token punctuation" data-v-5ae91aa9>[</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934d965e7501f4e1c6f&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Caroline Hodges&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029348f7eed8b6f5f02db&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Delores Rivas&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029346f48c8407c64d0d5&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Darlene Franklin&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029341eff315fa87f9e21&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Alfreda Love&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029342e8917c6ccdb9865&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Marcy Ratliff&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029349dbb48013460e01f&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Beulah Nielsen&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934f4f1586e5e72d74a&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Morton Kerr&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029347918bb204bf7014e&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Autumn Tillman&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b902934b86f80e1fc60c626&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;Diane Bennett&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span>
        <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token string" data-v-5ae91aa9>&quot;id&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;5b9029348999f59215020349&quot;</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token string" data-v-5ae91aa9>&quot;name&quot;</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>&quot;June Eaton&quot;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token keyword" data-v-5ae91aa9>private</span> keyManager<span class="token operator" data-v-5ae91aa9>:</span> FocusKeyManager<span class="token operator" data-v-5ae91aa9>&lt;</span>ItemFocusOptionComponent<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// 创建FocusKeyManager对象</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>keyManager <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>FocusKeyManager</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>items<span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withWrap</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span>
            <span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>withTypeAhead</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 传递按键事件
     * @param event
     */</span>
    <span class="token function" data-v-5ae91aa9>onKeyDown</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>keyManager<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>onKeydown</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

    <span class="token comment" data-v-5ae91aa9>/**
     * 点击选中
     * @param index
     */</span>
    <span class="token function" data-v-5ae91aa9>selectItem</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>index<span class="token operator" data-v-5ae91aa9>:</span> number</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>keyManager<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>setActiveItem</span><span class="token punctuation" data-v-5ae91aa9>(</span>index<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>48</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>49</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>50</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>51</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>52</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>53</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>54</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>55</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>56</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>57</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>58</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>59</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>60</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>61</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>62</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>63</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>64</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>65</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>66</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>67</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>68</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>69</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>70</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>71</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>72</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>73</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>74</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>75</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>76</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>77</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>78</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>79</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>80</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>81</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>82</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>83</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>84</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>85</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>86</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>87</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>88</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>89</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>90</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>91</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>92</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>93</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>94</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>95</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>96</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>97</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>98</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>99</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>100</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>101</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>102</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>103</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>104</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>105</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>106</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>107</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>108</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>109</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>110</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>111</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>112</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>113</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>114</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>115</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>116</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>117</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>118</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>119</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>120</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>121</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>122</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>123</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>124</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>125</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>126</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>127</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>128</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>129</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>130</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>131</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>132</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>133</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>134</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>135</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>136</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>137</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>138</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>139</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>140</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>141</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>142</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>143</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>144</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>145</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>146</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>147</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>148</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>149</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>150</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>151</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>152</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>153</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>154</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>155</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>156</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>157</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>158</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>159</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>160</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>161</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>162</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>163</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>164</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>165</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>166</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>167</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>168</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>169</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>170</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>171</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>172</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>173</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>174</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>175</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9><img src="/vuebloger/img/post/2018122009021547.gif" alt="" data-v-5ae91aa9></p> <h3 id="focustrap" data-v-5ae91aa9><a href="#focustrap" class="header-anchor" data-v-5ae91aa9>#</a> FocusTrap</h3> <p data-v-5ae91aa9>focusTrap是cdk ally模块里面提供的一个指令。用于捕获元素中的Tab键焦点。同时控制焦点的范围,Tab切换焦点的时候不会跳出这个区域。举个例子比如有一个视图元素添加了FocusTrap指令，这个视图元素里面有三个input。这样Tab键切换焦点的时候焦点会在这三个input之间切换。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdkTrapFocus]</li> <li data-v-5ae91aa9>Exported as: cdkTrapFocus
还有几个其他的指令可以配合FocusTrap指令来使用:cdkFocusRegionStart、cdkFocusRegionEnd、cdkFocusInitial。咱们上面不是说了FocusTrap指令会控制焦点的范围。cdkFocusRegionStart和cdkFocusRegionEnd指令有可以进一步的控制焦点的范围</li> <li data-v-5ae91aa9>cdkFocusRegionStart：FocusTrap范围的起点</li> <li data-v-5ae91aa9>cdkFocusRegionEnd：FocusTrap范围的终点</li> <li data-v-5ae91aa9>cdkFocusInitial：区间出现时，一开始获取focus的item。</li></ul> <h4 id="focustrap指令属性介绍" data-v-5ae91aa9><a href="#focustrap指令属性介绍" class="header-anchor" data-v-5ae91aa9>#</a> FocusTrap指令属性介绍</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>FocusTrap属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>autoCapture: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkTrapFocusAutoCapture’)</td> <td style="text-align:left;" data-v-5ae91aa9>初始化的时候元素是否自动获取焦点</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>enabled: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘cdkTrapFocus’)</td> <td style="text-align:left;" data-v-5ae91aa9>false Tab切换焦点的时候会跑到外面去，true Tab切换焦点的时候焦点不会跑到外面去</td></tr></tbody></table> <h4 id="focustrap指令使用" data-v-5ae91aa9><a href="#focustrap指令使用" class="header-anchor" data-v-5ae91aa9>#</a> FocusTrap指令使用</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-accessibility'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;!-- FocusTrap的使用，- 控制焦点的范围,tab切换焦点的时候不会跳出这个区域 --&gt;
        &lt;div cdkTrapFocus style=&quot;border: solid 1px #ccc; padding: 10px&quot;&gt;
            &lt;!-- Tab and Shift + Tab will not leave this element. --&gt;
            &lt;input placeholder=&quot;Email&quot;&gt;
            &lt;input type=&quot;password&quot; placeholder=&quot;Password&quot; style=&quot;margin-left: 10px&quot;&gt;
            &lt;button type=&quot;submit&quot; style=&quot;margin-left: 10px&quot;&gt;Submit&lt;/button&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkAccessibilityComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9></div></div><h4 id="cdkfocusregionstart-cdkfocusregionend-cdkfocusinitial的使用" data-v-5ae91aa9><a href="#cdkfocusregionstart-cdkfocusregionend-cdkfocusinitial的使用" class="header-anchor" data-v-5ae91aa9>#</a> cdkFocusRegionStart cdkFocusRegionEnd cdkFocusInitial的使用</h4> <p data-v-5ae91aa9>cdkFocusRegionStart和cdkFocusRegionEnd的使用应该很好理解。就是用来控制范围的。关键是cdkFocusInitial的使用，cdkFocusInitial必须要配合cdkTrapFocus指令的cdkTrapFocusAutoCapture=true使用。而且我试了下cdkFocusInitial一开始是没有效果，没都是隐藏显示的时候才有效果，才获取到焦点。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-accessibility'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div *ngIf=&quot;displayFocusTrap&quot; cdkTrapFocus cdkTrapFocusAutoCapture=&quot;true&quot;
             style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;2&quot; cdkFocusRegionStart&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;3&quot; cdkFocusInitial&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;4&quot; cdkFocusRegionEnd&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;displayFocusTrap=!displayFocusTrap&quot;&gt;显示&lt;/button&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkAccessibilityComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    displayFocusTrap <span class="token operator" data-v-5ae91aa9>=</span> <span class="token boolean" data-v-5ae91aa9>false</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9></div></div><h3 id="focusmonitor" data-v-5ae91aa9><a href="#focusmonitor" class="header-anchor" data-v-5ae91aa9>#</a> FocusMonitor</h3> <p data-v-5ae91aa9>FocusMonitor是cdk ally里面提供的一个Service。用于监控焦点。FocusMonitor里面常用方法如下</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>FocusMonitor</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnDestroy</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 监听元素的焦点获取
     */</span>
    <span class="token function" data-v-5ae91aa9>monitor</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>,</span> checkChildren<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>FocusOrigin<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>monitor</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token operator" data-v-5ae91aa9>&lt;</span>HTMLElement<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>,</span> checkChildren<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> Observable<span class="token operator" data-v-5ae91aa9>&lt;</span>FocusOrigin<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 停止监听元素的焦点获取
     */</span>
    <span class="token function" data-v-5ae91aa9>stopMonitoring</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>stopMonitoring</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token operator" data-v-5ae91aa9>&lt;</span>HTMLElement<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 设置元素获取焦点
     * @param element 元素
     * @param origin 设置的焦点是通过哪个来的 'touch' | 'mouse' | 'keyboard' | 'program' | null
     * @param options 用于配置focus行为的选项.
     */</span>
    <span class="token function" data-v-5ae91aa9>focusVia</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>,</span> origin<span class="token operator" data-v-5ae91aa9>:</span> FocusOrigin<span class="token punctuation" data-v-5ae91aa9>,</span> options<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> FocusOptions<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>focusVia</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token operator" data-v-5ae91aa9>&lt;</span>HTMLElement<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>,</span> origin<span class="token operator" data-v-5ae91aa9>:</span> FocusOrigin<span class="token punctuation" data-v-5ae91aa9>,</span> options<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> FocusOptions<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9></div></div><h4 id="focusmonitor的使用" data-v-5ae91aa9><a href="#focusmonitor的使用" class="header-anchor" data-v-5ae91aa9>#</a> FocusMonitor的使用</h4> <p data-v-5ae91aa9>一个简单的例子，咱们仅仅是在元素获取焦点的时候做一个简单的打印。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>FocusMonitor<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-focus-monitor'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div cdkTrapFocus style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;FocusMonitor item 1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 2&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 3&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusMonitor item 4&quot;&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkFocusMonitorComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> _elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span>
                <span class="token keyword" data-v-5ae91aa9>private</span> _focusMonitor<span class="token operator" data-v-5ae91aa9>:</span> FocusMonitor</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>/**
         * 这里我们只是做了一个简单的打印
         */</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_focusMonitor<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>monitor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_elementRef<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token boolean" data-v-5ae91aa9>true</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>mode</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            console<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>log</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'元素获取到焦点 focused 来源 '</span> <span class="token operator" data-v-5ae91aa9>+</span> mode<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnDestroy</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_focusMonitor<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>stopMonitoring</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_elementRef<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9></div></div><h3 id="focustrapfactory" data-v-5ae91aa9><a href="#focustrapfactory" class="header-anchor" data-v-5ae91aa9>#</a> FocusTrapFactory</h3> <p data-v-5ae91aa9>FocusTrapFactory也是cdk ally里面提供的一个Service。他的功能就是用来给元素添加cdkFocusTrap指令。FocusTrapFactory常用函数就一个，如下</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>FocusTrapFactory</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 给指定的元素添加cdkFocusTrap指令，deferCaptureElements参数正好对应cdkFocusTrap指令
     * @Input('cdkTrapFocusAutoCapture')功能
     */</span>
    <span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>,</span> deferCaptureElements<span class="token operator" data-v-5ae91aa9>?</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> FocusTrap<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9></div></div><h4 id="focustrapfactory使用" data-v-5ae91aa9><a href="#focustrapfactory使用" class="header-anchor" data-v-5ae91aa9>#</a> FocusTrapFactory使用</h4> <p data-v-5ae91aa9>通过FocusTrapFactory的crete函数达到cdkFocusTrap指令的效果。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AfterViewInit<span class="token punctuation" data-v-5ae91aa9>,</span> Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>FocusTrap<span class="token punctuation" data-v-5ae91aa9>,</span> FocusTrapFactory<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-focus-trap-factory'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;div style=&quot;border: solid 1px #ccc; padding: 10px; margin-top: 10px&quot;&gt;
            &lt;input value=&quot;FocusTrapFactory item 1&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 2&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 3&quot;&gt;
            &lt;input style=&quot;margin-left: 10px&quot; value=&quot;FocusTrapFactory item 4&quot;&gt;
        &lt;/div&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkFocusTrapFactoryComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token keyword" data-v-5ae91aa9>private</span> _focusTrap<span class="token operator" data-v-5ae91aa9>:</span> FocusTrap<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> _elementRef<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span>
                <span class="token keyword" data-v-5ae91aa9>private</span> _focusTrapFactory<span class="token operator" data-v-5ae91aa9>:</span> FocusTrapFactory</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngAfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_focusTrap <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_focusTrapFactory<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>create</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_elementRef<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>

<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9></div></div><h3 id="interactivitychecker" data-v-5ae91aa9><a href="#interactivitychecker" class="header-anchor" data-v-5ae91aa9>#</a> InteractivityChecker</h3> <p data-v-5ae91aa9>InteractivityChecker是一个Service，用于检查元素的一些状态。常见方法如下。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>InteractivityChecker</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 元素是否 disabled.
     */</span>
    <span class="token function" data-v-5ae91aa9>isDisabled</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 元素是否visible
     *
     * This will capture states like `display: none` and `visibility: hidden`, but not things like
     * being clipped by an `overflow: hidden` parent or being outside the viewport.
     *
     * @returns Whether the element is visible.
     */</span>
    <span class="token function" data-v-5ae91aa9>isVisible</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 元素是否接受Tab按键，不如Tab按键切换焦点
     */</span>
    <span class="token function" data-v-5ae91aa9>isTabbable</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 元素是否可以获取焦点
     */</span>
    <span class="token function" data-v-5ae91aa9>isFocusable</span><span class="token punctuation" data-v-5ae91aa9>(</span>element<span class="token operator" data-v-5ae91aa9>:</span> HTMLElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9></div></div><h4 id="interactivitychecker使用" data-v-5ae91aa9><a href="#interactivitychecker使用" class="header-anchor" data-v-5ae91aa9>#</a> InteractivityChecker使用</h4> <p data-v-5ae91aa9>举一个非常简单的例子，打印出button的各种状态。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>,</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>,</span> OnInit<span class="token punctuation" data-v-5ae91aa9>,</span> ViewChild<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>InteractivityChecker<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-interactivity-checker'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
        &lt;button #interactivityCheckerButton&gt;InteractivityChecker测试&lt;/button&gt;
        &lt;p&gt;上面button是否disable: {{disable}}&lt;/p&gt;
        &lt;p&gt;上面button是否visible: {{visible}}&lt;/p&gt;
        &lt;p&gt;上面button是否可以tabable: {{tabable}}&lt;/p&gt;
        &lt;p&gt;上面button是否可以focusable: {{focusable}}&lt;/p&gt;
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkInteractivityCheckerComponent</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    @<span class="token function" data-v-5ae91aa9>ViewChild</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>'interactivityCheckerButton'</span><span class="token punctuation" data-v-5ae91aa9>)</span> button<span class="token operator" data-v-5ae91aa9>:</span> ElementRef<span class="token punctuation" data-v-5ae91aa9>;</span>
    disable<span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    visible<span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    tabable<span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    focusable<span class="token operator" data-v-5ae91aa9>:</span> boolean<span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> _interactivityChecker<span class="token operator" data-v-5ae91aa9>:</span> InteractivityChecker</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>ngOnInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>disable <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_interactivityChecker<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isDisabled</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>button<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>visible <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_interactivityChecker<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isVisible</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>button<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>tabable <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_interactivityChecker<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isTabbable</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>button<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>focusable <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_interactivityChecker<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>isFocusable</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>button<span class="token punctuation" data-v-5ae91aa9>.</span>nativeElement<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9></div></div><h3 id="liveannouncer" data-v-5ae91aa9><a href="#liveannouncer" class="header-anchor" data-v-5ae91aa9>#</a> LiveAnnouncer</h3> <p data-v-5ae91aa9>LiveAnnouncer也是一个Service。用于在屏幕上发布一个消息。把消息显示在屏幕上。关于这一部分的内容估计的去看下W3C关于WAI-ARIA的使用。我们就举一个简单的例子。</p> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Component<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>LiveAnnouncer<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>&quot;@angular/cdk/a11y&quot;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'app-cdk-live-announcer'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    template<span class="token operator" data-v-5ae91aa9>:</span> <span class="token template-string" data-v-5ae91aa9><span class="token template-punctuation string" data-v-5ae91aa9>`</span><span class="token string" data-v-5ae91aa9>
    </span><span class="token template-punctuation string" data-v-5ae91aa9>`</span></span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkLiveAnnouncerComponent</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    index <span class="token operator" data-v-5ae91aa9>=</span> <span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/**
     * 会在屏幕上输出Hey Google，三秒之后又会换成Hey Google 2
     */</span>
    <span class="token function" data-v-5ae91aa9>constructor</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>private</span> liveAnnouncer<span class="token operator" data-v-5ae91aa9>:</span> LiveAnnouncer</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        liveAnnouncer<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>announce</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;Hey Google&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token function" data-v-5ae91aa9>setTimeout</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>timerTask</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token number" data-v-5ae91aa9>3000</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
    <span class="token function" data-v-5ae91aa9>timerTask</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>index <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>index <span class="token operator" data-v-5ae91aa9>+</span> <span class="token number" data-v-5ae91aa9>1</span><span class="token punctuation" data-v-5ae91aa9>;</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>liveAnnouncer<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>announce</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token string" data-v-5ae91aa9>&quot;Hey Google &quot;</span> <span class="token operator" data-v-5ae91aa9>+</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>index<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>toString</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>,</span> <span class="token string" data-v-5ae91aa9>&quot;off&quot;</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9></div></div><h2 id="angular-cdk-stepper" data-v-5ae91aa9><a href="#angular-cdk-stepper" class="header-anchor" data-v-5ae91aa9>#</a> @angular/cdk/stepper</h2> <p data-v-5ae91aa9>cdk Stepper 让我们能够更好的处理类似于工作流的情况(任务分为多个步骤，上一步操作完成之后进入下一步的操作，比如咱们休假申请单要经过多个领导的审批的情况)。要使用Stepper 需provider CdkStepperModule的。<code data-v-5ae91aa9>import {CdkStepperModule} from '@angular/cdk/stepper';</code></p> <p data-v-5ae91aa9>cdk Stepper看起来复杂其实里面的东西不是很多。整个Stepper都是围绕一个组件CdkStep(cdk-step)和6个指令(CdkStepper、CdkStepLabel、CdkStepperNext、CdkStepperPrevious、CdkStepHeader)来展开的。咱们上面不是说了么，cdk Stepper一般用来处理多个步骤任务。这里每个任务的内容用CdkStep组件来表示，所以有多少个步骤就会 有多少个CdkStep组件。CdkStepper指令呢则是用来管理这些组件比如跳到下一步，上一步，完成等等(所以cdk Stepper使用的时候我们需要另外定义一个组件继承自CdkStepper指令，我们可以把他当做是工作流组件)。CdkStepperNext、CdkStepperPrevious两个指令正好对应上一步下一步，一般会添加在button上面包含在CdkStep组件里面，因为每个步骤都可能有上一步，下一步这样的。CdkStepLabel指令则是对每一个步骤的描述你也可以认为是每个步骤的标题。CdkStepHeader指令一般则是用来表示当前进行到哪一步了。一般也是会自定义一个组件继承CdkStepHeader实现。</p> <h3 id="cdkstep" data-v-5ae91aa9><a href="#cdkstep" class="header-anchor" data-v-5ae91aa9>#</a> CdkStep</h3> <p data-v-5ae91aa9>CdkStep其实是一个组件来着。表示每个步骤的内容。所以任务有多少步就会有多少个CdkStep。比如如下代码有两个步骤所以有两个CdkStep(cdk-step)：</p> <div class="language-html line-numbers-mode" data-v-5ae91aa9><pre class="language-html" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>h1</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>cdk stepper<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>h1</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>yx-stepper</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-5ae91aa9>[stepControl]</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>frmStep1<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>#step1</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>cdkStep<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>ng-template</span> <span class="token attr-name" data-v-5ae91aa9>cdkStepLabel</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>第一步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>ng-template</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>form</span> <span class="token attr-name" data-v-5ae91aa9>#frmStep1</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>ngForm<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
            <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>input</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>text<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>name</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>a<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>value</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>a<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>/&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>form</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>button</span><span class="token style-attr language-css" data-v-5ae91aa9><span class="token attr-name" data-v-5ae91aa9> <span class="token attr-name" data-v-5ae91aa9>style</span></span><span class="token punctuation" data-v-5ae91aa9>=&quot;</span><span class="token attr-value" data-v-5ae91aa9><span class="token property" data-v-5ae91aa9>margin</span><span class="token punctuation" data-v-5ae91aa9>:</span> 8px</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>cdkStepperNext</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>button<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>下一步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>button</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-5ae91aa9>cdkStep</span> <span class="token attr-name" data-v-5ae91aa9>#step2</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>cdkStep<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>ng-template</span> <span class="token attr-name" data-v-5ae91aa9>cdkStepLabel</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>第二步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>ng-template</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>form</span> <span class="token attr-name" data-v-5ae91aa9>#frmStep2</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>ngForm<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
            <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>input</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>text<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>name</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>b<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>value</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>b<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>/&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>form</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>button</span> <span class="token attr-name" data-v-5ae91aa9>cdkStepperPrevious</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>button<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>上一步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>button</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>button</span><span class="token style-attr language-css" data-v-5ae91aa9><span class="token attr-name" data-v-5ae91aa9> <span class="token attr-name" data-v-5ae91aa9>style</span></span><span class="token punctuation" data-v-5ae91aa9>=&quot;</span><span class="token attr-value" data-v-5ae91aa9><span class="token property" data-v-5ae91aa9>margin</span><span class="token punctuation" data-v-5ae91aa9>:</span> 8px</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>cdkStepperNext</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>button<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>完成<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>button</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>yx-stepper</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9></div></div><p data-v-5ae91aa9>每个CdkStep组件里面的内容对应每个步骤的内容。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: cdk-step</li> <li data-v-5ae91aa9>Exported as: cdkStep</li></ul> <h4 id="cdkstep组件属性" data-v-5ae91aa9><a href="#cdkstep组件属性" class="header-anchor" data-v-5ae91aa9>#</a> CdkStep组件属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>内容</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>ariaLabel: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘aria-label’)</td> <td style="text-align:left;" data-v-5ae91aa9>添加aria-label属性</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>ariaLabelledby: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input(‘aria-labelledby’)</td> <td style="text-align:left;" data-v-5ae91aa9>添加aria-labelledby属性</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>completed: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤是否标记为完成状态</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>editable: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤标记为完成之后，是否还可以回到该步骤</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>errorMessage: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>错误信息</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>hasError: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>是否有错误</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>label: string</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤对应的label,和cdkStepLabel指令的作用是一样的(可以简单的把他认为是步骤的标题)</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>optional: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤是否是可选的</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>state: StepState</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤的状态</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>stepControl: AbstractControl</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>用于验证当前步骤的合法性</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>content: TemplateRef</td> <td style="text-align:left;" data-v-5ae91aa9></td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤 试图元素内容</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>interacted: false</td> <td style="text-align:left;" data-v-5ae91aa9></td> <td style="text-align:left;" data-v-5ae91aa9>用户是否看到当前步骤内容</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>stepLabel: CdkStepLabel</td> <td style="text-align:left;" data-v-5ae91aa9></td> <td style="text-align:left;" data-v-5ae91aa9>当前步骤label内容</td></tr></tbody></table> <h4 id="cdkstep组件方法" data-v-5ae91aa9><a href="#cdkstep组件方法" class="header-anchor" data-v-5ae91aa9>#</a> CdkStep组件方法</h4> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> declare <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkStep</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>OnChanges</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token operator" data-v-5ae91aa9>...</span>
    <span class="token comment" data-v-5ae91aa9>/** 选中当前步骤(select哪个步骤则选中那个步骤) */</span>
    <span class="token function" data-v-5ae91aa9>select</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 设置当前步骤到无效状态 */</span>
    <span class="token function" data-v-5ae91aa9>reset</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token operator" data-v-5ae91aa9>...</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9></div></div><div class="custom-block tip" data-v-5ae91aa9><p class="custom-block-title" data-v-5ae91aa9>温馨提示</p> <p data-v-5ae91aa9>CdkStep组件里面大部分的方法都需要配合我们下面要讲的CdkStepper指令来使用</p></div> <h3 id="cdkstepper" data-v-5ae91aa9><a href="#cdkstepper" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepper</h3> <p data-v-5ae91aa9>CdkStepper是一个指令，用来管理所有的步骤，即CdkStepper是用来管理CdkStep组件的。一般的做法是自定义一个组件继承CdkStepper指令。并且CdkStep组件是这个组件的子组件。比如如下的代码我们定义一个StepperComponent组件继承CdkStepper指令：</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdkStepper]</li> <li data-v-5ae91aa9>Exported as: cdkStepper</li></ul> <div class="language-js line-numbers-mode" data-v-5ae91aa9><pre class="language-js" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    AfterContentInit<span class="token punctuation" data-v-5ae91aa9>,</span>
    ChangeDetectionStrategy<span class="token punctuation" data-v-5ae91aa9>,</span>
    Component<span class="token punctuation" data-v-5ae91aa9>,</span>
    ContentChildren<span class="token punctuation" data-v-5ae91aa9>,</span>
    EventEmitter<span class="token punctuation" data-v-5ae91aa9>,</span>
    Output<span class="token punctuation" data-v-5ae91aa9>,</span>
    QueryList<span class="token punctuation" data-v-5ae91aa9>,</span>
    ViewEncapsulation
<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/core'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>AnimationEvent<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/animations'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>CdkStep<span class="token punctuation" data-v-5ae91aa9>,</span> CdkStepper<span class="token punctuation" data-v-5ae91aa9>,</span> StepContentPositionState<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'@angular/cdk/stepper'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>Subject<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'rxjs'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>distinctUntilChanged<span class="token punctuation" data-v-5ae91aa9>,</span> takeUntil<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'rxjs/operators'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
<span class="token keyword" data-v-5ae91aa9>import</span> <span class="token punctuation" data-v-5ae91aa9>{</span>yxStepperAnimations<span class="token punctuation" data-v-5ae91aa9>}</span> <span class="token keyword" data-v-5ae91aa9>from</span> <span class="token string" data-v-5ae91aa9>'./stepper-animations'</span><span class="token punctuation" data-v-5ae91aa9>;</span>
@<span class="token function" data-v-5ae91aa9>Component</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>{</span>
    selector<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'yx-stepper'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    templateUrl<span class="token operator" data-v-5ae91aa9>:</span> <span class="token string" data-v-5ae91aa9>'./stepper.component.html'</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    styleUrls<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token string" data-v-5ae91aa9>'./stepper.component.less'</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    providers<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span><span class="token punctuation" data-v-5ae91aa9>{</span>provide<span class="token operator" data-v-5ae91aa9>:</span> CdkStepper<span class="token punctuation" data-v-5ae91aa9>,</span> useExisting<span class="token operator" data-v-5ae91aa9>:</span> StepperComponent<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    animations<span class="token operator" data-v-5ae91aa9>:</span> <span class="token punctuation" data-v-5ae91aa9>[</span>yxStepperAnimations<span class="token punctuation" data-v-5ae91aa9>.</span>horizontalStepTransition<span class="token punctuation" data-v-5ae91aa9>]</span><span class="token punctuation" data-v-5ae91aa9>,</span>
    encapsulation<span class="token operator" data-v-5ae91aa9>:</span> ViewEncapsulation<span class="token punctuation" data-v-5ae91aa9>.</span>None<span class="token punctuation" data-v-5ae91aa9>,</span>
    changeDetection<span class="token operator" data-v-5ae91aa9>:</span> ChangeDetectionStrategy<span class="token punctuation" data-v-5ae91aa9>.</span>OnPush<span class="token punctuation" data-v-5ae91aa9>,</span>
<span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span>
<span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>StepperComponent</span> <span class="token keyword" data-v-5ae91aa9>extends</span> <span class="token class-name" data-v-5ae91aa9>CdkStepper</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterContentInit</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token comment" data-v-5ae91aa9>/** Steps that the stepper holds. */</span>
    @<span class="token function" data-v-5ae91aa9>ContentChildren</span><span class="token punctuation" data-v-5ae91aa9>(</span>CdkStep<span class="token punctuation" data-v-5ae91aa9>)</span> _steps<span class="token operator" data-v-5ae91aa9>:</span> QueryList<span class="token operator" data-v-5ae91aa9>&lt;</span>CdkStep<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** Event emitted when the current step is done transitioning in. */</span>
    @<span class="token function" data-v-5ae91aa9>Output</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> readonly animationDone<span class="token operator" data-v-5ae91aa9>:</span> EventEmitter<span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token keyword" data-v-5ae91aa9>void</span><span class="token operator" data-v-5ae91aa9>&gt;</span> <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>EventEmitter</span><span class="token operator" data-v-5ae91aa9>&lt;</span><span class="token keyword" data-v-5ae91aa9>void</span><span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    _animationDone <span class="token operator" data-v-5ae91aa9>=</span> <span class="token keyword" data-v-5ae91aa9>new</span> <span class="token class-name" data-v-5ae91aa9>Subject</span><span class="token operator" data-v-5ae91aa9>&lt;</span>AnimationEvent<span class="token operator" data-v-5ae91aa9>&gt;</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token function" data-v-5ae91aa9>ngAfterContentInit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
        <span class="token comment" data-v-5ae91aa9>// Mark the component for change detection whenever the content children query changes</span>
        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_steps<span class="token punctuation" data-v-5ae91aa9>.</span>changes<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>pipe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token function" data-v-5ae91aa9>takeUntil</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_destroyed<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>_stateChanged</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>

        <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_animationDone<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>pipe</span><span class="token punctuation" data-v-5ae91aa9>(</span>
            <span class="token comment" data-v-5ae91aa9>// This needs a `distinctUntilChanged` in order to avoid emitting the same event twice due</span>
            <span class="token comment" data-v-5ae91aa9>// to a bug in animations where the `.done` callback gets invoked twice on some browsers.</span>
            <span class="token comment" data-v-5ae91aa9>// See https://github.com/angular/angular/issues/24084</span>
            <span class="token function" data-v-5ae91aa9>distinctUntilChanged</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>x<span class="token punctuation" data-v-5ae91aa9>,</span> y</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> x<span class="token punctuation" data-v-5ae91aa9>.</span>fromState <span class="token operator" data-v-5ae91aa9>===</span> y<span class="token punctuation" data-v-5ae91aa9>.</span>fromState <span class="token operator" data-v-5ae91aa9>&amp;&amp;</span> x<span class="token punctuation" data-v-5ae91aa9>.</span>toState <span class="token operator" data-v-5ae91aa9>===</span> y<span class="token punctuation" data-v-5ae91aa9>.</span>toState<span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>,</span>
            <span class="token function" data-v-5ae91aa9>takeUntil</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>_destroyed<span class="token punctuation" data-v-5ae91aa9>)</span>
        <span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>subscribe</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token parameter" data-v-5ae91aa9>event</span> <span class="token operator" data-v-5ae91aa9>=&gt;</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
            <span class="token keyword" data-v-5ae91aa9>if</span> <span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>(</span>event<span class="token punctuation" data-v-5ae91aa9>.</span>toState <span class="token keyword" data-v-5ae91aa9>as</span> StepContentPositionState<span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token operator" data-v-5ae91aa9>===</span> <span class="token string" data-v-5ae91aa9>'current'</span><span class="token punctuation" data-v-5ae91aa9>)</span> <span class="token punctuation" data-v-5ae91aa9>{</span>
                <span class="token keyword" data-v-5ae91aa9>this</span><span class="token punctuation" data-v-5ae91aa9>.</span>animationDone<span class="token punctuation" data-v-5ae91aa9>.</span><span class="token function" data-v-5ae91aa9>emit</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
            <span class="token punctuation" data-v-5ae91aa9>}</span>
        <span class="token punctuation" data-v-5ae91aa9>}</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token punctuation" data-v-5ae91aa9>}</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>11</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>12</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>13</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>14</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>15</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>16</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>17</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>18</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>19</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>20</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>21</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>22</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>23</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>24</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>25</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>26</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>27</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>28</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>29</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>30</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>31</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>32</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>33</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>34</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>35</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>36</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>37</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>38</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>39</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>40</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>41</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>42</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>43</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>44</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>45</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>46</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>47</span><br data-v-5ae91aa9></div></div><h4 id="cdkstepper属性" data-v-5ae91aa9><a href="#cdkstepper属性" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepper属性</h4> <table data-v-5ae91aa9><thead data-v-5ae91aa9><tr data-v-5ae91aa9><th style="text-align:left;" data-v-5ae91aa9>属性</th> <th style="text-align:left;" data-v-5ae91aa9>类型</th> <th style="text-align:left;" data-v-5ae91aa9>解释</th></tr></thead> <tbody data-v-5ae91aa9><tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>linear: boolean</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()	任务流是否是线性的，</td> <td style="text-align:left;" data-v-5ae91aa9>前一个任务完成才能进行下一个任务</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>selected: CdkStep</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前选中的任务</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>selectedIndex: number</td> <td style="text-align:left;" data-v-5ae91aa9>@Input()</td> <td style="text-align:left;" data-v-5ae91aa9>当前选中任务的index</td></tr> <tr data-v-5ae91aa9><td style="text-align:left;" data-v-5ae91aa9>selectionChange: EventEmitter</td> <td style="text-align:left;" data-v-5ae91aa9>@Output()</td> <td style="text-align:left;" data-v-5ae91aa9>选中任务改变时候的回调函数</td></tr></tbody></table> <h4 id="cdkstepper方法" data-v-5ae91aa9><a href="#cdkstepper方法" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepper方法</h4> <div class="language-ts line-numbers-mode" data-v-5ae91aa9><pre class="language-ts" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token keyword" data-v-5ae91aa9>export</span> <span class="token keyword" data-v-5ae91aa9>declare</span> <span class="token keyword" data-v-5ae91aa9>class</span> <span class="token class-name" data-v-5ae91aa9>CdkStepper</span> <span class="token keyword" data-v-5ae91aa9>implements</span> <span class="token class-name" data-v-5ae91aa9>AfterViewInit</span><span class="token punctuation" data-v-5ae91aa9>,</span> OnDestroy <span class="token punctuation" data-v-5ae91aa9>{</span>
    <span class="token operator" data-v-5ae91aa9>...</span>
    <span class="token comment" data-v-5ae91aa9>/** 切换到下一个任务 */</span>
    <span class="token function" data-v-5ae91aa9>next</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 切换到上一个任务 */</span>
    <span class="token function" data-v-5ae91aa9>previous</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token comment" data-v-5ae91aa9>/** 重置所有的任务 */</span>
    <span class="token function" data-v-5ae91aa9>reset</span><span class="token punctuation" data-v-5ae91aa9>(</span><span class="token punctuation" data-v-5ae91aa9>)</span><span class="token operator" data-v-5ae91aa9>:</span> <span class="token keyword" data-v-5ae91aa9>void</span><span class="token punctuation" data-v-5ae91aa9>;</span>
    <span class="token operator" data-v-5ae91aa9>...</span>
<span class="token punctuation" data-v-5ae91aa9>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>8</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>9</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>10</span><br data-v-5ae91aa9></div></div><h3 id="cdksteplabel" data-v-5ae91aa9><a href="#cdksteplabel" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepLabel</h3> <p data-v-5ae91aa9>指令，每个步骤需要显示的label内容，比如如下代码第一步部分就是某个任务的label。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: [cdkStepLabel]</li></ul> <div class="language-html line-numbers-mode" data-v-5ae91aa9><pre class="language-html" data-v-5ae91aa9><code data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>cdk-step</span> <span class="token attr-name" data-v-5ae91aa9>[stepControl]</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>frmStep1<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>#step1</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>cdkStep<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>ng-template</span> <span class="token attr-name" data-v-5ae91aa9>cdkStepLabel</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>第一步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>ng-template</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>form</span> <span class="token attr-name" data-v-5ae91aa9>#frmStep1</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>ngForm<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
        <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>input</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>text<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>name</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>a<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>value</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>a<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>/&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>form</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
    <span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;</span>button</span><span class="token style-attr language-css" data-v-5ae91aa9><span class="token attr-name" data-v-5ae91aa9> <span class="token attr-name" data-v-5ae91aa9>style</span></span><span class="token punctuation" data-v-5ae91aa9>=&quot;</span><span class="token attr-value" data-v-5ae91aa9><span class="token property" data-v-5ae91aa9>margin</span><span class="token punctuation" data-v-5ae91aa9>:</span> 8px</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span></span> <span class="token attr-name" data-v-5ae91aa9>cdkStepperNext</span> <span class="token attr-name" data-v-5ae91aa9>type</span><span class="token attr-value" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>=</span><span class="token punctuation" data-v-5ae91aa9>&quot;</span>button<span class="token punctuation" data-v-5ae91aa9>&quot;</span></span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>下一步<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>button</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
<span class="token tag" data-v-5ae91aa9><span class="token tag" data-v-5ae91aa9><span class="token punctuation" data-v-5ae91aa9>&lt;/</span>cdk-step</span><span class="token punctuation" data-v-5ae91aa9>&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper" data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>1</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>2</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>3</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>4</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>5</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>6</span><br data-v-5ae91aa9><span class="line-number" data-v-5ae91aa9>7</span><br data-v-5ae91aa9></div></div><h3 id="cdksteppernext" data-v-5ae91aa9><a href="#cdksteppernext" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepperNext</h3> <p data-v-5ae91aa9>添加在button上的指令，跳到下一个任务。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: button[cdkStepperNext]</li></ul> <h3 id="cdkstepperprevious" data-v-5ae91aa9><a href="#cdkstepperprevious" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepperPrevious</h3> <p data-v-5ae91aa9>添加在button上的指令，跳到上一个任务。</p> <ul data-v-5ae91aa9><li data-v-5ae91aa9>Selector: button[cdkStepperPrevious]</li></ul> <h3 id="cdkstepheader" data-v-5ae91aa9><a href="#cdkstepheader" class="header-anchor" data-v-5ae91aa9>#</a> CdkStepHeader</h3> <p data-v-5ae91aa9>指令，每个任务的头部信息，任务指示器。</p> <p data-v-5ae91aa9>关于cdk参考示例代码，有兴趣的大家可以看看例子这里的<a href="https://github.com/tuacy/angular-cdk-study" target="_blank" rel="noopener noreferrer" data-v-5ae91aa9>例子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-5ae91aa9 data-v-5ae91aa9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,其中cdk stepper部分内容在workflow-stepper文件下面。实现效果图如下：</p> <p data-v-5ae91aa9><img src="/vuebloger/img/post/20190105231823718.gif" alt="" data-v-5ae91aa9></p> <h2 id="相关策略" data-v-5ae91aa9><a href="#相关策略" class="header-anchor" data-v-5ae91aa9>#</a> 相关策略</h2> <ul data-v-5ae91aa9><li data-v-5ae91aa9>定位策略
PositionStrategy</li> <li data-v-5ae91aa9>滚动策略
ScrollStrategy</li> <li data-v-5ae91aa9>块滚动策略
BlockScrollStrategy</li> <li data-v-5ae91aa9>空的滚动策略
NoopScrollStrategy</li> <li data-v-5ae91aa9>关闭滚动策略
CloseScrollStrategy</li> <li data-v-5ae91aa9>关闭滚动策略配置
CloseScrollStrategyConfig</li> <li data-v-5ae91aa9>滚动策略配置项
ScrollStrategyOptions</li></ul> <h2 id="资料" data-v-5ae91aa9><a href="#资料" class="header-anchor" data-v-5ae91aa9>#</a> 资料</h2> <ul data-v-5ae91aa9><li data-v-5ae91aa9><a href="https://www.npmjs.com/package/@angular/cdk" target="_blank" rel="noopener noreferrer" data-v-5ae91aa9>cdk npm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-5ae91aa9 data-v-5ae91aa9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li> <li data-v-5ae91aa9><a href="https://material.angular.io/cdk/categories" target="_blank" rel="noopener noreferrer" data-v-5ae91aa9>cdk文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-5ae91aa9 data-v-5ae91aa9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/vuebloger/assets/js/app.39b3045d.js" defer></script><script src="/vuebloger/assets/js/7.e348d6b7.js" defer></script><script src="/vuebloger/assets/js/1.14d9dcb0.js" defer></script><script src="/vuebloger/assets/js/44.b0621b94.js" defer></script><script src="/vuebloger/assets/js/31.3518b77b.js" defer></script>
  </body>
</html>
