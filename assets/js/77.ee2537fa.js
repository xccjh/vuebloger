(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{566:function(s,a,n){"use strict";n.r(a);var e=n(35),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"公司-npmrc-yarnrc配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#公司-npmrc-yarnrc配置"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 公司.npmrc/.yarnrc配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sass_binary_site=https://npm.taobao.org/mirrors/node-sass/\nregistry=http://172.25.20.65:4873/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",[n("li",[s._v("公司项目.npmrc/.yarnrc两个文件配置\n"),n("center",[n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_10-44-09.png",alt:".npmrc/.yarnrc两个文件",title:".npmrc/.yarnrc两个文件"}})]),s._v(" "),n("center",[s._v(".npmrc/.yarnrc两个文件")])],1)]),s._v(" "),n("h2",{attrs:{id:"npmrc文件详解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npmrc文件详解"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npmrc文件详解")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("除了使用cli的npm config命令来显示修改npm配置, 还可以通过npmrc文件直接修改配置")])]),s._v(" "),n("li",[n("p",[s._v("查看npmrc文件路径")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config ls -l  ##　查看所有配置项,存在npmrc文件就会打印出文件路径,\n                  ##  没有的话就使用命令配置registry, npmrc文件就会出现\nnpm config edit  ## 直接编辑config文件，这个会打开文本\nnpm config get userconfig  ## 查看用户配置文件路径\nnpm config get globalconfig  ## 查看全局配置文件路径\nnpm config get cache  ## 查看缓存配置，get后面可以跟任意配置项\nnpm config get prefix  ## 查看全局包安装路径\nnpm prefix   ## npm管理的项目位置\nnpm prefix -g   ## 全局npm位置\nnpm root ## 项目安装包位置\nnpm root -g ## 全局安装包安装路径\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-18_18-30-36.png",alt:"",title:"npm prefix"}}),s._v(" "),n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-18_18-31-27.png",alt:"",title:"npm root"}})]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("npmrc文件一般内容")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("prefix=D:\\Program Files\\nodejs\\node_global\ncache=D:\\Program Files\\nodejs\\node_cache\nregistry=https://registry.npm.taobao.org\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("通过在键名后面添加“ []”来指定数组值。例如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('key[] = "first value"\nkey[] = "second value"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v(".npmrc当文件中的行以;或#字符开头时，它们被解释为注释。.npmrc文件由npm / ini解析，该文件指定此注释语法。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# last modified: 01 Jan 2016\n; Set a new registry for a scoped package\n@myscope:registry=https://mycustomregistry.example.org\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("npmrc Files")])]),s._v(" "),n("p",[s._v("相关的四个文件是：")]),s._v(" "),n("ul",[n("li",[s._v("每个项目配置文件($项目目录/.npmrc)")]),s._v(" "),n("li",[s._v("每个用户配置文件(~/.npmrc,比如C:\\Users\\xcc-z.npmrc)")]),s._v(" "),n("li",[s._v("全局配置文件($PREFIX/etc/npmrc，比如C:\\Users\\xcc-z\\AppData\\Roaming\\npm\\etc\\npmrc)")]),s._v(" "),n("li",[s._v("npm构建配置文件(安装npm的目录下的npmrc文件。(C:\\Program Files\\nodejs\\node_modules\\npm\\npmrc))\n"),n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_19-44-47.png",alt:"",title:"userconfig/globalconfig"}})])]),s._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[n("p",[s._v("一般情况下没有用户node_Modules和全局etc下的npmrc，即是生效为用户的配置文件和全局包安装位置")])]),s._v(" "),n("li",[n("p",[s._v("默认情况下全局npm-cache路径")])])]),s._v(" "),n("p",[s._v("win系统的路径基础部分是：{% post_link cmd查看、修改、删除、添加环境变量 %APPDATA% %}/npm-cache/")]),s._v(" "),n("ul",[n("li",[s._v("默认情况下全局npm路径（$PREFIX）\nwin系统的路径基础部分是：{% post_link cmd查看、修改、删除、添加环境变量 %APPDATA% %}/npm/\nmac系统下路径基础部分是：/usr/local/")]),s._v(" "),n("li",[s._v("默认的全局安装包位置\nwin系统下路径是：({% post_link cmd查看、修改、删除、添加环境变量 %APPDATA% %}/npm/node_modules) | ({$prefix}/node_modules)\nmac系统下路径是：(/usr/local/lib/node_modules/) | ({$prefix}/lib/node_modules)")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_19-38-10.png",alt:"",title:"npm config"}})]),s._v(" "),n("ol",{attrs:{start:"7"}},[n("li",[s._v("当被安装的包是可执行的脚本时，可执行文件会被分别链接到不同的文件夹下，具体如下：")])]),s._v(" "),n("p",[s._v("在全局安装时：")]),s._v(" "),n("ul",[n("li",[s._v("在Unix系统中，可执行文件会被链接到{prefix}/bin目录下；")]),s._v(" "),n("li",[s._v("在Windows系统中，可执行文件会直接连接到{prefix}目录下；\n在本地安装时：")]),s._v(" "),n("li",[s._v("可执行文件会被链接到./node_modules/.bin目录下，以便可以通过npm运行脚本。")])]),s._v(" "),n("ol",{attrs:{start:"8"}},[n("li",[s._v("手册页的安装路径")])]),s._v(" "),n("ul",[n("li",[s._v("在全局模式下，手册页被链接到{prefix}/share/man目录下；")]),s._v(" "),n("li",[s._v("在本地模式下，手册页不会被安装。")]),s._v(" "),n("li",[s._v("在Windows系统中也不会安装手册页。")])]),s._v(" "),n("ol",{attrs:{start:"9"}},[n("li",[s._v("高速缓存文件的路径")])]),s._v(" "),n("p",[s._v("缓存的文件的路径由cache配置参数指定。cache配置参数的默认值如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Posix系统：~/.npm\nWindows系统：~/npm-cache\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"10"}},[n("li",[s._v("临时文件的路径")])]),s._v(" "),n("p",[s._v("临时文件存储在由配置参数tmp指定的路径下；在不同的操作系统中，tem的默认值为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("一般操作系统：环境变量TMPDIR、TMP 或 TEMP 的值\nUnix系统：/tmp\nWindows系统：c:\\windows\\temp\n程序会在每次运行时为临时文件生成一个唯一的目录，并程序成功退出后删除这个目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"更改全局包下载路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更改全局包下载路径"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 更改全局包下载路径")]),s._v(" "),n("p",[s._v("Nodejs 内置的npm默认会把模块安装在c盘的用户AppData目录下,以下更改npm默认全局包安装目录")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("查看当前电脑的npm 安装路径,输入"),n("code",[s._v("npm config ls")]),s._v("或"),n("code",[s._v("npm prefix -g")]),s._v("或"),n("code",[s._v("npm config get prefix")]),s._v(" "),n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_14-04-48.png",alt:"",title:"更改全局包下载路径"}})])]),s._v(" "),n("li",[n("p",[s._v("配置自定义路径\n首先在要保存的路径下创建两个文件夹：node_global_modules和node_cache\n"),n("img",{attrs:{src:"/vuebloger/img/post/20180829174237163.png",alt:"",title:"更改全局包下载路径"}}),s._v("\n添加好目录后 执行以下代码：")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('npm config set prefix "G:\\nodejs\\node_global_modules"\nnpm config set cache "G:\\nodejs\\node_cache"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("新增环境变量，在path中追加修改，其实就是把自定的目录中的可执行文件的路径添加到终端的命令查找目录列表中，让安装的包，能在控制台使用")])]),s._v(" "),n("p",[s._v("再次执行如下命令得到设置好的全局安装的路径添加到环境变量path即可，事实上这个目录会在安装全局包时存放命令行工具和node_modules文件夹")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm prefix -g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("测试，重新打开一个cmd命令行，安装一个插件执行"),n("code",[s._v("npm install cordova -g")]),s._v(",安装完毕后打开设置的安装路径看下")])]),s._v(" "),n("p",[s._v("在你设置的目录node_global_modules 中出现 如下文件夹则表示设置成功\n"),n("img",{attrs:{src:"/vuebloger/img/post/20180830090819287.png",alt:""}})]),s._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[s._v("恢复下默认配置\n删除X:\\Users\\用户名.npmrc整个文件 或者 文件下对应的配置即可")])]),s._v(" "),n("h2",{attrs:{id:"查看npm包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看npm包"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 查看npm包")]),s._v(" "),n("ol",[n("li",[s._v("查看本地已经安装的node包;")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm list --depth=0\nlist/ls/la(会列出包的信息)/ll(会列出包的信息)\n--depth=0/--depth 0(不显示深层的node包)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("查看全局安装的node包")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm list --depth=0 -g\n-g/--global(全局)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("查看安装路径")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1. 查看本地项目路径\nnpm prefix\n2. 查看本地项目安装包路径\nnpm root\n3. 查看全局npm路径\nnpm prefix -g/npm config get prefix/npm config ls\n2. 查看全局安装包路径\nnpm root -g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"npm-cli-的npm-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-cli-的npm-config"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm cli 的npm config")]),s._v(" "),n("ol",[n("li",[s._v("查看npm配置\n通过npm config ls -l 可查看npm的所有配置, 包括默认配置\nnpm config get cache (缓存路径)\nnpm config get prefix (全局npm管理路径)")]),s._v(" "),n("li",[s._v("设置npm配置\nnpm config set 进行配置项修改, 使用命令配置后会把配置文件中的注释全部删除\nnpm config set cache url (缓存路径)\nnpm config set prefix url (全局安装路径)")]),s._v(" "),n("li",[s._v("npm配置的命令行操作总结")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("   npm config set <key> <value> [--global]\n   npm config get <key>\n   npm config delete <key>\n   npm config list\n   npm config edit\n   npm get <key>\n   npm set <key> <value> [--global]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("ul",[n("li",[s._v("在设置配置属性时属性值默认是被存储于用户配置文件中，如果加上--global，则被存储在全局配置文件中。")]),s._v(" "),n("li",[s._v("如果要查看npm的所有配置属性（包括默认配置），可以使用npm config ls -l。")]),s._v(" "),n("li",[s._v("如果要查看npm的各种配置的含义，可以使用npm help config。")])]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[s._v("npm获取配置有6种方式，优先级由高到底。（还有package.json文件的内容）")])]),s._v(" "),n("ul",[n("li",[s._v("命令行参数。 "),n("code",[s._v("--proxy http://server:port")]),s._v("即将proxy的值设为"),n("code",[s._v("http://server:port")]),s._v("。")]),s._v(" "),n("li",[s._v("环境变量(系统环境变量)。 以npm_config_为前缀的环境变量将会被认为是npm的配置属性。如设置proxy可以加入这样的环境变量"),n("code",[s._v("npm_config_proxy=http://server:port")]),s._v("。")]),s._v(" "),n("li",[s._v("用户配置文件。可以通过"),n("code",[s._v("npm config get userconfig")]),s._v("查看文件路径。如果是mac系统的话默认路径就是"),n("code",[s._v("$HOME/.npmrc")]),s._v(",window用户为~/.npmrc")]),s._v(" "),n("li",[s._v("全局配置文件。可以通过"),n("code",[s._v("npm config get globalconfig")]),s._v("查看文件路径。mac系统的默认路径是"),n("code",[s._v("/usr/local/etc/npmrc")]),s._v(",window为"),n("code",[s._v("$PREFIX/etc/npmrc")])]),s._v(" "),n("li",[s._v("内置配置文件。安装npm的目录下的npmrc文件。("),n("code",[s._v("C:\\Program Files\\nodejs\\node_modules\\npm")]),s._v(")")]),s._v(" "),n("li",[s._v("默认配置。 npm本身有默认配置参数，如果以上5条都没设置，则npm会使用默认配置参数。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_19-57-28.png",alt:"",title:"npm安装位置"}}),s._v(" "),n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-17_19-58-24.png",alt:"",title:"npm安装位置的npmrc"}})]),s._v(" "),n("h2",{attrs:{id:"关于命令行标记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于命令行标记"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于命令行标记")]),s._v(" "),n("ul",[n("li",[s._v("在命令行上放置--foo bar设置foo配置参数为bar。 一个 -- 参数(argument)告诉cli解析器停止读取flags.一个 在命令行结尾的--flag参数(parameter)的值将会是true.")])]),s._v(" "),n("h2",{attrs:{id:"关于环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于环境变量"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于环境变量")]),s._v(" "),n("ul",[n("li",[s._v("任何以npm_config_开始的环境变量(系统变量)都会作为配置参数解读。在环境里设置npm_config_foo=bar将会设置foo配置参数为bar。任何没有值的环境配置将会默认为true。配置值是不区分大小写的，所以NPM_CONFIG_FOO=bar的结果一样。")])]),s._v(" "),n("h2",{attrs:{id:"关于npm-config"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于npm-config"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于"),n("code",[s._v("npm_config_")])]),s._v(" "),n("p",[s._v("npm script时会带一些参数变量，例如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"test": "node scripts/tools/test.js --name=test111"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("平常我们执行npm run dev，想要获取后面的参数，只能通过")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("console.log(process.argv)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("打印出来的是这样的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[ 'C:\\\\Program Files\\\\nodejs\\\\node.exe',\n  'D:\\\\workspace\\\\xxxx\\\\scripts\\\\test.js',\n  '--name=test111' ]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("明显不是我们想要的，我们想直接获取test111")]),s._v(" "),n("p",[s._v("那么我们在试下，跑"),n("code",[s._v("npm run dev --name=test222")]),s._v("\n然后打印一下看看：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("console.log(process.argv)\nconsole.log(process.env.npm_config_name)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("打印出来的是这样的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[ 'C:\\\\Program Files\\\\nodejs\\\\node.exe',\n  'D:\\\\workspace\\\\scripts\\\\test.js',\n  '--name=test111' ]\ntest222\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("我们可以通过 npm_config_ 来直接方便地获取参数")]),s._v(" "),n("h2",{attrs:{id:"package-json变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json变量"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" package.json变量")]),s._v(" "),n("p",[s._v("package.json的属性名会拼接上npm_package_前缀。例如如果你的package.json文件中有")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("“name”：“foo”，“version”：“"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("那么你的脚本中npm_package_name会是foo，而npm_package_version会是1.2.5")]),s._v(" "),n("h2",{attrs:{id:"package-json中config对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json中config对象"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" package.json中config对象")]),s._v(" "),n("p",[s._v("如果npm config中存在"),n("code",[s._v("<name> [@ <version>]：<key>")]),s._v("的配置参数，(通过"),n("code",[s._v("npm config set")]),s._v("设置 )则package.json里config对应的key将在环境中被覆盖。\n例如，如果package.json(这里没有版本号)中：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name" : "foo",\n  "config" : { "port" : "8080" },\n  "scripts" : {\n    "start" : "node server.js"\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("而server.js中这么写：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("http.createServer(...).listen(process.env.npm_package_config_port//注意这里获取嵌套对象的用法\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("那么用户可以这样覆写port变量：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config set foo:port 80\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"npm-run-env"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-run-env"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm run env")]),s._v(" "),n("p",[s._v("获取npm的配置变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm run env | grep npm_\nnpx -c 'echo \"$npm_package_name\"'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"关于npm-version"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于npm-version"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于npm version")]),s._v(" "),n("p",[s._v("npm version major | minor | patch | premajor | preminor | prepatch | prerelease")]),s._v(" "),n("h3",{attrs:{id:"version"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[s._v("#")]),s._v(" version")]),s._v(" "),n("ul",[n("li",[s._v("每个npm包都有一个package.json，如果要发布包的话，package.json里面的version字段就是决定发包的版本号了。")]),s._v(" "),n("li",[s._v("version字段是这样一个结构： ‘0.0.1’，是有三位的版本号。分别是对应的version里面的：major, minor, patch。")]),s._v(" "),n("li",[s._v("也就是说当发布大版本的时候会升级为 1.0.0，小版本是0.1.0，一些小修复是0.0.2。")])]),s._v(" "),n("h3",{attrs:{id:"npm-version"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-version"}},[s._v("#")]),s._v(" npm version")]),s._v(" "),n("ul",[n("li",[s._v("为了方便用户更改版本号，npm有npm version这个命令来自动更改版本号，同时帮忙commit.")]),s._v(" "),n("li",[s._v("比如说 当前版本是 1.1.1，当执行 npm version patch -m '[patch]'的时候，会自动把package.json里面的version改为1.1.2，同时git会多一个commit log [patch],这次改动便是更改package.json。")]),s._v(" "),n("li",[s._v("如果执行了prepatch，版本号会从1.1.1变成 1.1.2-0")]),s._v(" "),n("li",[s._v("我们称版本号的三位分别是 大号.中号.小号-预发布号")])]),s._v(" "),n("h3",{attrs:{id:"major-minor-patch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#major-minor-patch"}},[s._v("#")]),s._v(" major/minor/patch")]),s._v(" "),n("p",[s._v("关于major | minor | patch | premajor | preminor | prepatch | prerelease")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("     major  - 如果没有预发布号，则直接升级一位大号，其他位都置为0\n            - 如果有预发布号：\n            -- 中号和小号都为0，则不升级大号，而将预发布号删掉。即2.0.0-1变成2.0.0，这就是预发布的作用\n            -- 如果中号和小号有任意一个不是0，那边会升级一位大号，其他位都置为0，清空预发布号。即 2.0.1-0变成3.0.0\n\n     minor  - 如果没有预发布号，则升级一位中号，大号不动，小号置为空\n            - 如果有预发布号:\n            -- 如果小号为0，则不升s级中号，将预发布号去掉\n            -- 如果小号不为0，同理没有预发布号\n\n     patch  - 如果没有预发布号：直接升级小号，去掉预发布号\n            - 如果有预发布号：去掉预发布号，其他不动\n\n  premajor  - 直接升级大号，中号和小号置为0，增加预发布号为0\n\n  preminor  - 直接升级中号，小号置为0，增加预发布号为0\n\n  prepatch  - 直接升级小号，增加预发布号为0\n\nprerelease  - 如果没有预发布号：增加小号，增加预发布号为0\n            - 如果有预发布号，则升级预发布号\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"一般用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一般用法"}},[s._v("#")]),s._v(" 一般用法")]),s._v(" "),n("p",[s._v("npm publish后在npmjs.com可以搜索到项目了,删除指令是npm unpublish，项目更新如更改readme文件 , npm version patch 之后再来 npm publish")]),s._v(" "),n("h2",{attrs:{id:"关于npx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于npx"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于npx")]),s._v(" "),n("ul",[n("li",[s._v("npm 从5.2版开始，增加了 npx 命令。\nNode 自带 npm 模块，所以可以直接使用 npx 命令。万一不能用，就要手动安装一下。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm install -g npx\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"调用项目安装的模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调用项目安装的模块"}},[s._v("#")]),s._v(" 调用项目安装的模块")]),s._v(" "),n("ul",[n("li",[s._v("npx 想要解决的主要问题，就是调用项目内部安装的模块。比如，项目内部安装了测试工具 Mocha。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm install -D mocha\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("一般来说，调用 Mocha ，只能在项目脚本和 package.json 的scripts字段里面， 如果想在命令行下调用，必须像下面这样。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 项目的根目录下执行\n$ node-modules/.bin/mocha --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("npx 就是想解决这个问题，让项目内部安装的模块用起来更方便，只要像下面这样调用就行了。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx mocha --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("npx 的原理很简单，就是运行的时候，会到node_modules/.bin路径和环境变量$PATH里面，检查命令是否存在。")]),s._v(" "),n("li",[s._v("由于 npx 会检查环境变量$PATH，所以系统命令也可以调用。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 等同于 ls\n$ npx ls\n注意，Bash 内置的命令不在$PATH里面，所以不能用。比如，cd是 Bash 命令，因此就不能用npx cd。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"避免全局安装模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#避免全局安装模块"}},[s._v("#")]),s._v(" 避免全局安装模块")]),s._v(" "),n("ul",[n("li",[s._v("除了调用项目内部模块，npx 还能避免全局安装的模块。比如，create-react-app这个模块是全局安装，npx 可以运行它，而且不进行全局安装。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx create-react-app my-react-app\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("上面代码运行时，npx 将create-react-app下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载create-react-app。")]),s._v(" "),n("li",[s._v("下载全局模块时，npx 允许指定版本。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx uglify-js@3.1.0 main.js -o ./dist/main.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上-面代码指定使用 3.1.0 版本的uglify-js压缩脚本。")]),s._v(" "),n("ul",[n("li",[s._v("注意，只要 npx 后面的模块无法在本地发现，就会下载同名模块。比如，本地没有安装http-server模块，下面的命令会自动下载该模块，在当前目录启动一个 Web 服务。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx http-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"no-install-ignore-existing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#no-install-ignore-existing"}},[s._v("#")]),s._v(" --no-install/--ignore-existing")]),s._v(" "),n("ul",[n("li",[s._v("如果想让 npx 强制使用本地模块，不下载远程模块，可以使用--no-install参数。如果本地不存在该模块，就会报错。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx --no-install http-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("反过来，如果忽略本地的同名模块，强制安装使用远程模块，可以使用--ignore-existing参数。比如，本地已经全局安装了create-react-app，但还是想使用远程模块，就用这个参数。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx --ignore-existing create-react-app my-react-app\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"使用不同版本的-node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用不同版本的-node"}},[s._v("#")]),s._v(" 使用不同版本的 node")]),s._v(" "),n("ul",[n("li",[s._v("利用 npx 可以下载模块这个特点，可以指定某个版本的 Node 运行脚本。它的窍门就是使用 npm 的 node 模块。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx node@0.12.8 -v\nv0.12.8\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("上面命令会使用 0.12.8 版本的 Node 执行脚本。原理是从 npm 下载这个版本的 node，使用后再删掉。")]),s._v(" "),n("li",[s._v("某些场景下，这个方法用来切换 Node 版本，要比 nvm 那样的版本管理器方便一些")])]),s._v(" "),n("h3",{attrs:{id:"p-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#p-参数"}},[s._v("#")]),s._v(" -p 参数")]),s._v(" "),n("ul",[n("li",[s._v("-p参数用于指定 npx 所要安装的模块，所以上一节的命令可以写成下面这样。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx -p node@0.12.8 node -v\nv0.12.8\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("上面命令先指定安装node@0.12.8，然后再执行node -v命令。")]),s._v(" "),n("li",[s._v("-p参数对于需要安装多个模块的场景很有用。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx -p lolcatjs -p cowsay [command]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"c-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#c-参数"}},[s._v("#")]),s._v(" -c 参数")]),s._v(" "),n("ul",[n("li",[s._v("如果 npx 安装多个模块，默认情况下，所执行的命令之中，只有第一个可执行项会使用 npx 安装的模块，后面的可执行项还是会交给 Shell 解释。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- $ npx -p lolcatjs -p cowsay 'cowsay hello | lolcatjs'\n# 报错\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("上面代码中，cowsay hello | lolcatjs执行时会报错，原因是第一项cowsay由 npx 解释，而第二项命令localcatjs由 Shell 解释，但是lolcatjs并没有全局安装，所以报错。")]),s._v(" "),n("li",[s._v("-c参数可以将所有命令都用 npx 解释。有了它，下面代码就可以正常执行了。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx -p lolcatjs -p cowsay -c 'cowsay hello | lolcatjs'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("-c参数的另一个作用，是将环境变量带入所要执行的命令。举例来说，npm 提供当前项目的一些环境变量，可以用下面的命令查看。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm run env | grep npm_\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("-c参数可以把这些 npm 的环境变量带入 npx 命令。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npx -c 'echo \"$npm_package_name\"'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("上面代码会输出当前项目的项目名。")])]),s._v(" "),n("h3",{attrs:{id:"执行-github-源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行-github-源码"}},[s._v("#")]),s._v(" 执行 GitHub 源码")]),s._v(" "),n("ul",[n("li",[s._v("npx 还可以执行 GitHub 上面的模块源码。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 执行 Gist 代码\n$ npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32\n\n# 执行仓库代码\n$ npx github:piuccio/cowsay hello\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("注意，远程代码必须是一个模块，即必须包含package.json和入口脚本。")]),s._v(" "),n("h2",{attrs:{id:"npm-link创建全局链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-link创建全局链接"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm link创建全局链接")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("alias: npm ln")])]),s._v(" "),n("li",[n("p",[s._v("问题:已经通过 全局安装npm install -g express,在我们项目工作目录中要想引用express就必须再次本地安装npm install express")])]),s._v(" "),n("li",[n("p",[s._v("步骤")])])]),s._v(" "),n("ol",[n("li",[s._v("首先切换到你的项目根目录下")]),s._v(" "),n("li",[s._v("查看你当前node.js默认把模块全局安装到哪个路径下，执行 "),n("code",[s._v("npm root -g")])]),s._v(" "),n("li",[s._v("执行："),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm link express ./node_modules/express -> /usr/local/lib/node_modules/express\nnpm link express ./node_modules/express -> 全局目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[s._v("之后就多出了一个express像快捷键的目录，通过这种方法，我们就可以把全局包当本地包来使用了。")])]),s._v(" "),n("ul",[n("li",[s._v("事实上，npm link 在包文件夹中，将在全局文件夹"),n("code",[s._v("{prefix}/lib/node_modules/<package>")]),s._v("中创建一个符号链接，该 链接链接到 "),n("code",[s._v("npm link")]),s._v(" 执行命令的包。")]),s._v(" "),n("li",[s._v("它还会将包链接到"),n("code",[s._v("{prefix}/bin/{name}")]),s._v(",在其他位置，"),n("code",[s._v("npm link package-name")]),s._v("将创建一个从全局安装 "),n("code",[s._v("package-name")]),s._v(" 到"),n("code",[s._v("node_modules/")]),s._v("当前文件夹的符号链接。基于这点可以使用非全局包创建链接，请注意，该 package-name 取自 package.json，而不是目录名称。例子如下:")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/projects/node-redis # go into the package directory\nnpm link # creates global link\ncd ~/projects/node-bloggy # go into some other package directory.\nnpm link redis # link-install the package\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("现在，对 ~/projects/node-redis 的任何更改都将反映在 ~/projects/node-bloggy/node_modules/node-redis/ 中。请注意，链接应指向软件包名称，而不是该软件包的目录名称。")]),s._v(" "),n("li",[s._v("您也可以将两个步骤合为一体。例如，以较短的方式完成上述用例：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/projects/node-bloggy # go into the dir of your main project\nnpm link ../node-redis # link the dir of your dependency\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("第二行等效于执行以下操作：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(cd ../node-redis; npm link)\nnpm link redis\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("也就是说，它首先创建一个全局链接，然后将全局安装目标链接到项目的 node_modules 文件夹中。")]),s._v(" "),n("li",[s._v("请注意，在这种情况下，您指的是目录名 node-redis，而不是包名 redis。")]),s._v(" "),n("li",[s._v("如果链接的程序包是作用域的，则 link 命令必须包含该作用域，例如")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm link @myorg/privatepackage\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"缩写在命令行解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#缩写在命令行解析"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 缩写在命令行解析")]),s._v(" "),n("p",[s._v("npm install本身有一个别名，即npm i,以下为指定的一些命令行参数的缩写方式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-g\n--global，缩写为-g，表示安装包时，视作全局的包。安装之后的包将位于系统预设的目录之下。\n-S\n--save，缩写为-S，表示安装的包将写入package.json里面的dependencies。\n-D\n--save-dev，缩写为-D，表示将安装的包将写入packege.json里面的devDependencies。\n-O\n--save-optional缩写为-O，表示将安装的包将写入packege.json里面的optionalDependencies。\n-E\n--save-exact缩写为-E，表示安装的包的版本是精确指定的。\n-B\n--save-bundle缩写为-B，表示将安装的包将写入packege.json里面的bundleDependencies。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("其他：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-v ： --version\n-h, -?, --help, -H: --usage\n-s, --silent: --loglevel silent\n-q, --quiet: --loglevel warn\n-d: --loglevel info\n-dd,--verbose: --loglevel verbose\n-ddd, --loglevel silly\n-g: --global\n-C: --prefix\n-l: --long\n-m: --message\n-p, --porcelain（瓷器）: --parseable（灰烬）重新回炉\n-P: --save-prod\n-reg: --registry\n-f : --force\n-desc: --description\n-y: --yes\n-n: --yes false//这个有点反人类了\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("如果指定的配置参数解析明确已知的配置参数。比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm ls --par\n#same as\nnpm ls --parseable\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("如果多个单个字符缩写串在一起，并且组合没有去其他配置参数产生歧义，那么就会扩展成多个不同的组成。比如：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm ls -gpld\n# same as\nnpm ls --global --parseable --long --loglevel info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"为npm设置代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为npm设置代理"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 为npm设置代理")]),s._v(" "),n("h3",{attrs:{id:"设置代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置代理"}},[s._v("#")]),s._v(" 设置代理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config set proxy http://server:port\nnpm config set https-proxy http://server:port\nnpm config set proxy=http://127.0.0.1:8087\nnpm config set registry=http://registry.npmjs.org\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"关于https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于https"}},[s._v("#")]),s._v(" 关于https")]),s._v(" "),n("ul",[n("li",[s._v("经过上面设置使用了http开头的源，因此不需要设https_proxy了，否则还要增加一句:")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config set https-proxy http://server:port\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"代理用户名和密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代理用户名和密码"}},[s._v("#")]),s._v(" 代理用户名和密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 如果代理需要认证的话可以这样来设置。\nnpm config set proxy http://username:password@server:port\nnpm confit set https-proxy http://username:password@server:port\n\n// 如果代理不支持https的话需要修改npm存放package的网站地址，把s去掉\nnpm config set registry "http://registry.npmjs.org/"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"取消代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#取消代理"}},[s._v("#")]),s._v(" 取消代理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config delete proxy\nnpm config delete https-proxy\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"设置npm源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置npm源"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 设置npm源")]),s._v(" "),n("ul",[n("li",[s._v("registry 指定npm下载安装包的源 默认:https://registry.npmjs.org/")])]),s._v(" "),n("ol",[n("li",[s._v("查看/设置npm源")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config get registry\nnpm config set registry 'https://registry.npm.taobao.org/'\n// 通过cnpm使用\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("全局安装nrm"),n("code",[s._v("npm i nrm -g")])])]),s._v(" "),n("ul",[n("li",[s._v("nrm是npm仓库管理的软件，可用于npm仓库的快速切换")]),s._v(" "),n("li",[s._v("nrm 常用命令：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" nrm //展示nrm可用命令\n nrm ls //列出已经配置的所有仓库\n nrm test //测试所有仓库的响应时间\n nrm add <registry> <url> //新增仓库\n nrm use <registry> //切换仓库\n nrm del <registry>//删除源\n\n\n// 输出信息：\n* taobao - https://registry.npm.taobao.org/\n  npmMirror  https://skimdb.npmjs.com/registry/\n  edunpm - http://registry.enpmjs.org/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[n("p",[s._v("临时使用\nnpm --registry https://registry.npm.taobao.org install express")])]),s._v(" "),n("li",[n("p",[s._v("公司地图私有仓库\nnpm install --save suntekmap --registry=http://172.25.20.192:8081/nexus/content/groups/npm-all/")])]),s._v(" "),n("li",[n("p",[s._v("查看包安装源\nnpm info express（如果上面配置正确这个命令会有字符串response）")])])]),s._v(" "),n("h2",{attrs:{id:"私域-公域发布"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#私域-公域发布"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 私域/公域发布")]),s._v(" "),n("h3",{attrs:{id:"前提完成npm用户注册"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前提完成npm用户注册"}},[s._v("#")]),s._v(" 前提完成npm用户注册")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm adduser/npm logout\nUsername: your name\nPassword: your password\nEmail: yourmail@gmail.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("成功之后，npm会把认证信息存储在~/.npmrc中，并且可以通过以下命令查看npm当前使用的用户：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm whoami\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("npm官方建议规范的包至少包含：")])]),s._v(" "),n("ul",[n("li",[s._v("package.json（包的基本信息）")]),s._v(" "),n("li",[s._v("README.md（文档）")]),s._v(" "),n("li",[s._v("index.js （入口文件）")])]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("npm publish")])]),s._v(" "),n("h3",{attrs:{id:"发布unscoped包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布unscoped包"}},[s._v("#")]),s._v(" 发布unscoped包")]),s._v(" "),n("p",[s._v("第一步：创建项目\n（1）创建工程文件夹")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir yuyy-test-pkg && cd yuyy-test-pkg\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("（2）创建package.json")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm init\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("按照提示一步步完善即可，也可使用npm init -y使用npm默认设置，稍后再通过编辑package.json修正。\n注意：本次演示的包的入口文件是index.js，请务必确保package.json中字段main对应的值是“index.js”。最终结果：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yuyy-test-pkg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my first npm package"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keywords"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packge"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"author"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yuyy"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("（3）创建README.md,内容：")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" yuyy-test-pkg")]),s._v("\nThis is my first npm package!\nIt is just for learning.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("（4）创建index.js,内容：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("printMsg")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this message is from yuyy-test-pkg!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("（5）最终的目录结构：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("└── yuyy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pkg\n    ├── "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("README")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md\n    ├── index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n    └── "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("第二步：发布")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("npm publish\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("可能报的错：")]),s._v(" "),n("ul",[n("li",[s._v("（1）未登录")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm ERR! code ENEEDAUTH\nnpm ERR! need auth auth required for publishing\nnpm ERR! need auth You need to authorize this machine using npm adduser\n解决办法：npm adduser\n输入：\n用户名（忘记的话，去npm网站查看:头像 > Profile Settings）\n密码\n邮箱\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("（2）仓库地址不对")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm ERR! code E409\nnpm ERR! Registry returned 409 for PUT on http://r.cnpmjs.org/-/user/or...:yuyy: conflict\n原因：通过nrm ls 命令查看我此时的仓库地址为cnpm，而不是npm\n解决办法：用nrm切换到npm仓库，执行命令nrm use npm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/3488787776-5c1b5c1b45c83_articlex.png",alt:"",title:"切换正确的npm源"}})]),s._v(" "),n("ul",[n("li",[s._v("以上问题解决后再次执行发布命令npm publish，发布成功")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/3669985794-5c1b5c480b2ff_articlex.png",alt:""}}),s._v("\n第三步：去npm 官网搜索，有可能有延迟，不能立马看不到。\n"),n("img",{attrs:{src:"/vuebloger/img/post/858471367-5c1b5c8704b63_articlex.png",alt:"",title:"发布unscope包成功"}})]),s._v(" "),n("h3",{attrs:{id:"发布scoped包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布scoped包"}},[s._v("#")]),s._v(" 发布scoped包")]),s._v(" "),n("p",[s._v("第一步：创建项目\n（1）创建工程文件夹")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir babel && cd babel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("（2）创建package.json")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm init\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("按提示操作，最终结果：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my scoped test package"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keywords"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"package"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"author"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yuyy"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("（3）创建README.md，内容：")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" @yuyy/babel")]),s._v("\nThis is my scoped npm package!\nIt is just for learn.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("（4）创建index.js内容：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("printMsg")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this message is from @yuyy/babel!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("最终的目录结构：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("└── babel\n    ├── "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("README")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md\n    ├── index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n    └── "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("第二步：发布")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm publish\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("报错:")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("报错：没有发布权限\nnpm "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERR")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" publish Failed "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("401")]),s._v("\nnpm "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERR")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" code "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("E401")]),s._v("\nnpm "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ERR")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" This "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" requires that publishers enable "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TFA")]),s._v(" and provide an "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OTP")]),s._v(" to publish"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" For more info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visit"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("go"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("me"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("fa"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("guide "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" babel\n原因：已经存在babel包，而我又不是babel的发布者\n解决：包名和域名差不多，先到先得，如果我非要发布一个叫babel的包，只能给它加作用域放到我的命名空间下\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("第三步：加作用域")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm init --scope=@yuyy -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("@符号后面的是你注册npm账户时的username，如果不记得可以通过npm whoami查询。\n上面的命令其实是在重新生成package.json，只是会给包增加了作用域，执行完后package.json如下，唯一的变化是name字段由原来的babel变成了@yuyy/babel。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "name": "@yuyy/babel",\n  "version": "1.0.0",\n  "description": "my scoped test package",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "keywords": [\n    "npm",\n    "package"\n  ],\n  "author": "yuyy",\n  "license": "ISC"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("第四步：再次发布"),n("code",[s._v("npm publish")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("报错：\nnpm ERR! publish Failed PUT 402\nnpm ERR! code E402\nnpm ERR! You must sign up for private packages : @yuyy/babel\n原因：npm publish 命令执行，默认是进行私有发布,scoped的包私有发布时需要收费\n解决：如果不想花钱，那只能将包面向公共发布，这也符合npm鼓励开源的精神，这一点和GitHub创建仓库类似。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("第五步：公共发布")]),s._v(" "),n("ul",[n("li",[s._v("值得注意的一点：我们的项目名是babel，最终发布的包名是@yuyy/babel，可见发布的包名可以和项目名不一致，包名取决于package.json中的name字段。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm publish --access public/npm access public publish\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/902313513-5c1b8362aeb3e_articlex.png",alt:""}})]),s._v(" "),n("p",[s._v("第六步：npm官网搜索\n"),n("img",{attrs:{src:"/vuebloger/img/post/1771343970-5c1b83f10e129_articlex.png",alt:"",title:"发布scoped包成功"}})]),s._v(" "),n("h3",{attrs:{id:"删发布包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删发布包"}},[s._v("#")]),s._v(" 删发布包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('npm unpublish --force //强制删除\nnpm unpublish guitest@1.0.1 //指定版本号\n\nnpm deprecate <pkg>[@<version>] <message>\nnpm deprecate my-thing@"< 0.2.3" "critical bug fixed in v0.2.3"//为尝试安装它的所有人提示版本作废警告信息\n//如需取消作废操作，可以为 message 参数指定一个空字符串（""）。\n//注意，必须使用双引号，并且双引号之间不能有空格，这是为了构造一个空字符串\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"npm安装包的过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm安装包的过程"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm安装包的过程")]),s._v(" "),n("p",[s._v("以本地安装 npm install foo@1.2.3为例，npm的安装过程如下：")]),s._v(" "),n("ol",[n("li",[s._v("npm会沿着当前文件夹的层级树查找包含 package.json文件 或 node_modules文件夹 的文件夹；")]),s._v(" "),n("li",[s._v("如果查找到匹配的文件夹，那么该文件夹会被作为npm的执行文件夹；如果没有查找到匹配的文件夹，则会使用当前的文件夹作为npm的执行文件夹；")]),s._v(" "),n("li",[s._v("加载foo包到缓存中；")]),s._v(" "),n("li",[s._v("然后解压foo包到路径 ./node_modules/foo")]),s._v(" "),n("li",[s._v("然后加载foo包的依赖包到缓存中；")]),s._v(" "),n("li",[s._v("然后解压foo包的依赖包到路径 ./node_modules/foo/node_modules/...")]),s._v(" "),n("li",[s._v("把每一个可执行文件符号链接至路径 ./node_modules/.bin/，以便在必要时可以通过npm脚本找到它们；")])]),s._v(" "),n("h2",{attrs:{id:"npm-run-script"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-run-script"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm run-script")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm run-script <command> [-- <args>...]\nalias: npm run\n- 这个命令将会运行script字段的任意指令，如果script字段缺省那么将会列出所有可以run的指令。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"npm-scipt相关"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-scipt相关"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm scipt相关")]),s._v(" "),n("ol",[n("li",[s._v("npm 脚本传入参数，要使用--标明。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"lint": "jshint **.js"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("向上面的npm run lint命令传入参数，必须写成下面这样。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm run lint --  --reporter checkstyle > checkstyle.xml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("也可以在package.json里面再封装一个命令。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"lint": "jshint **.js",\n"lint:checkstyle": "npm run lint -- --reporter checkstyle > checkstyle.xml"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序。\n如果是并行执行（即同时的平行执行），可以使用&符号。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm run script1.js & npm run script2.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果是继发执行（即只有前一个任务成功，才执行下一个任务），可以使用&&符号。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm run script1.js && npm run script2.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这两个符号是 Bash 的功能。此外，还可以使用 node 的任务管理模块：script-runner、npm-run-all、redrun。")]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("npm 对两个脚本提供了默认值。也就是说，这两个脚本不用定义，就可以直接使用。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"start": "node server.js"，\n"install": "node-gyp rebuild"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("上面代码中，npm run start的默认值是node server.js，前提是项目根目录下有server.js这个脚本；npm run install的默认值是node-gyp rebuild，前提是项目根目录下有binding.gyp文件。")]),s._v(" "),n("h2",{attrs:{id:"package-json里-scripts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json里-scripts"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" package.json里“scripts”")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[s._v("参数")]),s._v(" "),n("th",{staticStyle:{"text-align":"center"}},[s._v("解释")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("prepublish")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm publish命令之前运行（也会在不带参数的npm install命令前运行，详情在下段描述）")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("prepare")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在两种情况前运行，一是npm publish命令前，二是不带参数的npm install命令；它会在prepublish之后、prepublishOnly之前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("prepublishOnly")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm publish命令前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("publish,postpublish")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm publish命令后执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("preinstall")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm install命令前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("install,postinstall")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm install命令后执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("preuninstall，uninstall")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm uninstall命令前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("postuninstall")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在npm uninstall命令后执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("preversion")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在改变包的version前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("version")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在改变包的version后，但提交之前执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("postversion")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("在提交version变更后执行")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("pretest， test， posttest")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("伴随npm test命令")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("prestop， stop， poststop")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("伴随npm stop命令")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("restart, start, poststart")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("伴随 npm start命令")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("pre restart， restart， poststart")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("伴随 npm restart命令。提示")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("preshrinkwrap, shrinkwrap, postshrinkwrap")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("伴随 npm shrinkwrap 命令（用于固定依赖包版本）")])])])]),s._v(" "),n("p",[s._v("另外，所有的script都可以用 "),n("code",[s._v("npm run-script <stage>")]),s._v("命令执行, pre 和 post 会自动匹配对应的script（例如 premyscript，my script， postmyscript），依赖包中的script可以用"),n("code",[s._v("npm explore <pkg> -- npm run <stage>")]),s._v("来执行")]),s._v(" "),n("h2",{attrs:{id:"prepublish-和-prepare"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#prepublish-和-prepare"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" prepublish 和 prepare")]),s._v(" "),n("p",[s._v("官网废弃告示：")]),s._v(" "),n("p",[s._v("从npm@1.1.71开始，npm CLI 会在npm publish和npm install之前执行prepubish脚本，因为这做法便于准备package环境（几种用法如本段下面描述）。但事实证明这让人非常困惑。所以在npm@4.0.0后，新增来一种事件prepare来替代上述功能。另外一种新事件prepublishOnly作为替代策略，让用户避免以往npm版本的混乱行为。prepublishOnly 只在npm publish前执行（例如，publish前最后执行一次测试，以确保无误）")]),s._v(" "),n("p",[s._v("重要提示：在npm5中， prepublish只在npm publish前执行，即取代prepublishOnly，所以npm6即以后的版本会放弃prepublishOnly。到时就忘了这些矬事吧。")]),s._v(" "),n("p",[s._v("https://github.com/npm/npm/issues/10074 ，这里对此变更有过漫长的争论可作参考。")]),s._v(" "),n("p",[s._v("如果你需要在使用package之前执行某些操作，而不依赖于目标系统的操作系统或目录结构，请使用prepublish脚本。例如以下任务：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("把coffeescript源码编译成JS\n压缩js源码\n获取你的package所需的远程资源\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"关于node-gyp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于node-gyp"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于node-gyp")]),s._v(" "),n("p",[s._v("如果npm包用到了C++扩展，就需要node-gyp重新编,gyp的意思是generate your projects。node-gyp是一个node的扩展构建工具，通过"),n("code",[s._v("npm install -g node-gyp")]),s._v("安装，在有binding.gyp的文件夹下执行node-gyp命令。写好.gyp项目编译文件后，它会自动按这个约定为binding.gyp的文件进行编译。一个简单的binding.gyp长这样：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n"targets": [\n    {\n      "target_name": "hello",\n      "sources": [ "src/hello.cc" ],\n      "conditions:": [\n         ["OS==\'win\'",{\n           "libraries": ["-lnode.lib"]\n         }]\n      ]\n    },\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("调用node-gyp configure 会在当前目录中穿件Build目录并生成相关的项目文件，最后会报一个 gyp info ok。然后继续执行 node-gyp build编译，在linux下通过make，windows下通过vcbuild，编译完成后，.node文件就会出现在build/Release 目录下。也可以直接node-gyp rebuild， 这个命令相当于clean, configure, build的结合。")]),s._v(" "),n("h2",{attrs:{id:"关于c-和-node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于c-和-node"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于C++和.node")]),s._v(" "),n("ul",[n("li",[s._v("C/C++对比javascript在位运算上具有极大优势，很多转码、编码的功能可以用C/C++扩展来提升性能。")]),s._v(" "),n("li",[s._v("C++模块通过预先编译为.node文件，然后调用process.dlopen() 加载执行。.node文件实际上在不同平台下是不一样的")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("*nix                                |          windows\n                                 C/C++源码\ng++/gcc编译成.node文件(.so文件)       |          VC++编译成.node文件(.dll文件)\n                            dlopen加载.node文件导出给javascript\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"package-json版本符号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json版本符号"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" package.json版本符号")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('version 必须完全和version一致\n>version 必须比version大\n>=version 同上\n<version 同上\n<=version 同上\n~version 大约一样，见semver语法\n1.2.x  范围为1.2.0, 1.2.1, 等，但不包括1.3.0\n* 所有\n"" 空，同*\nversion1 - version2 同 >=version1 <=version2.\nrange1 || range2 二选一。\ngit \'依赖Git URL\'\nuser/repo \'GitHub URLs\'\n\n\n//比如下面都是合法的：\n{ "dependencies" :\n  { "foo" : "1.0.0 - 2.9999.9999"\n  , "bar" : ">=1.0.2 <2.1.2"\n  , "baz" : ">1.0.2 <=2.3.4"\n  , "boo" : "2.0.1"\n  , "qux" : "<1.0.0 || >=2.3.1 <2.4.5 || >=2.5.2 <3.0.0"\n  , "asd" : "http://asdf.com/asdf.tar.gz"\n  , "til" : "~1.2"\n  , "elf" : "~1.2.3"\n  , "two" : "2.x"\n  , "thr" : "3.3.x"\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"语义化版本（semver）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语义化版本（semver）"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 语义化版本（SemVer）")]),s._v(" "),n("h3",{attrs:{id:"语义化版本格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语义化版本格式"}},[s._v("#")]),s._v(" 语义化版本格式")]),s._v(" "),n("p",[s._v("我们首先简单了解一下语义化版本版本号，标准的版本格式为：X.Y.Z，其中：")]),s._v(" "),n("p",[s._v("X：主版本号，当我们做了不兼容或者颠覆性的更新，修改此版本号。\nY：次版本号，当我们做了向下兼容的功能性修改，修改此版本号。\nZ：修订号，当我们做了向下兼容的bug修正，修改此版本号。\n其中X、Y和Z必须为非负整数，禁止数字前补零，每个数值都是递增的。")]),s._v(" "),n("h3",{attrs:{id:"语义化版本范围"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#语义化版本范围"}},[s._v("#")]),s._v(" 语义化版本范围")]),s._v(" "),n("p",[s._v("版本范围是一组满足指定范围的比较器，一个比较器是由操作符和版本号组成，下面是最原始的操作符：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("< 小于；\n<= 小于等于；\n> 大于；\n>= 大于等于；\n= 等于；如果没有指定操作符，则默认为等于。\n- 一个范围可由一个或者多个比较器组成，如果有多个，则由双竖线（||）连接。对于包含多个比较器，只要满足其一即可。比如：\n- 范围 >=1.2.7 <1.3.0 ，版本号 1.2.7, 1.2.8, 1.2.99 满足条件，而 1.2.6, 1.3.0\n,1.1.0 确不满足。\n- 范围 1.2.7 || >=1.2.9 <2.0.0 ，版本号 1.2.7, 1.2.9, 1.4.6 满足，而 1.2.8 或者 2.0.0 不满足。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"关于测试版"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于测试版"}},[s._v("#")]),s._v(" 关于测试版")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("Alpha、Beta、Gamma与α、β、λ谐音，是希腊字母前三个字母，用来表示软件开发过程中测试的三个阶段：")])]),s._v(" "),n("li",[n("p",[s._v("Alpha：内测版，内部交流或者专业测试人员测试用；")])]),s._v(" "),n("li",[n("p",[s._v("Beta：公测版，专业爱好者大规模测试用，存在一些缺陷，该版本也不适合一般用户安装；")])]),s._v(" "),n("li",[n("p",[s._v("Gamma：比较成熟的测试版，与即将发行的正式版相差无几；")])]),s._v(" "),n("li",[n("p",[s._v("RC：是 Release Candidate 的缩写，意思是发布倒计时，候选版本，处于Gamma阶段，该版本已经完成全部功能并清除大部分的BUG。到了这个阶段只会除BUG，不会对软件做任何大的更改。从Alpha到Beta再到Gamma是改进的先后关系，但RC1、RC2往往是取舍关系。")])]),s._v(" "),n("li",[n("p",[s._v("Stable：稳定版。在开源软件中，都有stable版，这个就是开源软件的稳定发行版。")])]),s._v(" "),n("li",[n("p",[s._v("范围 "),n("code",[s._v(">1.2.3-alpha.3")]),s._v("，版本"),n("code",[s._v("1.2.3-alpha.7")]),s._v("符合条件，而"),n("code",[s._v("3.4.5-alpha.9")]),s._v("却不满足条件。虽然 "),n("code",[s._v("3.4.5-alpha.9")]),s._v("实际上大于 "),n("code",[s._v("1.2.3-alpha.3")]),s._v("，但是根据 SemVer 的排序规则，这个版本范围只是接受 "),n("code",[s._v("1.2.3")]),s._v("的测试版，而不接受其他版本的测试版。当然 "),n("code",[s._v("3.4.5")]),s._v(" 满足条件，因为它不是测试版，并且大于 "),n("code",[s._v("1.2.3-alpha.7")]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("这么做是有两个目的，首先测试版会经常更新并且可能包含不适合公开的重大改动，因此被排除在范围之外；再者，虽然用户明确此次使用有风险的测试版本，然而下一版本的测试版被包含进来仍然是不合适的。")])])]),s._v(" "),n("h3",{attrs:{id:"版本范围高级用法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#版本范围高级用法"}},[s._v("#")]),s._v(" 版本范围高级用法")]),s._v(" "),n("p",[s._v("在版本范围的高级用法中，与原始的比较器不同，组合不仅仅限于空格和双竖线，它有以下几种方式。")]),s._v(" "),n("ul",[n("li",[s._v("连接符（-）范围 "),n("code",[s._v("X.Y.Z - A.B.C")]),s._v("表示的闭包集合")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.2.3 - 2.3.4 := >=1.2.3 <=2.3.4\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("如果范围中的第一个版本号只有一部分，剩下的部分以零填充。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.2 - 2.3.4 := >=1.2.0 <=2.3.4\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("如果范围中的第二个版本号只有一部分，代表范围中包含了这个版本。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.2.3 - 2.3 := >=1.2.3 <2.4.0\n1.2.3 - 2   := >=1.2.3 <3.0.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("X范围 "),n("code",[s._v("1.2.x")]),s._v(" "),n("code",[s._v("1.X")]),s._v(" "),n("code",[s._v("1.2.*")]),s._v(" "),n("code",[s._v("*")])])]),s._v(" "),n("p",[s._v("X, x 或者 * 可以用在主版本号、此版本号以及修订版本号的任何一个上面。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("*     :=   >=0.0.0 (任何版本都满足)\n1.x   :=   >=1.0.0 <2.0.0 (只要满足主版本号即可)\n1.2.x :=   >=1.2.0 <1.3.0 (需要满足主版本和此版本号)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("部分版本号的含义与X范围表示含义一样，所以X或者*都是可以省略的。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('"" (空字符串)  := * := >=0.0.0\n1 := 1.x.x    := >=1.0.0 <2.0.0\n1.2 := 1.2.x  := >=1.2.0 <1.3.0\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("波浪线（~）范围"),n("code",[s._v("~1.2.3")]),s._v(" "),n("code",[s._v("~1.2")]),s._v(" "),n("code",[s._v("~1")])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("~1.2.3           := >=1.2.3 <1.(2+1).0         := >=1.2.3 <1.3.0\n~1.2             := >=1.2.0 <1.(2+1).0         := >=1.2.0 <1.3.0 (类似于 1.2.x)\n~1               := >=1.0.0 <(1+1).0.0         := >=1.0.0 <2.0.0 (类似于 1.x)\n~0.2.3           := >=0.2.3 <0.(2+1).0         := >=0.2.3 <0.3.0\n~0.2             := >=0.2.0 <0.(2+1).0         := >=0.2.0 <0.3.0 (类似于 0.2.x)\n~0               := >=0.0.0 <(0+1).0.0         := >=0.0.0 <1.0.0 (类似于 0.x)\n~1.2.3-beta.2    := >=1.2.3-beta.2 <1.3.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("注意版本为"),n("code",[s._v("1.2.3")]),s._v("且大于等于"),n("code",[s._v("beta.2")]),s._v("的测试版本在范围内，因此"),n("code",[s._v("1.2.3-beta.4")]),s._v("满足条件，而"),n("code",[s._v("1.2.4-beta.2")]),s._v("不满足条件。")]),s._v(" "),n("ul",[n("li",[s._v("补注号（^）范围"),n("code",[s._v("^1.2.3")]),s._v(" "),n("code",[s._v("^0.2.5")]),s._v(" "),n("code",[s._v("^0.0.4")]),s._v("\n允许在不修改[major, minor, patch]中最左非零数字的更改。换句话说，允许在 1.0.0\n及以上版本对次版本号和修订版本号的更新，允许在"),n("code",[s._v("0.1.0")]),s._v("以及以上版本对修订版本号更新，版本为"),n("code",[s._v("0.0.X")]),s._v("不允许更新。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("^1.2.3               := >=1.2.3 <2.0.0\n^0.2.3               := >=0.2.3 <0.3.0\n^0.0.3               := >=0.0.3 <0.0.4\n^1.2.3-beta.2        := >=1.2.3-beta.2 <2.0.0\n^0.0.3-beta          := >=0.0.3-beta <0.0.4\n^1.2.x               := >=1.2.0 <2.0.0\n^0.0.x               := >=0.0.0 <0.1.0\n^0.0                 := >=0.0.0 <0.1.0\n^1.x                 := >=1.0.0 <2.0.0\n^0.x                 := >=0.0.0 <1.0.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"关于npm-audit的坑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于npm-audit的坑"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于npm audit的坑")]),s._v(" "),n("ul",[n("li",[s._v("执行npm install 出现如下提醒")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nadded 253 packages from 162 contributors and audited 1117 packages in 42.157s\nfound 5 vulnerabilities (1 low, 4 high)\n  run `npm audit fix` to fix them, or `npm audit` for details html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("按照控制台提示的命令，输入‘npm audit fix’后，控制台提示：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" package update for 5 vulns involved breaking changes\n  (use `npm audit fix --force` to install breaking changes; or do it by hand)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("输入：‘npm audit fix --force’后，控制台提示：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("added 199 packages from 111 contributors, removed 64 packages and updated 23 packages in 42.194sfixed 5 of 5 vulnerabilities in 1117 scanned packages\n  1 package update for 5 vulns involved breaking changes\n  (installed due to `--force` option)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("重新输入‘npm audit’：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  === npm audit security report ===\n\nfound 0 vulnerabilities\n in 4598 scanned packages\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("-顺利解决，然而不是每次都这么顺利，npm官网对aduit的解释：")]),s._v(" "),n("ul",[n("li",[s._v("npm audit ： npm@5.10.0 & npm@6，允许开发人员分析复杂的代码，并查明特定的漏洞和缺陷。")]),s._v(" "),n("li",[s._v("npm audit fix ：npm@6.1.0,  检测项目依赖中的漏洞并自动安装需要更新的有漏洞的依赖，而不必再自己进行跟踪和修复。\n同时，官网中还提供了一些其他的命令，整理如下：")])]),s._v(" "),n("ol",[n("li",[s._v("运行audit fix，但是只更新pkglock， 不更新node_modules：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm audit fix --package-lock-only\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("只更新dependencies中安装的包，跳过devDependencies中的包：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm audit fix --only=prod\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("3.运行命令，得到audit fix将会更新的内容，并且输出json格式的安装信息，但是并不真的安装更新：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm audit fix --dry-run --json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("得到json格式的详细检测报告")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ npm audit --json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("npm-audit 官网地址：https://docs.npmjs.com/cli/audit")]),s._v(" "),n("li",[s._v("最后一句话了解即可不必太当真")])]),s._v(" "),n("h2",{attrs:{id:"npm-install配置细则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-install配置细则"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm install配置细则")]),s._v(" "),n("ul",[n("li",[s._v("默认情况下,运行npm install会下载模块，但是当运行npm install --production或者注明NODE_ENV的值时production时，pakage.json中devDependencies中的模块不会被自动下载。")]),s._v(" "),n("li",[s._v("npm 5 开始，通过npm install不加--save 和npm install --save一样，都是局部安装并会把模块自动写入package.json中的dependencies里。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm install -g moduleName <=> npm install modulesName -g\nnpm install -save moduleName <=> npm install moduleName --save <=> npm install moduleName -S\nnpm install -save-dev moduleName <=> npm install moduleName --save-dev <=> npm install moduleName -D\n\nnpm i library1 library2 //下载多个包 空格隔开包名\nnpm i library1 library2 -D//-D关键字，会作用在这两个包上 其结果就是这两个包都只在开发过程中使用，都只在package.json中的devDepondencies中添加记录 其他关键字使用方式一样\n\n\x3c!-- 混合安装 --\x3e\nnpm i pkg && npm i -g pkg && npm i -S pkg\n\nnpm un library //卸载un,remove, rm, r, un, unlink 是uninstall的别名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"npm-start"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-start"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v("  npm start")]),s._v(" "),n("p",[s._v("如果在package.json文件中配置了start字段，那么npm start命令将会执行start字段所对应的value的内容，如果start字段缺省，那么将会运行node server.js")]),s._v(" "),n("h2",{attrs:{id:"npm-init-f-force-y-yes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-init-f-force-y-yes"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm init [-f|--force|-y|--yes]")]),s._v(" "),n("p",[s._v("init指令会询问一系列的问题，并将你的配置写成一个package.json文件。如果使用了-f|--force|-y|--yes这些参数，那么会生成一个默认的package.json文件。")]),s._v(" "),n("h2",{attrs:{id:"npm-view"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-view"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm view")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm view")]),s._v("可以用来查看全局包安装版本的详细信息\n"),n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-18_21-43-39.png",alt:"",title:"npm view"}})])]),s._v(" "),n("h2",{attrs:{id:"npm-xxx常见"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-xxx常见"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm xxx常见")]),s._v(" "),n("p",[s._v("update/stop/build/start/config/init/install/adduser/publish/test/restart/root/version/view/info/cache/outdated/whoami/prefix/publish/unpublish/ls/ll/la/list")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("npm docs")]),s._v("    打开包的官网或源码地址 , 本意为查找文档")]),s._v(" "),n("li",[n("code",[s._v("npm list")]),s._v("、"),n("code",[s._v("npm ls")]),s._v("、"),n("code",[s._v("npm la")]),s._v("、"),n("code",[s._v("npm ll")]),s._v("一个意思")]),s._v(" "),n("li",[n("code",[s._v("npm repo hexo")]),s._v(" 在浏览器中打开软件包存储库页面")]),s._v(" "),n("li",[n("code",[s._v("npm shrinkwrap")]),s._v(" 锁定发布的依赖版本\n"),n("img",{attrs:{src:"/vuebloger/img/post/mintty_cXVm0w42B0.png",alt:"",title:"shrinkwrap"}})])]),s._v(" "),n("h2",{attrs:{id:"npx-updtr-checked"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npx-updtr-checked"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npx updtr/checked")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://www.npmjs.com/package/updtr",target:"_blank",rel:"noopener noreferrer"}},[s._v("updtr"),n("OutboundLink")],1),s._v("基于npm outdated,updtr将安装最新版本并npm test针对每个依赖项运行。如果测试成功，则updtr会将新版本号保存到您的中package.json。否则，updtr将回退冲突的更新。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm install -g updtr\n\x3c!-- 更新包 --\x3e\nnpx updtr\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000011085967",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm-check"),n("OutboundLink")],1),s._v("用来检查npm依赖包是否有更新，错误以及不在使用的，我们也可以使用npm-check进行包的更新")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 1.全局目录安装\nnpm install -g npm-check\n# 2. npm 全局更新包 (全局目录),通过上下键可以移动光标，使用空格键可以选择需要处理的包，回车直接进行处理。\nnpm-check -u -g\n# 3. npm更新某个项目的包 （项目目录）,通过上下键可以移动光标，使用空格键可以选择需要处理的包，回车直接进行处理。通过npm-check -u 就可以，不需要--save就可以直接更新package.json里面的内容\nnpm-check -u/npx npm-check -u\n# 4.npm 更新单个全局包\nnpm update <name> -g\n# 5.npm 更新 项目 生产环境依赖包\nnpm update <name> --save\n# 6.npm 更新 项目 开发环境依赖包\nnpm update <name> --save-dev\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"npmignore文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npmignore文件"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" "),n("code",[s._v(".npmignore")]),s._v("文件")]),s._v(" "),n("ul",[n("li",[s._v("用忽略publish文件列表")]),s._v(" "),n("li",[s._v("package.json的files字段")])]),s._v(" "),n("ol",[n("li",[s._v("files字段是一个被项目包含的文件名数组，如果你在里面放一个文件夹名，那么这个文件夹中的所有文件都会被包含进项目中(除非是那些在其他规则中被忽略的文件)。")]),s._v(" "),n("li",[s._v("你还可以在包的根目录或子目录下提供一个”.npmignore”文件来忽略项目包含文件，即使这些文件被包含在files字段中。.npmignore文件和.gitignore的功能很像。")]),s._v(" "),n("li",[s._v("某些文件总是被包含的，不论是否在规则中指定了它们：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("package.json\nREADME (and its variants)\nCHANGELOG (and its variants)\nLICENSE / LICENCE\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("相反地，一些文件总是被忽略：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(".git\nCVS\n.svn\n.hg\n.lock-wscript\n.wafpickle-N\n*.swp\n.DS_Store\n._*\nnpm-debug.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"发布私库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布私库"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 发布私库")]),s._v(" "),n("ul",[n("li",[n("code",[s._v('"private": true')]),s._v("在您的 package.json 中进行设置。")]),s._v(" "),n("li",[s._v("或"),n("code",[s._v('"publishConfig":{"registry":"http://my-internal-registry.local"}')]),s._v("强制将其仅发布到内部注册表")])]),s._v(" "),n("h2",{attrs:{id:"shrinkwrap-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shrinkwrap-json"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" shrinkwrap.json")]),s._v(" "),n("ul",[n("li",[s._v("锁定版本的文件")])]),s._v(" "),n("h2",{attrs:{id:"关于作用域包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于作用域包"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于作用域包")]),s._v(" "),n("ul",[n("li",[s._v("自 2015 年 4 月 19 日起，在 npm 2.0 或更高版本中，支持作用域软件包。")]),s._v(" "),n("li",[s._v("将公共范围的程序包发布到主要的 npm 注册表")])]),s._v(" "),n("ol",[n("li",[s._v("要发布公共范围的程序包，必须指定--access public初始发布。这将发布程序包，并设置对 public 您的访问权限，就好像您npm access public在发布后运行了该程序包一样。")])]),s._v(" "),n("ul",[n("li",[s._v("将私有范围的程序包发布到 npm 注册表")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("可以使用"),n("code",[s._v("npm publish")]),s._v("或来发布模块"),n("code",[s._v("npm publish --access restricted")]),s._v("，并且该模块将出现在 npm 注册表中，并且具有受限访问权限。然后，您可以根据需要npm access通过在 npmjs.com 网站上更改访问权限。")])]),s._v(" "),n("h2",{attrs:{id:"npm-access"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-access"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm access")]),s._v(" "),n("ul",[n("li",[s._v("设置公开访问和私密访问权限")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> npm access public [<package>]\n> npm access restricted [<package>]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("添加或删除团队的某个权限")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> npm access grant <read-only|read-write> <scope:team> [<package>]\n> npm access revoke <scope:team> [<package>]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("设置发布包的账户是否需要双层身份验证")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> npm access 2fa-required [<package>]\n> npm access 2fa-not-required [<package>]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("显示用户或团队能够访问的所有包以及访问级别")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> npm access ls-packages [<user>|<scope>|<scope:team>]\n// 只读公共包不会被打印\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("显示包的所有访问权限")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("> npm access ls-collaborators [<package> [<user>]]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"将scoped与registry关联"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将scoped与registry关联"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 将scoped与registry关联")]),s._v(" "),n("ul",[n("li",[s._v("scoped可以与单独的registry关联。")]),s._v(" "),n("li",[s._v("您可以在登录时将scoped与关联registry，例如")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm login --registry=http://reg.example.com --scope=@myco\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("scoped与registry具有多对一的关系：一个registry可以托管多个scoped，但是一个scoped只能指向一个registry。")]),s._v(" "),n("li",[s._v("可以使用npm config以下方式将scoped与registry关联：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm config set @myco:registry http://reg.example.com\n//将scoped与registry关联后，npm install具有该scoped的软件包的任何内容都将向该registry请求软件包。\n//任何 npm publish一个包含scoped包名称将被发布到registry来代替。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"ntl列举可运行的脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ntl列举可运行的脚本"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" ntl列举可运行的脚本")]),s._v(" "),n("ol",[n("li",[s._v("npm run 执行脚本")]),s._v(" "),n("li",[s._v("项目安装：npm i -g ntl -> ntl")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/vuebloger/img/post/Snipaste_2020-04-18_23-39-55.png",alt:"",title:"ntl工具的使用"}})]),s._v(" "),n("h2",{attrs:{id:"关于npm-ci"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于npm-ci"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 关于npm ci")]),s._v(" "),n("ul",[n("li",[s._v("npm ci 尝试解析npm package-lock.json，并最大限度的减少版本引起的错误.")])]),s._v(" "),n("h2",{attrs:{id:"npm-explore"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm-explore"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" npm-explore")]),s._v(" "),n("ul",[n("li",[s._v("一般用来执行node_module下的包内配置的npm script,比如"),n("code",[s._v("npm explore <pkg> -- npm run <stage>")])])]),s._v(" "),n("h2",{attrs:{id:"nvm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nvm"}},[s._v("#")]),s._v(" nvm")]),s._v(" "),n("p",[s._v("node 管理工具")]),s._v(" "),n("p",[s._v("在开发中，有时候对 node 的版本有要求，有时候需要切换到指定的 node 版本来重现问题等。遇到这种需求的时候，我们需要能够灵活的切换 node 版本，nvm 就是为解决这个问题而产生的，他可以方便的在同一台设备上进行多个 node 版本之间切换。")]),s._v(" "),n("p",[s._v("nvm 不支持 Windows，但是有替代品，也就是 nvm-windows。")]),s._v(" "),n("p",[s._v("常用命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nvm ls-remote               列出全部可以安装的版本号\nnvm install stable          安装当前最新的稳定版\nnvm install v10.14.0        安装指定版本\nnvm ls                      显示所有安装的版本\nnvm current                 查看当前版本\nnvm use v10.14.0            切换node版本\nnvm alias default v10.14.0  设置默认版本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"其他"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" "),n("i",{staticClass:"fa fa-thumb-tack",attrs:{"aria-hidden":"true"}}),s._v(" 其他")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\x3c!-- 配置用户名和密码：对应github --\x3e\nnpm set global username = ""\nnpm set global email =""\n\n\x3c!-- 更新包 --\x3e\nnpm update xxx\n\x3c!-- 要找出需要更新的软件包 --\x3e\nnpm outdated -g --depth=0\n\n\x3c!-- 检查版本 --\x3e\nnpm -v\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);