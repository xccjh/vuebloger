<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实用片段备忘 | 邹先生博客记录</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/vuebloger/img/logo.jpeg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/vuebloger/assets/css/0.styles.1f5c579b.css" as="style"><link rel="preload" href="/vuebloger/assets/js/app.9ef6ba52.js" as="script"><link rel="preload" href="/vuebloger/assets/js/7.c457106d.js" as="script"><link rel="preload" href="/vuebloger/assets/js/1.c991d8a0.js" as="script"><link rel="preload" href="/vuebloger/assets/js/42.f930fbcb.js" as="script"><link rel="preload" href="/vuebloger/assets/js/25.4349a352.js" as="script"><link rel="prefetch" href="/vuebloger/assets/js/10.2fc7b3fc.js"><link rel="prefetch" href="/vuebloger/assets/js/100.7fbbc1ba.js"><link rel="prefetch" href="/vuebloger/assets/js/101.b342a5c3.js"><link rel="prefetch" href="/vuebloger/assets/js/102.e5bfed0c.js"><link rel="prefetch" href="/vuebloger/assets/js/103.1c004e45.js"><link rel="prefetch" href="/vuebloger/assets/js/104.fbd52fd7.js"><link rel="prefetch" href="/vuebloger/assets/js/105.8a1ae092.js"><link rel="prefetch" href="/vuebloger/assets/js/106.c7925104.js"><link rel="prefetch" href="/vuebloger/assets/js/107.deaf416c.js"><link rel="prefetch" href="/vuebloger/assets/js/108.ba72bf7a.js"><link rel="prefetch" href="/vuebloger/assets/js/109.02db8538.js"><link rel="prefetch" href="/vuebloger/assets/js/11.b649e2a0.js"><link rel="prefetch" href="/vuebloger/assets/js/110.55981253.js"><link rel="prefetch" href="/vuebloger/assets/js/111.632d87dc.js"><link rel="prefetch" href="/vuebloger/assets/js/112.dd860ee0.js"><link rel="prefetch" href="/vuebloger/assets/js/113.7744c61c.js"><link rel="prefetch" href="/vuebloger/assets/js/114.afc5a900.js"><link rel="prefetch" href="/vuebloger/assets/js/12.831b2cd3.js"><link rel="prefetch" href="/vuebloger/assets/js/13.930f2726.js"><link rel="prefetch" href="/vuebloger/assets/js/14.e5c8f6df.js"><link rel="prefetch" href="/vuebloger/assets/js/15.ddb9535d.js"><link rel="prefetch" href="/vuebloger/assets/js/16.27874b69.js"><link rel="prefetch" href="/vuebloger/assets/js/17.29657b5e.js"><link rel="prefetch" href="/vuebloger/assets/js/18.3dade952.js"><link rel="prefetch" href="/vuebloger/assets/js/19.1c5b1a3e.js"><link rel="prefetch" href="/vuebloger/assets/js/20.d852b555.js"><link rel="prefetch" href="/vuebloger/assets/js/21.6de1dc73.js"><link rel="prefetch" href="/vuebloger/assets/js/22.361a90fc.js"><link rel="prefetch" href="/vuebloger/assets/js/23.91894daf.js"><link rel="prefetch" href="/vuebloger/assets/js/24.b66b149f.js"><link rel="prefetch" href="/vuebloger/assets/js/26.0ac1aa03.js"><link rel="prefetch" href="/vuebloger/assets/js/27.fb78ea0b.js"><link rel="prefetch" href="/vuebloger/assets/js/28.b6774032.js"><link rel="prefetch" href="/vuebloger/assets/js/29.7b9797d4.js"><link rel="prefetch" href="/vuebloger/assets/js/30.af27d07d.js"><link rel="prefetch" href="/vuebloger/assets/js/31.e713824e.js"><link rel="prefetch" href="/vuebloger/assets/js/32.699dcf06.js"><link rel="prefetch" href="/vuebloger/assets/js/33.e5d64564.js"><link rel="prefetch" href="/vuebloger/assets/js/34.8e99aa4f.js"><link rel="prefetch" href="/vuebloger/assets/js/35.366931a8.js"><link rel="prefetch" href="/vuebloger/assets/js/36.ff1f4304.js"><link rel="prefetch" href="/vuebloger/assets/js/37.ce68e1a6.js"><link rel="prefetch" href="/vuebloger/assets/js/38.cd2e1b6a.js"><link rel="prefetch" href="/vuebloger/assets/js/39.6cb88b55.js"><link rel="prefetch" href="/vuebloger/assets/js/4.493208fc.js"><link rel="prefetch" href="/vuebloger/assets/js/40.8e273d47.js"><link rel="prefetch" href="/vuebloger/assets/js/41.afa41a27.js"><link rel="prefetch" href="/vuebloger/assets/js/43.4bc7941e.js"><link rel="prefetch" href="/vuebloger/assets/js/44.87d042eb.js"><link rel="prefetch" href="/vuebloger/assets/js/45.9b21e29f.js"><link rel="prefetch" href="/vuebloger/assets/js/46.23a27bb6.js"><link rel="prefetch" href="/vuebloger/assets/js/47.395a793a.js"><link rel="prefetch" href="/vuebloger/assets/js/48.6bf78796.js"><link rel="prefetch" href="/vuebloger/assets/js/49.7553f93d.js"><link rel="prefetch" href="/vuebloger/assets/js/5.cb43f664.js"><link rel="prefetch" href="/vuebloger/assets/js/50.7d83d420.js"><link rel="prefetch" href="/vuebloger/assets/js/51.6e8405b6.js"><link rel="prefetch" href="/vuebloger/assets/js/52.755ebd1d.js"><link rel="prefetch" href="/vuebloger/assets/js/53.13897655.js"><link rel="prefetch" href="/vuebloger/assets/js/54.ae6325c1.js"><link rel="prefetch" href="/vuebloger/assets/js/55.b8ce2d26.js"><link rel="prefetch" href="/vuebloger/assets/js/56.135f7068.js"><link rel="prefetch" href="/vuebloger/assets/js/57.be7db1dd.js"><link rel="prefetch" href="/vuebloger/assets/js/58.bbb04e01.js"><link rel="prefetch" href="/vuebloger/assets/js/59.e7ebb591.js"><link rel="prefetch" href="/vuebloger/assets/js/6.ff7e748f.js"><link rel="prefetch" href="/vuebloger/assets/js/60.3080a154.js"><link rel="prefetch" href="/vuebloger/assets/js/61.24831605.js"><link rel="prefetch" href="/vuebloger/assets/js/62.cad7945d.js"><link rel="prefetch" href="/vuebloger/assets/js/63.2dbcc32c.js"><link rel="prefetch" href="/vuebloger/assets/js/64.97bc0bff.js"><link rel="prefetch" href="/vuebloger/assets/js/65.5f4e8786.js"><link rel="prefetch" href="/vuebloger/assets/js/66.8b6546a7.js"><link rel="prefetch" href="/vuebloger/assets/js/67.8546a43f.js"><link rel="prefetch" href="/vuebloger/assets/js/68.8377182a.js"><link rel="prefetch" href="/vuebloger/assets/js/69.5196d10d.js"><link rel="prefetch" href="/vuebloger/assets/js/70.fd04c687.js"><link rel="prefetch" href="/vuebloger/assets/js/71.b82b2a89.js"><link rel="prefetch" href="/vuebloger/assets/js/72.f4fffc0d.js"><link rel="prefetch" href="/vuebloger/assets/js/73.654837b1.js"><link rel="prefetch" href="/vuebloger/assets/js/74.d748d39a.js"><link rel="prefetch" href="/vuebloger/assets/js/75.c98adff3.js"><link rel="prefetch" href="/vuebloger/assets/js/76.2108b240.js"><link rel="prefetch" href="/vuebloger/assets/js/77.7f773ffe.js"><link rel="prefetch" href="/vuebloger/assets/js/78.254a623a.js"><link rel="prefetch" href="/vuebloger/assets/js/79.dded7f8d.js"><link rel="prefetch" href="/vuebloger/assets/js/8.664f264d.js"><link rel="prefetch" href="/vuebloger/assets/js/80.56ac9285.js"><link rel="prefetch" href="/vuebloger/assets/js/81.7e441eca.js"><link rel="prefetch" href="/vuebloger/assets/js/82.520984fb.js"><link rel="prefetch" href="/vuebloger/assets/js/83.b0b3a95d.js"><link rel="prefetch" href="/vuebloger/assets/js/84.65ca6db6.js"><link rel="prefetch" href="/vuebloger/assets/js/85.ba5097a3.js"><link rel="prefetch" href="/vuebloger/assets/js/86.a9db20e0.js"><link rel="prefetch" href="/vuebloger/assets/js/87.295987bc.js"><link rel="prefetch" href="/vuebloger/assets/js/88.1151df7d.js"><link rel="prefetch" href="/vuebloger/assets/js/89.02c5822a.js"><link rel="prefetch" href="/vuebloger/assets/js/9.6529d756.js"><link rel="prefetch" href="/vuebloger/assets/js/90.618470a9.js"><link rel="prefetch" href="/vuebloger/assets/js/91.a1dd8864.js"><link rel="prefetch" href="/vuebloger/assets/js/92.b2795203.js"><link rel="prefetch" href="/vuebloger/assets/js/93.a5764a86.js"><link rel="prefetch" href="/vuebloger/assets/js/94.b1649dff.js"><link rel="prefetch" href="/vuebloger/assets/js/95.86cb3072.js"><link rel="prefetch" href="/vuebloger/assets/js/96.13f133b3.js"><link rel="prefetch" href="/vuebloger/assets/js/97.34a8e3d4.js"><link rel="prefetch" href="/vuebloger/assets/js/98.12a2317d.js"><link rel="prefetch" href="/vuebloger/assets/js/99.15d7de8a.js"><link rel="prefetch" href="/vuebloger/assets/js/vendors~docsearch.84ba8335.js">
    <link rel="stylesheet" href="/vuebloger/assets/css/0.styles.1f5c579b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuebloger/" class="home-link router-link-active"><img src="/vuebloger/img/logo.jpeg" alt="邹先生博客记录" class="logo"> <span class="site-name can-hide">邹先生博客记录</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link router-link-active">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/bake/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <div style="margin-left:20px;margin-right:20px;">
    音乐
    <div role="switch" class="el-switch"><input type="checkbox" name="" true-value="true" class="el-switch__input"><!----><span class="el-switch__core" style="width:40px;"></span><!----></div> <audio><source src="/vuebloger/mp3/065b_520b_0409_111c898908eab454414c3c326fe77c36.mp3" type="audio/mpeg"></audio></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuebloger/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vuebloger/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/vuebloger/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/vuebloger/bake/" class="nav-link router-link-active">备忘</a></div><div class="nav-item"><a href="/vuebloger/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/vuebloger/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/vuebloger/massage/" class="nav-link">留言板</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/xccjh/projects" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nextjs.frontendx.cn/docs/#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nextjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Nuxtjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://angularjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AngularJS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reactnative.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ReactNative
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant/#/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Fontawesome
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MiniProgram
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react-router-dom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.babeljs.cn/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  babel
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://eslint.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  eslint
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.swiper.com.cn/api/index.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  swiper
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  momentjs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/linux/linux-shell.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  shell
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://lodash.com/docs/4.17.15#template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  lodash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://koa.bootcss.com/#links" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jest
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://aui.github.io/art-template/zh-cn/docs/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  art-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ejs.bootcss.com/#docs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.layui.com/doc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layui
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://antv-g2.gitee.io/zh/examples/gallery" target="_blank" rel="noopener noreferrer" class="nav-link external">
  G2
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.echartsjs.com/zh/option.html#title" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vagrant
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docker
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/vuebloger/bake/ https:/www.runoob.com/redis/redis-tutorial.html" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leaflet
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  印记中文
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>实用片段备忘</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vscode-setting-json" class="sidebar-link">vscode-setting-json</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vscode片段之css" class="sidebar-link">vscode片段之css</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vscode片段之html" class="sidebar-link">vscode片段之html</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vscode片段之js" class="sidebar-link">vscode片段之js</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vscode片段之jsx" class="sidebar-link">vscode片段之jsx</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vuecli3配置" class="sidebar-link">vuecli3配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack配置" class="sidebar-link">webpack配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack-common-js" class="sidebar-link">webpack.common.js</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack-dev-js" class="sidebar-link">webpack.dev.js</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack-prod-js" class="sidebar-link">webpack.prod.js</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack-happypack-config-js" class="sidebar-link">webpack.happypack.config.js</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#webpack-config-react-js" class="sidebar-link">webpack.config.react.js</a></li></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#git-alias配置" class="sidebar-link">git-alias配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#gitignore配置" class="sidebar-link">.gitignore配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#babelrc配置" class="sidebar-link">babelrc配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#browserslist配置" class="sidebar-link">browserslist配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#一、browserslistrc简介" class="sidebar-link">一、browserslistrc简介</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#二、使用姿势" class="sidebar-link">二、使用姿势</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#_1-package-json配置" class="sidebar-link">1.package.json配置</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#_2-browserslistrc" class="sidebar-link">2.browserslistrc</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#三、can-i-use" class="sidebar-link">三、Can I Use</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#四、-browserslistrc配置常用" class="sidebar-link">四、.browserslistrc配置常用</a></li></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#postcss-config-js配置" class="sidebar-link">postcss.config.js配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#editorconfig配置" class="sidebar-link">.editorconfig配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#eslintrc-js配置" class="sidebar-link">.eslintrc.js配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#nodemon-json配置" class="sidebar-link">nodemon-json配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#pm2-yml配置" class="sidebar-link">pm2.yml配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#window配置nginx-conf" class="sidebar-link">window配置nginx-conf</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#linux配置nginx-conf" class="sidebar-link">linux配置nginx-conf</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#nginx配置全解析" class="sidebar-link">nginx配置全解析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#nginx-restart-sh" class="sidebar-link">nginx-restart-sh</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#mongdb配置" class="sidebar-link">mongdb配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#hexo常用指令" class="sidebar-link">hexo常用指令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#js片段" class="sidebar-link">js片段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#兼容性滚动条" class="sidebar-link">兼容性滚动条</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#将超出行数的部分-变成" class="sidebar-link">将超出行数的部分 变成 ...</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#bootstrap-屏幕宽度种类" class="sidebar-link">bootstrap 屏幕宽度种类</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#自定义dom事件" class="sidebar-link">自定义dom事件</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#设置rem" class="sidebar-link">设置rem</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#zepto设置拦截器" class="sidebar-link">zepto设置拦截器</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#扩展zepto方法" class="sidebar-link">扩展zepto方法</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#页面开启摄像头" class="sidebar-link">页面开启摄像头</a></li><li class="sidebar-sub-header"><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#使用node删除typora中多余的图片" class="sidebar-link">使用node删除typora中多余的图片</a></li></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vagrant一键创建带docker虚机" class="sidebar-link">vagrant一键创建带docker虚机</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#vagrant一键开启两台以上虚机" class="sidebar-link">vagrant一键开启两台以上虚机</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#单应用angular-json样例" class="sidebar-link">单应用angular.json样例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#多应用angular-json样例" class="sidebar-link">多应用angular.json样例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#uploadossprod" class="sidebar-link">uploadOssProd</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#upload-oss-prod" class="sidebar-link">upload-oss-prod</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-pipe" class="sidebar-link">angular-pipe</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-decorators" class="sidebar-link">angular-decorators</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-directive" class="sidebar-link">angular-directive</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-guard" class="sidebar-link">angular-guard</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-service" class="sidebar-link">angular-service</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-routereuse" class="sidebar-link">angular-routereuse</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#angular-interceptor" class="sidebar-link">angular-interceptor</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuebloger/bake/%E5%AE%9E%E7%94%A8%E7%89%87%E6%AE%B5%E5%A4%87%E5%BF%98.html#通用绘制圆环gauge" class="sidebar-link">通用绘制圆环Gauge</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content__default"><h2 id="vscode-setting-json"><a href="#vscode-setting-json" class="header-anchor">#</a> vscode-setting-json</h2> <p>网上关于vscode.setting资料不全，个人整理了常用配置，如eslint自动修复，包括html,js单引号变双引号，函数名前一个空格，自动缩进4，去除末尾逗号，增加末尾空行，html属性强制换行，移除多行空行，补全末尾分号等等，可以参考如下：
</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>    <span class="token comment">// 配置ssss编译</span>
    <span class="token comment">// &quot;easysass.excludeRegex&quot;: &quot;commonMixin&quot;,</span>
    <span class="token comment">// &quot;easysass.formats&quot;: [</span>
    <span class="token comment">//     {</span>
    <span class="token comment">//         &quot;format&quot;: &quot;compressed&quot;, //压缩格式的 css 代码(代码风格)</span>
    <span class="token comment">//         &quot;extension&quot;: &quot;.min.css&quot;,</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// ],</span>
    <span class="token comment">// 配置vscode服务器https</span>
    <span class="token comment">// &quot;liveServer.settings.https&quot;: {</span>
    <span class="token comment">//     &quot;enable&quot;: false, //将其设置为true以启用该功能。</span>
    <span class="token comment">//     &quot;cert&quot;: &quot; E:\\OpenSSL-Win64\\bin\\server-cert.pem&quot;, //完整路径</span>
    <span class="token comment">//     &quot;key&quot;: &quot; E:\\OpenSSL-Win64\\bin\\server-key.pem&quot;, //完整路径</span>
    <span class="token comment">//     &quot;passphrase&quot;: &quot; 123456&quot;</span>
    <span class="token comment">// },</span>
    <span class="token comment">// 配置粘贴图片控件</span>
    <span class="token comment">// &quot;pasteImage.filePathConfirmInputBoxMode&quot;: &quot;onlyName&quot;,</span>
    <span class="token comment">// &quot;pasteImage.path&quot;: &quot;${currentFileNameWithoutExt}&quot;,</span>
    <span class="token comment">// 配置文件代码作者信息</span>
    <span class="token comment">// &quot;fileheader.customMade&quot;: {</span>
    <span class="token comment">//     &quot;Description&quot;: &quot;&quot;,</span>
    <span class="token comment">//     &quot;Author&quot;: &quot;zoujiahe&quot;,</span>
    <span class="token comment">//     &quot;Date&quot;: &quot;Do not edit&quot;,</span>
    <span class="token comment">//     &quot;Github&quot;: &quot;https://github.com/xccjh&quot;,</span>
    <span class="token comment">//     &quot;Gitee&quot;: &quot;https://gitee.com/xccjh&quot;,</span>
    <span class="token comment">//     &quot;Blog&quot;: &quot;http://xccjh.gitee.io/mrzou-blogger&quot;,</span>
    <span class="token comment">//     &quot;LastEditors&quot;: &quot;zoujiahe&quot;, // 文件最后编辑者</span>
    <span class="token comment">//     &quot;LastEditTime&quot;: &quot;Do not edit&quot;,</span>
    <span class="token comment">// },</span>
    <span class="token comment">// &quot;fileheader.configObj&quot;: {</span>
    <span class="token comment">//     &quot;moveCursor&quot;: true, // 移动光标到`Description :`所在行</span>
    <span class="token comment">//     &quot;createFileTime&quot;: false, // 设为false更改为当前生成注释的时间</span>
    <span class="token comment">//     &quot;autoAdd&quot;: false, // 自动添加头部注释开启才能自动添加</span>
    <span class="token comment">//     &quot;autoAlready&quot;: false, // 默认开启</span>
    <span class="token comment">// },</span>
    <span class="token comment">// &quot;fileheader.cursorMode&quot;: {</span>
    <span class="token comment">//     &quot;description&quot;: &quot;&quot;,</span>
    <span class="token comment">//     &quot;LastEditors&quot;: &quot;zoujiahe&quot;, // 文件最后编辑者</span>
    <span class="token comment">//     &quot;Date&quot;: &quot;Do not edit&quot;,</span>
    <span class="token comment">//     &quot;params&quot;: &quot;&quot;,</span>
    <span class="token comment">//     &quot;return&quot;: &quot;&quot;</span>
    <span class="token comment">// },</span>
    <span class="token comment">// 配置函数注注释风格</span>
    <span class="token comment">// &quot;docthis.authorName&quot;: &quot;zoujiahe&quot;,</span>
    <span class="token comment">// &quot;docthis.includeAuthorTag&quot;: true,</span>
    <span class="token comment">// &quot;docthis.includeDescriptionTag&quot;: true,</span>
    <span class="token comment">// &quot;docthis.includeDateTag&quot;: true,</span>
    <span class="token comment">// &quot;docthis.inferTypesFromNames&quot;: true,</span>
    <span class="token comment">// 配置各个语言格式化工具</span>
    <span class="token string">&quot;[html]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vscode.html-language-features&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[javascript]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vscode.typescript-language-features&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[json]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vscode.json-language-features&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[css]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;michelemelluso.code-beautifier&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[less]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;michelemelluso.code-beautifier&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[scss]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;michelemelluso.code-beautifier&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[sass]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;syler.sass-indented&quot;</span> <span class="token comment">//配合sass语法高亮和格式化</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;[javascriptreact]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;files.associations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 配置文件关联，以便启用对应的智能提示，比如wxss使用css</span>
        <span class="token string">&quot;*.vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;*.wxss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;files.trimTrailingWhitespace&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否允许自定义的snippet片段提示,比如自定义的vue片段开启后就可以智能提示</span>
    <span class="token string">&quot;files.autoSave&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span> <span class="token comment">//关闭自动保存</span>
    <span class="token string">&quot;search.exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// VScode 文件搜索区域配置</span>
        <span class="token string">&quot;**/dist&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/build&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/elehukouben&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.git&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.gitignore&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.svn&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.DS_Store&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.idea&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/.vscode&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/yarn.lock&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/tmp&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;search.followSymlinks&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//关闭rg.exe进程,不允许网页文件做软链接,防止占用内存爆满</span>
    <span class="token string">&quot;todohighlight.isEnable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//todo插件高亮</span>
    <span class="token string">&quot;window.zoomLevel&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//窗口默认缩放级别，+1大20%</span>
    <span class="token string">&quot;debug.toolBarLocation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;docked&quot;</span><span class="token punctuation">,</span> <span class="token comment">//固定debug工具条</span>
    <span class="token string">&quot;workbench.startupEditor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;newUntitledFile&quot;</span><span class="token punctuation">,</span> <span class="token comment">//关闭欢迎页</span>
    <span class="token string">&quot;workbench.editor.enablePreview&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//打开文件覆盖</span>
    <span class="token string">&quot;explorer.confirmDelete&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//浏览文件树删除确定</span>
    <span class="token string">&quot;styledComponentsExtractor.addImportStatement&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//styledComponent自动导入</span>
    <span class="token string">&quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//js函数名前一个空格</span>
    <span class="token string">&quot;typescript.format.insertSpaceBeforeFunctionParenthesis&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//ts函数名前一个空格</span>
    <span class="token string">&quot;javascript.implicitProjectConfig.experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//去除对修饰器的实验支持是一项将在将来版本中更改的功能的提示</span>
    <span class="token string">&quot;terminal.integrated.rendererType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span> <span class="token comment">//编辑器渲染使用dom,用来配置自定义毛玻璃效果以及霓虹主题等</span>
    <span class="token string">&quot;terminal.integrated.shell.windows&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Program Files\\Git\\bin\\bash.exe&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认终端</span>
    <span class="token string">&quot;vsicons.dontShowNewVersionMessage&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//显示版本更新提示</span>
    <span class="token comment">// 配置vetur</span>
    <span class="token string">&quot;vetur.format.options.tabSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">//格式化vue配置缩进4空格</span>
    <span class="token string">&quot;vetur.format.options.useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//格式化vue使用空格</span>
    <span class="token string">&quot;vetur.format.defaultFormatterOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//去除结尾逗号</span>
            <span class="token string">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//使用单引号</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vetur.format.defaultFormatter.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vscode-typescript&quot;</span><span class="token punctuation">,</span> <span class="token comment">//处理Missing space before function parentheses（函数前有一个空格）</span>
    <span class="token comment">// 配置emmet语法</span>
    <span class="token string">&quot;emmet.triggerExpansionOnTab&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// emmet插件tab出来配置</span>
    <span class="token string">&quot;emmet.includeLanguages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;vue-html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token comment">//开启vue支持</span>
        <span class="token string">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascriptreact&quot;</span> <span class="token comment">//开启react的js支持</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;emmet.syntaxProfiles&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;vue-html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;breadcrumbs.enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开启文件路径面包屑</span>
    <span class="token string">&quot;diffEditor.ignoreTrimWhitespace&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//对比文件差异忽略空格</span>
    <span class="token string">&quot;vue-helper.rem-px&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 默认rem转换比</span>
    <span class="token string">&quot;html.format.wrapAttributes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;force-aligned&quot;</span><span class="token punctuation">,</span> <span class="token comment">//html属性强制折行对齐</span>
    <span class="token string">&quot;editor.lineNumbers&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span> <span class="token comment">//开启行数显示</span>
    <span class="token string">&quot;editor.tabSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// 重新设定tabsize</span>
    <span class="token string">&quot;editor.detectIndentation&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//控制根据打开文件自动设置tabsize和转换空格设置</span>
    <span class="token string">&quot;editor.insertSpaces&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//tab键输出空格</span>
    <span class="token string">&quot;editor.wordWrap&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span> <span class="token comment">//默认超出换行</span>
    <span class="token string">&quot;editor.mouseWheelZoom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//开起滚轮缩放</span>
    <span class="token string">&quot;editor.suggestSelection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span> <span class="token comment">//</span>
    <span class="token string">&quot;editor.quickSuggestions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//开启自动显示建议</span>
        <span class="token string">&quot;other&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;strings&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;editor.renderWhitespace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> <span class="token comment">//控制显示空格</span>
    <span class="token string">&quot;editor.minimap.enabled&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//显示右侧的预览面板</span>
    <span class="token string">&quot;editor.renderControlCharacters&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//显示控制字符</span>
    <span class="token string">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//保存时不自动格式化</span>
    <span class="token string">&quot;eslint.enable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否开启eslint检测</span>
    <span class="token string">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//新版eslint配置保存按照eslint规则格式化</span>
        <span class="token string">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint.options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//eslint检测的文件范围</span>
        <span class="token string">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;html&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;typescriptreact&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;extensions.ignoreRecommendations&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//开启扩展建议通知</span>
    <span class="token string">&quot;git.confirmSync&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 同步 Git 存储库前请先进行确认</span>
    <span class="token string">&quot;git.autorefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//自动prume</span>
    <span class="token string">&quot;git.enableSmartCommit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//开启git am</span>
    <span class="token string">&quot;gitlens.views.search.files.layout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span><span class="token comment">//指定“搜索提交”视图将如何显示文件</span>
    <span class="token string">&quot;gitlens.hovers.currentLine.over&quot;</span><span class="token operator">:</span> <span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span><span class="token comment">//指定何时触发当前行的悬停</span>
    <span class="token string">&quot;gitlens.views.repositories.files.layout&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tree&quot;</span><span class="token punctuation">,</span><span class="token comment">//gitlens仓库视图显示方式</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br></div></div><h2 id="vscode片段之css"><a href="#vscode片段之css" class="header-anchor">#</a> vscode片段之css</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;o&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;o&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;html,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;body,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;blockquote,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;textarea,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;th,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;pre,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ul,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;li,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ol,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;dl,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;dd,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;dt,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;p,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h1,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h2,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h3,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h4,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h5,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h6,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;a,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;span,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;div,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;input,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;form,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;fieldset,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;legend,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;img {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*设置盒模型*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    box-sizing: border-box;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*去除移动端特有的点击高亮效果*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    -webkit-tap-highlight-color: transparent;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ul,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ol {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;textarea {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    resize: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;fieldset,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;img,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;input,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;button {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    border: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    outline-style: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*外面环绕线*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;img {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    border: 0;  /*ie6*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    vertical-align: middle;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;table {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    border-collapse: collapse;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    border-spacing: 0&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;button {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    cursor: pointer;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;select,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;input {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    vertical-align: middle;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.clearfix:after {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    content: \&quot;\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    display: block;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    clear: both;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    visibility: hidden;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    height: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    line-height: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.clearfix {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    *zoom: 1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;s,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;i,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;em {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*一般是起装饰作用*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-style: normal;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*去掉原有的样式*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-decoration: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*去掉下划线或是删除线*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.fl {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    float: left;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.fr {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    float: right;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.al {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-align: left;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.ac {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-align: center;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.ar {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-align: right;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.none,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.hide {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    display: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.pr {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    position: relative;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.pa{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    position: absolute;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.ml10{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin-left: 10px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.mr10{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin-right: 10px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.mt10{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin-top: 10px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;/*公共类*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;body{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-family: \&quot;微软雅黑\&quot;,sans-serif;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-size: 13px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;a,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;a:hover{&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    color: #666;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-decoration: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.w {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    /*版心 提取 (改）*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    width: 640px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin: 0 auto;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;/*页面主色调 */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.basecol {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    color: #c81623 !important;/* （改）*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;/*定义字体图标样式*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;@font-face {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font-family: 'iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  src: url('../fonts/iconfont.eot');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  src: url('../fonts/iconfont.eot?#iefix') format('embedded-opentype'),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  url('../fonts/iconfont.woff') format('woff'),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  url('../fonts/iconfont.ttf') format('truetype'),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  url('../fonts/iconfont.svg#iconfont') format('svg');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;/*调用定义的字体图标样式*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.iconfont {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-family: 'iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-style: normal;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>

		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;o&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;other&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;other&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;body,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;button,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;input,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;select,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;textarea {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font: 12px/1.5 microsoft yahei, Helvetica, Arial,,sans-serif&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h1,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h2,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h3,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h4,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h5,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;h6,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;button,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;input,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;select,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;textarea {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font-size: 100%&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;address,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;cite,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;dfn,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;em,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;var {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font-style: normal&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;code,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;kbd,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;pre,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;samp {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font-family: PingFangSC-Regular, 'Microsoft YaHei',,Helvetica, Arial, sans-serif&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;small {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  font-size: 12px&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;sup {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  vertical-align: text-top&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;sub {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  vertical-align: text-bottom&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;legend {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  color: #000&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;other&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mo&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;* {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    box-sizing: border-box;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mo&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;po&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;po&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;* {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    box-sizing: border-box;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;po&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;去除链接按钮高亮&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;a {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-decoration: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;去除链接按钮高亮&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;让按钮圆角可控&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;-webkit-appearance: none;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;让按钮圆角可控&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;loadding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lo&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;.loadding::before {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    position: fixed;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    top: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    left: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    width: 100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    height: 100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    background-color: #fff;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    opacity: .5;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    content: \&quot;\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    z-index: 100;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.loadding::after {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font: normal normal normal 14px/1 FontAwesome;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    position: fixed;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    top: 40%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    left: 50%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    margin-left: -50px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    font-size: 100px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    color: #0094ff;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    content: \&quot;\\f013\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    z-index: 101;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    animation: fa-spin 1s infinite linear;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  }&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loadding&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;多行...&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m...&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;    display: -webkit-box;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    overflow: hidden;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    white-space: normal!important;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-overflow: ellipsis;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    word-wrap: break-word;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    -webkit-line-clamp: 2;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    -webkit-box-orient: vertical&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;多行 ...&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;单行...&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s...&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;.ellipsis {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    display: block;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    white-space: nowrap;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    overflow: hidden;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    text-overflow: ellipsis;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;单行...&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;媒体查询&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;me&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;@media only screen and (width: device-width) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        width: 200 px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;媒体查询&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;全屏&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hb&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;html,body {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    height:100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    overflow:hidden;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;全屏&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;居中&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;position: absolute;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;top: 50%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;left: 50%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;-webkit-transform: translate(-50%, -50%);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;-moz-transform: translate(-50%, -50%);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;-ms-transform: translate(-50%, -50%);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;-o-transform: translate(-50%, -50%);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;transform: translate(-50%, -50%);&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;居中&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;clearfix0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clearfix0&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;.clearfix:after {&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    content: \&quot;\&quot;;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    display: block;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    clear: both;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    visibility: hidden;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    line-height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;.clearfix {&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    *zoom: 1;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clearfix0&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;clearfix1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clearfix1&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;.clearfix:after{&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    content:\&quot;\&quot;;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    display:table;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    clear:both;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.clearfix {&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;    *zoom: 1;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clearfix1&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;等腰三角形上&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arrowu&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;width: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-left: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-right: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-bottom: 30px solid #000&quot;</span> <span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;三角形上&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;等腰三角形下&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arrowd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;width: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-left: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-right: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-top: 30px solid #000&quot;</span> <span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;三角形下&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;等腰三角形左&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arrowl&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;width: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-top: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-bottom: 30px solid transparent;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-right: 30px solid #000&quot;</span> <span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;三角形左&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;等腰三角形右&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arrowr&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;width: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;height: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;border-top: 30px solid transparent;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;border-bottom: 30px solid transparent;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;border-left: 30px solid #000&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;三角形右&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;对话框三角形下&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arrd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;width: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;height: 0;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-width: 20px 10px;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-style: solid;&quot;</span> <span class="token punctuation">,</span>
			<span class="token string">&quot;border-color: #ff3300 #ff3300 transparent transparent;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;对话框三角形下&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br></div></div><h2 id="vscode片段之html"><a href="#vscode片段之html" class="header-anchor">#</a> vscode片段之html</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;console.log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;console.log('$1');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;$2&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;console.log&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;页面开启摄像头&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camera&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv=\&quot;X-UA-Compatible\&quot; content=\&quot;ie=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;Document&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;video src=\&quot;\&quot; width=\&quot;600\&quot; height=\&quot;600\&quot; autoplay controls&gt;&lt;/video&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var video = document.querySelector(\&quot;video\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    navigator.getUserMedia({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      video: true&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }, success, error);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    function success(stream) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      video.src = window.URL.createObjectURL(stream);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    function error(err) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      console.log(err);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>

		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;扩展zepto工具方法&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;删除空行&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ss&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;^b*$\\n&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;删除空行&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;删除单行注释&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;^[ \\t]*//[^\\n]*\\n&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;删除单行注释&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;a标签&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;a href=\&quot;javascript:;\&quot;&gt;$1&lt;/a&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我自己定义的a标签&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;a href=\&quot;tel:15018707394\&quot;&gt;15018707394&lt;/a&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;email&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;a href=\&quot;mailto:zjh2725353471@gmail.com\&quot;&gt;zjh2725353471@gmail.com&lt;/a&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;email&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;st&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/style&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;style&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;style*&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    * {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/style&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;style*&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;fn&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fn&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$TM_FILENAME_BASE&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fn&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;fn0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fn0&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$TM_FILENAME&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fn0&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;fp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$TM_FILEPATH&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fp&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;轮播图&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;l&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;div class=\&quot;carousel-wrap\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div class=\&quot;points-wrap\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/div&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;style*&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;vp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vp&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;禁止移动端电话邮箱&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;svp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;svp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;svp&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;vp适配&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vpsp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;script type = \&quot;text/javascript\&quot; &gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    (function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var targetWidth = 640;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var scale = document.documentElement.clientWidth / targetWidth;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var meta = document.querySelector(\&quot;meta[name=viewport]\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    meta.content = \&quot;initial-scale=\&quot; + scale + \&quot;, user-scalable=no, maximun-scale=1.0, minimun-scale=1.0;\&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    })() &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vp适配&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;多了一个div&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      div:nth-child(1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          background-color:aqua;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          margin: 100px auto;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       var div=document.querySelector(\&quot;div\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;多了一个div&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;1px&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1px&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       * {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 16rem;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 1px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          background-color: black;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          margin-top: 30px;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div id=\&quot;test\&quot;&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        window.onload=function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var dpr=window.devicePixelRatio||1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var styleNode = document.createElement('style');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var w = document.documentElement.clientWidth * dpr / 16;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            styleNode.innerHTML = \&quot;html {font-size:\&quot; + w + \&quot;px!important;}\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            document.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var scale=1/dpr;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var meta=document.querySelector('meta[name=\&quot;viewport\&quot;]');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            meta.content=\&quot;width=device-width,initial-scale=\&quot;+scale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1px&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;1pxt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1px&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       * {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 1px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          background-color: black;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          margin-top: 30px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      @media only screen and (-webkit-device-pixel-ratio: 2) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;              transform:scaleY(.5);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      @media only screen and (-webkit-device-pixel-ratio) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;              transform:scaleY(.33333);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div id=\&quot;test\&quot;&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1pxt&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;hm&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hm&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       * {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       a {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           text-decoration: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       input {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          -webkit-appearance: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        window.onload=function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            document.addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                ev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                ev.preventDefault();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var dpr=window.devicePixelRatio||1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var styleNode = document.createElement('style');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var w = document.documentElement.clientWidth * dpr / 16;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            styleNode.innerHTML = \&quot;html {font-size:\&quot; + w + \&quot;px!important;}\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            document.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var scale=1/dpr;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var meta=document.querySelector('meta[name=\&quot;viewport\&quot;]');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            meta.content=\&quot;width=device-width,initial-scale=\&quot;+scale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var aNodes = document.querySelectorAll(\&quot;a\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            for (var i = 0; i &lt; aNodes.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    this.isMoved = false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchmove', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    this.isMoved = true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchend', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    if (!this.isMoved) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                        location.href = this.href;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hm&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;移动端开发模板&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hk&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       * {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           list-style:none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       a {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           text-decoration: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       #test {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 16rem;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 1px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          background-color: black;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          line-height: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          text-align: center;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          margin-top: 30px;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       #text {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          background-color: yellow;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          margin: 30px auto;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;       input {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          width: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          height: 200px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          -webkit-appearance: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          border-radius:5px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div id=\&quot;test\&quot;&gt;&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;div id = \&quot;text\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        &lt;a href = \&quot;http://www.baidu.com\&quot; id = \&quot;aa\&quot;&gt;百度&lt;/a&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        window.onload=function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //1.meta标签&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //2.全面禁止移动事件默认行为（页面上所有的滚动条失效&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //3.一个适配方案&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //4.移动端a标签的跳转方案，解决误触&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //5.解决链接按钮高亮问题&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //6.去除电话邮箱的智能呼叫&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            //7.让按钮圆角可控&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            document.addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                ev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                ev.preventDefault();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var dpr=window.devicePixelRatio||1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var styleNode = document.createElement('style');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var w = document.documentElement.clientWidth * dpr / 16;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            styleNode.innerHTML = \&quot;html {font-size:\&quot; + w + \&quot;px!important;}\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            document.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var scale=1/dpr;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var meta=document.querySelector('meta[name=\&quot;viewport\&quot;]');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            meta.content=\&quot;width=device-width,initial-scale=\&quot;+scale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            var aNodes = document.querySelectorAll(\&quot;a\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            for (var i = 0; i &lt; aNodes.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    this.isMoved = false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchmove', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    this.isMoved = true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                aNodes[i].addEventListener('touchend', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    if (!this.isMoved) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                        location.href = this.href;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;移动端开发模板&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;html简单&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html简单&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;hp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;!DOCTYPE html&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;html lang=\&quot;en\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta charset=\&quot;UTF-8\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta http-equiv = \&quot;X-UA-Compatible\&quot; content =\&quot;IE=edge\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;title&gt;$TM_FILENAME&lt;/title&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1.0,maximum-scale=1,minimum-scale=1,user-scalable=no\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;meta name=\&quot;format-detection\&quot; content=\&quot;telephone=no,email=no\&quot;/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;style type=\&quot;text/css\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  &lt;/style&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/head&gt; &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;script type=\&quot;text\/javascript\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/html&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hp&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;li标签嵌套a标签嵌套图片标签&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;liai&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;li&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;a href=\&quot;javascript:;\&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        &lt;img src = \&quot;$1\&quot; alt = \&quot;\&quot; &gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    &lt;/a&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/li&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;li&gt;a&gt;img&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;生成jq标签&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jq&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;script src=\&quot;https://cdn.staticfile.org/jquery/1.2.3/jquery.js\&quot; type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/script&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;生成js标签&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;script type=\&quot;text\/javascript \&quot;&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/script&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;js入口&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;script type = \&quot;text/javascript\&quot; &gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    window.onload=function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&lt;/script&gt;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js入口&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;佛祖&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fz&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;&lt;pre style='transform:translateX(-50%);position:absolute;left:50%;&gt;'&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                   _ooOoo_&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  o8888888o&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  88\&quot; . \&quot;88&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  (| -_- |)&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  O\\  =  /O&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;               ____/`---'\\____&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             .'  \\|     |//  `.&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            /  \\|||  :  |||//  \\&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           /  _||||| -:- |||||-  \\&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           |   | \\\\\\  -  /// |   |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           | \\_|  ''\\---/''  |   |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           \\  .-\\__  `-`  ___/-. /&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         ___`. .'  /--.--\\ `. . __&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      .\&quot;\&quot; '&lt;  `.___\\_&lt;|&gt;_/___.'  &gt;'\&quot;\&quot;.&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;======`-.____`-.___\\_____/___.-`____.-'======&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                   `=---='&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            佛祖保佑       永无BUG&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     佛曰:  &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          写字楼里写字间，写字间里程序员；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          程序人员写程序，又拿程序换酒钱。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          酒醒只在网上坐，酒醉还来网下眠；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          酒醉酒醒日复日，网上网下年复年。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          但愿老死电脑间，不愿鞠躬老板前；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          奔驰宝马贵者趣，公交自行程序员。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          别人笑我忒疯癫，我笑自己命太贱；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          不见满街漂亮妹，哪个归得程序员？&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot; &lt;/pre&gt;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;佛祖&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br></div></div><h2 id="vscode片段之js"><a href="#vscode片段之js" class="header-anchor">#</a> vscode片段之js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;zrcc&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;zrcc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import React, { Component } from 'react';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { connect } from 'react-redux';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;class index extends Component {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	render() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		return (&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;				&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const mapStateToProps = (state) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const mapDispatchToProps = (dispatch) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default connect(&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	mapStateToProps,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	mapDispatchToProps&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;)(index);&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;App&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;App&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import React, { Component } from 'react';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { GlobalStyle } from './style';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { GlobalStyledIconfont } from './statics/iconfont/iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { Provider } from 'react-redux';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { BrowserRouter,Route } from 'react-router-dom';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import Header from './common/header';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import Home from './pages/home';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import store from './store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;class App extends Component {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;render() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return (&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&lt;Provider store={store}&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;BrowserRouter&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;GlobalStyle /&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;GlobalStyledIconfont/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;Header /&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;Route path='/' exact component={Home}&gt;&lt;/Route&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;/BrowserRouter&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&lt;/Provider&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default App;&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;iconfonts&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;iconfonts&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { createGlobalStyle } from 'styled-components';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const GlobalStyledIconfont = createGlobalStyle`&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;@font-face {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-family: 'iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	src: url('./iconfont.eot?t=1528610804703'); /* IE9*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	src: url('./iconfont.eot?t=1528610804703#iefix') format('embedded-opentype'), /* IE6-IE8 */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAawAAsAAAAACXQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7ko/Y21hcAAAAYAAAAB+AAABwJ8cCDpnbHlmAAACAAAAApEAAAL0URYALWhlYWQAAASUAAAALwAAADYRpQXlaGhlYQAABMQAAAAcAAAAJAfeA4dobXR4AAAE4AAAABMAAAAYF+kAAGxvY2EAAAT0AAAADgAAAA4C3AHkbWF4cAAABQQAAAAfAAAAIAEVAF1uYW1lAAAFJAAAAUUAAAJtPlT+fXBvc3QAAAZsAAAAQgAAAFNcaMVWeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/sM4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLwIZG7438AQw9zA0AAUZgTJAQAq0wzDeJzFkTEKwzAMRZ9itxSTMblF5xygc5ZcpFMHn1jkFumXHQo9Qb54RvrIyFjADUjiKTLYByP0lmvNT5TmZ16qCw8GRfXZl307DnnVp1/eZeorjIrIk6Zk3cHuXCa7bvS/xnauZxX/X0/0RJ86sROfO9HjSyd2tG8dhi8XIxfqAAB4nDWSz2sTQRTH581kdtM02W33Z7L5nW12G1s3cbObiNpsChX8hRUEsQ0oCnqoKBYLvShEJBDFg2CPglAEr73UUy0ttP9ATz14sCiCx148tVs3aTszvOF934PPvPcGUYSO9sgaiSMRjaJzaArdQgiYMShwOA1507HwGMh5KqsSR0zdzLN6wSIToBYYSbFrjqEyLMMDBxmo5u2aaWETXKeBL4KtpAESSe22UEwJ5ANE4mam41/DyyBn9RTfOOtfHfckOyeGF6OCkBCE92GG0jDGIZ6Dp6oyQAcijP+F8pq8li3hLEQTpnZjJpZLCg+6zrN0UR0AaLdBTOa4r96wNhycl5oiCgl2KBaOazF9RILF34NxMZo2fqFg4aDWNgk2GkL5oEo2AzIHrMuqbgPqjlHuu5Ki1i3oKTI+mLUqZLXbbq8f0qmDvm0eS/j7rLUw2V0lzXa7SQ/XW8tvTu7maaDP2yQbZBLJPR6FBrgWmFwPrNq1OvQaGIj1wA1EC8g3f98oka2lpa1QaGvJm7eAj2jSwXJopdNZIaRnWeCt595xwsdtcsbw9yOSBv86K6HTrF6toYB9FLARYhGPRlAZoXx/elAViWHqDEtorWqnQXd1Ri8YruOBoxfY4CGypFTt2gTgjcdX/N3Lj4B/OPWEMpiyc7Bbabw4D/lJqz53r3mhfH80ndOKlZ0dgvwSeEOGLvqbNLWwXa5VSne46PXiXZpKyCm7mDnp/2syQ14hDhkIeQAeXALdNBiZB1AZHjPBDESjHugNrGSDP8X6n4EkXHgL2MX+n59R+Uc4ZYdxAkchSZ3BnDkqdIuKHJuHjfEW4GkAaIX8+Dsp8gmz6VQYoqoEfyMtIT7IRG6q0wH3P3/XmCcAAAB4nGNgZGBgAOKzF3Kd4/ltvjJwszCAwHWnB18Q9P8GFgbmBiCXg4EJJAoAVtsL6AB4nGNgZGBgbvjfwBDDwgACQJKRARWwAQBHDAJveJxjYWBgYH7JwMDCgIoBEp8BAQAAAAAAAHYArgDsATYBegAAeJxjYGRgYGBjCGRgZQABJiDmAkIGhv9gPgMAEUgBcwB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICNkYmRmZGFkZWRjZGdgbGCpbggM48rLTEvPSUxKzMvnckxkSczOT9PNzkjNTk7M4+BAQDkRwvZAAA=') format('woff'),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('./iconfont.ttf?t=1528610804703') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('./iconfont.svg?t=1528610804703#iconfont') format('svg'); /* iOS 4.1- */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.iconfont {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-family:'iconfont' !important;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-size:16px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-style:normal;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	-webkit-font-smoothing: antialiased;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	-moz-osx-font-smoothing: grayscale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;`;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;globals&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;globals&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import {createGlobalStyle} from 'styled-components';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const GlobalStyle = createGlobalStyle`&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	html, body, div, span, applet, object, iframe,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	h1, h2, h3, h4, h5, h6, p, blockquote, pre,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	a, abbr, acronym, address, big, cite, code,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	del, dfn, em, img, ins, kbd, q, s, samp,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	small, strike, strong, sub, sup, tt, var,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	b, u, i, center,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	dl, dt, dd, ol, ul, li,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	fieldset, form, label, legend,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	table, caption, tbody, tfoot, thead, tr, th, td,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	article, aside, canvas, details, embed, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	figure, figcaption, footer, header, hgroup, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	menu, nav, output, ruby, section, summary,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	time, mark, audio, video {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		font-size: 100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		font: inherit;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		vertical-align: baseline;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	/* HTML5 display-role reset for older browsers */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	article, aside, details, figcaption, figure, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	footer, header, hgroup, menu, nav, section {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		display: block;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	body {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		line-height: 1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	ol, ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		list-style: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	blockquote, q {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		quotes: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	blockquote:before, blockquote:after,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	q:before, q:after {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		content: '';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		content: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	table {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border-collapse: collapse;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border-spacing: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;`;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;zreducer&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;zreducer&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { fromJS } from 'immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const defaultState = fromJS({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;topicList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;articleList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;recommendList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;articlePage: 1,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;showScroll: false&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;});&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default (state = defaultState, action) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;switch (action.type) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.CHANGE_HOME_DATA:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return changeHomeData(state, action);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.TOGGLE_SCROLL_TOP:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return state.set('showScroll', action.show);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.ADD_ARTICLE_LIST:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			return addArticleList(state, action);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	default:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return state;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;comb&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;comb&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { combineReducers } from 'redux-immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { reducer as headerReducer } from '../common/header/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;// import { reducer as detailReducer } from '../pages/detail/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { reducer as homeReducer } from '../pages/home/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;// import { reducer as loginReducer } from '../pages/login/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const reducer=combineReducers({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	header:headerReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	// detail:detailReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	// login:loginReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	home:homeReducer&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default reducer&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;cstore&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;cstore&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import {createStore,applyMiddleware,compose} from 'redux'&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import thunk from 'redux-thunk'&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import reducer from './reducer';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const composeEnchancers=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const store=createStore(reducer,composeEnchancers(applyMiddleware(thunk)))&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default store&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;sstore&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;sstore&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import reducer from './reducer';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as actionCreators from './actionCreators';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export { reducer, actionCreators, constants };&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;actionc&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;actionc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import axios from 'axios';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { fromJS } from 'immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const getHomeInfo = () =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return (dispatch) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		axios.get('/api/home.json').then((res) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			const result = res.data.data;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			dispatch(changHomeData(result));&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		});&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const toggleTopShow = (show) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	type: constants.TOGGLE_SCROLL_TOP,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	show&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;constants&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;constants&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;export const CHANGE_HOME_DATA = 'home/CHANGE_HOME_DATA'&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mstp&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;rs&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;const mapStateToProps = (state) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mdtp&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;rd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;const mapDispatchToProps = (dispatch) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;打印文本&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;console.log($1);&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;打印输出&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;//#region $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;$2&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//#endregion&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;父级元素的第一个子级元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getFirstElementChild&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getFirstElementChild(element) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tif (element.firstElementChild) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn element.firstElementChild;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tvar node = element.firstChild;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\twhile (node&amp;&amp;node.nodeType!=1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tnode=node.nextSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn node;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;父级元素的第一个子级元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;父级元素的最后一个子级元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getLastElementChild&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getLastElementChild(element) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tif (element.lastElementChild) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn element.lastElementChild;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tvar node = element.lastChild;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\twhile (node&amp;&amp;node.nodeType!=1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tnode=node.previousSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn node;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;父级元素的最后一个子级元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;元素的前一个元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getPreviousElementSibling&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getPreviousElementSibling(element) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tif (element.previousElementSibling) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn element.previousElementSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tvar node = element.previousSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\twhile (node&amp;&amp;node.nodeType!=1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tnode=node.previousSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn node;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;元素的前一个元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;元素的后一个元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getNextElementSibling&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getNextElementSibling(element) {&quot;</span> <span class="token operator">+</span>
			<span class="token string">&quot;\t\tif (element.nextElementSibling) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn element.nextElementSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tvar node = element.nextSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\twhile (node&amp;&amp;node.nodeType!=1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tnode=node.nextSibling;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn node;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;元素的后一个元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容设置文本内容&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;setInnerText&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function setInnerText(element,text) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tif (typeof element.textContent == \&quot;undefined\&quot;) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.innerText=text;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.textContent=text;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容设置文本内容&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容获取文本内容&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getInnerText&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getInnerText(element) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tif (typeof element.textContent== \&quot;undefined\&quot;) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\treturn element.innerText;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\treturn element.textContent;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容获取文本内容&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;获取元素计算后的属性值&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getStyle&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getStyle(element,attr) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn window.getComputedStyle?window.getComputedStyle(element,null)[attr] : element.currentStyle[attr];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取元素计算后的属性值&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容getElementsByClassName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dgcj&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;if (!document.getElementsByClassName) { //如果浏览器不支持document.getElementsByClassName&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  document.getElementsByClassName = function(className, element) { //我们先将要写的方法封装成一个函数&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var children = (element || document).getElementsByTagName('*'); //获取html中所有的DOM节点 &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var elements = []; //用一个空数组存放要获取的class类名&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    for (var i = 0; i &lt; children.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      var child = children[i];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      var classNames = child.className.split(' '); //将所有的class节点保存在一个数组之中&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      for (var j = 0; j &lt; classNames.length; j++) { //遍历循环，将满足要求的class存入elements空数组中&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (classNames[j] == className) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          elements.push(child);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;          break;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return elements; //返回新的数组&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  };&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容getElementsByClassName&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;zepto前置拦截器&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zb&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;  $.ajaxSettings.beforeSend = function (xhr, obj) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    obj.url = baseUrl  + obj.url;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  }&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zepto前置拦截器&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;zepto后置拦截器&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;za&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;  $.ajaxSettings.complete = function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  }&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zepto后置拦截器&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;扩展zepto工具方法&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;kz&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;  $.extend($, {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    show: function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      $(\&quot;body\&quot;).addClass(\&quot;waitting\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  });&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;扩展zepto工具方法&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;bootstrap 屏幕宽度种类&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bootstrap&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function whatScreen() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var width = window.screen.width;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var title = document.querySelector(\&quot;title\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    if (width &lt;= 768) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        title.innerHTML = \&quot;极小屏幕-\&quot; + width;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    } else if (width &gt; 768 &amp;&amp; width &lt;= 992) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        title.innerHTML = \&quot;小屏幕-\&quot; + width;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    } else if (width &gt; 992 &amp;&amp; width &lt;= 1200) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        title.innerHTML = \&quot;普通屏幕-\&quot; + width;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    } else if (width &gt; 1200) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        title.innerHTML = \&quot;大屏幕-\&quot; + width;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bootstrap 屏幕宽度种类&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;自定义DOM事件&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zdye&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;var evt = document.createEvent(\&quot;HTMLEvents\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  // 初始化，事件类型，是否冒泡，是否阻止浏览器的默认行为&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  evt.initEvent(\&quot;tap\&quot;, false, false);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  // 触发&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  div.dispatchEvent(evt);&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;自定义DOM事件&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;使用node删除typora中多余的图片&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;delp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;// process.argv&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const path = require(\&quot;path\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const fs = require(\&quot;fs\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;dImgs();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;/* &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;默认是当前路径的 meidas文件夹&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;默认是当前路径的所有的md 文件&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot; */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;function dImgs() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  /* &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  1 获取medias里面所有的图片 =&gt;[]&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  2 将图片数组和md中的图片引用对比，发现循环后不存在的数组，再开始循环删除&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;   */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  let dirName = \&quot;medias\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  //  图片文件名称数组 =  要删除的图片的数组&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  let imgArrNames = fs.readdirSync(dirName);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  // console.log(imgArrNames22);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  // 获取目录下的所有md文件名称&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  let mdNames = fs.readdirSync(\&quot;./\&quot;).filter(v =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return v.includes(\&quot;.md\&quot;)&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  });&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  console.log(\&quot;源图片的长度：\&quot; + imgArrNames.length);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  mdNames.forEach(v =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    // v 是每一个md文件的名称  &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    // 获取md文件字符串&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    let mdContent = fs.readFileSync(v).toString(\&quot;utf8\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    // 循环里面不要修改源数组的长度&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    // 要保留的图片名数组&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    let saveImgs = [];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    imgArrNames.forEach((vImg, iImg) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      if (mdContent.includes(vImg)) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        // vImg 为不需要删除的文件&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        saveImgs.push(vImg);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    });&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    saveImgs.forEach((v) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      // 修改上一个要循环的图片&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      let deI = imgArrNames.indexOf(v);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      if (deI != -1) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        imgArrNames.splice(deI, 1);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    });&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  });&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  // 循环删除&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  let deIndex = 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  imgArrNames.forEach(v =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    fs.unlinkSync(path.join(dirName, v));&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    console.log(\&quot;删除的图片的名称\&quot; + v);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    deIndex++;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  });&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;  console.log(\&quot;删除成功\&quot; + deIndex);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;使用node删除typora中多余的图片&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容事件&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ev&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;ev = ev || event;&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容事件&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;绑定事件兼容代码&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;addEventListener&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function addEventListener(element,type,fn) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tif(element.addEventListener) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.addEventListener(type, fn, false);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else if (element.attachEvent) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.attachEvent(\&quot;on\&quot;+type,fn);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement[\&quot;on\&quot;+type]=fn;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;绑定事件兼容代码&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;解绑事件兼容代码&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;removeEventListener&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function removeEventListener(element,type,fn) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tif(element.removeEventListener) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.removeEventListener(type, fn, false)&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else if (element.detachEvent) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement.detachEvent(\&quot;on\&quot;+type,fn);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\telement[\&quot;on\&quot;+type]=null;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;解绑事件兼容代码&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容scroll&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getScroll&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getScroll() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\treturn {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\ttop:window.pageYOffset||document.documentElement.scrolltop|,document.body.scrolltop||0,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tleft:window.pageXOffset||document.documentElement.scrollleft|,document.body.scrollleft||0,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t};&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容性滚动条&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;兼容pageX/Y&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getPage&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getPage(evt){&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\treturn {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tpageX:this.getEvent(evt).pageX?this.getEvent(evt).pageX:this.getClintX(evt,+this.getScrollLeft(),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tpageY:this.getEvent(evt).pageY?this.getEvent(evt).pageY:this.getClintY(evt,+this.getScrollTop();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;兼容pageX&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;冒泡排序&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bubbleSort&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function bubbleSort(arr) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var len = arr.length;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    for (var i = 0; i &lt; len - 1; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        for (var j = 0; j &lt; len - 1 - i; j++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            if (arr[j] &gt; arr[j + 1]) { // 相邻元素两两对比&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                var temp = arr[j + 1]; // 元素交换&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                arr[j + 1] = arr[j];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                arr[j] = temp;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return arr;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;冒泡排序&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;缓动动画&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animatea&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot; function animatea(element, obj, callback) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     element.timer = setInterval(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         var flag = true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         for (var attr in obj) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             if (attr === 'zIndex') {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var target = obj[attr];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 element.style[attr] = target;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             } else if (attr === 'opacity') {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var current = 100 * parseFloat(window.getComputedStyle(element)[attr]);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var target = 100 * obj[attr];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var step = (target - current) / 10;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 step = step &gt; 0 ? Math.ceil(step) : Math.floor(step);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 current += step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 element.style[attr] = current / 100;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var current = parseFloat(window.getComputedStyle(element)[attr]);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var target = obj[attr];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 var step = (target - current) / 10;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 step = step &gt; 0 ? Math.ceil(step) : Math.floor(step);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 current += step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 element.style[attr] = current + 'px';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             if (current !== target) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 flag = false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         if (flag) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             if (typeof callback === 'function') {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                 callback();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     }, 24);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot; }&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;缓动动画&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;匀速动画height&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animateh&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function animateh(element, target, step) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var current = element.offsetHeight;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    step = step || 9;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    element.timer = setInterval(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (current &lt; target) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            current += step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            current -= step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        element.style.height = current + 'px';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (Math.abs(target - current) &lt;= step) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.height = target + 'px';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }, 24);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;匀速动画height&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;匀速动画left&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animatel&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function animatel(element, target, step) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var current = element.offsetLeft;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    step = step || 9;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    element.timer = setInterval(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (current &lt; target) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            current += step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            current -= step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        element.style.left = current + 'px';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (Math.abs(target - current) &lt;= step) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            clearInterval(element.timer);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.left = target + 'px';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }, 24);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;匀速动画left&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;距离选择匀速速度height&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animatedh&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function animatedh(element, target) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var currenta = parseInt(element.offsetHeight); //根据距离选择匀速的速度大小&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    clearInterval(element.timeId);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    element.timeId = setInterval(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        var current = element.offsetHeight;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        var step = Math.abs(target - currenta) / 50; //根据距离选择匀速的速度大小&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        strp = current &lt; target ? step : -step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        current += strp;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (Math.abs(target - current) &lt; Math.abs(step)) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            clearInterval(element.timeId);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.height = target + \&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.height = current + \&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }, 10);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;距离选择匀速速度height&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;距离选择匀速速度left&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animated&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function animatedl(element, target) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var currenta = parseInt(element.offsetLeft);//根据距离选择匀速的速度大小&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    clearInterval(element.timeId);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    element.timeId = setInterval(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        var current = element.offsetLeft;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        var step = Math.abs(target - currenta) / 50; //根据距离选择匀速的速度大小&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        strp = current &lt; target ? step : -step;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        current += strp;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (Math.abs(target - current) &lt; Math.abs(step)) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            clearInterval(element.timeId);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.left = target + \&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            element.style.left = current + \&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }, 10);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;};&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;距离选择匀速速度left&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;判断有没有这属性&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hasp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function hasPrototypeProperty(obj, pro) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    //  hasOwnProperty   in&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    if (!obj.hasOwnProperty(pro) &amp;&amp; (pro in obj)) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        return true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;判断有没有这属性&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;去除空格&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;space&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function returnNoSpace(str) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return str.replace(/\\s+/g, ' ');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;去除空格&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;验证手机号&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function checkPhone(phone) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    if (!(/^1[34578]\\d{9}$/.test(phone))) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        return false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    } else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        return true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;验证手机号&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;验证邮箱&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function checkEmail(myemail) {　　&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    if (myReg.test(myemail)) {　　　　&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        return true;　　&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    } else {　　　　&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        return false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;验证邮箱&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;获取浏览器参数&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function getUrl(name) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var reg = new RegExp(\&quot;(^|&amp;)\&quot; + name + \&quot;=([^&amp;]*)(&amp;|$)\&quot;, i);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var r = window.location.search.substr(1).match(reg);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    if (r != null) return decodeURI(r[2]);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    return null;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取浏览器参数&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;阻止冒泡&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;ev.stopPropagation();&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;阻止冒泡&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;阻止默认行为&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ep&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;ev.preventDefault();&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;阻止默认行为&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;根据id获取元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dgi&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.getElementById('$1');&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;根据id获取元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;根据标签名获取元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dgt&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.getElementsByTagName('$1');&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;根据标签名获取元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;根据类名获取元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dgc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.getElementsByClassName('$1');&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;根据类名获取元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;h5获取元素&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dq&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.querySelector('$1');&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h5获取元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;h5获取所有&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dqa&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.querySelectorAll('$1');&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h5获取元素&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;vp适配&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vp&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var targetWidth = 640;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var scale = document.documentElement.clientWidth / targetWidth;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var meta = document.querySelector(\&quot;meta[name=viewport]\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    meta.content = \&quot;initial-scale=\&quot;, scale, \&quot;, user-scalable=no, maximun-scale=1.0, minimun-scale=1.0;\&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})() &quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vp适配&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mz&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mz&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;document.addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    ev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    ev.preventDefault();&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mz&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;rem适配&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rem&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var styleNode = document.createElement('style');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var w = document.documentElement.clientWidth / 16;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    styleNode.innerHTML = \&quot;html {font-size:\&quot;+ w+ \&quot;px!important;}\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    document.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})()&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rem适配&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;remd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;remd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;window.onload=function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var dpr=window.devicePixelRatio||1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var styleNode = document.createElement('style');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var w = document.documentElement.clientWidth * dpr / 16;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    styleNode.innerHTML = \&quot;html {font-size:\&quot;+ w+ \&quot;px!important;}\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    document.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var scale=1/dpr;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    var meta=document.querySelector('meta[name=\&quot;viewport\&quot;]');&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    meta.content=\&quot;width=device-width,initial-scale=\&quot;+scale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;remd&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;jq入口1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jq入口1&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;js入口&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;window.onload=function(){&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js入口&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;jq入口2&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$$&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;$(ducument).ready(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jq入口2&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;移动端a跳转方案&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;var aNodes = document.querySelectorAll(\&quot;a\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;for (var i = 0; i &lt; aNodes.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    aNodes[i].addEventListener('touchstart', function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        this.isMoved = false;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    aNodes[i].addEventListener('touchmove', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        this.isMoved = true;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    aNodes[i].addEventListener('touchend', function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        if (!this.isMoved) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            location.href = this.href;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;        }&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    })&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;移动端a跳转方案&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;轮播图&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;l&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;// 添加轮播图片的路径&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tvar arr = [\&quot;img/01.jpg\&quot;, \&quot;img/02.jpg\&quot;, \&quot;img/03.jpg\&quot;, \&quot;img/04.jpg\&quot;, \&quot;img/05.jpg\&quot;]&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tcarousel(arr);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\tfunction carousel(arr) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t//容器布局&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tvar carouselWrap = document.querySelector(\&quot;.carousel-wrap\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\tif (carouselWrap) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar ulNode = document.createElement(\&quot;ul\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar styleNode = document.createElement(\&quot;style\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tulNode.classList.add(\&quot;list\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tfor (var i = 0; i &lt; arr.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tulNode.innerHTML+= '&lt;li&gt;&lt;a href=\&quot;javascript:;\&quot;&gt;&lt;img src=\&quot;'+ arr[i]+ '\&quot;/&gt;&lt;/a&gt;&lt;/li&gt;';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;styleNode.innerHTML = \&quot;.carousel-wrap &gt; .list &gt; li{width: \&quot; + (1 / arr.length * 100) + \&quot;%;};.carousel-wrap &gt; .list{\&quot; + \&quot;width: \&quot; + arr.length + \&quot;00 %};\&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tcarouselWrap.appendChild(ulNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tdocument.head.appendChild(styleNode);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar imgNodes = document.querySelector(\&quot;.carousel-wrap &gt; .list &gt; li &gt; a &gt;img\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t//定时器获取图片高度&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t// setTimeout(function(){&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t// \tcarouselWrap.style.height=imgNodes.offsetHeight+\&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t// },100)&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\timgNodes.onload = function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tcarouselWrap.style.height = imgNodes.offsetHeight, \&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t//小圆点布局&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar pointsWrap = document.querySelector(\&quot;.carousel-wrap &gt; .points-wrap\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tif (pointsWrap) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tfor (var i = 0; i &lt; arr.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\tif (i == 0) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\t\tpointsWrap.innerHTML+= '&lt;span class=\&quot;active\&quot;&gt;&lt;/span&gt;';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\t} else {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\t\tpointsWrap.innerHTML+= '&lt;span&gt;&lt;/span&gt;';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar pointsSpan = document.querySelectorAll(\&quot;.carousel-wrap &gt; .points-wrap &gt; span\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t/*滑屏&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t * \t1.拿到元素一开始的位置&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t * \t2.拿到手指一开始点击的位置&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t * \t3.拿到手指move的实时距离&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t * \t4.将手指移动的距离加给元素&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t * */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t//手指一开始的位置&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar startX = 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t//元素一开始的位置&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar elementX = 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t//1.增加元素坐标位置，由于translate的值不会记录到offsetleft中&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tvar translateX = 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tcarouselWrap.addEventListener(\&quot;touchstart\&quot;, function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar TouchC = ev.changedTouches[0];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//清除动画延迟&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tulNode.style.transition = \&quot;none\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tstartX = TouchC.clientX;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//a.elementX=ulNode.offsetLeft;定位&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\telementX = translateX; //非定位&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tcarouselWrap.addEventListener(\&quot;touchmove\&quot;, function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar TouchC = ev.changedTouches[0];&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar nowX = TouchC.clientX;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar disX = nowX - startX;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\ttranslateX = elementX, disX;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//b.ulNode.style.left = elementX+disX+\&quot;px\&quot;;//定位&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tulNode.style.transform = 'translateX(', translateX, 'px)'; //非定位&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\tcarouselWrap.addEventListener(\&quot;touchend\&quot;, function (ev) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tev = ev || event;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//index抽象了ul的实时位置&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//2.不能用uloffsetLeft换成translateX&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//var index = ulNode.offsetLeft/document.documentElement.clientWidth;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tvar index = translateX / document.documentElement.clientWidth;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//1/2滑动控制&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tindex = Math.round(index);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//无缝超出控制&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tif (index &gt; 0) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\tindex = 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t} else if (index &lt; 1 - arr.length) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\tindex = 1 - arr.length;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//小点样式跟随&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tfor (var i = 0; i &lt; pointsSpan.length; i++) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t\tpointsSpan[i].classList.remove(\&quot;active\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tpointsSpan[-index].classList.add(\&quot;active\&quot;);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//过渡&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tulNode.style.transition = \&quot;.5s left\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//3.同步translateX&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\ttranslateX = index * (document.documentElement.clientWidth);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\t//c.ulNode.style.left = index*(document.documentElement.clientWidth)+\&quot;px\&quot;;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t\tulNode.style.transform = 'translateX(', translateX, 'px)';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t\t})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t\t}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;\t\t}&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;轮播图&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;自闭合函数&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;(function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})();&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;自闭合函数&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;匿名函数&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fu&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;匿名函数&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;绑定DOM2事件&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;btn&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;btn.addEventlistener('click',function () {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;绑定事件&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;绑定DOM0事件&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;btn&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;btn.onclick=function() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;绑定事件&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;func&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;func&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function ($2) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $3&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;func&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;fun&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fun&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;function $1() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $3&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fun&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;佛祖&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fz&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;/*&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                   _ooOoo_&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  o8888888o&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  88\&quot; . \&quot;88&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  (| -_- |)&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                  O\\  =  /O&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;               ____/`---'\\____&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;             .'  \\|     |//  `.&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            /  \\|||  :  |||//  \\&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           /  _||||| -:- |||||-  \\&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           |   | \\\\\\  -  /// |   |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           | \\_|  ''\\---/''  |   |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;           \\  .-\\__  `-`  ___/-. /&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;         ___`. .'  /--.--\\ `. . __&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;      .\&quot;\&quot; '&lt;  `.___\\_&lt;|&gt;_/___.'  &gt;'\&quot;\&quot;.&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;     \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;======`-.____`-.___\\_____/___.-`____.-'======&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;                   `=---='&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;            佛祖保佑       永无BUG&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//     佛曰:  &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          写字楼里写字间，写字间里程序员；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          程序人员写程序，又拿程序换酒钱。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          酒醒只在网上坐，酒醉还来网下眠；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          酒醉酒醒日复日，网上网下年复年。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          但愿老死电脑间，不愿鞠躬老板前；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          奔驰宝马贵者趣，公交自行程序员。&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          别人笑我忒疯癫，我笑自己命太贱；&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;//          不见满街漂亮妹，哪个归得程序员？&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;*/&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;佛祖&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br><span class="line-number">688</span><br><span class="line-number">689</span><br><span class="line-number">690</span><br><span class="line-number">691</span><br><span class="line-number">692</span><br><span class="line-number">693</span><br><span class="line-number">694</span><br><span class="line-number">695</span><br><span class="line-number">696</span><br><span class="line-number">697</span><br><span class="line-number">698</span><br><span class="line-number">699</span><br><span class="line-number">700</span><br><span class="line-number">701</span><br><span class="line-number">702</span><br><span class="line-number">703</span><br><span class="line-number">704</span><br><span class="line-number">705</span><br><span class="line-number">706</span><br><span class="line-number">707</span><br><span class="line-number">708</span><br><span class="line-number">709</span><br><span class="line-number">710</span><br><span class="line-number">711</span><br><span class="line-number">712</span><br><span class="line-number">713</span><br><span class="line-number">714</span><br><span class="line-number">715</span><br><span class="line-number">716</span><br><span class="line-number">717</span><br><span class="line-number">718</span><br><span class="line-number">719</span><br><span class="line-number">720</span><br><span class="line-number">721</span><br><span class="line-number">722</span><br><span class="line-number">723</span><br><span class="line-number">724</span><br><span class="line-number">725</span><br><span class="line-number">726</span><br><span class="line-number">727</span><br><span class="line-number">728</span><br><span class="line-number">729</span><br><span class="line-number">730</span><br><span class="line-number">731</span><br><span class="line-number">732</span><br><span class="line-number">733</span><br><span class="line-number">734</span><br><span class="line-number">735</span><br><span class="line-number">736</span><br><span class="line-number">737</span><br><span class="line-number">738</span><br><span class="line-number">739</span><br><span class="line-number">740</span><br><span class="line-number">741</span><br><span class="line-number">742</span><br><span class="line-number">743</span><br><span class="line-number">744</span><br><span class="line-number">745</span><br><span class="line-number">746</span><br><span class="line-number">747</span><br><span class="line-number">748</span><br><span class="line-number">749</span><br><span class="line-number">750</span><br><span class="line-number">751</span><br><span class="line-number">752</span><br><span class="line-number">753</span><br><span class="line-number">754</span><br><span class="line-number">755</span><br><span class="line-number">756</span><br><span class="line-number">757</span><br><span class="line-number">758</span><br><span class="line-number">759</span><br><span class="line-number">760</span><br><span class="line-number">761</span><br><span class="line-number">762</span><br><span class="line-number">763</span><br><span class="line-number">764</span><br><span class="line-number">765</span><br><span class="line-number">766</span><br><span class="line-number">767</span><br><span class="line-number">768</span><br><span class="line-number">769</span><br><span class="line-number">770</span><br><span class="line-number">771</span><br><span class="line-number">772</span><br><span class="line-number">773</span><br><span class="line-number">774</span><br><span class="line-number">775</span><br><span class="line-number">776</span><br><span class="line-number">777</span><br><span class="line-number">778</span><br><span class="line-number">779</span><br><span class="line-number">780</span><br><span class="line-number">781</span><br><span class="line-number">782</span><br><span class="line-number">783</span><br><span class="line-number">784</span><br><span class="line-number">785</span><br><span class="line-number">786</span><br><span class="line-number">787</span><br><span class="line-number">788</span><br><span class="line-number">789</span><br><span class="line-number">790</span><br><span class="line-number">791</span><br><span class="line-number">792</span><br><span class="line-number">793</span><br><span class="line-number">794</span><br><span class="line-number">795</span><br><span class="line-number">796</span><br><span class="line-number">797</span><br><span class="line-number">798</span><br><span class="line-number">799</span><br><span class="line-number">800</span><br><span class="line-number">801</span><br><span class="line-number">802</span><br><span class="line-number">803</span><br><span class="line-number">804</span><br><span class="line-number">805</span><br><span class="line-number">806</span><br><span class="line-number">807</span><br><span class="line-number">808</span><br><span class="line-number">809</span><br><span class="line-number">810</span><br><span class="line-number">811</span><br><span class="line-number">812</span><br><span class="line-number">813</span><br><span class="line-number">814</span><br><span class="line-number">815</span><br><span class="line-number">816</span><br><span class="line-number">817</span><br><span class="line-number">818</span><br><span class="line-number">819</span><br><span class="line-number">820</span><br><span class="line-number">821</span><br><span class="line-number">822</span><br><span class="line-number">823</span><br><span class="line-number">824</span><br><span class="line-number">825</span><br><span class="line-number">826</span><br><span class="line-number">827</span><br><span class="line-number">828</span><br><span class="line-number">829</span><br><span class="line-number">830</span><br><span class="line-number">831</span><br><span class="line-number">832</span><br><span class="line-number">833</span><br><span class="line-number">834</span><br><span class="line-number">835</span><br><span class="line-number">836</span><br><span class="line-number">837</span><br><span class="line-number">838</span><br><span class="line-number">839</span><br><span class="line-number">840</span><br><span class="line-number">841</span><br><span class="line-number">842</span><br><span class="line-number">843</span><br><span class="line-number">844</span><br><span class="line-number">845</span><br><span class="line-number">846</span><br><span class="line-number">847</span><br><span class="line-number">848</span><br><span class="line-number">849</span><br><span class="line-number">850</span><br><span class="line-number">851</span><br><span class="line-number">852</span><br><span class="line-number">853</span><br><span class="line-number">854</span><br><span class="line-number">855</span><br><span class="line-number">856</span><br><span class="line-number">857</span><br><span class="line-number">858</span><br><span class="line-number">859</span><br><span class="line-number">860</span><br><span class="line-number">861</span><br><span class="line-number">862</span><br><span class="line-number">863</span><br><span class="line-number">864</span><br><span class="line-number">865</span><br><span class="line-number">866</span><br><span class="line-number">867</span><br><span class="line-number">868</span><br><span class="line-number">869</span><br><span class="line-number">870</span><br><span class="line-number">871</span><br><span class="line-number">872</span><br><span class="line-number">873</span><br><span class="line-number">874</span><br><span class="line-number">875</span><br><span class="line-number">876</span><br><span class="line-number">877</span><br><span class="line-number">878</span><br><span class="line-number">879</span><br><span class="line-number">880</span><br><span class="line-number">881</span><br><span class="line-number">882</span><br><span class="line-number">883</span><br><span class="line-number">884</span><br><span class="line-number">885</span><br><span class="line-number">886</span><br><span class="line-number">887</span><br><span class="line-number">888</span><br><span class="line-number">889</span><br><span class="line-number">890</span><br><span class="line-number">891</span><br><span class="line-number">892</span><br><span class="line-number">893</span><br><span class="line-number">894</span><br><span class="line-number">895</span><br><span class="line-number">896</span><br><span class="line-number">897</span><br><span class="line-number">898</span><br><span class="line-number">899</span><br><span class="line-number">900</span><br><span class="line-number">901</span><br><span class="line-number">902</span><br><span class="line-number">903</span><br><span class="line-number">904</span><br><span class="line-number">905</span><br><span class="line-number">906</span><br><span class="line-number">907</span><br><span class="line-number">908</span><br><span class="line-number">909</span><br><span class="line-number">910</span><br><span class="line-number">911</span><br><span class="line-number">912</span><br><span class="line-number">913</span><br><span class="line-number">914</span><br><span class="line-number">915</span><br><span class="line-number">916</span><br><span class="line-number">917</span><br><span class="line-number">918</span><br><span class="line-number">919</span><br><span class="line-number">920</span><br><span class="line-number">921</span><br><span class="line-number">922</span><br><span class="line-number">923</span><br><span class="line-number">924</span><br><span class="line-number">925</span><br><span class="line-number">926</span><br><span class="line-number">927</span><br><span class="line-number">928</span><br><span class="line-number">929</span><br><span class="line-number">930</span><br><span class="line-number">931</span><br><span class="line-number">932</span><br><span class="line-number">933</span><br><span class="line-number">934</span><br><span class="line-number">935</span><br><span class="line-number">936</span><br><span class="line-number">937</span><br><span class="line-number">938</span><br><span class="line-number">939</span><br><span class="line-number">940</span><br><span class="line-number">941</span><br><span class="line-number">942</span><br><span class="line-number">943</span><br><span class="line-number">944</span><br><span class="line-number">945</span><br><span class="line-number">946</span><br><span class="line-number">947</span><br><span class="line-number">948</span><br><span class="line-number">949</span><br><span class="line-number">950</span><br><span class="line-number">951</span><br><span class="line-number">952</span><br><span class="line-number">953</span><br><span class="line-number">954</span><br><span class="line-number">955</span><br><span class="line-number">956</span><br><span class="line-number">957</span><br><span class="line-number">958</span><br><span class="line-number">959</span><br><span class="line-number">960</span><br><span class="line-number">961</span><br><span class="line-number">962</span><br><span class="line-number">963</span><br><span class="line-number">964</span><br><span class="line-number">965</span><br><span class="line-number">966</span><br><span class="line-number">967</span><br><span class="line-number">968</span><br><span class="line-number">969</span><br><span class="line-number">970</span><br><span class="line-number">971</span><br><span class="line-number">972</span><br><span class="line-number">973</span><br><span class="line-number">974</span><br><span class="line-number">975</span><br><span class="line-number">976</span><br><span class="line-number">977</span><br><span class="line-number">978</span><br><span class="line-number">979</span><br><span class="line-number">980</span><br><span class="line-number">981</span><br><span class="line-number">982</span><br><span class="line-number">983</span><br><span class="line-number">984</span><br><span class="line-number">985</span><br><span class="line-number">986</span><br><span class="line-number">987</span><br><span class="line-number">988</span><br><span class="line-number">989</span><br><span class="line-number">990</span><br><span class="line-number">991</span><br><span class="line-number">992</span><br><span class="line-number">993</span><br><span class="line-number">994</span><br><span class="line-number">995</span><br><span class="line-number">996</span><br><span class="line-number">997</span><br><span class="line-number">998</span><br><span class="line-number">999</span><br><span class="line-number">1000</span><br><span class="line-number">1001</span><br><span class="line-number">1002</span><br><span class="line-number">1003</span><br><span class="line-number">1004</span><br><span class="line-number">1005</span><br><span class="line-number">1006</span><br><span class="line-number">1007</span><br><span class="line-number">1008</span><br><span class="line-number">1009</span><br><span class="line-number">1010</span><br><span class="line-number">1011</span><br><span class="line-number">1012</span><br><span class="line-number">1013</span><br><span class="line-number">1014</span><br><span class="line-number">1015</span><br><span class="line-number">1016</span><br><span class="line-number">1017</span><br><span class="line-number">1018</span><br><span class="line-number">1019</span><br><span class="line-number">1020</span><br><span class="line-number">1021</span><br><span class="line-number">1022</span><br><span class="line-number">1023</span><br><span class="line-number">1024</span><br><span class="line-number">1025</span><br><span class="line-number">1026</span><br><span class="line-number">1027</span><br><span class="line-number">1028</span><br><span class="line-number">1029</span><br><span class="line-number">1030</span><br><span class="line-number">1031</span><br><span class="line-number">1032</span><br><span class="line-number">1033</span><br><span class="line-number">1034</span><br><span class="line-number">1035</span><br><span class="line-number">1036</span><br><span class="line-number">1037</span><br><span class="line-number">1038</span><br><span class="line-number">1039</span><br><span class="line-number">1040</span><br><span class="line-number">1041</span><br><span class="line-number">1042</span><br><span class="line-number">1043</span><br><span class="line-number">1044</span><br><span class="line-number">1045</span><br><span class="line-number">1046</span><br><span class="line-number">1047</span><br><span class="line-number">1048</span><br><span class="line-number">1049</span><br><span class="line-number">1050</span><br><span class="line-number">1051</span><br><span class="line-number">1052</span><br><span class="line-number">1053</span><br><span class="line-number">1054</span><br><span class="line-number">1055</span><br><span class="line-number">1056</span><br><span class="line-number">1057</span><br><span class="line-number">1058</span><br><span class="line-number">1059</span><br><span class="line-number">1060</span><br><span class="line-number">1061</span><br><span class="line-number">1062</span><br><span class="line-number">1063</span><br><span class="line-number">1064</span><br><span class="line-number">1065</span><br><span class="line-number">1066</span><br><span class="line-number">1067</span><br><span class="line-number">1068</span><br><span class="line-number">1069</span><br><span class="line-number">1070</span><br><span class="line-number">1071</span><br><span class="line-number">1072</span><br><span class="line-number">1073</span><br><span class="line-number">1074</span><br><span class="line-number">1075</span><br><span class="line-number">1076</span><br><span class="line-number">1077</span><br><span class="line-number">1078</span><br><span class="line-number">1079</span><br><span class="line-number">1080</span><br><span class="line-number">1081</span><br><span class="line-number">1082</span><br><span class="line-number">1083</span><br><span class="line-number">1084</span><br><span class="line-number">1085</span><br><span class="line-number">1086</span><br><span class="line-number">1087</span><br><span class="line-number">1088</span><br><span class="line-number">1089</span><br><span class="line-number">1090</span><br><span class="line-number">1091</span><br><span class="line-number">1092</span><br><span class="line-number">1093</span><br><span class="line-number">1094</span><br><span class="line-number">1095</span><br><span class="line-number">1096</span><br><span class="line-number">1097</span><br><span class="line-number">1098</span><br><span class="line-number">1099</span><br><span class="line-number">1100</span><br><span class="line-number">1101</span><br><span class="line-number">1102</span><br><span class="line-number">1103</span><br><span class="line-number">1104</span><br><span class="line-number">1105</span><br><span class="line-number">1106</span><br><span class="line-number">1107</span><br><span class="line-number">1108</span><br><span class="line-number">1109</span><br><span class="line-number">1110</span><br></div></div><h2 id="vscode片段之jsx"><a href="#vscode片段之jsx" class="header-anchor">#</a> vscode片段之jsx</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token string">&quot;zrcc&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;zrcc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import React, { Component } from 'react';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { connect } from 'react-redux';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;class index extends Component {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	render() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		return (&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;				&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const mapStateToProps = (state) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const mapDispatchToProps = (dispatch) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default connect(&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	mapStateToProps,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	mapDispatchToProps&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;)(index);&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;App&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;App&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import React, { Component } from 'react';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { GlobalStyle } from './style';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { GlobalStyledIconfont } from './statics/iconfont/iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { Provider } from 'react-redux';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { BrowserRouter,Route } from 'react-router-dom';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import Header from './common/header';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import Home from './pages/home';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import store from './store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;class App extends Component {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;render() {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return (&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&lt;Provider store={store}&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;BrowserRouter&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;GlobalStyle /&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;GlobalStyledIconfont/&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;Header /&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			&lt;Route path='/' exact component={Home}&gt;&lt;/Route&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		&lt;/BrowserRouter&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	&lt;/Provider&gt;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default App;&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;iconfonts&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;iconfonts&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { createGlobalStyle } from 'styled-components';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const GlobalStyledIconfont = createGlobalStyle`&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;@font-face {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-family: 'iconfont';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	src: url('./iconfont.eot?t=1528610804703'); /* IE9*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	src: url('./iconfont.eot?t=1528610804703#iefix') format('embedded-opentype'), /* IE6-IE8 */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAawAAsAAAAACXQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7ko/Y21hcAAAAYAAAAB+AAABwJ8cCDpnbHlmAAACAAAAApEAAAL0URYALWhlYWQAAASUAAAALwAAADYRpQXlaGhlYQAABMQAAAAcAAAAJAfeA4dobXR4AAAE4AAAABMAAAAYF+kAAGxvY2EAAAT0AAAADgAAAA4C3AHkbWF4cAAABQQAAAAfAAAAIAEVAF1uYW1lAAAFJAAAAUUAAAJtPlT+fXBvc3QAAAZsAAAAQgAAAFNcaMVWeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/sM4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLwIZG7438AQw9zA0AAUZgTJAQAq0wzDeJzFkTEKwzAMRZ9itxSTMblF5xygc5ZcpFMHn1jkFumXHQo9Qb54RvrIyFjADUjiKTLYByP0lmvNT5TmZ16qCw8GRfXZl307DnnVp1/eZeorjIrIk6Zk3cHuXCa7bvS/xnauZxX/X0/0RJ86sROfO9HjSyd2tG8dhi8XIxfqAAB4nDWSz2sTQRTH581kdtM02W33Z7L5nW12G1s3cbObiNpsChX8hRUEsQ0oCnqoKBYLvShEJBDFg2CPglAEr73UUy0ttP9ATz14sCiCx148tVs3aTszvOF934PPvPcGUYSO9sgaiSMRjaJzaArdQgiYMShwOA1507HwGMh5KqsSR0zdzLN6wSIToBYYSbFrjqEyLMMDBxmo5u2aaWETXKeBL4KtpAESSe22UEwJ5ANE4mam41/DyyBn9RTfOOtfHfckOyeGF6OCkBCE92GG0jDGIZ6Dp6oyQAcijP+F8pq8li3hLEQTpnZjJpZLCg+6zrN0UR0AaLdBTOa4r96wNhycl5oiCgl2KBaOazF9RILF34NxMZo2fqFg4aDWNgk2GkL5oEo2AzIHrMuqbgPqjlHuu5Ki1i3oKTI+mLUqZLXbbq8f0qmDvm0eS/j7rLUw2V0lzXa7SQ/XW8tvTu7maaDP2yQbZBLJPR6FBrgWmFwPrNq1OvQaGIj1wA1EC8g3f98oka2lpa1QaGvJm7eAj2jSwXJopdNZIaRnWeCt595xwsdtcsbw9yOSBv86K6HTrF6toYB9FLARYhGPRlAZoXx/elAViWHqDEtorWqnQXd1Ri8YruOBoxfY4CGypFTt2gTgjcdX/N3Lj4B/OPWEMpiyc7Bbabw4D/lJqz53r3mhfH80ndOKlZ0dgvwSeEOGLvqbNLWwXa5VSne46PXiXZpKyCm7mDnp/2syQ14hDhkIeQAeXALdNBiZB1AZHjPBDESjHugNrGSDP8X6n4EkXHgL2MX+n59R+Uc4ZYdxAkchSZ3BnDkqdIuKHJuHjfEW4GkAaIX8+Dsp8gmz6VQYoqoEfyMtIT7IRG6q0wH3P3/XmCcAAAB4nGNgZGBgAOKzF3Kd4/ltvjJwszCAwHWnB18Q9P8GFgbmBiCXg4EJJAoAVtsL6AB4nGNgZGBgbvjfwBDDwgACQJKRARWwAQBHDAJveJxjYWBgYH7JwMDCgIoBEp8BAQAAAAAAAHYArgDsATYBegAAeJxjYGRgYGBjCGRgZQABJiDmAkIGhv9gPgMAEUgBcwB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICNkYmRmZGFkZWRjZGdgbGCpbggM48rLTEvPSUxKzMvnckxkSczOT9PNzkjNTk7M4+BAQDkRwvZAAA=') format('woff'),&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('./iconfont.ttf?t=1528610804703') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	url('./iconfont.svg?t=1528610804703#iconfont') format('svg'); /* iOS 4.1- */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;.iconfont {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-family:'iconfont' !important;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-size:16px;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	font-style:normal;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	-webkit-font-smoothing: antialiased;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	-moz-osx-font-smoothing: grayscale;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;`;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;globals&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;globals&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import {createGlobalStyle} from 'styled-components';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const GlobalStyle = createGlobalStyle`&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	html, body, div, span, applet, object, iframe,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	h1, h2, h3, h4, h5, h6, p, blockquote, pre,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	a, abbr, acronym, address, big, cite, code,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	del, dfn, em, img, ins, kbd, q, s, samp,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	small, strike, strong, sub, sup, tt, var,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	b, u, i, center,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	dl, dt, dd, ol, ul, li,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	fieldset, form, label, legend,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	table, caption, tbody, tfoot, thead, tr, th, td,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	article, aside, canvas, details, embed, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	figure, figcaption, footer, header, hgroup, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	menu, nav, output, ruby, section, summary,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	time, mark, audio, video {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		margin: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		padding: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		font-size: 100%;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		font: inherit;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		vertical-align: baseline;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	/* HTML5 display-role reset for older browsers */&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	article, aside, details, figcaption, figure, &quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	footer, header, hgroup, menu, nav, section {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		display: block;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	body {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		line-height: 1;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	ol, ul {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		list-style: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	blockquote, q {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		quotes: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	blockquote:before, blockquote:after,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	q:before, q:after {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		content: '';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		content: none;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	table {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border-collapse: collapse;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		border-spacing: 0;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;`;&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;zreducer&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;zreducer&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { fromJS } from 'immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const defaultState = fromJS({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;topicList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;articleList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;recommendList: [],&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;articlePage: 1,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;showScroll: false&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;});&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default (state = defaultState, action) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;switch (action.type) {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.CHANGE_HOME_DATA:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return changeHomeData(state, action);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.TOGGLE_SCROLL_TOP:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return state.set('showScroll', action.show);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	case constants.ADD_ARTICLE_LIST:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			return addArticleList(state, action);&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	default:&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return state;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;comb&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;comb&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import { combineReducers } from 'redux-immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { reducer as headerReducer } from '../common/header/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;// import { reducer as detailReducer } from '../pages/detail/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { reducer as homeReducer } from '../pages/home/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;// import { reducer as loginReducer } from '../pages/login/store';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const reducer=combineReducers({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	header:headerReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	// detail:detailReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	// login:loginReducer,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	home:homeReducer&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default reducer&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;cstore&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;cstore&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import {createStore,applyMiddleware,compose} from 'redux'&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import thunk from 'redux-thunk'&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import reducer from './reducer';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const composeEnchancers=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;const store=createStore(reducer,composeEnchancers(applyMiddleware(thunk)))&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export default store&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;sstore&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;sstore&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import reducer from './reducer';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as actionCreators from './actionCreators';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export { reducer, actionCreators, constants };&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;actionc&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;actionc&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;import axios from 'axios';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import * as constants from './constants';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;import { fromJS } from 'immutable';&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const getHomeInfo = () =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	return (dispatch) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		axios.get('/api/home.json').then((res) =&gt; {&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			const result = res.data.data;&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;			dispatch(changHomeData(result));&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;		});&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;export const toggleTopShow = (show) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	type: constants.TOGGLE_SCROLL_TOP,&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;	show&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;constants&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;constants&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;export const CHANGE_HOME_DATA = 'home/CHANGE_HOME_DATA'&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mstp&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;rs&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;const mapStateToProps = (state) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;mdtp&quot;</span> <span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string">&quot;prefix&quot;</span> <span class="token operator">:</span><span class="token string">&quot;rd&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;body&quot;</span> <span class="token operator">:</span><span class="token punctuation">[</span>
			<span class="token string">&quot;const mapDispatchToProps = (dispatch) =&gt; ({&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;    $1&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;})&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// &quot;rcc&quot; :{</span>
	<span class="token comment">// 	&quot;prefix&quot; :&quot;rcc&quot;,</span>
	<span class="token comment">// 	&quot;body&quot; :[</span>
	<span class="token comment">// 		&quot;import React, { Component } from 'react'&quot;,</span>
	<span class="token comment">// 		&quot;class ${1:componentName} extends Component {&quot;,</span>
	<span class="token comment">// 		&quot;    render() {&quot;,</span>
	<span class="token comment">// 		&quot;        return (&quot;,</span>
	<span class="token comment">// 		&quot;            &lt;div&gt;&quot;,</span>
	<span class="token comment">// 		&quot;                 $3&quot;,</span>
	<span class="token comment">// 		&quot;            &lt;/div&gt;&quot;,</span>
	<span class="token comment">// 		&quot;        )&quot;,</span>
	<span class="token comment">// 			&quot;}&quot;,</span>
	<span class="token comment">// 		&quot;}&quot;,</span>
	<span class="token comment">// 		&quot;export default ${2:componentName}&quot;</span>
	<span class="token comment">// 	]</span>
	<span class="token comment">// },</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br></div></div><h2 id="vuecli3配置"><a href="#vuecli3配置" class="header-anchor">#</a> vuecli3配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  <span class="token constant">NODE_ENV</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> productionGzipExtensions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isProduction <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> dir<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  productionSourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// indexPath:index.html,</span>
  <span class="token comment">// assetsDir:&quot;&quot;,</span>
  <span class="token comment">// outputDir: '../dist',</span>
  <span class="token comment">// productionSourceMap: true,</span>
  <span class="token comment">// lintOnSave: false,</span>
  <span class="token comment">// baseUrl: './',//已废弃</span>
  publicPath<span class="token operator">:</span>
  <span class="token comment">//  NODE_ENV == 'production' ? '//grid.pcitech.com/wxfwpt/html/dist/' : '/', //公司外网路径</span>
  <span class="token comment">// NODE_ENV == 'production' ? '//172.25.20.50/wxfwpt/html/dist/' : '/', //公司内网路径</span>
  <span class="token comment">//  NODE_ENV == 'production' ? 'http://hpzzsb.hp.gov.cn/wxfwpt/html/dist/' : '/', //生产环境</span>
  <span class="token comment">// NODE_ENV == 'production' ? '//grid.pcitech.com/zzsb/' : '/', //nginx路径</span>
  <span class="token constant">NODE_ENV</span> <span class="token operator">==</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'/zzsb/'</span> <span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">//腾讯云路径</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// proxy: 'http://sts-c.com.cn/',//代理公司外网</span>
    <span class="token comment">// proxy: 'http://sts-c.com.cn/wxtx/',//代理公司内网</span>
    proxy<span class="token operator">:</span> <span class="token string">'http://172.25.20.50'</span><span class="token punctuation">,</span> <span class="token comment">//代理生产</span>
    <span class="token comment">// proxy: 'http://localhost:9080',//代理本地</span>
    <span class="token comment">// proxy: { //代理公司内网，外网出问题切内网，不管打包模式为内网或者外网模式，开发模式只需要修改proxy，也可以说使用这个proxy即可</span>
    <span class="token comment">//   '/wxtx': {</span>
    <span class="token comment">//     ws: false,</span>
    <span class="token comment">//     target: 'http://172.25.20.50',</span>
    <span class="token comment">//     pathRewrite: { '^/wxtx': '' }</span>
    <span class="token comment">//   },</span>
    <span class="token comment">//   '/': {</span>
    <span class="token comment">//     ws: false,</span>
    <span class="token comment">//     target: 'http://172.25.20.50',</span>
    <span class="token comment">//   }</span>
    <span class="token comment">// },</span>
    <span class="token comment">// overlay: {</span>
    <span class="token comment">//  warnings: true,</span>
    <span class="token comment">//  errors: true</span>
    <span class="token comment">// },</span>
    <span class="token comment">// hotReload:true,</span>
    <span class="token comment">// productionSourceMap:false,</span>
    <span class="token comment">// runtimeCompiler:false,</span>
    <span class="token comment">// host: '0.0.0.0',</span>
    <span class="token comment">// port: 9000,</span>
    <span class="token comment">// https: false, // https:{type:Boolean}</span>
    <span class="token comment">// open: true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">externals</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      jquery<span class="token operator">:</span> <span class="token string">&quot;jQuery&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 压缩图片</span>
    config<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'image-webpack-loader'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">'image-webpack-loader'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span> bypassOnDebug<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// config.entry.app = [&quot;babel-polyfill&quot;, resolve('src/main.js')],</span>
    config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>alias<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'@'</span><span class="token punctuation">,</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isProduction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_config_report<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'prefetch'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// .set('loadScript', 'loadScript').set('./@assets', resolve('src/assets')).set('@components', resolve('src/components')).set('@font', resolve('src/font'));</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// devtool: '#eval-source-map',</span>
    <span class="token comment">// 开起gzip</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isProduction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        algorithm<span class="token operator">:</span> <span class="token string">'gzip'</span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\.('</span> <span class="token operator">+</span> productionGzipExtensions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">)</span> <span class="token operator">+</span> '<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">// 只有大小大于该值的资源会被处理 10240</span>
        minRatio<span class="token operator">:</span> <span class="token number">0.8</span> <span class="token comment">// 只有压缩率小于这个值的资源才会被处理</span>
          <span class="token comment">// deleteOriginalAssets: false // 删除原文件</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// 最大化压缩</span>
    config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        uglifyOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">//生产环境自动删除console</span>
          compress<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// warnings: false, // 若打包错误，则注释这行</span>
            drop_debugger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            drop_console<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            pure_funcs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'console.log'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        sourceMap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">'#eval-source-map'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// output: {</span>
    <span class="token comment">//   library: 'someLibName',</span>
    <span class="token comment">//   libraryTarget: 'umd',</span>
    <span class="token comment">//   filename: 'someLibName.js',</span>
    <span class="token comment">//   auxiliaryComment: 'Test Comment',</span>
    <span class="token comment">//   path: path.resolve(__dirname, 'dist/assets'),</span>
    <span class="token comment">//   filename: '[name].[hash].bundle.js',</span>
    <span class="token comment">//   filename: '[chunkhash].bundle.js',</span>
    <span class="token comment">//   filename: '[contenthash].bundle.css'</span>
    <span class="token comment">// },</span>
    <span class="token comment">// devServer: {</span>
    <span class="token comment">// color:true,</span>
    <span class="token comment">// progress:true,</span>
    <span class="token comment">// clientLogLevel: 'warning',</span>
    <span class="token comment">// quiet: true,</span>
    <span class="token comment">// noInfo: true,</span>
    <span class="token comment">// compress: true,</span>
    <span class="token comment">// lazy: true,</span>
    <span class="token comment">// host: 'localhost',</span>
    <span class="token comment">// port: 8080,</span>
    <span class="token comment">// public:'myapp.test:80',</span>
    <span class="token comment">// publicPath:&quot;/&quot;,</span>
    <span class="token comment">// index: 'index.html',</span>
    <span class="token comment">// contentBase: [path.join(__dirname, &quot;public&quot;), path.join(__dirname, &quot;assets&quot;)],</span>
    <span class="token comment">// contentBase: path.join(__dirname, &quot;public&quot;),</span>
    <span class="token comment">// open: true,</span>
    <span class="token comment">// open: 'Google Chrome',//'Chrome' is 'Google Chrome' on macOS, 'google-chrome' on Linux and 'chrome' on Windows.</span>
    <span class="token comment">// openPage: '/different/page',</span>
    <span class="token comment">// allowedHosts: ['host.com', 'subdomain.host.com', 'subdomain2.host.com', 'host2.com'],</span>
    <span class="token comment">// after: function(app, server) {</span>
    <span class="token comment">//    do fancy stuff</span>
    <span class="token comment">// },</span>
    <span class="token comment">// before: function(app, server) {</span>
    <span class="token comment">//   app.get('/some/path', function(req, res) {</span>
    <span class="token comment">//     res.json({ custom: 'response' });</span>
    <span class="token comment">//   });</span>
    <span class="token comment">// },</span>
    <span class="token comment">// overlay: {</span>
    <span class="token comment">//   warnings: true,</span>
    <span class="token comment">//   errors: true</span>
    <span class="token comment">// },</span>
    <span class="token comment">// headers: {</span>
    <span class="token comment">//   'X-Custom-Foo': 'bar'</span>
    <span class="token comment">// },</span>
    <span class="token comment">// historyApiFallback: true,</span>
    <span class="token comment">// historyApiFallback: {</span>
    <span class="token comment">//   rewrites: [{ from: /^\/subpage/, to: '/views/subpage.html' }, {</span>
    <span class="token comment">//     from: /^\/helloWorld\/.*$/,</span>
    <span class="token comment">//     to: function() {</span>
    <span class="token comment">//       return '/views/hello_world.html;</span>
    <span class="token comment">//     }</span>
    <span class="token comment">//   }],</span>
    <span class="token comment">//   verbose: true, //激活日志记录</span>
    <span class="token comment">//   disableDotRule: true, // 禁止 url 带小数点 .</span>
    <span class="token comment">// },</span>
    <span class="token comment">// serveIndex: true,//没有index.html文件的目录上生成目录列表。</span>
    <span class="token comment">// watchOptions: {</span>
    <span class="token comment">//   poll: true</span>
    <span class="token comment">// },</span>
    <span class="token comment">// watchContentBase: true,//默认情况下禁用它。启用后，文件更改将触发整页重新加载。</span>
    <span class="token comment">// hot: true,</span>
    <span class="token comment">// hotOnly: true,</span>
    <span class="token comment">// liveReload: false,启用后，文件更改将触发整页重新加载</span>
    <span class="token comment">// useLocalIp: true,//启用ip访问</span>
    <span class="token comment">// http2: true,</span>
    <span class="token comment">// https: {</span>
    <span class="token comment">//   key: fs.readFileSync('/path/to/server.key'),</span>
    <span class="token comment">//   cert: fs.readFileSync('/path/to/server.crt'),</span>
    <span class="token comment">//   ca: fs.readFileSync('/path/to/ca.pem'),</span>
    <span class="token comment">// },</span>
    <span class="token comment">// https: true,</span>
    <span class="token comment">// proxy: {</span>
    <span class="token comment">//   '/api1': {</span>
    <span class="token comment">//     target: 'http://localhost:3000',</span>
    <span class="token comment">//     pathRewrite: {'^/api' : ''}</span>
    <span class="token comment">//   },</span>
    <span class="token comment">//   '/api2': {</span>
    <span class="token comment">//     target: 'http://localhost:3000',</span>
    <span class="token comment">//     secure: false,</span>
    <span class="token comment">//     changeOrigin: true,</span>
    <span class="token comment">//     bypass: function(req, res, proxyOptions) {</span>
    <span class="token comment">//       if (req.headers.accept.indexOf('html') !== -1) {</span>
    <span class="token comment">//         console.log('Skipping proxy for browser request.');</span>
    <span class="token comment">//         return '/index.html';</span>
    <span class="token comment">//       }</span>
    <span class="token comment">//     }</span>
    <span class="token comment">//   },</span>
    <span class="token comment">// },</span>
    <span class="token comment">// proxy: [{</span>
    <span class="token comment">//   context: ['/auth', '/api'],</span>
    <span class="token comment">//   context: () =&gt; true,</span>
    <span class="token comment">//   target: 'http://localhost:3000',</span>
    <span class="token comment">// }]</span>
    <span class="token comment">// },</span>
    <span class="token comment">// plugins: [</span>
    <span class="token comment">//   new webpack.ProvidePlugin({</span>
    <span class="token comment">//       jQuery: 'jquery',</span>
    <span class="token comment">//       $: 'jquery'</span>
    <span class="token comment">//   }),</span>
    <span class="token comment">//   new webpack.DefinePlugin({</span>
    <span class="token comment">//   'process.env': {</span>
    <span class="token comment">//     NODE_ENV: '&quot;production&quot;'</span>
    <span class="token comment">//   },</span>
    <span class="token comment">//   }),</span>
    <span class="token comment">//   new webpack.optimize.UglifyJsPlugin()</span>
    <span class="token comment">//     ],</span>
    <span class="token comment">// module: {</span>
    <span class="token comment">//   rules: [</span>
    <span class="token comment">//     {</span>
    <span class="token comment">//       test: '\.vue,</span>
    <span class="token comment">//       loader: 'vue-loader',</span>
    <span class="token comment">//       options: {</span>
    <span class="token comment">// cssModules: {</span>
    <span class="token comment">//   localIdentName: '[path][name]---[local]---[hash:base64:5]',</span>
    <span class="token comment">//   camelCase: true</span>
    <span class="token comment">// },</span>
    <span class="token comment">// extractCSS:true,</span>
    <span class="token comment">// cssSourceMap:true,</span>
    <span class="token comment">// hotReload:true,</span>
    <span class="token comment">// preserveWhitespace:true,//如果设置为 false，模版中 HTML 标签之间的空格将会被忽略。</span>
    <span class="token comment">// loaders: {</span>
    <span class="token comment">//   scss: 'vue-style-loader!css-loader!sass-loader', // &lt;style lang=&quot;scss&quot;&gt;</span>
    <span class="token comment">//   sass: 'vue-style-loader!css-loader!sass-loader?indentedSyntax', // &lt;style lang=&quot;sass&quot;&gt;</span>
    <span class="token comment">//   js: 'coffee-loader //会导致所有无 `lang` 特性的 `&lt;script&gt;` 标签加载 `coffee-loader,</span>
    <span class="token comment">//   js: [</span>
    <span class="token comment">//     { loader: 'cache-loader' },</span>
    <span class="token comment">//     { loader: 'babel-loader', options: { presets: ['env'] } }</span>
    <span class="token comment">//   ]</span>
    <span class="token comment">// }</span>
    <span class="token comment">// 默认lang</span>
    <span class="token comment">// &lt;template&gt;: html</span>
    <span class="token comment">// &lt;script&gt;: js</span>
    <span class="token comment">// &lt;style&gt;: css</span>
    <span class="token comment">// `preLoaders` 会在默认 loaders 之前加载。</span>
    <span class="token comment">// 你可以用来预处理语言块——一个例子是用来处理构建时的 i18n</span>
    <span class="token comment">// preLoaders: {</span>
    <span class="token comment">//   js: '/path/to/custom/loader'</span>
    <span class="token comment">// },</span>
    <span class="token comment">// `postLoaders` 会在默认 loaders 之后加载。 - 对于 `html` , 默认 loader 返回会编译为 JavaScript 渲染函数</span>
    <span class="token comment">// postLoaders: {</span>
    <span class="token comment">//   html: 'babel-loader'</span>
    <span class="token comment">// },</span>
    <span class="token comment">// `excludedPreLoaders` 应是正则表达式</span>
    <span class="token comment">//  excludedPreLoaders: /(eslint-loader)/</span>
    <span class="token comment">// hotReload: false,</span>
    <span class="token comment">// postcss: [require('postcss-cssnext')()],</span>
    <span class="token comment">// postcss: {</span>
    <span class="token comment">//   useConfigFile: false,//禁止自动加载配置文件,提高内联优先级</span>
    <span class="token comment">// config: {</span>
    <span class="token comment">//   path: path.resolve('./src')</span>
    <span class="token comment">// }</span>
    <span class="token comment">//   plugins: [...], // 插件列表</span>
    <span class="token comment">//   options: {</span>
    <span class="token comment">//     parser: 'sugarss' // 使用 sugarss 解析器</span>
    <span class="token comment">//   }</span>
    <span class="token comment">// }</span>
    <span class="token comment">//     }</span>
    <span class="token comment">//   }</span>
    <span class="token comment">// ]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  transpileDependencies<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'vue-echarts'</span><span class="token punctuation">,</span>
    <span class="token string">'resize-detector'</span>
  <span class="token punctuation">]</span>
  <span class="token comment">// css: {</span>
  <span class="token comment">//   modules:true,</span>
  <span class="token comment">//   extract:true,</span>
  <span class="token comment">//   sourceMap:false,</span>
  <span class="token comment">//   loaderOptions:{</span>
  <span class="token comment">//     css: {</span>
  <span class="token comment">//       //这里的选项会传递给 css-loader</span>
  <span class="token comment">//       //localIdentName: '[name]-[hash]',</span>
  <span class="token comment">//       localIdentName: '[hash:base64]',</span>
  <span class="token comment">//       camelCase: 'only',</span>
  <span class="token comment">//       modules: true,</span>
  <span class="token comment">//       importLoaders: 1,</span>
  <span class="token comment">//     },</span>
  <span class="token comment">//     postcss: {</span>
  <span class="token comment">//       //这里的选项会传递给 postcss-loader</span>
  <span class="token comment">//     },</span>
  <span class="token comment">//     sass: {</span>
  <span class="token comment">//       data: `@import &quot;~@/variables.sass&quot;`</span>
  <span class="token comment">//     },</span>
  <span class="token comment">//     //默认情况下 `sass` 选项会同时对 `sass` 和 `scss` 语法同时生效</span>
  <span class="token comment">//     //因为 `scss` 语法在内部也是由 sass-loader 处理的</span>
  <span class="token comment">//     //但是在配置 `data` 选项的时候</span>
  <span class="token comment">//     // `scss` 语法会要求语句结尾必须有分号， `sass` 则要求必须没有分号</span>
  <span class="token comment">//     //在这种情况下，我们可以使用 `scss` 选项，对 `scss` 语法进行单独配置</span>
  <span class="token comment">//     scss: {</span>
  <span class="token comment">//       data: `@import &quot;~@/variables.scss&quot;;`</span>
  <span class="token comment">//     },</span>
  <span class="token comment">//     //给 less-loader 传递 Less.js 相关选项</span>
  <span class="token comment">//     less:{</span>
  <span class="token comment">//       globalVars: {</span>
  <span class="token comment">//         primary: '#fff'</span>
  <span class="token comment">//       },</span>
  <span class="token comment">//     }</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br></div></div><h2 id="webpack配置"><a href="#webpack配置" class="header-anchor">#</a> webpack配置</h2> <h3 id="webpack-common-js"><a href="#webpack-common-js" class="header-anchor">#</a> <i aria-hidden="true" class="fa fa-thumb-tack"></i> webpack.common.js</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// const CopyWebpackPlugin = require('copy-webpack-plugin');</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.[hash:8].js'</span><span class="token punctuation">,</span>
    <span class="token comment">// library: 'root',</span>
    <span class="token comment">// libraryTarget: 'umd'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    noParse<span class="token operator">:</span> <span class="token regex">/jquery/</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.vue$/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">'vue-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.jsx$/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//  {</span>
        <span class="token comment">//   loader: 'imports-loader?this=&gt;window'</span>
        <span class="token comment">// }</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(gif|jpg|jpeg|png|svg)$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">'src/images/'</span><span class="token punctuation">,</span>
          limit<span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          <span class="token comment">//   publicPath:'http://www.xccjh.cn'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(eot|ttf|eot|otf|fon|font|ttf|ttc|woff|woff2)$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'file-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// new CleanWebpackPlugin(['dist'], {</span>
    <span class="token comment">//   root: path.resolve(__dirname, '../')</span>
    <span class="token comment">// }),</span>
    <span class="token comment">// new CleanWebpackPlugin('./dist'),</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// new CopyWebpackPlugin([ // 拷贝插件</span>
    <span class="token comment">//   {from:'doc',to:'./'}</span>
    <span class="token comment">// ]),</span>
    <span class="token comment">// new webpack.BannerPlugin('make 2019 by jw')</span>
    <span class="token comment">// new webpack.ProvidePlugin({</span>
    <span class="token comment">//   $: 'jquery',</span>
    <span class="token comment">//   _join: ['lodash', 'join']</span>
    <span class="token comment">// }),</span>
    <span class="token comment">// new webpack.IgnorePlugin(/\.\/locale/, /moment/),</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 打印更新的模块路径</span>
    <span class="token comment">// new webpack.DllReferencePlugin({</span>
    <span class="token comment">//   manifest: path.resolve(__dirname, 'dist', 'manifest.json')</span>
    <span class="token comment">// }),</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  performance<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&quot;$&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 解析 第三方包 common</span>
    modules<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.css'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// mainFields:['style','main']</span>
    <span class="token comment">// mainFiles:[], // 入口文件的名字 index.js</span>
    <span class="token comment">// alias:{ // 别名 vue vue.runtime</span>
    <span class="token comment">//   bootstrap:'bootstrap/dist/css/bootstrap.css'</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>env <span class="token operator">&amp;&amp;</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><h3 id="webpack-dev-js"><a href="#webpack-dev-js" class="header-anchor">#</a> <i aria-hidden="true" class="fa fa-thumb-tack"></i> webpack.dev.js</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    <span class="token comment">// hot: true,</span>
    <span class="token comment">// hotOnly: true,</span>
    <span class="token comment">// host: '0.0.0.0',</span>
    host<span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    overlay<span class="token operator">:</span> <span class="token punctuation">{</span>
      errors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    progress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// before(app){ // 提供的方法 钩子</span>
    <span class="token comment">//   app.get('/user',(req,res)=&gt;{</span>
    <span class="token comment">//     res.json({name:'珠峰架构-before'})</span>
    <span class="token comment">//   })</span>
    <span class="token comment">// }</span>
    <span class="token comment">// proxy:{ // 重写的方式 把请求代理到express服务器上</span>
    <span class="token comment">//   '/api':{</span>
    <span class="token comment">//     target:'http://localhost:3000',</span>
    <span class="token comment">//     pathRewrite:{'/api':''},</span>
    <span class="token comment">//     secure: false,</span>
    <span class="token comment">//     changeOrigin: true,</span>
    <span class="token comment">// 		 headers: {</span>
    <span class="token comment">// 			host: 'www.dell-lee.com',</span>
    <span class="token comment">// 		 }</span>
    <span class="token comment">//   }// 配置了一个代理</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          importLoaders<span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.styl/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'stylus-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          insertAt<span class="token operator">:</span> <span class="token string">'top'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 监控的选项</span>
    poll<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 每秒 问我 1000次</span>
    aggregateTimeout<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 防抖 我一直输入代码</span>
    ignored<span class="token operator">:</span> <span class="token regex">/node_modules/</span> <span class="token comment">// 不需要进行监控哪个文件</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 热更新插件</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'../dist/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> devConfig<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h3 id="webpack-prod-js"><a href="#webpack-prod-js" class="header-anchor">#</a> <i aria-hidden="true" class="fa fa-thumb-tack"></i> webpack.prod.js</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;uglifyjs-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].[contenthash].js'</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">'[name].[contenthash].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            importLoaders<span class="token operator">:</span> <span class="token number">2</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.styl/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      sourceMap<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'runtime'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// splitChunks:{ // 分割代码块</span>
      <span class="token comment">//   cacheGroups:{ // 缓存组</span>
      <span class="token comment">//     common:{ // 公共的模块</span>
      <span class="token comment">//       chunks:'initial',</span>
      <span class="token comment">//       minSize:0,</span>
      <span class="token comment">//       minChunks:2,</span>
      <span class="token comment">//     },</span>
      <span class="token comment">//     vendor:{</span>
      <span class="token comment">//       priority:1,</span>
      <span class="token comment">//       test:/node_modules/, // 把你抽离出来</span>
      <span class="token comment">//       chunks: 'initial',</span>
      <span class="token comment">//       minSize: 0,</span>
      <span class="token comment">//       minChunks: 2</span>
      <span class="token comment">//     }</span>
      <span class="token comment">//   }</span>
      <span class="token comment">// }</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'../dist/index.html'</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">'[name].chunk.css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> prodConfig<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><h3 id="webpack-happypack-config-js"><a href="#webpack-happypack-config-js" class="header-anchor">#</a> <i aria-hidden="true" class="fa fa-thumb-tack"></i> webpack.happypack.config.js</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 模块 happypack 可以实现多线程来打包 进程</span>
<span class="token keyword">let</span> Happypack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    noParse<span class="token operator">:</span> <span class="token regex">/jquery/</span><span class="token punctuation">,</span> <span class="token comment">// 不去解析jquery中的依赖库</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">'Happypack/loader?id=js'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">'Happypack/loader?id=css'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Happypack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Happypack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
            <span class="token string">'@babel/preset-react'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      manifest<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'manifest.json'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex">/\.\/locale/</span><span class="token punctuation">,</span> <span class="token regex">/moment/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="webpack-config-react-js"><a href="#webpack-config-react-js" class="header-anchor">#</a> <i aria-hidden="true" class="fa fa-thumb-tack"></i> webpack.config.react.js</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    react<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'_dll_[name].js'</span><span class="token punctuation">,</span> <span class="token comment">// 产生的文件名</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    library<span class="token operator">:</span> <span class="token string">'_dll_[name]'</span><span class="token punctuation">,</span> <span class="token comment">// _dll_react</span>
    <span class="token comment">//libraryTarget:'var' // commonjs var this ....</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// name == library</span>
      name<span class="token operator">:</span> <span class="token string">'_dll_[name]'</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'manifest.json'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="git-alias配置"><a href="#git-alias配置" class="header-anchor">#</a> git-alias配置</h2> <p>我使用的git别名备份，vim ~/.gitconfig,粘贴一下改下你的email和name，<code>git config --list --global</code>查看是否配置成功，顺带一提：</p> <ul><li><code>git config --global alias.co commit</code> 增加别名</li> <li><code>git config --unset alias.co</code> 删除别名</li> <li><code>git config --global --list</code> 查看别名和用户名</li> <li><code>git config --global --edit</code> 打开编辑别名文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>user<span class="token punctuation">]</span>
user.email<span class="token operator">=</span>zoujiahe@pcitech.com
user.name<span class="token operator">=</span>zoujiahe
<span class="token punctuation">[</span>alias<span class="token punctuation">]</span>
st <span class="token operator">=</span> status
br <span class="token operator">=</span> branch
po <span class="token operator">=</span> log --abbrev-commit --pretty<span class="token operator">=</span>oneline
no <span class="token operator">=</span> log --name-only
ci <span class="token operator">=</span> commit -m
co <span class="token operator">=</span> checkout
sw <span class="token operator">=</span> switch
r <span class="token operator">=</span> restore
rs <span class="token operator">=</span> restore --staged
ca <span class="token operator">=</span> commit -am
a <span class="token operator">=</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
rh <span class="token operator">=</span> reset --hard
rd <span class="token operator">=</span> reset
dh <span class="token operator">=</span> <span class="token function">diff</span> <span class="token function">head</span>
d <span class="token operator">=</span> <span class="token function">diff</span>
<span class="token function">dc</span> <span class="token operator">=</span> <span class="token function">diff</span> --cached
cg <span class="token operator">=</span> commit --amend
rc <span class="token operator">=</span> reset --soft head~1
rb <span class="token operator">=</span> rebase
logp <span class="token operator">=</span> log --color --graph --pretty<span class="token operator">=</span>format:<span class="token string">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit
logt <span class="token operator">=</span> log --stat --since<span class="token operator">=</span><span class="token string">'1 Day Ago'</span> --graph --pretty<span class="token operator">=</span>oneline --abbrev-commit --date<span class="token operator">=</span>relative
lm <span class="token operator">=</span> log --no-merges --color --date<span class="token operator">=</span>format:<span class="token string">'%Y-%m-%d %H:%M:%S'</span> --author<span class="token operator">=</span><span class="token string">'MrZou'</span> --pretty<span class="token operator">=</span>format:<span class="token string">'%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit
lms <span class="token operator">=</span> log --no-merges --color --stat --date<span class="token operator">=</span>format:<span class="token string">'%Y-%m-%d %H:%M:%S'</span> --author<span class="token operator">=</span><span class="token string">'MrZou'</span> --pretty<span class="token operator">=</span>format:<span class="token string">'%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit
lss <span class="token operator">=</span> log --no-merges --color --stat --graph --date<span class="token operator">=</span>format:<span class="token string">'%Y-%m-%d %H:%M:%S'</span> --pretty<span class="token operator">=</span>format:<span class="token string">'%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit
<span class="token function">ls</span> <span class="token operator">=</span> log --no-merges --color --graph --date<span class="token operator">=</span>format:<span class="token string">'%Y-%m-%d %H:%M:%S'</span> --pretty<span class="token operator">=</span>format:<span class="token string">'%Cred%h%Creset -%C(yellow)%d%Cblue %s %Cgreen(%cd) %C(bold blue)&lt;%an&gt;%Creset'</span> --abbrev-commit
d1 <span class="token operator">=</span> <span class="token function">diff</span> head~1 --name-only
d2 <span class="token operator">=</span> <span class="token function">diff</span> head~2 --name-only
d3 <span class="token operator">=</span> <span class="token function">diff</span> head~3 --name-only
d5 <span class="token operator">=</span> <span class="token function">diff</span> head~5 --name-only
d10 <span class="token operator">=</span> <span class="token function">diff</span> head~10 --name-only
gtz <span class="token operator">=</span> archive --format<span class="token operator">=</span>tar.gz
gt <span class="token operator">=</span> archive --format<span class="token operator">=</span>tar
ig <span class="token operator">=</span> check-ignore -v
rp <span class="token operator">=</span> rev-parse
rpt <span class="token operator">=</span> rev-parse --show-toplevel
rpr <span class="token operator">=</span> rev-parse --show-prefix
rpd <span class="token operator">=</span> rev-parse --show-cdup
rph <span class="token operator">=</span> rev-parse HEAD
rpg <span class="token operator">=</span> rev-parse --git-dir
rl <span class="token operator">=</span> rev-list
p <span class="token operator">=</span> --exec-path
sl <span class="token operator">=</span> stash list
s <span class="token operator">=</span> stash save
sp <span class="token operator">=</span> stash pop
sa <span class="token operator">=</span> stash apply
sd <span class="token operator">=</span> stash drop
sc <span class="token operator">=</span> stash <span class="token function">clear</span>
c <span class="token operator">=</span> config --global --list
ce <span class="token operator">=</span> config --global --edit
cl <span class="token operator">=</span> config --edit
lpf <span class="token operator">=</span> log -p FETCH_HEAD
cindex <span class="token operator">=</span> checkout-index --prefix<span class="token operator">=</span>git-export-dir/
mf <span class="token operator">=</span> merge FETCH_HEAD
o <span class="token operator">=</span> --output
dni <span class="token operator">=</span> <span class="token function">diff</span> --no-index
dns <span class="token operator">=</span> <span class="token function">diff</span> --word-diff-regex <span class="token operator">=</span> <span class="token punctuation">[</span>^ <span class="token punctuation">[</span>：space：<span class="token punctuation">]</span><span class="token punctuation">]</span>
lb <span class="token operator">=</span> <span class="token operator">!</span><span class="token string">&quot;for k in <span class="token variable"><span class="token variable">`</span><span class="token function">git</span> branch<span class="token operator">|</span>perl -pe s/^<span class="token punctuation">..</span>//<span class="token variable">`</span></span>;do echo <span class="token variable"><span class="token variable">`</span><span class="token function">git</span> show --pretty<span class="token operator">=</span>format:<span class="token punctuation">\</span>&quot;%Cgreen%ci %Cblue%cr%Creset<span class="token punctuation">\</span>&quot; $k<span class="token operator">|</span><span class="token function">head</span> -n <span class="token number">1</span><span class="token variable">`</span></span><span class="token entity" title="\\">\\</span><span class="token entity" title="\t">\t</span><span class="token variable">$k</span>;done|sort&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h2 id="gitignore配置"><a href="#gitignore配置" class="header-anchor">#</a> .gitignore配置</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code># java
/.classpath
/.project
/.settings/
/target/
.DS_Store
.svn

# local env files
.env.local
.env.*.local

# Log files
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Editor directories and files
.idea
.vscode
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
/wx_maven_project.iml
/.idea/

# node
node_modules
/dist
public
server-build
proxy/*

# docker
build-image/dist
build-image/proxy
build-image/build.tar.gz

# mock
.amock

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="babelrc配置"><a href="#babelrc配置" class="header-anchor">#</a> babelrc配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;last 2 years&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@babel/preset-react&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;legacy&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;loose&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;last 2 years&quot;</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@babel/preset-react&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;legacy&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;loose&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="browserslist配置"><a href="#browserslist配置" class="header-anchor">#</a> browserslist配置</h2> <h3 id="一、browserslistrc简介"><a href="#一、browserslistrc简介" class="header-anchor">#</a> 一、browserslistrc简介</h3> <p><a href="https://www.npmjs.com/package/browserslist" target="_blank" rel="noopener noreferrer">npm地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/amilajack/eslint-plugin-compat" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Browserslist这个东西单独是没用的，在vue官方脚手架中，browserslist字段会被 @babel/preset-env 和 Autoprefixer 用来确定需要转译的 JavaScript 特性和需要添加的 CSS 浏览器前缀。下面的搭配的工具列表：</p> <ul><li>Autoprefixer</li> <li>Babel</li> <li>postcss-preset-env</li> <li>eslint-plugin-compat</li> <li>stylelint-no-unsupported-browser-features</li> <li>postcss-normalize</li></ul> <p>了解更多请看这个<a href="https://github.com/browserslist/browserslist-example" target="_blank" rel="noopener noreferrer">list<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或者npx browserslist</p> <h3 id="二、使用姿势"><a href="#二、使用姿势" class="header-anchor">#</a> 二、使用姿势</h3> <h3 id="_1-package-json配置"><a href="#_1-package-json配置" class="header-anchor">#</a> 1.package.json配置</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;last 1 version&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;maintained node versions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;not dead&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-browserslistrc"><a href="#_2-browserslistrc" class="header-anchor">#</a> 2.browserslistrc</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Browsers that we support</span>
last <span class="token number">1</span> version
<span class="token operator">&gt;</span> <span class="token number">1</span>%
maintained node versions
not dead
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="三、can-i-use"><a href="#三、can-i-use" class="header-anchor">#</a> 三、Can I Use</h3> <p>Browserslist 的数据都是来自Can I Use的。如果你想知道配置语句的查询结果可以使用[online demo] (https://browserl.ist/),你就可以看到最新的各个浏览器版本</p> <p><img src="/vuebloger/img/post/3529442-08e5df3b7a9dedd6.webp" alt=""></p> <h3 id="四、-browserslistrc配置常用"><a href="#四、-browserslistrc配置常用" class="header-anchor">#</a> 四、.browserslistrc配置常用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">%</span>
last <span class="token number">2</span> versions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="postcss-config-js配置"><a href="#postcss-config-js配置" class="header-anchor">#</a> postcss.config.js配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
        autoprefixer<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//或</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span><span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="editorconfig配置"><a href="#editorconfig配置" class="header-anchor">#</a> .editorconfig配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>root <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span>
charset <span class="token operator">=</span> utf<span class="token operator">-</span><span class="token number">8</span>
end_of_line <span class="token operator">=</span> lf
indent_size <span class="token operator">=</span> <span class="token number">4</span>
indent_style <span class="token operator">=</span> space
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="eslintrc-js配置"><a href="#eslintrc-js配置" class="header-anchor">#</a> .eslintrc.js配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    env<span class="token operator">:</span> <span class="token punctuation">{</span>
        node<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span>
        _<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        Axios<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        dateFormat<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        $<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token constant">L</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'extends'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>
        <span class="token string">'@vue/standard'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'no-console'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'error'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
        <span class="token string">'no-debugger'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'error'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>

        <span class="token string">'indent'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'no-unused-vars'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
        <span class="token string">'quotes'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'single'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'semi'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'vue/no-unused-components'</span><span class="token operator">:</span> <span class="token string">'off'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        parser<span class="token operator">:</span> <span class="token string">'babel-eslint'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="nodemon-json配置"><a href="#nodemon-json配置" class="header-anchor">#</a> nodemon-json配置</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;restartable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rs&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;.git&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node_modules/**/node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.eslintrc&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;client&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build/webpack.config.client.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;server-build&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;verbose&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;ext&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js json ejs&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="pm2-yml配置"><a href="#pm2-yml配置" class="header-anchor">#</a> pm2.yml配置</h2> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apps</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span> ./server/server.js
    <span class="token key atrule">name</span><span class="token punctuation">:</span> vue<span class="token punctuation">-</span>todo
    <span class="token key atrule">env_production</span><span class="token punctuation">:</span>
      <span class="token key atrule">NODE_ENV</span><span class="token punctuation">:</span> production
      <span class="token key atrule">HOST</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">PORT</span><span class="token punctuation">:</span> <span class="token number">8888</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="window配置nginx-conf"><a href="#window配置nginx-conf" class="header-anchor">#</a> window配置nginx-conf</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 8089 湛江项目</span>
<span class="token comment"># 8090 顺德项目</span>
<span class="token comment"># 视频云4.2.0</span>
<span class="token comment"># 8091  基线换肤</span>
<span class="token comment"># 8092  应急厅小屏/佛山市局换肤</span>
<span class="token comment"># 8093 佛山抗疫专区</span>
<span class="token comment"># ----视频云3.1.2</span>
<span class="token comment"># 8094 海丰视频云</span>
<span class="token comment"># 8095 诸城视频云</span>
<span class="token comment"># 8096 龙里视频云</span>
<span class="token comment">#user  nobody;</span>
worker_processes <span class="token number">1</span><span class="token punctuation">;</span>

events <span class="token punctuation">{</span>
  worker_connections <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment"># root（path+alias）</span>
<span class="token comment"># alias（alias）</span>
<span class="token comment"># 级别 正则大于普通</span>
<span class="token comment"># @web代理变量</span>
<span class="token comment"># proxy_pass（代理）</span>
http <span class="token punctuation">{</span>
  include mime.types<span class="token punctuation">;</span>
  default_type application/octet-stream<span class="token punctuation">;</span>
  sendfile on<span class="token punctuation">;</span>
  keepalive_timeout <span class="token number">65</span><span class="token punctuation">;</span>
  <span class="token comment"># gzip  on;</span>
  <span class="token comment"># gzip_comp_level 6;</span>
  <span class="token comment"># gzip_vary on;</span>
  <span class="token comment"># gzip_min_length 1000;</span>
  <span class="token comment"># gzip_proxied any;</span>
  <span class="token comment"># gzip_types text/plain text/css application/json application/x-javascript application/javascript text/xml</span>
  <span class="token comment"># gzip_buffers 32 8k;</span>
	<span class="token comment">#设定虚拟主机配置</span>
  server <span class="token punctuation">{</span>
    listen <span class="token number">8089</span><span class="token punctuation">;</span>
    server_name localhost<span class="token punctuation">;</span>
    client_max_body_size 1024m<span class="token punctuation">;</span>
    <span class="token comment"># 界别最低</span>
    location / <span class="token punctuation">{</span>
			try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span><span class="token comment">#$uri内置变量，匹配自定义变量@web</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># [root@localhost html]# curl &quot;localhost/test-uri?a=3&amp;b=4&quot;</span>
    <span class="token comment"># uri = /test-uri</span>
    <span class="token comment"># request_uri = /test-uri?a=3&amp;b=4</span>
    <span class="token comment"># 错误页面</span>
	  error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
		location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
      root html<span class="token punctuation">;</span><span class="token comment">#root和alias区别</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {</span>
    <span class="token comment">#     proxy_pass http://172.28.51.71:8081;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 湛江项目</span>
    <span class="token comment"># location  ~ ^/userconf/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/userconf/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/itom/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/zjportal/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/zjgit/portal/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    location  ~ ^/itom/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
      <span class="token builtin class-name">alias</span>  E:/workspace/zjgit/itom/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/datadefence/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hffz/efacecloud/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 湛江项目</span>
    location @web <span class="token punctuation">{</span>
      proxy_pass http://172.25.21.162:9080<span class="token punctuation">;</span><span class="token comment">#服务器</span>
      proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    <span class="token comment"># server {</span>
    <span class="token comment"># listen 8090;</span>
    <span class="token comment"># server_name localhost;</span>
    <span class="token comment"># client_max_body_size 1024m;</span>
    <span class="token comment"># location / {</span>
	<span class="token comment"># 		try_files $uri  @web;</span>
    <span class="token comment"># }</span>
	<span class="token comment">#   error_page 500 502 503 504 /50x.html;</span>
	<span class="token comment"># 	location = /50x.html {</span>
    <span class="token comment">#   root html;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 视频云基线日志</span>
    <span class="token comment"># location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/datadefence/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/efacecloud/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 代理svn</span>
    <span class="token comment"># location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/efacestore-22624/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/portal/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 视频云基线日志</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.20.80:9080;#服务器</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 顺德1000路</span>
    <span class="token comment"># location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/efacesurveillance-21864/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/datadefence-22445/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/efacecloud-21401/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/efacestore-22624/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/sd1000/源码管理/前台模块/portal-22617/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 顺德1000路</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.20.21:9080;#服务器</span>
    <span class="token comment"># }</span>
    <span class="token comment"># }</span>
  server <span class="token punctuation">{</span>
    listen <span class="token number">8091</span><span class="token punctuation">;</span>
    server_name localhost<span class="token punctuation">;</span>
    client_max_body_size 1024m<span class="token punctuation">;</span>
    location / <span class="token punctuation">{</span>
			try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	  error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
		location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
      root html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 换肤ui（单个匹配代理）</span>
    <span class="token comment"># location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {</span>
    <span class="token comment">#     proxy_pass http://172.28.51.71:8081;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 前端换肤开发模块（本地模块代理）</span>
    <span class="token comment"># location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/portal/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/datadefence/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/videostructure/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/videostructure/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    location  ~ ^/vehiclecloud/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
      <span class="token builtin class-name">alias</span>  E:/workspace/hf/vehiclecloud/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/efacecloud/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#   alias  E:/workspace/hf/itom/WebRoot/$1;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 前端换肤地址（多个匹配代理）</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.21.204:9080;#服务器</span>
    <span class="token comment">#   proxy_set_header Host $http_host;</span>
    <span class="token comment"># }</span>
    location @web <span class="token punctuation">{</span>
      proxy_pass http://172.25.22.54:9080<span class="token punctuation">;</span><span class="token comment">#服务器</span>
      proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.20.80:9999;#服务器</span>
    <span class="token comment">#   proxy_set_header Host $http_host;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.20.80:9080;#服务器</span>
    <span class="token comment">#   proxy_set_header Host $http_host;</span>
    <span class="token comment"># }</span>
    <span class="token comment"># 黄埔备用</span>
    <span class="token comment"># location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.21.152:9080;#服务器</span>
    <span class="token comment"># }</span>
    <span class="token comment">#   location   = /itom/rest/v6/device/devops {</span>
    <span class="token comment">#         proxy_pass http://localhost:3000/itom/rest/v6/device/devops;#服务器</span>
    <span class="token comment">#     }</span>
    <span class="token comment"># 佛山基线开发</span>
    <span class="token comment">#  location @web {</span>
    <span class="token comment">#   proxy_pass http://172.25.20.162:9999;#服务器</span>
    <span class="token comment">#   proxy_set_header Host $http_host;</span>
    <span class="token comment"># }</span>

  <span class="token punctuation">}</span>
  <span class="token comment"># 应急厅小屏</span>
  <span class="token comment"># server {</span>
  <span class="token comment">#   listen 8092;</span>
  <span class="token comment">#   server_name localhost;</span>
  <span class="token comment">#   client_max_body_size 1024m;</span>
  <span class="token comment">#    location / {</span>
  <span class="token comment">#    		try_files $uri  @web;</span>
  <span class="token comment">#    }</span>
  <span class="token comment">#    error_page 500 502 503 504 /50x.html;</span>
  <span class="token comment">#    location = /50x.html {</span>
  <span class="token comment">#      root html;</span>
  <span class="token comment">#    }</span>
  <span class="token comment">#   location  ~ ^/chemicalsscreen/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
  <span class="token comment">#     alias  E:/workspace/yjtx/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   #应急厅小屏</span>
  <span class="token comment">#   location @web {</span>
  <span class="token comment">#     proxy_pass http://172.25.20.147:9080;#服务器</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location @web {</span>
  <span class="token comment">#     proxy_pass http://172.28.51.50:9080;#服务器</span>
  <span class="token comment">#   }</span>
  <span class="token comment"># }</span>

  <span class="token comment"># 佛山市局换肤8092</span>
<span class="token comment">#   server {</span>
<span class="token comment">#     listen 8092;</span>
<span class="token comment">#     server_name localhost;</span>
<span class="token comment">#     client_max_body_size 1024m;</span>
<span class="token comment">#     location / {</span>
<span class="token comment"># 			try_files $uri  @web;</span>
<span class="token comment">#     }</span>
<span class="token comment"># 	  error_page 500 502 503 504 /50x.html;</span>
<span class="token comment"># 		location = /50x.html {</span>
<span class="token comment">#       root html;</span>
<span class="token comment">#     }</span>
<span class="token comment">#     # 换肤ui（单个匹配代理）</span>
<span class="token comment">#     location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {</span>
<span class="token comment">#         proxy_pass http://172.28.51.71:8081;</span>
<span class="token comment">#     }</span>
<span class="token comment">#     # 日志模块</span>
<span class="token comment">#     location  ~ ^/logsmgr/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
<span class="token comment">#       alias  E:/workspace/logsmgr/WebRoot/$1;</span>
<span class="token comment">#     }</span>
<span class="token comment">#     location  ~ ^/gzportal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
<span class="token comment">#       alias  E:/workspace/gzmanagecenter/WebRoot/$1;</span>
<span class="token comment">#     }</span>
<span class="token comment">#     location  ~ ^/gzuserconf/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
<span class="token comment">#       alias  E:/workspace/userconf-融合平台/WebRoot/$1;</span>
<span class="token comment">#     }</span>
<span class="token comment">#     # 市局视频云换肤（去除6大中心入口登入）</span>
<span class="token comment">#     location @web {</span>
<span class="token comment">#       proxy_pass http://172.25.20.167:8090;#服务器</span>
<span class="token comment">#       proxy_set_header Host $http_host;</span>
<span class="token comment">#       proxy_set_header X-Real-IP $remote_addr;</span>
<span class="token comment">#       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
<span class="token comment">#     }</span>
<span class="token comment">#      # 市局视频云换肤（黑色portal）</span>
<span class="token comment">#      location @web {</span>
<span class="token comment">#       proxy_pass http://172.25.20.59:8090;#服务器</span>
<span class="token comment">#       proxy_set_header Host $http_host;</span>
<span class="token comment">#       proxy_set_header X-Real-IP $remote_addr;</span>
<span class="token comment">#       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
<span class="token comment">#     }</span>
<span class="token comment">#   }</span>
  <span class="token comment"># 佛山抗疫专区8093</span>
  server <span class="token punctuation">{</span>
      listen <span class="token number">8093</span><span class="token punctuation">;</span>
      server_name localhost<span class="token punctuation">;</span>
      client_max_body_size 1024m<span class="token punctuation">;</span>
      location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
      location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root html<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment"># 疫情模块</span>
        <span class="token comment"># location  ~ ^/epidemic/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
        <span class="token comment">#  alias  E:/workspace/fs/epidemic/WebRoot/$1;</span>
        <span class="token comment"># }</span>
        <span class="token comment">#location  ~ ^/efaceSyntheticAlarm/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
        <span class="token comment">#  alias  E:/workspace/fs/efaceSyntheticAlarm/WebRoot/$1;</span>
        <span class="token comment">#}</span>
        <span class="token comment"># location   = /itom/rest/v6/device/devops {</span>
        <span class="token comment">#     proxy_pass http://localhost:3000/itom/rest/v6/device/devops;#服务器</span>
        <span class="token comment"># }</span>
        <span class="token comment"># location ~ /aa/ {</span>
            <span class="token comment">########</span>
            <span class="token comment"># default_type    text/plain;</span>
            <span class="token comment">#  return 502 '服务正在升级，请稍后再试……';</span>
            <span class="token comment">########</span>
            <span class="token comment">#  set $a &quot;http://localhost:5000/aaa$request_uri&quot;;</span>
            <span class="token comment">#  return 502 $a ;</span>
            <span class="token comment"># proxy_pass $a;#服务器</span>
            <span class="token comment">########</span>
            <span class="token comment"># rewrite /([^/]+)/aa/([^/]+) /aaa/bbb break;</span>
            <span class="token comment"># proxy_pass http://localhost:5000;#服务器</span>
            <span class="token comment">########</span>
            <span class="token comment"># if ($request_uri ~ /ccc/(.+)/(.+))</span>
            <span class="token comment"># {</span>
            <span class="token comment"># set $params1 $1;</span>
            <span class="token comment"># set $params2 $2;</span>
            <span class="token comment"># }</span>
            <span class="token comment"># # return 502  $params1;</span>
            <span class="token comment"># proxy_pass http://localhost:5000/$params1/$params2;</span>
        <span class="token comment"># }</span>
        <span class="token comment"># 佛山市局视频云4.0代理</span>
        <span class="token comment">#  location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
        <span class="token comment">#     alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;</span>
        <span class="token comment"># }</span>
         location  ~ ^/res/efaceclound/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
            <span class="token builtin class-name">alias</span>  E:/workspace/fs/efaceclound/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment"># 佛山市局视频云</span>
        <span class="token comment">#   location @web {</span>
        <span class="token comment">#     proxy_pass http://172.25.20.162:9999;#服务器</span>
        <span class="token comment">#     proxy_set_header Host $http_host;</span>
        <span class="token comment">#     proxy_set_header X-Real-IP $remote_addr;</span>
        <span class="token comment">#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
        <span class="token comment">#   }</span>
        <span class="token comment"># 佛山市局视频云131-VI平台</span>
        location @web <span class="token punctuation">{</span>
            proxy_pass http://172.25.20.12:9082<span class="token punctuation">;</span><span class="token comment">#服务器</span>
            proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
            proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  <span class="token comment"># 海丰视频云</span>
   server <span class="token punctuation">{</span>
      listen <span class="token number">8094</span><span class="token punctuation">;</span>
      server_name localhost<span class="token punctuation">;</span>
      client_max_body_size 1024m<span class="token punctuation">;</span>
      location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
      location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root html<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token comment">#   location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
    <span class="token comment">#   location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/efacestore/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
    <span class="token comment">#   location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/vehiclecloud/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
      location  ~ ^/datadefence/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
          <span class="token builtin class-name">alias</span>  E:/workspace/hffz/datadefence/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      location  ~ ^/portal/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
          <span class="token builtin class-name">alias</span>  E:/workspace/hffz/portal/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token comment">#   location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/efacesurveillance/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
    <span class="token comment">#   location  ~ ^/videostructure/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/videostructure/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
      location @web <span class="token punctuation">{</span>
        proxy_pass http://172.25.21.219:9080<span class="token punctuation">;</span><span class="token comment">#服务器</span>
        proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
        proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
        proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  <span class="token comment"># 诸城视频云</span>
   server <span class="token punctuation">{</span>
      listen <span class="token number">8095</span><span class="token punctuation">;</span>
      server_name localhost<span class="token punctuation">;</span>
      client_max_body_size 1024m<span class="token punctuation">;</span>
      location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
      location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root html<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
       location  ~ ^/vehiclecloud/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
          <span class="token builtin class-name">alias</span>  E:/workspace/hffz/vehiclecloud/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token comment">#    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
    <span class="token comment">#    location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/portal/WebRoot/$1;</span>
    <span class="token comment">#   }</span>

      location @web <span class="token punctuation">{</span>
        proxy_pass http://172.25.21.166:9080<span class="token punctuation">;</span><span class="token comment">#服务器</span>
        proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
        proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
        proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  <span class="token comment"># 龙里视频云</span>
   server <span class="token punctuation">{</span>
      listen <span class="token number">8096</span><span class="token punctuation">;</span>
      server_name localhost<span class="token punctuation">;</span>
      client_max_body_size 1024m<span class="token punctuation">;</span>
      location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span>  @web<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
      location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root html<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
       location  ~ ^/datadefence/<span class="token punctuation">(</span>.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token operator">|</span>html<span class="token operator">|</span>png<span class="token operator">|</span>jpg<span class="token operator">|</span>gif<span class="token operator">|</span>mp3<span class="token punctuation">))</span>$ <span class="token punctuation">{</span>
          <span class="token builtin class-name">alias</span>  E:/workspace/ll/datadefence/WebRoot/<span class="token variable">$1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token comment">#    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;</span>
    <span class="token comment">#   }</span>
    <span class="token comment">#    location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
    <span class="token comment">#       alias  E:/workspace/hffz/portal/WebRoot/$1;</span>
    <span class="token comment">#   }</span>

      location @web <span class="token punctuation">{</span>
        proxy_pass http://172.25.20.127:9080<span class="token punctuation">;</span><span class="token comment">#服务器</span>
        <span class="token comment"># proxy_set_header Host $http_host;</span>
        <span class="token comment"># proxy_set_header X-Real-IP $remote_addr;</span>
        <span class="token comment"># proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
      <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  <span class="token comment"># server {</span>
  <span class="token comment">#   listen 4200;</span>
  <span class="token comment">#   server_name test.com;</span>
  <span class="token comment">#   client_max_body_size 1024m;</span>
  <span class="token comment">#   # location / {</span>
  <span class="token comment">#   #   try_files $uri  @web;</span>
  <span class="token comment">#   # }</span>
  <span class="token comment">#   #  （单个匹配代理）</span>
  <span class="token comment">#   location /api/ {</span>
  <span class="token comment">#       proxy_pass http://172.28.110.18:3000;</span>
  <span class="token comment">#       proxy_set_header Host $host;</span>
  <span class="token comment">#       proxy_set_header  X-Real-IP        $remote_addr;</span>
  <span class="token comment">#       proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span>
  <span class="token comment">#       proxy_set_header X-NginX-Proxy true;</span>
  <span class="token comment">#       rewrite ^/api/(.*)$ /$1 break;</span>
  <span class="token comment">#   }</span>
  <span class="token comment"># }</span>
  <span class="token comment"># 开启第二个代理</span>
  <span class="token comment"># server {</span>
  <span class="token comment">#   listen 8088;</span>
  <span class="token comment">#   server_name localhost;</span>
  <span class="token comment">#   client_max_body_size 1024m;</span>
  <span class="token comment">#   location / {</span>
  <span class="token comment">#     #root G:\vscode\VBlog\blogserver\src\main\resources\static;</span>
	<span class="token comment"># 		try_files $uri  @web;</span>
  <span class="token comment">#   }</span>
	<span class="token comment">#   error_page 500 502 503 504 /50x.html;</span>
	<span class="token comment"># 	location = /50x.html {</span>
  <span class="token comment">#     root html;</span>
  <span class="token comment">#   }</span>
  <span class="token comment"># ui模块</span>
  <span class="token comment">#   location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/ui/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment"># 其他模块</span>
  <span class="token comment">#   location  ~ ^/pciviid/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/pciviid/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/pciviidservice/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/pciviidserviceBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/efacecloudBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/efaceelevator/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/efaceelevatorBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/efacesurveillanceBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/efacestoreBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/vehiclecloudBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/connectplus/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/connectplusBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#    alias  E:/workspace/portalBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/itom/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/suntek-flume-base/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/suntek-flume-baseBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/userconf/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/userconfBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/suntekmap/(.+\.(js|css|html|png|jpg|gif|mp4))$ {</span>
  <span class="token comment">#     alias  E:/workspace/suntekmap/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/gis/(.+\.(js|css|html|png|jpg|gif|mp4))$ {</span>
  <span class="token comment">#     alias  E:/workspace/gisBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/gisdemo/(.+\.(js|css|html|png|jpg|gif|mp4))$ {</span>
  <span class="token comment">#     alias  E:/workspace/gisdemo/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/pciplayer/(.+\.(js|css|html|png|jpg|gif|mp4))$ {</span>
  <span class="token comment">#     alias  E:/workspace/pciplayer/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/opengw/(.+\.(js|css|html|png|jpg|gif|mp4))$ {</span>
  <span class="token comment">#     alias  E:/workspace/opengwBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/maserviceBD/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/maservice/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/eaplog/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/eaplog/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/eapmanageutils/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/eapmanageutilsBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/maversion/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/maversion/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/console/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/consoleBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment">#   location  ~ ^/dbcollision/(.+\.(js|css|html|png|jpg|gif))$ {</span>
  <span class="token comment">#     alias  E:/workspace/dbcollisionBD/WebRoot/$1;</span>
  <span class="token comment">#   }</span>
  <span class="token comment"># 视频云</span>
  <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {</span>
  <span class="token comment">#   alias  E:/workspace/datadefenceBD/WebRoot/$1;</span>
  <span class="token comment"># }</span>
  <span class="token comment"># 大屏应急厅第一版演示地址</span>
  <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {</span>
  <span class="token comment">#   alias  E:/workspace/datadefenceYJT/WebRoot/$1;</span>
  <span class="token comment"># }</span>
  <span class="token comment"># 大屏应急厅第二版演示地址</span>
  <span class="token comment"># location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {</span>
  <span class="token comment">#   alias  E:/workspace/yjt/trunk/datadefence/WebRoot/$1;</span>
  <span class="token comment"># }</span>
  <span class="token comment"># 视频云应急厅</span>
  <span class="token comment"># location  ~ ^/vehiclestore/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {</span>
  <span class="token comment">#   alias  E:\workspace\whpspy\vehiclestore\WebRoot/$1;</span>
  <span class="token comment"># }</span>
  <span class="token comment"># proxy_pass（代理）</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.28.50.46:9080;  #肖韬</span>
   <span class="token comment"># }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#  proxy_pass http://172.25.21.156:9080;  #外籍人验证环境</span>
   <span class="token comment"># }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.28.110.96:9080;  #外籍人测试环境</span>
   <span class="token comment"># }</span>
  <span class="token comment">#  location @web {</span>
  <span class="token comment">#    proxy_pass http://172.25.20.35:9080;  #省厅应急项目</span>
  <span class="token comment">#  }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.28.51.50:9080;  #桂彬省厅应急项目</span>
   <span class="token comment"># }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.25.21.152:9080;  #黄埔验证环境</span>
   <span class="token comment"># }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.28.110.95:9080;  #黄埔测试环境</span>
   <span class="token comment"># }</span>
   <span class="token comment"># location @web {</span>
   <span class="token comment">#   proxy_pass http://172.28.50.166:9080;  #黄埔陆哓逸环境</span>
   <span class="token comment"># }</span>
  <span class="token comment"># }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br></div></div><h2 id="linux配置nginx-conf"><a href="#linux配置nginx-conf" class="header-anchor">#</a> linux配置nginx-conf</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
#user  nobody<span class="token punctuation">;</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>

#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log  notice<span class="token punctuation">;</span>
#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log  info<span class="token punctuation">;</span>

#pid        logs<span class="token operator">/</span>nginx<span class="token punctuation">.</span>pid<span class="token punctuation">;</span>


events <span class="token punctuation">{</span>
    worker_connections  <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


http <span class="token punctuation">{</span>
    include       mime<span class="token punctuation">.</span>types<span class="token punctuation">;</span>
    default_type  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>

    #log_format  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
    #                  <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
    #                  <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    #access_log  logs<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

    sendfile        on<span class="token punctuation">;</span>
    #tcp_nopush     on<span class="token punctuation">;</span>

    #keepalive_timeout  <span class="token number">0</span><span class="token punctuation">;</span>
    keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span>

    #gzip  on<span class="token punctuation">;</span>

    server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

        #charset koi8<span class="token operator">-</span>r<span class="token punctuation">;</span>

        #access_log  logs<span class="token operator">/</span>host<span class="token punctuation">.</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

        location <span class="token operator">/</span> <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
            index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>student<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webstudent<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>h5<span class="token operator">/</span> <span class="token punctuation">{</span>
            root h5student<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>teacher<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webteacher<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>scholar<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webscholar<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>officer<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webofficer<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>console<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webconsole<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>operator<span class="token operator">/</span> <span class="token punctuation">{</span>
            root weboperator<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location <span class="token operator">/</span>viewer<span class="token operator">/</span> <span class="token punctuation">{</span>
            root webfile<span class="token punctuation">;</span>
            index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        #error_page  <span class="token number">404</span>              <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

        # redirect server error pages to the <span class="token keyword">static</span> page <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html
        #
        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        # proxy the <span class="token constant">PHP</span> scripts to Apache listening on <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">80</span>
        #
        #location <span class="token operator">~</span> \<span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
        #    proxy_pass   http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">;</span>
        #<span class="token punctuation">}</span>

        # pass the <span class="token constant">PHP</span> scripts to FastCGI server listening on <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">9000</span>
        #
        #location <span class="token operator">~</span> \<span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
        #    root           html<span class="token punctuation">;</span>
        #    fastcgi_pass   <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">9000</span><span class="token punctuation">;</span>
        #    fastcgi_index  index<span class="token punctuation">.</span>php<span class="token punctuation">;</span>
        #    fastcgi_param  <span class="token constant">SCRIPT_FILENAME</span>  <span class="token operator">/</span>scripts$fastcgi_script_name<span class="token punctuation">;</span>
        #    include        fastcgi_params<span class="token punctuation">;</span>
        #<span class="token punctuation">}</span>

        # deny access to <span class="token punctuation">.</span>htaccess files<span class="token punctuation">,</span> <span class="token keyword">if</span> Apache's document root
        # concurs <span class="token keyword">with</span> nginx's one
        #
        #location <span class="token operator">~</span> <span class="token operator">/</span>\<span class="token punctuation">.</span>ht <span class="token punctuation">{</span>
        #    deny  all<span class="token punctuation">;</span>
        #<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    # another virtual host using mix <span class="token keyword">of</span> <span class="token constant">IP</span><span class="token operator">-</span><span class="token punctuation">,</span> name<span class="token operator">-</span><span class="token punctuation">,</span> and port<span class="token operator">-</span>based configuration
    #
    #server <span class="token punctuation">{</span>
    #    listen       <span class="token number">8000</span><span class="token punctuation">;</span>
    #    listen       somename<span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    #    server_name  somename  alias  another<span class="token punctuation">.</span>alias<span class="token punctuation">;</span>

    #    location <span class="token operator">/</span> <span class="token punctuation">{</span>
    #        root   html<span class="token punctuation">;</span>
    #        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
    #    <span class="token punctuation">}</span>
    #<span class="token punctuation">}</span>


    # <span class="token constant">HTTPS</span> server
    #
    #server <span class="token punctuation">{</span>
    #    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    #    server_name  localhost<span class="token punctuation">;</span>

    #    ssl_certificate      cert<span class="token punctuation">.</span>pem<span class="token punctuation">;</span>
    #    ssl_certificate_key  cert<span class="token punctuation">.</span>key<span class="token punctuation">;</span>

    #    ssl_session_cache    shared<span class="token operator">:</span><span class="token constant">SSL</span><span class="token operator">:</span><span class="token number">1</span>m<span class="token punctuation">;</span>
    #    ssl_session_timeout  <span class="token number">5</span>m<span class="token punctuation">;</span>

    #    ssl_ciphers  <span class="token constant">HIGH</span><span class="token operator">:</span><span class="token operator">!</span>aNULL<span class="token operator">:</span><span class="token operator">!</span><span class="token constant">MD5</span><span class="token punctuation">;</span>
    #    ssl_prefer_server_ciphers  on<span class="token punctuation">;</span>

    #    location <span class="token operator">/</span> <span class="token punctuation">{</span>
    #        root   html<span class="token punctuation">;</span>
    #        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
    #    <span class="token punctuation">}</span>
    #<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br></div></div><h2 id="nginx配置全解析"><a href="#nginx配置全解析" class="header-anchor">#</a> nginx配置全解析</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code># <span class="token number">8089</span> 湛江项目
# <span class="token number">8090</span> 顺德项目
# 视频云<span class="token number">4.2</span><span class="token number">.0</span>
# <span class="token number">8091</span>  基线换肤
# <span class="token number">8092</span>  应急厅小屏<span class="token operator">/</span>佛山市局换肤
# <span class="token number">8093</span> 佛山抗疫专区
# <span class="token operator">--</span><span class="token operator">--</span>视频云<span class="token number">3.1</span><span class="token number">.2</span>
# <span class="token number">8094</span> 海丰视频云
# <span class="token number">8095</span> 诸城视频云
# <span class="token number">8096</span> 龙里视频云
# user  nobody<span class="token punctuation">;</span>
# pid logs<span class="token operator">/</span>nginx<span class="token punctuation">.</span>pid<span class="token punctuation">;</span>
# worker_cpu_affinity auto<span class="token punctuation">;</span>
worker_processes <span class="token number">6</span><span class="token punctuation">;</span> # 工作进程数
# <span class="token number">1.</span>默认：worker_processes<span class="token operator">:</span> <span class="token number">1</span>
# <span class="token number">2.</span>调大：worker_processes<span class="token operator">:</span> <span class="token constant">CPU</span><span class="token function">核心数，</span><span class="token punctuation">(</span>双核<span class="token number">4</span>线程，可以设置为<span class="token number">4</span><span class="token punctuation">)</span>
# worker_connections解析
# <span class="token number">1.</span>connections不是随便设置的，而是与两个指标有重要关联，一是内存，二是操作系统级别的“进程最大可打开文件数”。
# <span class="token number">2.</span>内存：每个连接数分别对应一个read_event、一个write_event事件，一个连接数大概占用<span class="token number">232</span>字节，<span class="token number">2</span>个事件总占用<span class="token number">96</span>字节，那么一个连接总共占用<span class="token number">328</span>字节，通过数学公式可以算出<span class="token number">100000</span>个连接数大概会占用 <span class="token number">31</span>M <span class="token operator">=</span> <span class="token number">100000</span> <span class="token operator">*</span> <span class="token number">328</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span>，当然这只是nginx启动时，connections连接数所占用的nginx。
# <span class="token number">3.</span>进程最大可打开文件数：进程最大可打开文件数受限于操作系统，可通过 ulimit <span class="token operator">-</span>n 命令查询，以前是<span class="token number">1024</span>，现在是<span class="token number">65535</span>

worker_rlimit_nofile <span class="token number">65535</span><span class="token punctuation">;</span> #硬资源和软资源同时限制为最大打开文件描述符数<span class="token number">6554</span>
# nginx提供了worker_rlimit_nofile指令，这是除了ulimit的一种设置可用的描述符的方式。 该指令与使用ulimit对用户的设置是同样的效果。此指令的值将覆盖ulimit的值，如：worker_rlimit_nofile <span class="token number">20960</span><span class="token punctuation">;</span>
# 设置ulimits：ulimit <span class="token operator">-</span>SHn <span class="token number">65535</span> <span class="token comment">//这只是在当前终端有效，退出之后，open files又变为默认值。当然也可以写到/etc/profile中，因为每次登录终端时，都会自动执行/etc/profile</span>
# 或 vim <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span>conf  <span class="token comment">//加入以下配置，重启即可生效</span>

# ulimit命令
# <span class="token operator">-</span><span class="token constant">H</span> 使用硬资源控制
# <span class="token operator">-</span><span class="token constant">S</span> 使用软资源控制
# <span class="token operator">-</span>a 查看所有的当前限制
# <span class="token operator">-</span>n 能打开的最大文件描述符数
# <span class="token operator">-</span>t 限制最大的 <span class="token constant">CPU</span> 占用时间（每秒）
# <span class="token operator">-</span>u 限制最大用户进程数
# <span class="token operator">-</span>v 限制虚拟内存大小（kB）

# 查看进程最大可打开文件数<span class="token operator">:</span>
# 通过 ps <span class="token operator">-</span>elf <span class="token operator">|</span> grep nginx 找到 nginx 的worker进程<span class="token constant">ID</span>
# 通过 cat <span class="token operator">/</span>proc<span class="token operator">/</span><span class="token number">31613</span><span class="token operator">/</span>limits 查看
# lsof <span class="token operator">-</span>p <span class="token number">16920</span><span class="token operator">|</span> wc –l  查看某个进程打开的文件数 <span class="token number">16920</span> 为进程<span class="token constant">ID</span>
# ulimit –a 查看当前允许的最多打开的文件数
# ulimit  –n <span class="token number">4096</span> 修改系统允许最多打开的文件数<span class="token punctuation">.</span>
# ulimit <span class="token operator">-</span>v ulimited  将虚拟内存限制改为无限制

events <span class="token punctuation">{</span>
    # use epoll<span class="token punctuation">;</span>
    worker_connections <span class="token number">10240</span><span class="token punctuation">;</span> # 单个工作进程可以允许同时建立外部连接的数量
    # 数字越大，能同时处理的连接越多
    # <span class="token number">1.</span>默认：worker_connections<span class="token operator">:</span> <span class="token number">1024</span>
    # <span class="token number">2.</span>调大：worker_connections<span class="token operator">:</span> <span class="token number">100000</span>，（调大到<span class="token number">10</span>万连接）
<span class="token punctuation">}</span>
#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log  notice<span class="token punctuation">;</span>
#error_log  logs<span class="token operator">/</span>error<span class="token punctuation">.</span>log  info<span class="token punctuation">;</span>

# root（path<span class="token operator">+</span>alias）
# alias（alias）
# 级别 正则大于普通
# @web代理变量
# proxy_pass（代理）

# rewrite <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ <span class="token operator">/</span>page<span class="token operator">/</span>maintain<span class="token punctuation">.</span>html <span class="token keyword">break</span>（必须目录下有）<span class="token punctuation">;</span>last（新建一个请求，可以没有目录）都是转发，服务端只收到一个请求<span class="token operator">/</span>redirect （<span class="token number">302</span>）<span class="token operator">/</span>permanent（<span class="token number">301</span>）  pcre终端正则

# location <span class="token operator">/</span> <span class="token punctuation">{</span>
# <span class="token keyword">if</span><span class="token punctuation">(</span>$http_user_agent <span class="token number">8</span> Chrome<span class="token punctuation">)</span> <span class="token punctuation">{</span>
# rewrite <span class="token operator">^</span><span class="token operator">/</span>nginx https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span>test<span class="token punctuation">;</span>
# <span class="token punctuation">}</span>
# <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">-</span>f $request_filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>检测文件是否存在
#     redirect <span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ https<span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span>$<span class="token number">1</span> redirect<span class="token punctuation">;</span>
# <span class="token punctuation">}</span>
# <span class="token punctuation">}</span>
# <span class="token operator">-</span>f 和 <span class="token operator">!</span><span class="token operator">-</span>f 用来判断是否存在文件
# <span class="token operator">-</span>d 和 <span class="token operator">!</span><span class="token operator">-</span>d 用来判断是否存在目录
# <span class="token operator">-</span>e 和 <span class="token operator">!</span><span class="token operator">-</span>e 用来判断是否存在文件或目录
# <span class="token operator">-</span>x 和 <span class="token operator">!</span><span class="token operator">-</span>x 用来判断文件是否可执行




http <span class="token punctuation">{</span>
    include mime<span class="token punctuation">.</span>types<span class="token punctuation">;</span>
    default_type application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>  # 避免浏览器自动播放文件，Nginx在默认配置下，会根据文件的后缀来匹配相应的<span class="token constant">MIME</span>类型，并写入Response header，导致浏览器播放文件而不是下载
    sendfile on<span class="token punctuation">;</span>
    # tcp_onpush on<span class="token punctuation">;</span> # sendfile开启后才能用，打包请求一起发
    # tcp_nodelay on<span class="token punctuation">;</span> # 实时性，keepalive情况下
    keepalive_timeout <span class="token number">65</span><span class="token punctuation">;</span> # nginx连接超时时长
    charset utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span>gbk<span class="token punctuation">;</span>
    # Nginx默认是不允许列出整个目录的。如需此功能，打开nginx<span class="token punctuation">.</span>conf文件，在location server 或 http段中加入 autoindex on<span class="token punctuation">;</span>
    # 另外两个参数最好也加上去<span class="token operator">:</span>
    # autoindex_exact_size off<span class="token punctuation">;</span>
    # 默认为on，显示出文件的确切大小，单位是bytes。
    # 改为off后，显示出文件的大概大小，单位是kB或者<span class="token constant">MB</span>或者<span class="token constant">GB</span>
    # autoindex_localtime on<span class="token punctuation">;</span>
    # 默认为off，显示的文件时间为<span class="token constant">GMT</span>时间。
    # 改为on后，显示的文件时间为文件的服务器时间
    autoindex_localtime off<span class="token punctuation">;</span>
    autoindex_exact_size off<span class="token punctuation">;</span>
    ############
    gzip  on<span class="token punctuation">;</span> #  开启gzip，响应头返回Content<span class="token operator">-</span>Encoding<span class="token operator">:</span>gzip   说明开启了gzip压缩，Transfet<span class="token operator">-</span>Encoding<span class="token operator">:</span>chunked  说明压缩后分块传输
    gzip_comp_level <span class="token number">6</span><span class="token punctuation">;</span> # 设置gzip压缩级别，级别越底压缩速度越快文件压缩比越小，反之速度越慢文件压缩比越大
    gzip_vary on<span class="token punctuation">;</span> # 增加响应头”Vary<span class="token operator">:</span> Accept<span class="token operator">-</span>Encoding”<span class="token punctuation">,</span>告诉代理服务器缓存两种版本的资源：压缩和非压缩，这有助于避免一些公共代理不能正确地检测Content<span class="token operator">-</span>Encoding标头的问题<span class="token punctuation">,</span>网站需要启用GZip才有意义<span class="token punctuation">,</span>现在的新浏览器都支持压缩了，因此如果网站启用了GZip，可以无需再指定“Vary<span class="token operator">:</span> Accept<span class="token operator">-</span>Encoding”标头<span class="token punctuation">.</span>
    # Vary<span class="token operator">:</span> Accept<span class="token operator">-</span>Encoding作用
    # 直接访问是好的，但现在网络使用了中间高速缓存（cache）和内容分发网络（<span class="token constant">CDN</span>）。这就产生了一个问题，缓存如何使用头信息决定返回什么？它能否复制服务器端的决策逻辑？
    # “Vary”解决了这个问题，“Vary”头描述什么信息“唯一地”标识一个请求——传入的请求只有完全匹配缓存的“Vary”信息，缓存才被使用。
    # 假如没有“Vary”头，那么如果由于某种原因，客户端有一个未压缩的版本在其缓存中的文件，它会不知道随后再次要求它的压缩版本，而不是只从缓存中使用未压缩的文件。
    # 设想有两个客户，一个使用的旧浏览器不支持压缩，一个使用新的浏览器支持压缩，如果他们都请求同一个网页，那么取决于谁先请求，压缩或非压缩版本便存储在<span class="token constant">CDN</span>上。这样问题就出现了，旧浏览器请求常规网页但获得缓存的压缩版本，而新浏览器会获得缓存的非压缩版本但尝试去“解压”它。无论哪种方式都是坏消息。解决方法是，源服务器回送“Vary<span class="token operator">:</span> Accept<span class="token operator">-</span>Encoding”。
    # 查看网页的response header一般都有Vary头（服务器支持压缩的都有）意思是说squid要把客户端传来的某个头区别对待，譬如Vary<span class="token operator">:</span>Accept<span class="token operator">-</span>Encoding，
    # 客户端发来Accept<span class="token operator">-</span>Encoding<span class="token operator">:</span>gzip（<span class="token constant">MSIE</span>）<span class="token punctuation">,</span> deflate时squid会为gzip<span class="token punctuation">,</span> deflate做一个存档；如果客户端没发来Accept<span class="token operator">-</span><span class="token function">Encoding这个头</span><span class="token punctuation">(</span>wget<span class="token punctuation">)</span>，squid又会为无Accept<span class="token operator">-</span>Encoding做另一个存档；这两个存档的内容是不一样的，gzip<span class="token punctuation">,</span> deflate的是压缩后的内容，一堆乱码，无Accept<span class="token operator">-</span>Encoding的则是网页源码。
    # 在网页输出时加上Vary<span class="token operator">:</span>User<span class="token operator">-</span>Agent，意味着squid要为每一种User<span class="token operator">-</span>Agent存一个存档，nginx里这样配置即可：add_header Vary Accept<span class="token operator">-</span>Encoding<span class="token punctuation">;</span>这时网页的response header会有Vary<span class="token operator">:</span>Accept<span class="token operator">-</span>Encoding<span class="token punctuation">;</span>
    # Squid cache（简称为Squid）<span class="token operator">:</span>代理服务器和Web缓存服务器
    # gzip（<span class="token constant">MSIE</span>）<span class="token operator">/</span>deflate两种压缩算法
    gzip_min_length <span class="token number">80</span><span class="token punctuation">;</span> # 当返回内容大于此值时才会使用gzip进行压缩<span class="token punctuation">,</span>以<span class="token constant">K</span>为单位<span class="token punctuation">,</span>当值为<span class="token number">0</span>时，所有页面都进行压缩。如gzip_min_length <span class="token number">1</span>k<span class="token punctuation">;</span>
    gzip_types text<span class="token operator">/</span>plain text<span class="token operator">/</span>css application<span class="token operator">/</span>json application<span class="token operator">/</span>x<span class="token operator">-</span>javascript application<span class="token operator">/</span>javascript text<span class="token operator">/</span>xml application<span class="token operator">/</span>xml text<span class="token operator">/</span>javascript application<span class="token operator">/</span>x<span class="token operator">-</span>httpd<span class="token operator">-</span>php
    #image<span class="token operator">/</span>jpeg image<span class="token operator">/</span>gif image<span class="token operator">/</span>png<span class="token punctuation">;</span>#设置需要压缩的<span class="token constant">MIME</span>类型<span class="token punctuation">,</span>如果不在设置类型范围内的请求不进行压缩。图片<span class="token operator">/</span>mp3这样的二进制文件<span class="token punctuation">,</span>不必压缩，因为压缩率比较小<span class="token punctuation">,</span> 比如<span class="token number">100</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">80</span>字节<span class="token punctuation">,</span>而且压缩也是耗费<span class="token constant">CPU</span>资源的<span class="token punctuation">.</span>
    gzip_buffers <span class="token number">32</span> <span class="token number">8</span>k<span class="token punctuation">;</span> #设置用于处理请求压缩的缓冲区数量和大小。比如<span class="token number">32</span> <span class="token number">4</span>K表示按照内存页（one memory <span class="token function">page）大小以4K为单位（即一个系统中内存页为4K），申请32倍的内存空间。建议此项不设置，使用默认值。</span><span class="token punctuation">(</span>压缩在内存中缓冲几块<span class="token operator">?</span> 每块多大<span class="token operator">?</span><span class="token punctuation">)</span>
    gzip_disable <span class="token string">&quot;MSIE [1-6]\.&quot;</span><span class="token punctuation">;</span> # 通过表达式，表明哪些<span class="token constant">UA</span>头不使用gzip压缩 此处表示ie6及以下不启用gzip（因为ie低版本不支持）
    gzip_http_version <span class="token number">1.1</span><span class="token punctuation">;</span> # 用于识别http协议的版本，早期的浏览器不支持gzip压缩，用户会看到乱码，所以为了支持前期版本加了此选项。默认在http<span class="token operator">/</span><span class="token number">1.0</span>的协议下不开启gzip压缩。
    gzip_proxied any<span class="token punctuation">;</span>
    # off – 关闭所有的代理结果数据压缩
    # expired – 如果header中包含”Expires”头信息，启用压缩
    # no<span class="token operator">-</span>cache – 如果header中包含”Cache<span class="token operator">-</span>Control<span class="token operator">:</span>no<span class="token operator">-</span>cache”头信息，启用压缩
    # no<span class="token operator">-</span>store – 如果header中包含”Cache<span class="token operator">-</span>Control<span class="token operator">:</span>no<span class="token operator">-</span>store”头信息，启用压缩
    # <span class="token keyword">private</span> – 如果header中包含”Cache<span class="token operator">-</span>Control<span class="token operator">:</span><span class="token keyword">private</span>”头信息，启用压缩
    # no_last_modified – 启用压缩，如果header中包含”Last_Modified”头信息，启用压缩
    # no_etag – 启用压缩，如果header中包含“ETag”头信息，启用压缩
    # auth – 启用压缩，如果header中包含“Authorization”头信息，启用压缩
    # any – 无条件压缩所有结果数据

    # resolver <span class="token number">8.8</span><span class="token number">.8</span><span class="token number">.8</span> <span class="token constant">DNS</span>解析
    # location <span class="token operator">/</span>download <span class="token punctuation">{</span>
    #   gzip_static on  gzip预读文件 <span class="token punctuation">,</span>使用gzip即可  <span class="token punctuation">.</span><span class="token parameter">gz会把原文件删了</span> <span class="token operator">=&gt;</span> tar <span class="token operator">-</span>zcvf archive<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz dist<span class="token operator">/</span>prod<span class="token comment">/*
    # -c 创建新的文档。
    # -v 显示详细的tar处理的文件信息
    # -f 要操作的文件名
    # -z gzip压缩
    # -r 表示增加文件，把要增加的文件追加在压缩文件的末尾。
    # -t 表示查看文件，查看文件中的文件内容
    # -x 解压文件。
    #   tcp_onpush on
    #   root /op/root/code
    #}
    ############

    #log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
    #                  '$status $body_bytes_sent &quot;$http_referer&quot; '
    #                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';   $arg_    $http_   $sent_  内置变量    自定义变量
    #access_log  logs/access.log  main;

    # 连接个数限制
    #limit_conn_zone $binanry_remote_addr zone=conn_zone:1m;
    # 请求个数限制
    #limit_req_zone $binanry_remote_addr zone=req_zone:1m rate=1r/s; # 每秒一个
    # 连接个数限制
    #limit_conn zone=conn_zone 1
    # 请求个数限制
    #limit_req zone=req_zone burst=3 nodelay  #延后3个请求其他不延后
    #基于IP访问控制  http_access_modlue
    # location ~ ^/admin.html {
    #     root /opt/app/code;
    #     deny 222.128.189.0/24;  #代理公网IP
    #     allow all;
    #     index index.html index.htm;
    #}

    #http_x_forwarded_for
    #geoip_module模块:ip地址地域信息访问控制
    # yum install nginx-module-geoip

    # 灰度发布

    #http自 定变量

    #基于认证信任登录  http_auth_basic_module
    #location ~ ^/admin.html {
    #    auth_base &quot;Auth access teset!input your password&quot;;
    #    auth_base_user_file /etc/nginx/auth_conf; # htpasswd -c ./auth_conf jeson
    #    root html;
    #    index index.html index.htm;
    #}
    #name:password:comment

    #limit_except GET POST {   limit_except的意思是”限制除了“也就是允许,GET已经包含HEAD,意思是限制除了GET POST外的所有谓词
    #    deny  all;
    #}

    # 1）location的匹配指令：
    # ~     #波浪线表示执行一个正则匹配，区分大小写
    # ~*    #表示执行一个正则匹配，不区分大小写
    # ^~    #^~表示普通字符匹配，不是正则匹配。如果该选项匹配，只匹配该选项，不匹配别的选项，一般用来匹配目录
    # =     #进行普通字符精确匹配
    # @     #&quot;@&quot; 定义一个命名的 location，使用在内部定向时，例如 error_page, try_files
    # 2）location 匹配的优先级(与location在配置文件中的顺序无关)
    # = 精确匹配会第一个被处理。如果发现精确匹配，nginx停止搜索其他匹配。
    # 普通字符匹配，正则表达式规则和长的块规则将被优先和查询匹配，也就是说如果该项匹配还需去看有没有正则表达式匹配和更长的匹配。
    # ^~ 则只匹配该规则，nginx停止搜索其他匹配，否则nginx会继续处理其他location指令。
    # 最后匹配理带有&quot;~&quot;和&quot;~*&quot;的指令，如果找到相应的匹配，则nginx停止搜索其他匹配；当没有正则表达式或者没有正则表达式被匹配的情况下，那么匹配程度最高的逐字匹配指令会被使用。
    #3)nginx多个if里面proxy_pass：
    #server {
    #listen 127.0.0.1:80;
    #        set $test  A;
    #        set $testB B;
    #        location / {
    #           if ($test ~* &quot;A&quot;) {
    #                 proxy_pass http://www.so.com;
    #                 break;
    #           }
    #           if ($testB ~* &quot;B&quot;) {
    #                 proxy_pass http://www.sogou.com;
    #                 #break;
    #           }
    #       }
    #}
    #希望满足某个条件的时候，走某个proxy_pass。但是如果多个if都满足，比如上例中的情况：在第一个if中没有break的时候，就会执行下面的；为了第一个匹配上之后就执行proxy_pass，可以加上break。（在nginx中貌似没有if else这样的指令）
    #4）判断参数进行不同的proxy_pass：
    #location / {
    #        root    html;
    #        index   index.html index.htm index.php;
    #        proxy_redirect      default;# off
    #        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
    #        proxy_set_header    X-Real-IP $remote_addr;
    #        proxy_set_header    Host $http_host;
    #        proxy_set_header    Connection &quot;&quot;; #close
            # proxy_hide_header
            # proxy_set_body
    #        proxy_http_version  1.1;

    #        proxy_buffers_size 32k
    #        proxy_buffering on
    #        proxy_buffers 4 128k
    #        proxy_busy_buffers_size 256k
    #        proxy_connect_timeout 30
    #        proxy_read_timeout 60
    #        proxy_send_timeout 60
    #        proxy_max_temp_file_size 256k
    # include proxy_params
    #
    #        if ( $query_string ~* &quot;usg=0&quot; ) {
    #            proxy_pass      http://local_workera;
    #        }
    #
    #        if ( $query_string ~* &quot;usg=1&quot; ) {
    #            proxy_pass      http://local_workerb;
    #        }
    #
    #        if ( $arg_uid ~* &quot;(.*[AB]$)&quot; ) {
    #            proxy_pass      http://local_workerf;
    #        }
    #
    #        proxy_pass    http://local_workera;
    #}
    # 1）请求路径中的usg=0和usg=1这两个参数是确定的，所以使用了$query_string进行正则匹配即可；（$query_string的值是请求中所有参数）
    # 2）接下来，我们想对uid的值如果是以A、B结尾的请求，转向local_workerf处理，这时候就无法用$query_string进行正则匹配了；（因为对于/?uid=1A&amp;t=1&amp;usg=1和/?uid=123&amp;t=A&amp;usg=0 不太好匹配）这时，只能用$arg_uid进行正则匹配了。
    # 3）由于usg=0和usg=2这两个参数是互斥的，所以根据上面location中if指令的逻辑，不用break也可以正确处理，且放到最上面。对于uid的匹配，由于会和usg进行冲突，所以只能放到最下面或者加break，

    #nginx中ngx_http_rewrite_module管理着配置文件中的set、if、rewrite、break、return等指令

    # 关闭errorlog问题
    # 日志文件存储在nginx安装目录下的 logs/nginx_error.log ，错误类型为 error。
    # 使用以下 off 关键字 并不能关闭日志记录功能，它将日志文件写入一个文件名为off的文件中。
    # error_log     off;
    # 如果你想关闭错误日志记录功能，应使用以下配置，她会把把错误日志写入 /dev/null
    # error_log /dev/null;

    #忽略favicon.ico日志
    #favicon.ico占用 error_log日志大量信息，把我们真正需要查看的日志给覆盖。因此这里，我们通过 log_not_found
    #off 关闭它。
    #log_not_found on|off，默认为on。
    #启用或禁用404错误日志，这个指令可以用来禁止nginx记录找不到rebots.txt或favicon.ico这类文件的错误信息
    #server {
    #    location = /favicon.ico {
    #          log_not_found     off;
    #          access_log     off;
    #    }
    #}
    #location ~ \.ico$ {
    #    log_not_found off;
    #    access_log off;
    #}

    # --with-cc-opt=-DFD_SETSIZE=1024
    # --with-pcre=objs.msvc8/lib/pcre-8.40
    # --with-zlib=objs.msvc8/lib/zlib-1.2.11
    # --with-select_module
    # --with-http_realip_module
    # --with-http_addition_module
    # --with-http_sub_module
    # --with-http_dav_module
    # --with-http_stub_status_module  服务器状态
    # --with-http_flv_module
    # --with-http_mp4_module
    # --with-http_gunzip_module   当无法支持gzip使用gunzip雅压缩
    # --with-http_gzip_static_module 预读gzip,查找.gzip文件有的话直接用
    # --with-http_auth_request_module   认证登录
    # --with-http_random_index_module   随机主页
    # --with-http_secure_link_module
    # --with-http_slice_module  大文件分片
    # --with-mail
    # --with-stream
    # --with-openssl=objs.msvc8/lib/openssl-1.0.2k
    # --with-openssl-opt=no-asm
    # --with-http_ssl_module
    # --with-mail_ssl_module
    # --with-stream_ssl_module
    # --with-ipv6

    # 缓存
    # location /test{
    # expires 24h
    # root html
    # }

    # curl -I 只用请求头
    # curl -v  http请求头响应头
    # curl -e &quot;http:www.bai.du.com&quot; -I htts://116.62.103.228/weopng  增加 http_referer

    # 防盗链
    # http_referer
    # location ~ .*\.(jpg|gif|png)$ {
    #     valid_referers none blocked 116.62.103.228 ~/google\./;
    #     if($valid_referers) {
    #         return 403;
    #     }
    #     root /opt/app/code/image;
    # }
    # secure_link_module
    # time_num=$(date -d &quot;2018-10-10 00:00:00&quot; +%s)
    # secret_num=&quot;test&quot;
    # download_file=&quot;/download/file.img&quot;

    # res=$(${time_num}${download_file}${secret_num})|openssl md5 -binary | openssl base64 | tr +/ -_ |tr -d =)



    # location / {
    #     secure_link $arg_md5.$arg_expires;
    #     secure_link_md5 &quot;$secure_link_expires$url test&quot;
    #     if($secure_link=&quot;&quot;) {
    #        return 403;
    #     }
    #     if($secure_link = &quot;0&quot;) {
    #         return 401;
    #     }
    # }





    # 设置资源下载的有效时间

    # 代理和负载均衡
    # 基于LVS的中间件架构 LVS 是 Linux Virtual Server 的简写，意即 Linux 虚拟服务器，是一个开源的负载均衡流量调度器
    # GSLB/SLB
    # 定义在server外面
    # upsteam test{
    #     least_conn  找最小链接那台服务器
    #     hash $request_uri urlhash/自定义hashkey解决代理cookies问题,和代理缓存问题
    #     ip_hash;  ip_Hash轮询,解决cookies
    #     server 116.62.103.228:8001 down; 轮询
    #     server 116.62.103.228:8002 backup;
    #     server 116.62.103.228:8001 max_fails 20;
    #     server 116.62.103.228:8001 fail_timeout 20s;
    #     server 116.62.103.228:8001 max_conns 20;
    #     server 116.62.103.228:8003 wight=5; 加权轮询
    #     server unix:/tmp/backend3; # socket
    # }
    # iptables -I INPUT -p tco --dport 8003 -j DROP  禁用8003端口访问

    # 代理缓存:缓存第三方服务器数据
    # 目录分级
    # zone空间名字
    # 最大缓存容量
    # 60分钟没使用自动删除
    # 缓存不生成临时文件夹,在更新缓存有性能损耗
    # proxy_cache_path   /opt/app/cache levels=1:2 keys_zone=test_cache:10m max_size=10g inactive=60m use_temp_path=off;
    # if($request_uri ~ ^/(url3|login|register|password\/reset)) {
    #     set $cookie_nocache 1 ;
    # }
    # location / {
    #     proxy_cache  test_cache;# off
    #     proxy_pass http://test; 负载均衡,如果返回一个服务器的说明缓存生效
    #     proxy_cache_valid  200 304 12h;  12小时失效
    #     proxy_cache_valid any 10m; 10分钟过期
    #     # proxy_cache_key $scheme$proxy_host$request_uri;
    #     proxy_cache_key $host$uri$is_args$arg;  更换维度名称
    #     add_header Nginx-cache &quot;$upsteam_cache_status&quot;; 是否命中缓存
    #     proxy_next_upstream error timeout invalid_header http_500 http_503 http_504; 不正常时跳过
    #     include proxy_params;
    #     proxy_no_cache $http_pragma $http_authorization;  指定哪些url不缓存,不为0或空
    #     proxy_no_cache $cookie_nocache $arg_nocache $arg_comment;  指定哪些url不缓存
    # }
    # 清楚指定缓存
    # ngx_cache_purge

    # 大文件分片
    # slice

    # 动静分离
  server {
    listen 80 default backlog=2048;
    listen 443 ssl;
    server_name localhost;
    client_max_body_size 1024m;  #413错误文件上传大小限制放开，有的时候后端的Web-Server提供文件上传的服务，但是如果前端使用Nginx做反向代理时，会出现文件无法上传的问题，这可能是由于Ngxin默认对客户端请求的body的限制。因为，默认情况下Nginx对客户端请求的大小限制是1m，而上传的文件往往超过1m
    # default_type application/octet-stream;这个类型会让浏览器认为响应是普通的文件流，并提示用户下载文件。
    # 502 网关出错 tomcat关掉
    # 504 网关超时
    # ab工具  yum install httpd-tools =&gt;  ab -n 200 -c 2 http://127.0.0.1 -k 是否启用长连接
    # proxy_read_timeout  180s; Nginx作为反向代理的时候，如果上游服务器处理时间过长的话，有时会返回504网关超时，从nginx的错误日志看出如果是upstream timed out，就表示是上游服务器处理时间过长，Nginx认为服务超时。Nginx在请求上游服务器时默认的超时时间为1分钟，可以通过调整proxy_read_timeout属性增加这个超时时间

    # index /vuebloger/index.html;
    # root  /test
    # 开启https
    # ssl                on; 把ssl on；这行去掉，ssl写在443端口后面。这样http和https的链接都可以用
    # ssl_certificate      D:/nginx-1.10.3/nginx-https/server.crt;
    # ssl_certificate_key  D:/nginx-1.10.3/nginx-https/server.key;
    ssl_certificate      D:/nginx-1.10.3/conf/xccjh.top/Nginx/1_xccjh.top_bundle.crt;
    ssl_certificate_key  D:/nginx-1.10.3/conf/xccjh.top/Nginx/2_xccjh.top.key;
    ssl_session_timeout  5m; # 客户端可以重用会话参数的时间（超时后不可使用）
    ssl_protocols  TLSv1.2; # 协议配置：[SSLv2] [SSLv3] [TLSv1] [TLSv1.1] [TLSv1.2] [TLSv1.3]; Default: TLSv1  TLSv1.1 TLSv1.2;
    ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP; # 加密套件配置 Default: ssl_ciphers HIGH:!aNULL:!MD5;
    # 实际测试中发现，虽然两个配置都在server 块内，ssl_protocols 却属于全局配置，而 ssl_ciphers 却针对特定的虚拟主机起作用。
    ssl_prefer_server_ciphers   on; # 是否由服务器决定采用哪种加密算法，
    # 如果ssl协议支持tlsv1 tls1.1这种老协议，设置为 on ，并配合ssl_ciphers使用，
    # 如果ssl协议只支持tlsv1.2 tlsv1.3新协议，设置为 off （nginx默认为off），因为新协议不再采纳此参数
    # keepalive_timeout 100
    ssl_session_cache shared:SSL:10m;

    # rewrite ^(.*) https://$server_name$1 permanent; # 强制跳转https,二选一即可
    # return 301    https://$host$request_uri; # 强制跳转https,二选一即可
    #
    #     location /status {
    #         stub_status;
    #     }


    # location /test {
    #     proxy_pass http://test;
    #     include proxy_params;
    # }

    # location /random {
    #     root  D:/nginx-1.10.3/random_index;
    #     random_index on;   # 随机挑选
    #     sub_filter 'test' 'xccjh'  # 替换字符串
    #     sub_filter_once off   # 全部替换
    # }

    # location / {
	# 		try_files $uri $uri/ $uri/index.html?$query_string;#$uri内置变量，匹配自定义变量@web
    # }
    # 界别最低
    #  location  ~ ^/vuebloger/(.+\.(js|css|html|png|jpg|gif|mp3|json|jpeg|moc|mtn|svg|mp4|woff2|woff|eot|ttf|webp))$ {
    #      alias   e:/vuepress-blog/docs/.vuepress/dist/$1;
    # }
    # location  ~ ^/scholar/(.+\.(js|css|html|png|jpg|gif|mp3|json|jpeg|moc|mtn|svg|mp4|woff2|woff|eot|ttf|webp))$ {
    #      alias   E:/ky-scholar-web/dist/ky-scholar-web/$1;
    #      index     index.html;
    #      try_files $uri $uri/ /scholar/index.html;
    # }


    location /scholar {
        try_files $uri $uri/ /scholar/index.html?$query_string;#$uri内置变量，匹配自定义变量@web
    }

    location ~ ^/scholar/(.+\.(js|css|html|png|jpg|gif|mp3|json|jpeg|moc|mtn|svg|mp4|woff2|woff|eot|ttf|webp))$ {
        alias     E:/ky-scholar-web/dist/ky-scholar-web/$1;
    }


     # 界别最低
    location  ~ ^/static/(.+\.(js|css|html|png|jpg|gif|mp3|json|jpeg|moc|mtn|svg|mp4|woff2|woff|eot|ttf|webp))$ {
            alias   E:/qkc/qicourse-home-web/projects/qicourse-home-web/src/assets/video/$1;
            autoindex on; # Nginx默认是不允许列出整个目录的,开启目录预览
            # add_header Content-Disposition &quot;attachment; filename=$arg_n&quot;; 以QueryString的方式带在请求中，这样可以在Nginx端，利用$arg_name变量来取到这个QueryString的值，从而重写response header：
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS , PUT, DELETE';
            add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive.X-Request-With,If-Modified-Since,Cache-Control,Content-Type';
        }

    # 错误页面
    error_page 500 502 503 504 /50x.html;
        location = /50x.html {
        root html;#root和alias区别
    }
  }
  #设定虚拟主机配置
#   server {
#     listen 8089;
#     server_name localhost;
#     client_max_body_size 1024m;
#     # 界别最低
#     location / {
# 		 try_files $uri  @web;#$uri内置变量，匹配自定义变量@web用于pass_proxy
#          #try_files $uri $notfound = 404;
#          #语法 ：try_files file ... uri;  格式2：try_files file ... =code;
#          #关键点1：按指定的file顺序查找存在的文件，并使用第一个找到的文件进行请求处理
#          #关键点2：查找路径是按照给定的root或alias为根路径来查找的
#          #关键点3：如果给出的file都没有匹配到，则重新请求最后一个参数给定的uri，就是新的location匹配
#          #关键点4：如果是格式2，如果最后一个参数是 = 404 ，若给出的file都没有匹配到，则最后返回404的响应码
#          #location /images/ {
#          #    root /opt/html/;
#          #    try_files $uri   $uri/  /images/default.gif;
#          #}
#          #比如 请求 127.0.0.1/images/test.gif 会依次查找
#          #1.文件/opt/html/images/test.gif
#          #2.文件夹 /opt/html/images/test.gif/下的index文件
#          #3.请求127.0.0.1/images/default.gif
#          #4.try-files 如果不写上 $uri/，当直接访问一个目录路径时，并不会去匹配目录下的索引页  即 访问127.0.0.1/images/ 不会去访问  127.0.0.1/images/index.html
#     }
#     # error_page code [ code... ] [ = | =answer-code ] uri | @named_location
#     # error_page 404 = @fetch;
#     # location @fetch(
#     #     proxy_pass http://fetch;
#     # )
#     # Nginx 自定义404错误页面配置中有无等号的区别
#     # error_page 404 /404.html 可显示自定义404页面内容，正常返回404状态码。
#     # error_page 404 = /404.html 可显示自定义404页面内容，但返回200状态码。
#     # error_page 404 /404.php 如果是动态404错误页面，包含 header 代码（例如301跳转），将无法正常执行。正常返回404代码。
#     # error_page 404 = /404.php 如果是动态404错误页面，包含 header 代码（例如301跳转），加等号配置可以正常执行，返回php中定义的状态码。但如果php中定义返回404状态码，404状态码可以正常返回，但无法显示自定义页面内容（出现系统默认404页面），这种情况可以考虑用410代码替代（ header(&quot;HTTP/1.1 410 Gone&quot;); 正常返回410状态码，且可正常显示自定义内容）。
#
#
#     #error_page 502 503 =200 /50x.html;
#     #location = /50x.html {
#     #    root /usr/share/nginx/html;
#     #}
#
#     # [root@localhost html]# curl &quot;localhost/test-uri?a=3&amp;b=4&quot;
#     # uri = /test-uri
#     # request_uri = /test-uri?a=3&amp;b=4
#
#
#     # 错误页面
# 	  error_page 500 502 503 504 /50x.html;
# 		location = /50x.html {
#       root html;#root和alias区别
#     }
#     # location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {
#     #     proxy_pass http://172.28.51.71:8081;
#     # }
#     # 湛江项目
#     # location  ~ ^/userconf/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/hf/userconf/WebRoot/$1;
#     # }
#     # location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/hf/itom/WebRoot/$1;
#     # }
#     location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#       alias  E:/workspace/zjgit/portal/WebRoot/$1;
#     }
#     # location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/zjgit/portal/WebRoot/$1;
#     # }
#     # location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/zjgit/itom/WebRoot/$1;
#     # }
#     # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/hf/datadefence/WebRoot/$1;
#     # }
#     # location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/hffz/efacecloud/WebRoot/$1;
#     # }
#     # location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
#     #   alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;
#     # }
#     # 湛江项目
#     location @web {
#       proxy_pass http://172.25.21.162:9080;#服务器
#       proxy_set_header Host $http_host;
#     }
#   }
  # server {
  # listen 8090;
  # server_name localhost;
  # client_max_body_size 1024m;
  # location / {
  # 		try_files $uri  @web;
  # }
  #   error_page 500 502 503 504 /50x.html;
  # 	location = /50x.html {
  #   root html;
  # }
  # 视频云基线日志
  # location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;
  # }
  # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/hf/datadefence/WebRoot/$1;
  # }
  # location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/hf/efacecloud/WebRoot/$1;
  # }
  # 代理svn
  # location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/efacestore-22624/WebRoot/$1;
  # }
  # location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/hf/portal/WebRoot/$1;
  # }
  # 视频云基线日志
  # location @web {
  #   proxy_pass http://172.25.20.80:9080;#服务器
  # }
  # 顺德1000路
  # location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/efacesurveillance-21864/WebRoot/$1;
  # }
  # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/datadefence-22445/WebRoot/$1;
  # }
  # location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/efacecloud-21401/WebRoot/$1;
  # }
  # location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/efacestore-22624/WebRoot/$1;
  # }
  # location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/sd1000/源码管理/前台模块/portal-22617/WebRoot/$1;
  # }
  # 顺德1000路
  # location @web {
  #   proxy_pass http://172.25.20.21:9080;#服务器
  # }
  # }
  server {
    listen 8091;
    server_name localhost;
    client_max_body_size 1024m;
    location / {
			try_files $uri  @web;
    }
	  error_page 500 502 503 504 /50x.html;
		location = /50x.html {
      root html;
    }
    # 换肤ui（单个匹配代理）
    # location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {
    #     proxy_pass http://172.28.51.71:8081;
    # }
    # 前端换肤开发模块（本地模块代理）
    # location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/portal/WebRoot/$1;
    # }
    # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/datadefence/WebRoot/$1;
    # }
    location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
      alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;
    }
    # location  ~ ^/videostructure/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/videostructure/WebRoot/$1;
    # }
    # location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/vehiclecloud/WebRoot/$1;
    # }
    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
      alias  E:/workspace/hf/efacecloud/WebRoot/$1;
    }
    # location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/itom/WebRoot/$1;
    # }
    # 前端换肤地址（多个匹配代理）
    # location @web {
    #   proxy_pass http://172.25.21.204:9080;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.22.54:9999;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.22.54:9080;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.20.80:9999;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.20.80:9080;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # 黄埔备用
    # location @web {
    #   proxy_pass http://172.25.21.152:9080;#服务器
    # }
    #   location   = /itom/rest/v6/device/devops {
    #         proxy_pass http://localhost:3000/itom/rest/v6/device/devops;#服务器
    #     }
    # # 佛山基线开发
     location @web {
      proxy_pass http://172.25.20.162:9999;#服务器
      proxy_set_header Host $http_host;
    }

  }
  server {
    listen 8078;
    server_name localhost;
    client_max_body_size 1024m;
    location / {
			try_files $uri  @web;
    }
	  error_page 500 502 503 504 /50x.html;
		location = /50x.html {
      root html;
    }
    # 换肤ui（单个匹配代理）
    # location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {
    #     proxy_pass http://172.28.51.71:8081;
    # }
    # 前端换肤开发模块（本地模块代理）
    # location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/portal/WebRoot/$1;
    # }
    # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/datadefence/WebRoot/$1;
    # }
    location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
      alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;
    }
    # location  ~ ^/videostructure/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/videostructure/WebRoot/$1;
    # }
    # location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/vehiclecloud/WebRoot/$1;
    # }
    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
      alias  E:/workspace/hf/efacecloud/WebRoot/$1;
    }
    # location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #   alias  E:/workspace/hf/itom/WebRoot/$1;
    # }
    # 前端换肤地址（多个匹配代理）
    location @web {
      proxy_pass http://172.25.21.204:9080;#服务器
      proxy_set_header Host $http_host;
    }
    # location @web {
    #   proxy_pass http://172.25.22.54:9999;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.22.54:9080;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.20.80:9999;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # location @web {
    #   proxy_pass http://172.25.20.80:9080;#服务器
    #   proxy_set_header Host $http_host;
    # }
    # 黄埔备用
    # location @web {
    #   proxy_pass http://172.25.21.152:9080;#服务器
    # }
    #   location   = /itom/rest/v6/device/devops {
    #         proxy_pass http://localhost:3000/itom/rest/v6/device/devops;#服务器
    #     }
    # # 佛山基线开发
    #  location @web {
    #   proxy_pass http://172.25.20.162:9999;#服务器
    #   proxy_set_header Host $http_host;
    # }

  }
  # 应急厅小屏
  # server {
  #   listen 8092;
  #   server_name localhost;
  #   client_max_body_size 1024m;
  #    location / {
  #    		try_files $uri  @web;
  #    }
  #    error_page 500 502 503 504 /50x.html;
  #    location = /50x.html {
  #      root html;
  #    }
  #   location  ~ ^/chemicalsscreen/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #     alias  E:/workspace/yjtx/WebRoot/$1;
  #   }
  #   #应急厅小屏
  #   location @web {
  #     proxy_pass http://172.25.20.147:9080;#服务器
  #   }
  #   location @web {
  #     proxy_pass http://172.28.51.50:9080;#服务器
  #   }
  # }
  # 佛山市局换肤8092
  #   server {
  #     listen 8092;
  #     server_name localhost;
  #     client_max_body_size 1024m;
  #     location / {
  # 			try_files $uri  @web;
  #     }
  # 	  error_page 500 502 503 504 /50x.html;
  # 		location = /50x.html {
  #       root html;
  #     }
  #     # 换肤ui（单个匹配代理）
  #     location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {
  #         proxy_pass http://172.28.51.71:8081;
  #     }
  #     # 日志模块
  #     location  ~ ^/logsmgr/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #       alias  E:/workspace/logsmgr/WebRoot/$1;
  #     }
  #     location  ~ ^/gzportal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #       alias  E:/workspace/gzmanagecenter/WebRoot/$1;
  #     }
  #     location  ~ ^/gzuserconf/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #       alias  E:/workspace/userconf-融合平台/WebRoot/$1;
  #     }
  #     # 市局视频云换肤（去除6大中心入口登入）
  #     location @web {
  #       proxy_pass http://172.25.20.167:8090;#服务器
  #       proxy_set_header Host $http_host;
  #       proxy_set_header X-Real-IP $remote_addr;
  #       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  #     }
  #      # 市局视频云换肤（黑色portal）
  #      location @web {
  #       proxy_pass http://172.25.20.59:8090;#服务器
  #       proxy_set_header Host $http_host;
  #       proxy_set_header X-Real-IP $remote_addr;
  #       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  #     }
  #   }
  # 佛山抗疫专区8093
  server {
      listen 8093;
      server_name localhost;
      client_max_body_size 1024m;
      location / {
        try_files $uri  @web;
      }
      error_page 500 502 503 504 /50x.html;
      location = /50x.html {
        root html;
      }
      # 疫情模块
        # location  ~ ^/epidemic/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
        #  alias  E:/workspace/fs/epidemic/WebRoot/$1;
        # }
        #location  ~ ^/efaceSyntheticAlarm/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
        #  alias  E:/workspace/fs/efaceSyntheticAlarm/WebRoot/$1;
        #}
        # location   = /itom/rest/v6/device/devops {
        #     proxy_pass http://localhost:3000/itom/rest/v6/device/devops;#服务器
        # }
        # location ~ /aa/ {
            ########
            # default_type    text/plain;
            #  return 502 '服务正在升级，请稍后再试……';
            ########
            #  set $a &quot;http://localhost:5000/aaa$request_uri&quot;;
            #  return 502 $a ;
            # proxy_pass $a;#服务器
            ########
            # rewrite /([^/]+)/aa/([^/]+) /aaa/bbb break;
            # proxy_pass http://localhost:5000;#服务器
            ########
            # if ($request_uri ~ /ccc/(.+)/(.+))  # ($http_x_forwarded_for !~* &quot;^162\.62\.103\.228&quot;)
            # {
            # set $params1 $1;
            # set $params2 $2;
            # }
            # # return 502  $params1;
            # proxy_pass http://localhost:5000/$params1/$params2;
        # }
        # 佛山市局视频云4.0代理
        #  location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
        #     alias  E:/workspace/hf/efacesurveillance/WebRoot/$1;
        # }
         location  ~ ^/res/efaceclound/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
            alias  E:/workspace/fs/efaceclound/WebRoot/$1;
        }
        # 佛山市局视频云
        #   location @web {
        #     proxy_pass http://172.25.20.162:9999;#服务器
        #     proxy_set_header Host $http_host;
        #     proxy_set_header X-Real-IP $remote_addr;
        #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        #   }
        # 佛山市局视频云131-VI平台
        location @web {
            proxy_pass http://172.25.20.12:9082;#服务器
            proxy_set_header Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        }
  # 海丰视频云
  server {
      listen 8094;
      server_name localhost;
      client_max_body_size 1024m;
      location / {
        try_files $uri  @web;
      }
      error_page 500 502 503 504 /50x.html;
      location = /50x.html {
        root html;
      }

    #   location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;
    #   }
    #   location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/efacestore/WebRoot/$1;
    #   }
    #   location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/vehiclecloud/WebRoot/$1;
    #   }
    #   location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/datadefence/WebRoot/$1;
    #   }
    #   location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/portal/WebRoot/$1;
    #   }
      location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
          alias  E:/workspace/hffz/efacesurveillance/WebRoot/$1;
      }
    #   location  ~ ^/videostructure/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/videostructure/WebRoot/$1;
    #   }
      location @web {
        proxy_pass http://172.25.21.219:9080;#服务器
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      }
    # 龙里
    #   location @web {
    #     proxy_pass http://172.25.20.127:9080;#服务器
    #     proxy_set_header Host $http_host;
    #     proxy_set_header X-Real-IP $remote_addr;
    #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #   }
    # 湛江
    # location @web {
    #   proxy_pass http://172.25.21.162:9080;#服务器
    # #   proxy_set_header Host $http_host;
    # }

  }
  # 诸城视频云
  server {
      listen 8095;
      server_name localhost;
      client_max_body_size 1024m;
      location / {
        try_files $uri  @web;
      }
      error_page 500 502 503 504 /50x.html;
      location = /50x.html {
        root html;
      }
       location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
          alias  E:/workspace/hffz/vehiclecloud/WebRoot/$1;
      }
    #    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;
    #   }
    #    location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/portal/WebRoot/$1;
    #   }

      location @web {
        proxy_pass http://172.25.21.166:9080;#服务器
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      }

  }
  # 龙里视频云
   server {
      listen 8096;
      server_name localhost;
      client_max_body_size 1024m;
      location / {
        try_files $uri  @web;
      }
      error_page 500 502 503 504 /50x.html;
      location = /50x.html {
        root html;
      }
      location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
          alias  E:/workspace/hffz/datadefence/WebRoot/$1;
      }
    #    location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/efacecloud/WebRoot/$1;
    #   }
    #    location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
    #       alias  E:/workspace/hffz/portal/WebRoot/$1;
    #   }

      location @web {
        proxy_pass http://172.25.20.127:9080;#服务器
        # proxy_set_header Host $http_host;
        # proxy_set_header X-Real-IP $remote_addr;
        # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      }

  }
  # server {
  #   listen 4200;
  #   server_name test.com;
  #   client_max_body_size 1024m;
  #   # location / {
  #   #   try_files $uri  @web;
  #   # }
  #   #  （单个匹配代理）
  #   location /api/ {
  #       proxy_pass http://172.28.110.18:3000;
  #       proxy_set_header Host $host;
  #       proxy_set_header  X-Real-IP        $remote_addr;
  #       proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;
  #       proxy_set_header X-NginX-Proxy true;
  #       rewrite ^/api/(.*)$ /$1 break;
  #   }
  # }
  # 开启第二个代理
  # server {
  #   listen 8088;
  #   server_name localhost;
  #   client_max_body_size 1024m;
  #   location / {
  #     #root G:\vscode\VBlog\blogserver\src\main\resources\static;
	# 		try_files $uri  @web;
  #   }
	#   error_page 500 502 503 504 /50x.html;
	# 	location = /50x.html {
  #     root html;
  #   }
  # ui模块
  #   location  ~ ^/ui/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/ui/WebRoot/$1;
  #   }
  # 其他模块
  #   location  ~ ^/pciviid/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/pciviid/WebRoot/$1;
  #   }
  #   location  ~ ^/pciviidservice/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/pciviidserviceBD/WebRoot/$1;
  #   }
  #   location  ~ ^/efacecloud/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/efacecloudBD/WebRoot/$1;
  #   }
  #   location  ~ ^/efaceelevator/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/efaceelevatorBD/WebRoot/$1;
  #   }
  #   location  ~ ^/efacesurveillance/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/efacesurveillanceBD/WebRoot/$1;
  #   }
  #   location  ~ ^/efacestore/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/efacestoreBD/WebRoot/$1;
  #   }
  #   location  ~ ^/vehiclecloud/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/vehiclecloudBD/WebRoot/$1;
  #   }
  #   location  ~ ^/connectplus/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/connectplusBD/WebRoot/$1;
  #   }
  #   location  ~ ^/portal/(.+\.(js|css|html|png|jpg|gif))$ {
  #    alias  E:/workspace/portalBD/WebRoot/$1;
  #   }
  #   location  ~ ^/itom/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/itom/WebRoot/$1;
  #   }
  #   location  ~ ^/suntek-flume-base/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/suntek-flume-baseBD/WebRoot/$1;
  #   }
  #   location  ~ ^/userconf/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/userconfBD/WebRoot/$1;
  #   }
  #   location  ~ ^/suntekmap/(.+\.(js|css|html|png|jpg|gif|mp4))$ {
  #     alias  E:/workspace/suntekmap/$1;
  #   }
  #   location  ~ ^/gis/(.+\.(js|css|html|png|jpg|gif|mp4))$ {
  #     alias  E:/workspace/gisBD/WebRoot/$1;
  #   }
  #   location  ~ ^/gisdemo/(.+\.(js|css|html|png|jpg|gif|mp4))$ {
  #     alias  E:/workspace/gisdemo/WebRoot/$1;
  #   }
  #   location  ~ ^/pciplayer/(.+\.(js|css|html|png|jpg|gif|mp4))$ {
  #     alias  E:/workspace/pciplayer/WebRoot/$1;
  #   }
  #   location  ~ ^/opengw/(.+\.(js|css|html|png|jpg|gif|mp4))$ {
  #     alias  E:/workspace/opengwBD/WebRoot/$1;
  #   }
  #   location  ~ ^/maserviceBD/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/maservice/WebRoot/$1;
  #   }
  #   location  ~ ^/eaplog/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/eaplog/WebRoot/$1;
  #   }
  #   location  ~ ^/eapmanageutils/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/eapmanageutilsBD/WebRoot/$1;
  #   }
  #   location  ~ ^/maversion/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/maversion/WebRoot/$1;
  #   }
  #   location  ~ ^/console/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/consoleBD/WebRoot/$1;
  #   }
  #   location  ~ ^/dbcollision/(.+\.(js|css|html|png|jpg|gif))$ {
  #     alias  E:/workspace/dbcollisionBD/WebRoot/$1;
  #   }
  # 视频云
  # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3))$ {
  #   alias  E:/workspace/datadefenceBD/WebRoot/$1;
  # }
  # 大屏应急厅第一版演示地址
  # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {
  #   alias  E:/workspace/datadefenceYJT/WebRoot/$1;
  # }
  # 大屏应急厅第二版演示地址
  # location  ~ ^/datadefence/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {
  #   alias  E:/workspace/yjt/trunk/datadefence/WebRoot/$1;
  # }
  # 视频云应急厅
  # location  ~ ^/vehiclestore/(.+\.(js|css|html|png|jpg|gif|mp3|ttf|woff|htm))$ {
  #   alias  E:\workspace\whpspy\vehiclestore\WebRoot/$1;
  # }
  # proxy_pass（代理）
   # location @web {
   #   proxy_pass http://172.28.50.46:9080;  #肖韬
   # }
   # location @web {
   #  proxy_pass http://172.25.21.156:9080;  #外籍人验证环境
   # }
   # location @web {
   #   proxy_pass http://172.28.110.96:9080;  #外籍人测试环境
   # }
   #  location @web {
   #    proxy_pass http://172.25.20.35:9080;  #省厅应急项目
   #  }
   # location @web {
   #   proxy_pass http://172.28.51.50:9080;  #桂彬省厅应急项目
   # }
   # location @web {
   #   proxy_pass http://172.25.21.152:9080;  #黄埔验证环境
   # }
   # location @web {
   #   proxy_pass http://172.28.110.95:9080;  #黄埔测试环境
   # }
   # location @web {
   #   proxy_pass http://172.28.50.166:9080;  #黄埔陆哓逸环境
   # }
  # }
}

</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br><span class="line-number">688</span><br><span class="line-number">689</span><br><span class="line-number">690</span><br><span class="line-number">691</span><br><span class="line-number">692</span><br><span class="line-number">693</span><br><span class="line-number">694</span><br><span class="line-number">695</span><br><span class="line-number">696</span><br><span class="line-number">697</span><br><span class="line-number">698</span><br><span class="line-number">699</span><br><span class="line-number">700</span><br><span class="line-number">701</span><br><span class="line-number">702</span><br><span class="line-number">703</span><br><span class="line-number">704</span><br><span class="line-number">705</span><br><span class="line-number">706</span><br><span class="line-number">707</span><br><span class="line-number">708</span><br><span class="line-number">709</span><br><span class="line-number">710</span><br><span class="line-number">711</span><br><span class="line-number">712</span><br><span class="line-number">713</span><br><span class="line-number">714</span><br><span class="line-number">715</span><br><span class="line-number">716</span><br><span class="line-number">717</span><br><span class="line-number">718</span><br><span class="line-number">719</span><br><span class="line-number">720</span><br><span class="line-number">721</span><br><span class="line-number">722</span><br><span class="line-number">723</span><br><span class="line-number">724</span><br><span class="line-number">725</span><br><span class="line-number">726</span><br><span class="line-number">727</span><br><span class="line-number">728</span><br><span class="line-number">729</span><br><span class="line-number">730</span><br><span class="line-number">731</span><br><span class="line-number">732</span><br><span class="line-number">733</span><br><span class="line-number">734</span><br><span class="line-number">735</span><br><span class="line-number">736</span><br><span class="line-number">737</span><br><span class="line-number">738</span><br><span class="line-number">739</span><br><span class="line-number">740</span><br><span class="line-number">741</span><br><span class="line-number">742</span><br><span class="line-number">743</span><br><span class="line-number">744</span><br><span class="line-number">745</span><br><span class="line-number">746</span><br><span class="line-number">747</span><br><span class="line-number">748</span><br><span class="line-number">749</span><br><span class="line-number">750</span><br><span class="line-number">751</span><br><span class="line-number">752</span><br><span class="line-number">753</span><br><span class="line-number">754</span><br><span class="line-number">755</span><br><span class="line-number">756</span><br><span class="line-number">757</span><br><span class="line-number">758</span><br><span class="line-number">759</span><br><span class="line-number">760</span><br><span class="line-number">761</span><br><span class="line-number">762</span><br><span class="line-number">763</span><br><span class="line-number">764</span><br><span class="line-number">765</span><br><span class="line-number">766</span><br><span class="line-number">767</span><br><span class="line-number">768</span><br><span class="line-number">769</span><br><span class="line-number">770</span><br><span class="line-number">771</span><br><span class="line-number">772</span><br><span class="line-number">773</span><br><span class="line-number">774</span><br><span class="line-number">775</span><br><span class="line-number">776</span><br><span class="line-number">777</span><br><span class="line-number">778</span><br><span class="line-number">779</span><br><span class="line-number">780</span><br><span class="line-number">781</span><br><span class="line-number">782</span><br><span class="line-number">783</span><br><span class="line-number">784</span><br><span class="line-number">785</span><br><span class="line-number">786</span><br><span class="line-number">787</span><br><span class="line-number">788</span><br><span class="line-number">789</span><br><span class="line-number">790</span><br><span class="line-number">791</span><br><span class="line-number">792</span><br><span class="line-number">793</span><br><span class="line-number">794</span><br><span class="line-number">795</span><br><span class="line-number">796</span><br><span class="line-number">797</span><br><span class="line-number">798</span><br><span class="line-number">799</span><br><span class="line-number">800</span><br><span class="line-number">801</span><br><span class="line-number">802</span><br><span class="line-number">803</span><br><span class="line-number">804</span><br><span class="line-number">805</span><br><span class="line-number">806</span><br><span class="line-number">807</span><br><span class="line-number">808</span><br><span class="line-number">809</span><br><span class="line-number">810</span><br><span class="line-number">811</span><br><span class="line-number">812</span><br><span class="line-number">813</span><br><span class="line-number">814</span><br><span class="line-number">815</span><br><span class="line-number">816</span><br><span class="line-number">817</span><br><span class="line-number">818</span><br><span class="line-number">819</span><br><span class="line-number">820</span><br><span class="line-number">821</span><br><span class="line-number">822</span><br><span class="line-number">823</span><br><span class="line-number">824</span><br><span class="line-number">825</span><br><span class="line-number">826</span><br><span class="line-number">827</span><br><span class="line-number">828</span><br><span class="line-number">829</span><br><span class="line-number">830</span><br><span class="line-number">831</span><br><span class="line-number">832</span><br><span class="line-number">833</span><br><span class="line-number">834</span><br><span class="line-number">835</span><br><span class="line-number">836</span><br><span class="line-number">837</span><br><span class="line-number">838</span><br><span class="line-number">839</span><br><span class="line-number">840</span><br><span class="line-number">841</span><br><span class="line-number">842</span><br><span class="line-number">843</span><br><span class="line-number">844</span><br><span class="line-number">845</span><br><span class="line-number">846</span><br><span class="line-number">847</span><br><span class="line-number">848</span><br><span class="line-number">849</span><br><span class="line-number">850</span><br><span class="line-number">851</span><br><span class="line-number">852</span><br><span class="line-number">853</span><br><span class="line-number">854</span><br><span class="line-number">855</span><br><span class="line-number">856</span><br><span class="line-number">857</span><br><span class="line-number">858</span><br><span class="line-number">859</span><br><span class="line-number">860</span><br><span class="line-number">861</span><br><span class="line-number">862</span><br><span class="line-number">863</span><br><span class="line-number">864</span><br><span class="line-number">865</span><br><span class="line-number">866</span><br><span class="line-number">867</span><br><span class="line-number">868</span><br><span class="line-number">869</span><br><span class="line-number">870</span><br><span class="line-number">871</span><br><span class="line-number">872</span><br><span class="line-number">873</span><br><span class="line-number">874</span><br><span class="line-number">875</span><br><span class="line-number">876</span><br><span class="line-number">877</span><br><span class="line-number">878</span><br><span class="line-number">879</span><br><span class="line-number">880</span><br><span class="line-number">881</span><br><span class="line-number">882</span><br><span class="line-number">883</span><br><span class="line-number">884</span><br><span class="line-number">885</span><br><span class="line-number">886</span><br><span class="line-number">887</span><br><span class="line-number">888</span><br><span class="line-number">889</span><br><span class="line-number">890</span><br><span class="line-number">891</span><br><span class="line-number">892</span><br><span class="line-number">893</span><br><span class="line-number">894</span><br><span class="line-number">895</span><br><span class="line-number">896</span><br><span class="line-number">897</span><br><span class="line-number">898</span><br><span class="line-number">899</span><br><span class="line-number">900</span><br><span class="line-number">901</span><br><span class="line-number">902</span><br><span class="line-number">903</span><br><span class="line-number">904</span><br><span class="line-number">905</span><br><span class="line-number">906</span><br><span class="line-number">907</span><br><span class="line-number">908</span><br><span class="line-number">909</span><br><span class="line-number">910</span><br><span class="line-number">911</span><br><span class="line-number">912</span><br><span class="line-number">913</span><br><span class="line-number">914</span><br><span class="line-number">915</span><br><span class="line-number">916</span><br><span class="line-number">917</span><br><span class="line-number">918</span><br><span class="line-number">919</span><br><span class="line-number">920</span><br><span class="line-number">921</span><br><span class="line-number">922</span><br><span class="line-number">923</span><br><span class="line-number">924</span><br><span class="line-number">925</span><br><span class="line-number">926</span><br><span class="line-number">927</span><br><span class="line-number">928</span><br><span class="line-number">929</span><br><span class="line-number">930</span><br><span class="line-number">931</span><br><span class="line-number">932</span><br><span class="line-number">933</span><br><span class="line-number">934</span><br><span class="line-number">935</span><br><span class="line-number">936</span><br><span class="line-number">937</span><br><span class="line-number">938</span><br><span class="line-number">939</span><br><span class="line-number">940</span><br><span class="line-number">941</span><br><span class="line-number">942</span><br><span class="line-number">943</span><br><span class="line-number">944</span><br><span class="line-number">945</span><br><span class="line-number">946</span><br><span class="line-number">947</span><br><span class="line-number">948</span><br><span class="line-number">949</span><br><span class="line-number">950</span><br><span class="line-number">951</span><br><span class="line-number">952</span><br><span class="line-number">953</span><br><span class="line-number">954</span><br><span class="line-number">955</span><br><span class="line-number">956</span><br><span class="line-number">957</span><br><span class="line-number">958</span><br><span class="line-number">959</span><br><span class="line-number">960</span><br><span class="line-number">961</span><br><span class="line-number">962</span><br><span class="line-number">963</span><br><span class="line-number">964</span><br><span class="line-number">965</span><br><span class="line-number">966</span><br><span class="line-number">967</span><br><span class="line-number">968</span><br><span class="line-number">969</span><br><span class="line-number">970</span><br><span class="line-number">971</span><br><span class="line-number">972</span><br><span class="line-number">973</span><br><span class="line-number">974</span><br><span class="line-number">975</span><br><span class="line-number">976</span><br><span class="line-number">977</span><br><span class="line-number">978</span><br><span class="line-number">979</span><br><span class="line-number">980</span><br><span class="line-number">981</span><br><span class="line-number">982</span><br><span class="line-number">983</span><br><span class="line-number">984</span><br><span class="line-number">985</span><br><span class="line-number">986</span><br><span class="line-number">987</span><br><span class="line-number">988</span><br><span class="line-number">989</span><br><span class="line-number">990</span><br><span class="line-number">991</span><br><span class="line-number">992</span><br><span class="line-number">993</span><br><span class="line-number">994</span><br><span class="line-number">995</span><br><span class="line-number">996</span><br><span class="line-number">997</span><br><span class="line-number">998</span><br><span class="line-number">999</span><br><span class="line-number">1000</span><br><span class="line-number">1001</span><br><span class="line-number">1002</span><br><span class="line-number">1003</span><br><span class="line-number">1004</span><br><span class="line-number">1005</span><br><span class="line-number">1006</span><br><span class="line-number">1007</span><br><span class="line-number">1008</span><br><span class="line-number">1009</span><br><span class="line-number">1010</span><br><span class="line-number">1011</span><br><span class="line-number">1012</span><br><span class="line-number">1013</span><br><span class="line-number">1014</span><br><span class="line-number">1015</span><br><span class="line-number">1016</span><br><span class="line-number">1017</span><br><span class="line-number">1018</span><br><span class="line-number">1019</span><br><span class="line-number">1020</span><br><span class="line-number">1021</span><br><span class="line-number">1022</span><br><span class="line-number">1023</span><br><span class="line-number">1024</span><br><span class="line-number">1025</span><br><span class="line-number">1026</span><br><span class="line-number">1027</span><br><span class="line-number">1028</span><br><span class="line-number">1029</span><br><span class="line-number">1030</span><br><span class="line-number">1031</span><br><span class="line-number">1032</span><br><span class="line-number">1033</span><br><span class="line-number">1034</span><br><span class="line-number">1035</span><br><span class="line-number">1036</span><br><span class="line-number">1037</span><br><span class="line-number">1038</span><br><span class="line-number">1039</span><br><span class="line-number">1040</span><br><span class="line-number">1041</span><br><span class="line-number">1042</span><br><span class="line-number">1043</span><br><span class="line-number">1044</span><br><span class="line-number">1045</span><br><span class="line-number">1046</span><br><span class="line-number">1047</span><br><span class="line-number">1048</span><br><span class="line-number">1049</span><br><span class="line-number">1050</span><br><span class="line-number">1051</span><br><span class="line-number">1052</span><br><span class="line-number">1053</span><br><span class="line-number">1054</span><br><span class="line-number">1055</span><br><span class="line-number">1056</span><br><span class="line-number">1057</span><br><span class="line-number">1058</span><br><span class="line-number">1059</span><br><span class="line-number">1060</span><br><span class="line-number">1061</span><br><span class="line-number">1062</span><br><span class="line-number">1063</span><br><span class="line-number">1064</span><br><span class="line-number">1065</span><br><span class="line-number">1066</span><br><span class="line-number">1067</span><br><span class="line-number">1068</span><br><span class="line-number">1069</span><br><span class="line-number">1070</span><br><span class="line-number">1071</span><br><span class="line-number">1072</span><br><span class="line-number">1073</span><br><span class="line-number">1074</span><br><span class="line-number">1075</span><br><span class="line-number">1076</span><br><span class="line-number">1077</span><br><span class="line-number">1078</span><br><span class="line-number">1079</span><br><span class="line-number">1080</span><br><span class="line-number">1081</span><br><span class="line-number">1082</span><br><span class="line-number">1083</span><br><span class="line-number">1084</span><br><span class="line-number">1085</span><br><span class="line-number">1086</span><br><span class="line-number">1087</span><br><span class="line-number">1088</span><br><span class="line-number">1089</span><br><span class="line-number">1090</span><br><span class="line-number">1091</span><br><span class="line-number">1092</span><br><span class="line-number">1093</span><br><span class="line-number">1094</span><br><span class="line-number">1095</span><br><span class="line-number">1096</span><br><span class="line-number">1097</span><br><span class="line-number">1098</span><br><span class="line-number">1099</span><br><span class="line-number">1100</span><br><span class="line-number">1101</span><br><span class="line-number">1102</span><br><span class="line-number">1103</span><br><span class="line-number">1104</span><br><span class="line-number">1105</span><br><span class="line-number">1106</span><br><span class="line-number">1107</span><br><span class="line-number">1108</span><br><span class="line-number">1109</span><br><span class="line-number">1110</span><br><span class="line-number">1111</span><br><span class="line-number">1112</span><br><span class="line-number">1113</span><br><span class="line-number">1114</span><br><span class="line-number">1115</span><br><span class="line-number">1116</span><br><span class="line-number">1117</span><br><span class="line-number">1118</span><br><span class="line-number">1119</span><br><span class="line-number">1120</span><br><span class="line-number">1121</span><br><span class="line-number">1122</span><br><span class="line-number">1123</span><br><span class="line-number">1124</span><br><span class="line-number">1125</span><br><span class="line-number">1126</span><br><span class="line-number">1127</span><br><span class="line-number">1128</span><br><span class="line-number">1129</span><br><span class="line-number">1130</span><br><span class="line-number">1131</span><br><span class="line-number">1132</span><br><span class="line-number">1133</span><br><span class="line-number">1134</span><br><span class="line-number">1135</span><br><span class="line-number">1136</span><br><span class="line-number">1137</span><br><span class="line-number">1138</span><br><span class="line-number">1139</span><br><span class="line-number">1140</span><br><span class="line-number">1141</span><br><span class="line-number">1142</span><br><span class="line-number">1143</span><br><span class="line-number">1144</span><br><span class="line-number">1145</span><br><span class="line-number">1146</span><br><span class="line-number">1147</span><br><span class="line-number">1148</span><br><span class="line-number">1149</span><br><span class="line-number">1150</span><br><span class="line-number">1151</span><br><span class="line-number">1152</span><br><span class="line-number">1153</span><br><span class="line-number">1154</span><br><span class="line-number">1155</span><br><span class="line-number">1156</span><br><span class="line-number">1157</span><br><span class="line-number">1158</span><br></div></div><h2 id="nginx-restart-sh"><a href="#nginx-restart-sh" class="header-anchor">#</a> nginx-restart-sh</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>taskkill /f /t /im nginx.exe
start nginx.exe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="mongdb配置"><a href="#mongdb配置" class="header-anchor">#</a> mongdb配置</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>C:\Program Files\MongoDB\Server\3.2\bin
mongod --config c:\MongoDB\etc\mongo.conf --remove
mongod --config c:\MongoDB\etc\mongo.conf --install --serviceName &quot;MongoDB&quot;
mongod --dbpath c:\MongoDB\data
mongod --dbpath c:\MongoDB\data --logpath c:\MongoDB\log\mongo.log  --journal
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="hexo常用指令"><a href="#hexo常用指令" class="header-anchor">#</a> hexo常用指令</h2> <p><a href="http://xccjh.gitee.io/mrzou-blogger/2020/03/28/hexo%E5%86%99%E4%BD%9C%E6%8A%80%E5%B7%A7%E9%9B%86%E9%94%A6/" target="_blank" rel="noopener noreferrer">hexo写作技巧集锦<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 启动本地服务器</span>
hexo s hexo server 前台
hexo server -d 后台
hexo s -p <span class="token number">5000</span> 指定端口
<span class="token comment"># 豆瓣信息爬取</span>
 hexo clean <span class="token operator">&amp;&amp;</span> hexo douban -bgm <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s
<span class="token comment"># 创建页面</span>
hexo n <span class="token string">&quot;文章名字（可以是中文）&quot;</span>
<span class="token comment"># 生成html静态文件</span>
hexo g <span class="token operator">==</span> hexo generate
<span class="token comment"># 清除缓存文件 (db.json) 和已生成的静态文件 (public)。</span>
hexo clean
<span class="token comment"># 发布到git</span>
hexo d <span class="token operator">==</span> hexo deploy  部署
<span class="token comment"># 生成并发布</span>
hexo g -d
<span class="token comment"># 卸载Hexo</span>
<span class="token function">npm</span> uninstall hexo-cli -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="js片段"><a href="#js片段" class="header-anchor">#</a> js片段</h2> <h3 id="兼容性滚动条"><a href="#兼容性滚动条" class="header-anchor">#</a> 兼容性滚动条</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="将超出行数的部分-变成"><a href="#将超出行数的部分-变成" class="header-anchor">#</a> 将超出行数的部分 变成 ...</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token punctuation">.</span>line2 <span class="token punctuation">{</span>
        display<span class="token operator">:</span> <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token punctuation">;</span>
        overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span>
        white<span class="token operator">-</span>space<span class="token operator">:</span> normal<span class="token operator">!</span>important<span class="token punctuation">;</span>
        text<span class="token operator">-</span>overflow<span class="token operator">:</span> ellipsis<span class="token punctuation">;</span>
        word<span class="token operator">-</span>wrap<span class="token operator">:</span> <span class="token keyword">break</span><span class="token operator">-</span>word<span class="token punctuation">;</span>
        <span class="token operator">-</span>webkit<span class="token operator">-</span>line<span class="token operator">-</span>clamp<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token operator">-</span>orient<span class="token operator">:</span> vertical
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="bootstrap-屏幕宽度种类"><a href="#bootstrap-屏幕宽度种类" class="header-anchor">#</a> bootstrap 屏幕宽度种类</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">whatScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> width <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">&lt;=</span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;极小屏幕-&quot;</span> <span class="token operator">+</span> width<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">&gt;</span> <span class="token number">768</span> <span class="token operator">&amp;&amp;</span> width <span class="token operator">&lt;=</span> <span class="token number">992</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;小屏幕-&quot;</span> <span class="token operator">+</span> width<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">&gt;</span> <span class="token number">992</span> <span class="token operator">&amp;&amp;</span> width <span class="token operator">&lt;=</span> <span class="token number">1200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;普通屏幕-&quot;</span> <span class="token operator">+</span> width<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>width <span class="token operator">&gt;</span> <span class="token number">1200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;大屏幕-&quot;</span> <span class="token operator">+</span> width<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>​</p> <h3 id="自定义dom事件"><a href="#自定义dom事件" class="header-anchor">#</a> 自定义dom事件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>      <span class="token keyword">var</span> evt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">&quot;HTMLEvents&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 初始化，事件类型，是否冒泡，是否阻止浏览器的默认行为</span>
      evt<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span><span class="token string">&quot;tap&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 触发</span>
      div<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="设置rem"><a href="#设置rem" class="header-anchor">#</a> 设置rem</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>      <span class="token keyword">function</span> <span class="token function">setHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 基础值</span>
        <span class="token keyword">var</span> baseVal <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token comment">// 设计稿的宽度</span>
        <span class="token keyword">var</span> pageWidth <span class="token operator">=</span> <span class="token number">375</span><span class="token punctuation">;</span>
        <span class="token comment">// 要适配的屏幕的宽度?</span>
        <span class="token keyword">var</span> screenWidth <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
        <span class="token comment">// 要设置的fontsize</span>
        <span class="token keyword">var</span> fontsize <span class="token operator">=</span> screenWidth <span class="token operator">*</span> baseVal <span class="token operator">/</span> pageWidth<span class="token punctuation">;</span>
        <span class="token comment">// 设置到html标签的中</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> fontsize <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="zepto设置拦截器"><a href="#zepto设置拦截器" class="header-anchor">#</a> zepto设置拦截器</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>beforeSend会在发送请求之前被调用

      $<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function-variable function">beforeSend</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>url <span class="token operator">=</span> baseUrl  <span class="token operator">+</span> obj<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

complete 会在请求结束后被调用

      $<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="扩展zepto方法"><a href="#扩展zepto方法" class="header-anchor">#</a> 扩展zepto方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//为 $ 对象增加自定义方法 如 可以这样使用 $.show();</span>
      $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>$<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;waitting&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="页面开启摄像头"><a href="#页面开启摄像头" class="header-anchor">#</a> 页面开启摄像头</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>video src<span class="token operator">=</span><span class="token string">&quot;&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;600&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;600&quot;</span> autoplay controls<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>video<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">var</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;video&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        navigator<span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          video<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          video<span class="token punctuation">.</span>src <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="使用node删除typora中多余的图片"><a href="#使用node删除typora中多余的图片" class="header-anchor">#</a> 使用node删除typora中多余的图片</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// process.argv</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">dImgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
默认是当前路径的 meidas文件夹
默认是当前路径的所有的md 文件
*/</span>
<span class="token keyword">function</span> <span class="token function">dImgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
    1 获取medias里面所有的图片 =&gt;[]
    2 将图片数组和md中的图片引用对比，发现循环后不存在的数组，再开始循环删除
    */</span>

    <span class="token keyword">let</span> dirName <span class="token operator">=</span> <span class="token string">&quot;medias&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">//  图片文件名称数组 =  要删除的图片的数组</span>
    <span class="token keyword">let</span> imgArrNames <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dirName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(imgArrNames22);</span>
    <span class="token comment">// 获取目录下的所有md文件名称</span>
    <span class="token keyword">let</span> mdNames <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;.md&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;源图片的长度：&quot;</span> <span class="token operator">+</span> imgArrNames<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mdNames<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// v 是每一个md文件的名称</span>
        <span class="token comment">// 获取md文件字符串</span>
        <span class="token keyword">let</span> mdContent <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 循环里面不要修改源数组的长度</span>
        <span class="token comment">// 要保留的图片名数组</span>
        <span class="token keyword">let</span> saveImgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        imgArrNames<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">vImg<span class="token punctuation">,</span> iImg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mdContent<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>vImg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// vImg 为不需要删除的文件</span>
            saveImgs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        saveImgs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 修改上一个要循环的图片</span>
            <span class="token keyword">let</span> deI <span class="token operator">=</span> imgArrNames<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>deI <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            imgArrNames<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>deI<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 循环删除</span>
    <span class="token keyword">let</span> deIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    imgArrNames<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dirName<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除的图片的名称&quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    deIndex<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功&quot;</span> <span class="token operator">+</span> deIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="vagrant一键创建带docker虚机"><a href="#vagrant一键创建带docker虚机" class="header-anchor">#</a> vagrant一键创建带docker虚机</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
  config.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7&quot;</span>
  config.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
    <span class="token function">sudo</span> yum remove docker <span class="token punctuation">\</span>
    docker-client <span class="token punctuation">\</span>
    docker-client-latest <span class="token punctuation">\</span>
    docker-common <span class="token punctuation">\</span>
    docker-latest <span class="token punctuation">\</span>
    docker-latest-logrotate <span class="token punctuation">\</span>
    docker-logrotate <span class="token punctuation">\</span>
    docker-engine
    <span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils <span class="token punctuation">\</span>
    device-mapper-persistent-data <span class="token punctuation">\</span>
    lvm2
    <span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
    <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
    <span class="token function">sudo</span> systemctl start docker
  <span class="token environment constant">SHELL</span>
end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="vagrant一键开启两台以上虚机"><a href="#vagrant一键开启两台以上虚机" class="header-anchor">#</a> vagrant一键开启两台以上虚机</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Vagrant.require_version <span class="token string">&quot;&gt;= 1.6.0&quot;</span>
boxes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        :name <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;docker-host&quot;</span>,
        :eth1 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;172.28.111.10&quot;</span>,
        :mem <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;1024&quot;</span>,
        :cpu <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;1&quot;</span>,
        :username <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;vagrant&quot;</span>,
        :password <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;vagrant&quot;</span>
    <span class="token punctuation">}</span>,
     <span class="token punctuation">{</span>
        :name <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;docker-node2&quot;</span>,
        :eth1 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;172.28.112.10&quot;</span>,
        :mem <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;1024&quot;</span>,
        :cpu <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;1&quot;</span>,
        :username <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;vagrant&quot;</span>,
        :password <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;vagrant&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
Vagrant.configure<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
  config.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7&quot;</span>
  boxes.each <span class="token keyword">do</span> <span class="token operator">|</span>opts<span class="token operator">|</span>
    config.vm.define opts<span class="token punctuation">[</span>:name<span class="token punctuation">]</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
        config.vm.hostname <span class="token operator">=</span> opts<span class="token punctuation">[</span>:name<span class="token punctuation">]</span>
        config.ssh.username <span class="token operator">=</span> opts<span class="token punctuation">[</span>:username<span class="token punctuation">]</span>
        config.ssh.password <span class="token operator">=</span> opts<span class="token punctuation">[</span>:password<span class="token punctuation">]</span>
        config.ssh.insert_key <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token comment">#config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 80</span>
        <span class="token comment">#config.vm.network &quot;forwarded_port&quot;, guest: 443, host: 443</span>
        <span class="token comment">#config.vm.network &quot;forwarded_port&quot;, guest: 3306, host: 3306</span>
      config.vm.provider <span class="token string">&quot;vmware_fusion&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
        v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> opts<span class="token punctuation">[</span>:mem<span class="token punctuation">]</span>
        v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> opts<span class="token punctuation">[</span>:cpu<span class="token punctuation">]</span>
      end
      config.vm.provider <span class="token string">&quot;virtualbox&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
        v.customize <span class="token punctuation">[</span><span class="token string">&quot;modifyvm&quot;</span>, :id, <span class="token string">&quot;--memory&quot;</span>, opts<span class="token punctuation">[</span>:mem<span class="token punctuation">]</span><span class="token punctuation">]</span>
        v.customize <span class="token punctuation">[</span><span class="token string">&quot;modifyvm&quot;</span>, :id, <span class="token string">&quot;--cpus&quot;</span>, opts<span class="token punctuation">[</span>:cpu<span class="token punctuation">]</span><span class="token punctuation">]</span>
      end
      config.vm.network :private_network, ip: opts<span class="token punctuation">[</span>:eth1<span class="token punctuation">]</span>
    end
  end
      config.vm.synced_folder <span class="token string">'.'</span>, <span class="token string">'/vagrant'</span>, disabled: <span class="token boolean">true</span>
      config.vm.synced_folder <span class="token string">&quot;F:/testvagrant/labs&quot;</span>, <span class="token string">&quot;/home/labs&quot;</span>
      <span class="token comment">#config.vm.provision &quot;shell&quot;, privileged: true, path: &quot;./setup.sh&quot;</span>
end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="单应用angular-json样例"><a href="#单应用angular-json样例" class="header-anchor">#</a> 单应用angular.json样例</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/@angular/cli/lib/config/schema.json&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">&quot;newProjectRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;projects&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;ky-scholar-web&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;projectType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;schematics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;@schematics/angular:component&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;less&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&quot;root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;sourceRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;architect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:browser&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;outputPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/ky-scholar-web&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/index.html&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/main.ts&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;polyfills&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/polyfills.ts&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;tsConfig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsconfig.app.json&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;aot&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token string">&quot;stylePreprocessorOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;includePaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;./src/style/&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;node_modules/&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;src/favicon.ico&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;src/assets&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                <span class="token string">&quot;glob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;**/*&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;input&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/@ant-design/icons-angular/src/inline-svg/&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;output&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/assets/&quot;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;styles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;node_modules/videogular2/fonts/videogular.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;node_modules/viewerjs/dist/viewer.min.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;node_modules/ng-zorro-antd/ng-zorro-antd.min.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.core.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.bubble.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.snow.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;src/styles.less&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.min.js&quot;</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;fileReplacements&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;replace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.ts&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;with&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.prod.ts&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token string">&quot;optimization&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;outputHashing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractCss&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;namedChunks&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractLicenses&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;vendorChunk&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;buildOptimizer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;budgets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4mb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5mb&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;anyComponentStyle&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6kb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10kb&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;fileReplacements&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;replace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.ts&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;with&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.test.ts&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token string">&quot;optimization&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;outputHashing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractCss&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;namedChunks&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractLicenses&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;vendorChunk&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;buildOptimizer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;budgets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4mb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5mb&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;anyComponentStyle&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6kb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10kb&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;intranet&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;fileReplacements&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;replace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.ts&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;with&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/environments/environment.intranet.ts&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token string">&quot;optimization&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;outputHashing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractCss&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;namedChunks&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;extractLicenses&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;vendorChunk&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token string">&quot;buildOptimizer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token string">&quot;budgets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4mb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5mb&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;anyComponentStyle&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumWarning&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6kb&quot;</span><span class="token punctuation">,</span>
                  <span class="token string">&quot;maximumError&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10kb&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:dev-server&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;disableHostCheck&quot;</span><span class="token operator">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string">&quot;proxyConfig&quot;</span><span class="token operator">:</span><span class="token string">&quot;proxyConfig.json&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;browserTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web:build&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">4500</span><span class="token punctuation">,</span>
            <span class="token string">&quot;open&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;ssl&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token string">&quot;sslKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./private.key&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;sslCert&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./file.crt&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;browserTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web:build:production&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;extract-i18n&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:extract-i18n&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;browserTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web:build&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:karma&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/test.ts&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;polyfills&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/polyfills.ts&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;tsConfig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsconfig.spec.json&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;karmaConfig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma.conf.js&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;stylePreprocessorOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;includePaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;./src/style/&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;node_modules/&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;src/favicon.ico&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;src/assets&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;styles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;node_modules/videogular2/fonts/videogular.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;node_modules/viewerjs/dist/viewer.min.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;node_modules/ng-zorro-antd/ng-zorro-antd.min.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.core.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.bubble.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.snow.css&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;src/styles.less&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;./node_modules/quill/dist/quill.min.js&quot;</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:tslint&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;tsConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;tsconfig.app.json&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;tsconfig.spec.json&quot;</span><span class="token punctuation">,</span>
              <span class="token string">&quot;e2e/tsconfig.json&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;**/node_modules/**&quot;</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;e2e&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:protractor&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;protractorConfig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e2e/protractor.conf.js&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;devServerTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web:serve&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token string">&quot;devServerTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web:serve:production&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;defaultProject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ky-scholar-web&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;cli&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;analytics&quot;</span><span class="token operator">:</span> <span class="token string">&quot;74566f8d-1c6f-48f9-9307-eb998d2f74d1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br></div></div><h2 id="多应用angular-json样例"><a href="#多应用angular-json样例" class="header-anchor">#</a> 多应用angular.json样例</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;$schema&quot;: &quot;./node_modules/@angular/cli/lib/config/schema.json&quot;,
  &quot;version&quot;: 1,
  &quot;newProjectRoot&quot;: &quot;projects&quot;,
  &quot;projects&quot;: {
    &quot;collage-manage-web&quot;: {
      &quot;projectType&quot;: &quot;application&quot;,
      &quot;schematics&quot;: {
        &quot;@schematics/angular:component&quot;: {
          &quot;style&quot;: &quot;less&quot;
        }
      },
      &quot;root&quot;: &quot;projects/collage-manage-web&quot;,
      &quot;sourceRoot&quot;: &quot;projects/collage-manage-web/src&quot;,
      &quot;prefix&quot;: &quot;app&quot;,
      &quot;architect&quot;: {
        &quot;build&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:browser&quot;,
          &quot;options&quot;: {
            &quot;outputPath&quot;: &quot;dist/collage-manage-web&quot;,
            &quot;index&quot;: &quot;projects/collage-manage-web/src/index.html&quot;,
            &quot;main&quot;: &quot;projects/collage-manage-web/src/main.ts&quot;,
            &quot;polyfills&quot;: &quot;projects/collage-manage-web/src/polyfills.ts&quot;,
            &quot;tsConfig&quot;: &quot;projects/collage-manage-web/tsconfig.app.json&quot;,
            &quot;aot&quot;: true,
            &quot;assets&quot;: [
              &quot;projects/collage-manage-web/src/favicon.ico&quot;,
              &quot;projects/collage-manage-web/src/assets&quot;,
              {
                &quot;glob&quot;: &quot;**/*&quot;,
                &quot;input&quot;: &quot;node_modules/@ant-design/icons-angular/src/inline-svg/&quot;,
                &quot;output&quot;: &quot;/assets/&quot;
              }
            ],
            &quot;styles&quot;: [
              &quot;node_modules/videogular2/fonts/videogular.css&quot;,
              &quot;node_modules/viewerjs/dist/viewer.min.css&quot;,
              &quot;node_modules/ng-zorro-antd/ng-zorro-antd.min.css&quot;,
              &quot;./node_modules/quill/dist/quill.core.css&quot;,
              &quot;./node_modules/quill/dist/quill.bubble.css&quot;,
              &quot;./node_modules/quill/dist/quill.snow.css&quot;,
              &quot;projects/collage-manage-web/src/styles.less&quot;
            ],
            &quot;scripts&quot;: [
              &quot;./node_modules/quill/dist/quill.min.js&quot;
            ]
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;environments-common/environment.ts&quot;,
                  &quot;with&quot;: &quot;environments-common/environment.prod.ts&quot;
                }
              ],
              &quot;optimization&quot;: true,
              &quot;outputHashing&quot;: &quot;all&quot;,
              &quot;sourceMap&quot;: false,
              &quot;extractCss&quot;: true,
              &quot;namedChunks&quot;: false,
              &quot;extractLicenses&quot;: true,
              &quot;vendorChunk&quot;: false,
              &quot;buildOptimizer&quot;: true,
              &quot;budgets&quot;: [
                {
                  &quot;type&quot;: &quot;initial&quot;,
                  &quot;maximumWarning&quot;: &quot;2mb&quot;,
                  &quot;maximumError&quot;: &quot;5mb&quot;
                },
                {
                  &quot;type&quot;: &quot;anyComponentStyle&quot;,
                  &quot;maximumWarning&quot;: &quot;6kb&quot;
                }
              ]
            },
            &quot;test&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;environments-common/environment.ts&quot;,
                  &quot;with&quot;: &quot;environments-common/environment.test.ts&quot;
                }
              ],
              &quot;optimization&quot;: true,
              &quot;outputHashing&quot;: &quot;all&quot;,
              &quot;sourceMap&quot;: false,
              &quot;extractCss&quot;: true,
              &quot;namedChunks&quot;: false,
              &quot;extractLicenses&quot;: true,
              &quot;vendorChunk&quot;: false,
              &quot;buildOptimizer&quot;: true,
              &quot;budgets&quot;: [
                {
                  &quot;type&quot;: &quot;initial&quot;,
                  &quot;maximumWarning&quot;: &quot;2mb&quot;,
                  &quot;maximumError&quot;: &quot;5mb&quot;
                },
                {
                  &quot;type&quot;: &quot;anyComponentStyle&quot;,
                  &quot;maximumWarning&quot;: &quot;6kb&quot;
                }
              ]
            }
          }
        },
        &quot;serve&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:dev-server&quot;,
          &quot;options&quot;: {
            &quot;browserTarget&quot;: &quot;collage-manage-web:build&quot;
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;browserTarget&quot;: &quot;collage-manage-web:build:production&quot;
            }
          }
        },
        &quot;extract-i18n&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:extract-i18n&quot;,
          &quot;options&quot;: {
            &quot;browserTarget&quot;: &quot;collage-manage-web:build&quot;
          }
        },
        &quot;test&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:karma&quot;,
          &quot;options&quot;: {
            &quot;main&quot;: &quot;projects/collage-manage-web/src/test.ts&quot;,
            &quot;polyfills&quot;: &quot;projects/collage-manage-web/src/polyfills.ts&quot;,
            &quot;tsConfig&quot;: &quot;projects/collage-manage-web/tsconfig.spec.json&quot;,
            &quot;karmaConfig&quot;: &quot;projects/collage-manage-web/karma.conf.js&quot;,
            &quot;assets&quot;: [
              &quot;projects/collage-manage-web/src/favicon.ico&quot;,
              &quot;projects/collage-manage-web/src/assets&quot;
            ],
            &quot;styles&quot;: [
              &quot;projects/collage-manage-web/src/styles.less&quot;
            ],
            &quot;scripts&quot;: []
          }
        },
        &quot;lint&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:tslint&quot;,
          &quot;options&quot;: {
            &quot;tsConfig&quot;: [
              &quot;projects/collage-manage-web/tsconfig.app.json&quot;,
              &quot;projects/collage-manage-web/tsconfig.spec.json&quot;,
              &quot;projects/collage-manage-web/e2e/tsconfig.json&quot;
            ],
            &quot;exclude&quot;: [
              &quot;**/node_modules/**&quot;
            ]
          }
        },
        &quot;e2e&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:protractor&quot;,
          &quot;options&quot;: {
            &quot;protractorConfig&quot;: &quot;projects/collage-manage-web/e2e/protractor.conf.js&quot;,
            &quot;devServerTarget&quot;: &quot;collage-manage-web:serve&quot;
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;devServerTarget&quot;: &quot;collage-manage-web:serve:production&quot;
            }
          }
        }
      }
    },
    &quot;qkc-manage-web&quot;: {
      &quot;projectType&quot;: &quot;application&quot;,
      &quot;schematics&quot;: {
        &quot;@schematics/angular:component&quot;: {
          &quot;style&quot;: &quot;less&quot;
        }
      },
      &quot;root&quot;: &quot;projects/qkc-manage-web&quot;,
      &quot;sourceRoot&quot;: &quot;projects/qkc-manage-web/src&quot;,
      &quot;prefix&quot;: &quot;app&quot;,
      &quot;architect&quot;: {
        &quot;build&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:browser&quot;,
          &quot;options&quot;: {
            &quot;outputPath&quot;: &quot;dist/qkc-manage-web&quot;,
            &quot;index&quot;: &quot;projects/qkc-manage-web/src/index.html&quot;,
            &quot;main&quot;: &quot;projects/qkc-manage-web/src/main.ts&quot;,
            &quot;polyfills&quot;: &quot;projects/qkc-manage-web/src/polyfills.ts&quot;,
            &quot;tsConfig&quot;: &quot;projects/qkc-manage-web/tsconfig.app.json&quot;,
            &quot;aot&quot;: true,
            &quot;assets&quot;: [
              &quot;projects/qkc-manage-web/src/favicon.ico&quot;,
              &quot;projects/qkc-manage-web/src/assets&quot;,
              {
                &quot;glob&quot;: &quot;**/*&quot;,
                &quot;input&quot;: &quot;node_modules/@ant-design/icons-angular/src/inline-svg/&quot;,
                &quot;output&quot;: &quot;/assets/&quot;
              }
            ],
            &quot;styles&quot;: [
              &quot;node_modules/videogular2/fonts/videogular.css&quot;,
              &quot;node_modules/viewerjs/dist/viewer.min.css&quot;,
              &quot;node_modules/ng-zorro-antd/ng-zorro-antd.min.css&quot;,
              &quot;./node_modules/quill/dist/quill.core.css&quot;,
              &quot;./node_modules/quill/dist/quill.bubble.css&quot;,
              &quot;./node_modules/quill/dist/quill.snow.css&quot;,
              &quot;projects/qkc-manage-web/src/styles.less&quot;
            ],
            &quot;scripts&quot;: [
              &quot;./node_modules/quill/dist/quill.min.js&quot;
            ]
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;environments-common/environment.ts&quot;,
                  &quot;with&quot;: &quot;environments-common/environment.prod.ts&quot;
                }
              ],
              &quot;optimization&quot;: true,
              &quot;outputHashing&quot;: &quot;all&quot;,
              &quot;sourceMap&quot;: false,
              &quot;extractCss&quot;: true,
              &quot;namedChunks&quot;: false,
              &quot;extractLicenses&quot;: true,
              &quot;vendorChunk&quot;: false,
              &quot;buildOptimizer&quot;: true,
              &quot;budgets&quot;: [
                {
                  &quot;type&quot;: &quot;initial&quot;,
                  &quot;maximumWarning&quot;: &quot;2mb&quot;,
                  &quot;maximumError&quot;: &quot;5mb&quot;
                },
                {
                  &quot;type&quot;: &quot;anyComponentStyle&quot;,
                  &quot;maximumWarning&quot;: &quot;6kb&quot;
                }
              ]
            },
            &quot;test&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;environments-common/environment.ts&quot;,
                  &quot;with&quot;: &quot;environments-common/environment.test.ts&quot;
                }
              ],
              &quot;optimization&quot;: true,
              &quot;outputHashing&quot;: &quot;all&quot;,
              &quot;sourceMap&quot;: false,
              &quot;extractCss&quot;: true,
              &quot;namedChunks&quot;: false,
              &quot;extractLicenses&quot;: true,
              &quot;vendorChunk&quot;: false,
              &quot;buildOptimizer&quot;: true,
              &quot;budgets&quot;: [
                {
                  &quot;type&quot;: &quot;initial&quot;,
                  &quot;maximumWarning&quot;: &quot;2mb&quot;,
                  &quot;maximumError&quot;: &quot;5mb&quot;
                },
                {
                  &quot;type&quot;: &quot;anyComponentStyle&quot;,
                  &quot;maximumWarning&quot;: &quot;6kb&quot;
                }
              ]
            }
          }
        },
        &quot;serve&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:dev-server&quot;,
          &quot;options&quot;: {
            &quot;browserTarget&quot;: &quot;qkc-manage-web:build&quot;
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;browserTarget&quot;: &quot;qkc-manage-web:build:production&quot;
            }
          }
        },
        &quot;extract-i18n&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:extract-i18n&quot;,
          &quot;options&quot;: {
            &quot;browserTarget&quot;: &quot;qkc-manage-web:build&quot;
          }
        },
        &quot;test&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:karma&quot;,
          &quot;options&quot;: {
            &quot;main&quot;: &quot;projects/qkc-manage-web/src/test.ts&quot;,
            &quot;polyfills&quot;: &quot;projects/qkc-manage-web/src/polyfills.ts&quot;,
            &quot;tsConfig&quot;: &quot;projects/qkc-manage-web/tsconfig.spec.json&quot;,
            &quot;karmaConfig&quot;: &quot;projects/qkc-manage-web/karma.conf.js&quot;,
            &quot;assets&quot;: [
              &quot;projects/qkc-manage-web/src/favicon.ico&quot;,
              &quot;projects/qkc-manage-web/src/assets&quot;
            ],
            &quot;styles&quot;: [
              &quot;projects/qkc-manage-web/src/styles.less&quot;
            ],
            &quot;scripts&quot;: []
          }
        },
        &quot;lint&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:tslint&quot;,
          &quot;options&quot;: {
            &quot;tsConfig&quot;: [
              &quot;projects/qkc-manage-web/tsconfig.app.json&quot;,
              &quot;projects/qkc-manage-web/tsconfig.spec.json&quot;,
              &quot;projects/qkc-manage-web/e2e/tsconfig.json&quot;
            ],
            &quot;exclude&quot;: [
              &quot;**/node_modules/**&quot;
            ]
          }
        },
        &quot;e2e&quot;: {
          &quot;builder&quot;: &quot;@angular-devkit/build-angular:protractor&quot;,
          &quot;options&quot;: {
            &quot;protractorConfig&quot;: &quot;projects/qkc-manage-web/e2e/protractor.conf.js&quot;,
            &quot;devServerTarget&quot;: &quot;qkc-manage-web:serve&quot;
          },
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;devServerTarget&quot;: &quot;qkc-manage-web:serve:production&quot;
            }
          }
        }
      }
    }
  },
  &quot;defaultProject&quot;: &quot;qkc-manage-web&quot;,
  &quot;cli&quot;: {
    &quot;analytics&quot;: &quot;daceaf7f-9ed1-4e93-aed7-c14019b6bc6e&quot;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br></div></div><h2 id="uploadossprod"><a href="#uploadossprod" class="header-anchor">#</a> uploadOssProd</h2> <p>实现一级文件发版：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">OSS</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ali-oss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> dirPath <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 项目跟目录</span>

<span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//region: '&lt;oss region&gt;',</span>
  <span class="token comment">//云账号AccessKey有所有API访问权限，建议遵循阿里云安全最佳实践，部署在服务端使用RAM子账号或STS，部署在客户端使用STS。</span>
  <span class="token comment">// accessKeyId: 'xxx',</span>
  <span class="token comment">// accessKeySecret: 'xxx',</span>
  accessKeyId<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  accessKeySecret<span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  endpoint<span class="token operator">:</span> <span class="token string">'xxx'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">appointBuckets</span><span class="token punctuation">(</span><span class="token parameter">bucket</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  client<span class="token punctuation">.</span><span class="token function">useBucket</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">listDir</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> dir <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    delimiter<span class="token operator">:</span> <span class="token string">'/'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>size <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span><span class="token parameter">pathArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">开始删除远程文件：</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">deleteMulti</span><span class="token punctuation">(</span>pathArr<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      quiet<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//object-name可以自定义为文件名（例如file.txt）或目录（例如abc/test/file.txt）的形式，实现将文件上传至当前Bucket或Bucket下的指定目录。</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归读取所有文件</span>
<span class="token keyword">function</span> <span class="token function">readFileList</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> filesList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 目录前缀</span>
    <span class="token keyword">const</span> preDir <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> fullPath <span class="token operator">=</span> <span class="token punctuation">{</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> item<span class="token punctuation">,</span>
      preDir<span class="token operator">:</span> preDir <span class="token operator">?</span> preDir<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">:</span> preDir
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stat <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stat<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">readFileList</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span> filesList<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//递归读取文件</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      filesList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> filesList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取本地所有文件，包括目录</span>
<span class="token keyword">function</span> <span class="token function">getAllFiles</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dirPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传目录：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token function">readFileList</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> files<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 只获取文件</span>
<span class="token keyword">function</span> <span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dirPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传目录：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">,</span> <span class="token punctuation">{</span> withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> files<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> ele<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      preDir<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">uploadOssProd</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> uploadDIr<span class="token punctuation">,</span> uploadAll</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> objs <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">listDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>objs<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span>objs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> files <span class="token operator">=</span> uploadAll <span class="token operator">?</span> <span class="token function">getAllFiles</span><span class="token punctuation">(</span>uploadDIr<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">getFiles</span><span class="token punctuation">(</span>uploadDIr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fileLen <span class="token operator">=</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">const</span> failFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> formatDir <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'开始上传本地文件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fileLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isSuccess <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>formatDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>preDir <span class="token operator">||</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      failFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">成功上传文件：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>failFiles<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;全部文件上传成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">recordLog</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>failFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;上传失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 记录发布日志</span>
<span class="token keyword">function</span> <span class="token function">recordLog</span><span class="token punctuation">(</span><span class="token parameter">ossDir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 异步读取</span>
  fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'release.log'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'文件打开失败'</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'release.log'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ossDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  发布，时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\r\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">setReleaseTime</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> entryPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'入口文件index.html不存在'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>htmlStr<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token regex">/&lt;html __QKC_VER__=/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已存在版本号</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> htmlStr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/__QKC_VER__=&quot;[^&quot;]*&quot;/g</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__QKC_VER__=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> formatHtmlStr <span class="token operator">=</span> htmlStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'&lt;html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;html __QKC_VER__=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> formatHtmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> bucket <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ossDir <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> buildDir <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> uploadAll <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'ALL'</span><span class="token punctuation">)</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'All'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bucket <span class="token operator">||</span> <span class="token operator">!</span>ossDir <span class="token operator">||</span> <span class="token operator">!</span>buildDir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;参数出错&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">setReleaseTime</span><span class="token punctuation">(</span>buildDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">appointBuckets</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">uploadOssProd</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> buildDir<span class="token punctuation">,</span> uploadAll<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br></div></div><h2 id="upload-oss-prod"><a href="#upload-oss-prod" class="header-anchor">#</a> upload-oss-prod</h2> <p>实现递归文件发版：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token constant">OSS</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ali-oss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// const AgentKeepAlive = require('agentkeepalive');</span>
<span class="token keyword">let</span> remoteFileList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> localFileArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> _localFileArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> batch <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> init <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> initCreate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> recordVersionBucket <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'qkc-file'</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> bucket<span class="token punctuation">;</span>
<span class="token keyword">let</span> ossDir<span class="token punctuation">;</span>
<span class="token keyword">let</span> buildDir<span class="token punctuation">;</span>
<span class="token keyword">let</span> type<span class="token punctuation">;</span>
<span class="token keyword">const</span> dirCache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> batchNumber <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> client<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getStdout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cmd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> exec <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;child_process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exec<span class="token punctuation">;</span>
    <span class="token function">exec</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;get stdout error:&quot;</span> <span class="token operator">+</span> cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>stdout<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^[\s\n\r]+|[\s\n\r]+$/</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 获取commitId</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCommitId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getStdout</span><span class="token punctuation">(</span><span class="token string">&quot;git rev-parse HEAD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取commit信息</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCommitInfo</span><span class="token punctuation">(</span><span class="token parameter">commitId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getStdout</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">git log --pretty=format:“%s” </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commitId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取分支名</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getBranch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getStdout</span><span class="token punctuation">(</span><span class="token string">&quot;git symbolic-ref --short -q HEAD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取作者</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCommitAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return getStdout(`git log --pretty=format:“%an” ${commitId} -1`);</span>
  <span class="token keyword">return</span> <span class="token function">getStdout</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">git config --global user.name</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
	获取标准格式时间
	入参：date
	格式：new Date()
	出参：xx-xx-xx xx:xx:xx
*/</span>
<span class="token keyword">function</span> <span class="token function">getdate</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> year <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> month <span class="token operator">=</span>
    date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span>
      <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span>
      date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> day <span class="token operator">=</span>
    date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> hours <span class="token operator">=</span>
    date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> minutes <span class="token operator">=</span>
    date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span>
      <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
      date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> seconds <span class="token operator">=</span>
    date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span>
      <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
      date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> time <span class="token operator">=</span>
    year <span class="token operator">+</span>
    <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span>
    month <span class="token operator">+</span>
    <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span>
    day <span class="token operator">+</span>
    <span class="token string">&quot; &quot;</span> <span class="token operator">+</span>
    hours <span class="token operator">+</span>
    <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span>
    minutes <span class="token operator">+</span>
    <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span>
    seconds<span class="token punctuation">;</span>
  <span class="token keyword">return</span> time<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 检查提交状态</span>
<span class="token keyword">function</span> <span class="token function">checkCommitStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getStdout</span><span class="token punctuation">(</span><span class="token string">&quot;git status&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 记录发布日志</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">recordLog</span><span class="token punctuation">(</span><span class="token parameter">ossDir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> commitId <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCommitId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> branch <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBranch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> commitInfo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCommitInfo</span><span class="token punctuation">(</span>commitId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCommitAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 异步读取</span>
    fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;release-prod.log&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;全部上传完毕，但是记录版本历史失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;文件打开失败&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token function">getdate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">&quot;release-prod.log&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\r\n发布位置：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ossDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，\r\n发布时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，\r\n发布branch: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>branch<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，\r\n发布commitId: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commitId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，\r\n发布commit信息: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commitInfo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，\r\n发布人:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\r\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nowTime<span class="token punctuation">)</span>
          <span class="token keyword">const</span> exec <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;child_process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exec<span class="token punctuation">;</span>
          <span class="token keyword">const</span> cmd <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">git add . &amp;&amp; git commit -m &quot;本次</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">发版，时间:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; &amp;&amp; git push</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          <span class="token function">exec</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;get stdout error:&quot;</span> <span class="token operator">+</span> cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'记录发布信息成功，请切回dev并入这次发布历史记录'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;全部上传完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setReleaseTime</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> entryPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;入口文件index.html不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> htmlStr <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>htmlStr<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token regex">/&lt;html __QKC_VER__=/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已存在版本号</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> htmlStr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/__QKC_VER__=&quot;[^&quot;]*&quot;/g</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__QKC_VER__=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> formatHtmlStr <span class="token operator">=</span> htmlStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;html __QKC_VER__=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nowTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>entryPath<span class="token punctuation">,</span> formatHtmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置上传分区</span>
<span class="token keyword">function</span> <span class="token function">appointBuckets</span><span class="token punctuation">(</span><span class="token parameter">bucket</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  client<span class="token punctuation">.</span><span class="token function">useBucket</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span><span class="token operator">/</span> 追加文件到上传列表
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span><span class="token operator">/</span> 顺序执行数组中的所有异步函数
<span class="token keyword">function</span> <span class="token function">runArrFunc</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&gt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">||</span> start <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">/</span> 参数start不能超过    arr<span class="token punctuation">.</span>length，不能为负数
  <span class="token keyword">var</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> fn <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">next</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span><span class="token operator">/</span> 间隔固定时间顺序执行数组中的所有异步函数
<span class="token keyword">function</span> <span class="token function">runArrFuncDelay</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&gt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">||</span> start <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">/</span> 参数start不能超过    arr<span class="token punctuation">.</span>length，不能为负数
  <span class="token keyword">var</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> fn <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">next</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span><span class="token operator">/</span> 创建本地文件夹<span class="token punctuation">,</span>支持递归
<span class="token keyword">function</span> <span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token parameter">filepath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> filepath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>&quot;<span class="token operator">/</span>&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> dir <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dirCache<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dirCache<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      dir <span class="token operator">=</span> dir <span class="token operator">+</span> &quot;<span class="token operator">/</span>&quot; <span class="token operator">+</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>&quot;success&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">/</span><span class="token operator">/</span> 递归获取远程文件列表只有一级不包含目录
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">listDirFirst</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> dir <span class="token operator">?</span> `$<span class="token punctuation">{</span>dir<span class="token punctuation">}</span><span class="token operator">/</span>` <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    delimiter<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>size <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归获取远程文件列表,包含目录</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">listDir</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取子级目录</span>
  <span class="token comment">// const result = await client.list({</span>
  <span class="token comment">//     prefix: dir,</span>
  <span class="token comment">//     delimiter: '/'</span>
  <span class="token comment">//   });</span>
  <span class="token comment">//   result.prefixes.forEach(subDir =&gt; {</span>
  <span class="token comment">//     console.log('SubDir: %s', subDir);</span>
  <span class="token comment">//   });</span>
  <span class="token comment">// 获取子级文件</span>
  <span class="token comment">// const result = await client.list({</span>
  <span class="token comment">//     prefix: dir ? `${dir}/` : '',</span>
  <span class="token comment">//     delimiter: '/'</span>
  <span class="token comment">//   })</span>
  <span class="token comment">//   if (result.objects) {</span>
  <span class="token comment">//     var _result=result.objects.map(obj =&gt; {</span>
  <span class="token comment">//       return obj.name;</span>
  <span class="token comment">//     });</span>
  <span class="token comment">//     console.log('Subfile: %s', _result);</span>
  <span class="token comment">//     return _result</span>
  <span class="token comment">//   } else {</span>
  <span class="token comment">//     return []</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// 获取不为空的子级文件</span>
  <span class="token comment">// const result = await client.list({</span>
  <span class="token comment">//     prefix: dir ? `${dir}/` : '',</span>
  <span class="token comment">//     delimiter: '/'</span>
  <span class="token comment">// })</span>
  <span class="token comment">// if (result.objects) {</span>
  <span class="token comment">//     return result.objects.filter(obj =&gt; obj.size !== 0).map(obj =&gt; {</span>
  <span class="token comment">//         return obj.name;</span>
  <span class="token comment">//     });</span>
  <span class="token comment">// } else {</span>
  <span class="token comment">//     return []</span>
  <span class="token comment">// }</span>
  step<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> resultfile <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> <span class="token punctuation">(</span>dir <span class="token operator">&amp;&amp;</span> dir <span class="token operator">!==</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">&amp;&amp;</span> dir <span class="token operator">!==</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    delimiter<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultfile<span class="token punctuation">.</span>objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resultfile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      remoteFileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultfile <span class="token operator">&amp;&amp;</span> resultfile<span class="token punctuation">.</span>prefixes <span class="token operator">&amp;&amp;</span> resultfile<span class="token punctuation">.</span>prefixes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resultfile<span class="token punctuation">.</span>prefixes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">subDir</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">listDir</span><span class="token punctuation">(</span>subDir<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> subDir<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  step<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(remoteFileList.filter((e)=&gt;{</span>
    <span class="token comment">//     return e.charAt(e.length - 1)!='/';</span>
    <span class="token comment">// }))</span>
    <span class="token comment">// cb &amp;&amp; cb(remoteFileList.filter((e) =&gt; {</span>
    <span class="token comment">//     return e.charAt(e.length - 1) != '/';</span>
    <span class="token comment">// }))</span>
    cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span>remoteFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归获取远程文件列表,去除目录</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">listNoDir</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  step<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> resultfile <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> <span class="token punctuation">(</span>dir <span class="token operator">&amp;&amp;</span> dir <span class="token operator">!==</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">&amp;&amp;</span> dir <span class="token operator">!==</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    delimiter<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultfile <span class="token operator">&amp;&amp;</span> resultfile<span class="token punctuation">.</span>objects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resultfile<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      remoteFileList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultfile <span class="token operator">&amp;&amp;</span> resultfile<span class="token punctuation">.</span>prefixes <span class="token operator">&amp;&amp;</span> resultfile<span class="token punctuation">.</span>prefixes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    resultfile<span class="token punctuation">.</span>prefixes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">subDir</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">listNoDir</span><span class="token punctuation">(</span>subDir<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> subDir<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  step<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span>remoteFileList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归获取本地文件列表(没有目录)</span>
<span class="token keyword">function</span> <span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dirPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>init<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传目录：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    init <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">,</span> <span class="token punctuation">{</span>withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(files);</span>
  files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _src <span class="token operator">=</span> dir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">var</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>_src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      localFileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//是目录则 递归</span>
      <span class="token function">getFiles</span><span class="token punctuation">(</span>_src<span class="token punctuation">,</span> localFileArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归获取本地文件列表(有目录)</span>
<span class="token keyword">function</span> <span class="token function">getFilesAndRoot</span><span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dirPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>init<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传目录：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    init <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">,</span> <span class="token punctuation">{</span>withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(files);</span>
  files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _src <span class="token operator">=</span> dir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">var</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>_src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(stats,'-----------');</span>
    <span class="token comment">// console.log(dir + '/' + ele.name,'-----------');</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      localFileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//是目录则 递归</span>
      localFileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> ele<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">getFilesAndRoot</span><span class="token punctuation">(</span>_src<span class="token punctuation">,</span> localFileArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 批量删除远程文件</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span><span class="token parameter">pathArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">开始删除远程文件：</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">deleteMulti</span><span class="token punctuation">(</span>pathArr<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      quiet<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 递归批量上传本地文件</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">uploadOSS</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> uploadDIr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>uploadDIr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> uploadDIr <span class="token operator">!==</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">&amp;&amp;</span> uploadDIr <span class="token operator">!==</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//本地单文件上传</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;开始上传本地文件：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uploadDIr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> uploadDIr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">成功上传文件：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>uploadDIr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">到远程位置：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dir <span class="token operator">===</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">||</span> dir <span class="token operator">===</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">realUpload</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> uploadDIr<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dir<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dir <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">await</span> <span class="token function">realUpload</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> uploadDIr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">realUpload</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token punctuation">,</span> uploadDIr<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// console.log(localFileArr, '-------------');</span>
  <span class="token keyword">let</span> fileLen<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>batch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fileLen <span class="token operator">=</span> localFileArr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> batchNumber <span class="token operator">?</span> batchNumber <span class="token operator">:</span> localFileArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fileLen <span class="token operator">=</span> localFileArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> failFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// const formatDir = `${dir}/`;</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;开始上传本地文件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// let _dir = dir + '/' + uploadDIr + '/';</span>
  <span class="token keyword">let</span> _dir <span class="token operator">=</span> dir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _dir <span class="token operator">=</span> _dir<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>initCreate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">put</span><span class="token punctuation">(</span>_dir<span class="token punctuation">,</span> __filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功创建远程文件夹：&quot;</span> <span class="token operator">+</span> _dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    initCreate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fileLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> isSuccess<span class="token punctuation">;</span>
    <span class="token comment">// let _path = dir + '/' + uploadDIr + '/' + path.relative(uploadDIr, `${localFileArr[i].path}`).split(path.sep).join('/');</span>
    <span class="token keyword">let</span> _path <span class="token operator">=</span> dir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>uploadDIr<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>sep<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _path <span class="token operator">=</span> _path<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      isSuccess <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">put</span><span class="token punctuation">(</span>_path<span class="token punctuation">,</span> localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        failFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">成功上传文件：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">到远程地址：</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> _path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      isSuccess <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">put</span><span class="token punctuation">(</span>_path <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> __filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        failFiles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>localFileArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">成功创建远程文件夹：</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> _path <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>failFiles<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>fileLen <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;个文件上传处理成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>failFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;上传失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 递归批量下载远程文件</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">downOSS</span><span class="token punctuation">(</span><span class="token parameter">ossDir<span class="token punctuation">,</span> downPath<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> AsyncArrFunc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">listDir</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">objs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>objs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">mkdir</span><span class="token punctuation">(</span>downPath <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> ossDir <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果是目录</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            AsyncArrFunc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> _e <span class="token operator">=</span> e<span class="token punctuation">;</span>
              <span class="token keyword">let</span> _downPath <span class="token operator">=</span> downPath<span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token function">mkdir</span><span class="token punctuation">(</span>_downPath <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> _e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 下载远程文件</span>
            AsyncArrFunc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> _e <span class="token operator">=</span> e<span class="token punctuation">;</span>
              <span class="token keyword">let</span> _downPath <span class="token operator">=</span> downPath<span class="token punctuation">;</span>
              <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>_e<span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>_downPath<span class="token punctuation">,</span> _e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span>AsyncArrFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取命令行参数</span>
<span class="token keyword">function</span> <span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;参数至少三个，指定远程存放地址，本地上传文件路径和操作模式&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  bucket <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  ossDir <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  buildDir <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">;</span>
  type <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 准备上传条件</span>
<span class="token keyword">function</span> <span class="token function">preparation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;upload&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setReleaseTime</span><span class="token punctuation">(</span>buildDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">getFilesAndRoot</span><span class="token punctuation">(</span>buildDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">appointBuckets</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _localFileArr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>localFileArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 数组分割成固定个数一组的小数组</span>
<span class="token keyword">function</span> <span class="token function">arrSpliceSmall</span><span class="token punctuation">(</span><span class="token parameter">dataList<span class="token punctuation">,</span> num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> dataList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i <span class="token operator">+=</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>dataList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 创建有上限时钟636f70793231313335323631343130323136353331333431356662
 * @param  {int}   upperlimit       上限次数
 * @param  {int}   cycle            间隔时间
 * @param  {Function} _callback         回调函数
 * @param  {Function}   _completeCallback 执行完毕后调用的函数
 * @return {Object}                    返回一个时钟对象
 */</span>
<span class="token keyword">function</span> <span class="token function">createUpperLimitTime</span><span class="token punctuation">(</span><span class="token parameter">_upperlimit<span class="token punctuation">,</span> cycle<span class="token punctuation">,</span> _callback<span class="token punctuation">,</span> _completeCallback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> successindex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timeobj<span class="token punctuation">;</span>
  <span class="token keyword">var</span> upperlimit <span class="token operator">=</span> _upperlimit<span class="token punctuation">;</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> _callback <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> completeCallback <span class="token operator">=</span> _completeCallback <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">extendCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>successindex <span class="token operator">&gt;=</span> upperlimit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeobj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">completeCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 完成后对时钟实例基本无需什么操作了，因此这里不提供也行</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>timeobj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实际上这个回调函数是可以获得时钟实例的</span>
      successindex<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  timeobj <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>extendCallback<span class="token punctuation">,</span> cycle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> timeobj<span class="token punctuation">;</span> <span class="token comment">// 返回这个时钟对象，可以作用于终止</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">generateAnInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// region: 'xxx',</span>
    <span class="token comment">// accessKeyId: 'xxx',</span>
    <span class="token comment">// accessKeySecret: 'xxx',</span>
    <span class="token comment">// bucket: 'xxx',</span>
    <span class="token comment">// endpoint: 'xxx'</span>
    timeout<span class="token operator">:</span> <span class="token number">6000000</span><span class="token punctuation">,</span>
    <span class="token comment">// agent: new AgentKeepAlive({</span>
    <span class="token comment">//     timeout: '30m',</span>
    <span class="token comment">//     keepAlive:true</span>
    <span class="token comment">//   }),</span>
    accessKeyId<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    accessKeySecret<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
    endpoint<span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 入口</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token keyword">undefined</span><span class="token operator">:</span>
      type <span class="token operator">=</span> buildDir<span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;listdir&quot;</span><span class="token operator">:</span>
          <span class="token comment">// 查看文件+目录</span>
          <span class="token keyword">await</span> <span class="token function">listDir</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;listnodir&quot;</span><span class="token operator">:</span>
          <span class="token comment">// 只查看文件</span>
          <span class="token keyword">await</span> <span class="token function">listNoDir</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;del&quot;</span><span class="token operator">:</span>
          <span class="token comment">// 删除文件</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>ossDir<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> ossDir <span class="token operator">!==</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">&amp;&amp;</span> ossDir <span class="token operator">!==</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ossDir<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 删除文件夹</span>
            <span class="token keyword">await</span> <span class="token function">listDir</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">await</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;download&quot;</span><span class="token operator">:</span>
      <span class="token comment">// 下载</span>
      <span class="token keyword">await</span> <span class="token function">downOSS</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> buildDir<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">runArrFunc</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>buildDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//上传</span>
        <span class="token keyword">await</span> <span class="token function">uploadOSS</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> buildDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;目录不存在,请先构建&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 批量</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">batchUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">listDir</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token comment">// 删除原文件</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">deleteMulti</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上传文件总个数：'</span> <span class="token operator">+</span> _localFileArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>_localFileArr<span class="token punctuation">.</span>length <span class="token operator">/</span> batchNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> _spliceArr <span class="token operator">=</span> <span class="token function">arrSpliceSmall</span><span class="token punctuation">(</span>_localFileArr<span class="token punctuation">,</span> batchNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// createUpperLimitTime( count,5000 ,function(){</span>
    <span class="token comment">//     console.log('第'+(i+1)+'波上传');</span>
    <span class="token comment">//     localFileArr=_spliceArr[i];</span>
    <span class="token comment">//     batch=true;</span>
    <span class="token comment">//     if(i==0){</span>
    <span class="token comment">//         main();</span>
    <span class="token comment">//     }else {</span>
    <span class="token comment">//         generateAnInstance();</span>
    <span class="token comment">//         appointBuckets(bucket);</span>
    <span class="token comment">//         main();</span>
    <span class="token comment">//     }</span>
    <span class="token comment">//     i++;</span>
    <span class="token comment">// },function(){</span>
    <span class="token comment">// console.log('全部上传完毕');</span>
    <span class="token comment">// });</span>
    <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> _j <span class="token operator">=</span> i<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;第&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>_j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;波上传&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        localFileArr <span class="token operator">=</span> _spliceArr<span class="token punctuation">[</span>_j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        batch <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">await</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">generateAnInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">appointBuckets</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">await</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>recordVersionBucket<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">recordLog</span><span class="token punctuation">(</span>ossDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">runArrFuncDelay</span><span class="token punctuation">(</span>_arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// checkCommitStatus().then((status) =&gt; {</span>
<span class="token comment">//   if (status.indexOf(&quot;Changes&quot;) &lt; 0) {</span>
    <span class="token function">generateAnInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">preparation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">batchUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实现分批上传</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// main(); // 使用其他共功能请关闭batchUpload打开main</span>
<span class="token comment">//   } else {</span>
<span class="token comment">//     console.log(&quot;请前提交代码以做版本发布追踪&quot;);</span>
<span class="token comment">//   }</span>
<span class="token comment">// });</span>


<span class="token comment">/*
* node upload-oss-extend.js &lt;Bucket&gt; &lt;remotepath&gt; [localpath] &lt;operatType : del | upload | listdir | listnodir | download&gt;
* 用法示例（分批,深度递归，支持文件,文件夹,./,.等，没有的目录和文件自动处理）：
* 删除远程文件夹bb下所有： node upload-oss.js xccjhzjh bb del
* 删除远程根目录所有下所有： node upload-oss.js xccjhzjh . del
* 查看远程文件夹bb下所有： node upload-oss.js xccjhzjh bb listdir
* 查看远程文件夹bb不包括文件夹： node upload-oss.js xccjhzjh bb listnodir
* 上传本地cc文件夹所有到远程文件夹bb： node upload-oss.js xccjhzjh bb cc upload
* 上传本地cc文件夹所有到远程文件夹bb： node upload-oss.js xccjhzjh bb ./cc upload
* 上传本地bb文件夹所有到远程根目录： node upload-oss.js xccjhzjh . bb upload
* 上传本地bb文件夹所有到远程根目录： node upload-oss.js xccjhzjh ./ bb upload
* 下载远程bb文件夹所有到本地文件夹cc： node upload-oss.js xccjhzjh bb cc download
* 下载远程aa文件夹所有到本地文件夹根目录： node upload-oss.js xccjhzjh aa ./ download
* 下载远程aa文件夹所有到本地文件夹根目录： node upload-oss.js xccjhzjh aa . download
 */</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br><span class="line-number">688</span><br><span class="line-number">689</span><br><span class="line-number">690</span><br><span class="line-number">691</span><br><span class="line-number">692</span><br><span class="line-number">693</span><br><span class="line-number">694</span><br><span class="line-number">695</span><br><span class="line-number">696</span><br><span class="line-number">697</span><br><span class="line-number">698</span><br><span class="line-number">699</span><br><span class="line-number">700</span><br><span class="line-number">701</span><br><span class="line-number">702</span><br><span class="line-number">703</span><br><span class="line-number">704</span><br><span class="line-number">705</span><br><span class="line-number">706</span><br><span class="line-number">707</span><br><span class="line-number">708</span><br><span class="line-number">709</span><br><span class="line-number">710</span><br><span class="line-number">711</span><br><span class="line-number">712</span><br><span class="line-number">713</span><br><span class="line-number">714</span><br><span class="line-number">715</span><br></div></div><p>angular默认打包好静态文件的都放在assets中，如果只是改动逻辑没有增加静态文件，可以使用一级文件发版的干货提升发版速度。</p> <h2 id="angular-pipe"><a href="#angular-pipe" class="header-anchor">#</a> angular-pipe</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加额外的字符</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'welcome'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WelcomePipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Invalid pipe argument for WelcomePipe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">'xx'</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 把时间点转成xx前</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'appAgo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AgoPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> seconds <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>seconds <span class="token operator">&lt;</span> <span class="token number">29</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 小于 30 秒</span>
        <span class="token keyword">return</span> <span class="token string">'刚刚'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> intervals <span class="token operator">=</span> <span class="token punctuation">{</span>
        年<span class="token operator">:</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">,</span>
        月<span class="token operator">:</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span>
        周<span class="token operator">:</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">,</span>
        天<span class="token operator">:</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span>
        小时<span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
        分钟<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        秒<span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> unitName <span class="token keyword">in</span> intervals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>intervals<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>unitName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> unitValue <span class="token operator">=</span> intervals<span class="token punctuation">[</span>unitName<span class="token punctuation">]</span><span class="token punctuation">;</span>
          counter <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">/</span> unitValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> counter <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> unitName <span class="token operator">+</span> <span class="token string">'前'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 转换中国时间</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DatePipe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'chinaDate'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ChinaDatePipe</span> <span class="token keyword">extends</span> <span class="token class-name">DatePipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
    <span class="token keyword">let</span> format <span class="token operator">=</span> <span class="token string">'yyyy-MM-dd HH:mm:ss'</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'date'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        format <span class="token operator">=</span> <span class="token string">'yyyy-MM-dd'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'datetime'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        format <span class="token operator">=</span> <span class="token string">'yyyy-MM-dd HH:mm:ss'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        format <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> format<span class="token punctuation">,</span> <span class="token string">'UTC+8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 把时间间距转换成天</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'day'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DayPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token constant">TIME_OF_DAY</span><span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Invalid pipe argument for WelcomePipe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>value <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">TIME_OF_DAY</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 重复</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Pipe<span class="token punctuation">,</span> PipeTransform<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'repeat'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RepeatPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> any<span class="token punctuation">,</span> times<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 为了不使innerhtml去掉其中的style 样式</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Pipe<span class="token punctuation">,</span> PipeTransform<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>DomSanitizer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/platform-browser'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'safeHtml'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SafeHtmlPipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> sanitizer<span class="token operator">:</span> DomSanitizer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sanitizer<span class="token punctuation">.</span><span class="token function">bypassSecurityTrustHtml</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 根据不同类型获取不同值</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Pipe<span class="token punctuation">,</span> PipeTransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'core/base/static-data'</span><span class="token punctuation">;</span>
@<span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'restype'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RestypePipe</span> <span class="token keyword">implements</span> <span class="token class-name">PipeTransform</span> <span class="token punctuation">{</span>
  <span class="token function">transform</span><span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
    <span class="token keyword">let</span> groups <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'EXERCISE_TYPE'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      groups <span class="token operator">=</span> args<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Invalid pipe argument for WelcomePipe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'--'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> obj <span class="token keyword">of</span> groups<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name <span class="token operator">=</span> <span class="token function">getName</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> getName <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> string<span class="token punctuation">,</span> group<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>group<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'EXERCISE_TYPE'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">EXERCISE_TYPE</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'RESOURCE_SCEN'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">RESOURCE_SCEN</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'LEARNING_TARGET'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">LEARNING_TARGET</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'MATERIAL_TYPE'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">MATERIAL_TYPE</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'TEACH_TYPE'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">TEACH_TYPE</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'ROOM_TYPE'</span><span class="token operator">:</span>
        tmp <span class="token operator">=</span> <span class="token constant">ROOM_TYPE</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> item <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> ele<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> item <span class="token operator">?</span> item<span class="token punctuation">.</span>name <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">TEACH_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'11'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'线下面授'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'12'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'线下双师'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'21'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'线上直播'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'22'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'线上录播'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ROOM_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'普通教室'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'电教室'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">MATERIAL_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'101'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'讲义'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'102'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'资料'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'104'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'案例'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'103'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'视频'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">RESOURCE_SCEN</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'知识导入'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'知识讲解'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'实战应用'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">LEARNING_TARGET</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'了解'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'理解'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'掌握'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'4'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'应用'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'5'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'分析'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'6'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'创新'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">EXERCISE_TYPE</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'201'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'单选'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'202'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'多选'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'203'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'判断'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'204'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'填空'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'205'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'表格'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'206'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'分录'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'207'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'问答'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'299'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'综合'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br></div></div><h2 id="angular-decorators"><a href="#angular-decorators" class="header-anchor">#</a> angular-decorators</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ConfirmableDescription<span class="token punctuation">,</span> ConfirmableFlatDescription<span class="token punctuation">,</span> LoadingControl<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../base/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NzModalRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ToolsUtil<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/tools.util'</span><span class="token punctuation">;</span>
<span class="token comment">// 属性装饰器</span>
<span class="token comment">/*
取整
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">takeAnInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span> object<span class="token punctuation">,</span> key<span class="token operator">:</span> string <span class="token operator">|</span> symbol</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> val <span class="token operator">=</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setter</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      val <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">tofix</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token keyword">get</span><span class="token operator">:</span> getter<span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token operator">:</span> setter<span class="token punctuation">,</span>
      enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      configurable<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> declare <span class="token keyword">interface</span> <span class="token class-name">GetSetCallOption</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">propertyValue<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  <span class="token keyword">set</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> preValue<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  initSet<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> preValue<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  initValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span> <span class="token comment">// 此处设置初始值不会调用set</span>
<span class="token punctuation">}</span>

<span class="token comment">// 属性装饰器</span>
<span class="token comment">/*
集中私有属性添加，分化&amp;简化get/set
用法：@getSetChange&lt;boolean&gt;({
       initSet(val) {
         if (val) {
           this.initIntellectualAdaptationData();
         }
       },
       set(val) {
         const flag = val ? '1' : '0';
         this.courseMgService.isSmartUpdate(this.coursePacketId, flag).subscribe(res =&gt; {
           if (res.status === 201) {
             if (val) {
               this.initIntellectualAdaptationData();
             }
             SessionStorageUtil.putPacketInfoItem('isSmart', flag);
           }
         });
       }
     })
     intellectualAdaptation: boolean;
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> getSetChange<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>getSetCall<span class="token operator">:</span> GetSetCallOption<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> object<span class="token punctuation">,</span> key<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> propertyValue <span class="token operator">=</span> getSetCall<span class="token punctuation">.</span>initValue<span class="token punctuation">;</span>
    <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token parameter">total</span> <span class="token operator">=&gt;</span> total <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>label<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> getSetCall<span class="token punctuation">.</span>get <span class="token operator">?</span> getSetCall<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> propertyValue<span class="token punctuation">)</span> <span class="token operator">:</span> propertyValue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> getSetCall<span class="token punctuation">.</span>get <span class="token operator">?</span> getSetCall<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> getSetCall<span class="token punctuation">.</span>initValue<span class="token punctuation">)</span> <span class="token operator">:</span> getSetCall<span class="token punctuation">.</span>initValue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>label<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          getSetCall<span class="token punctuation">.</span>set<span class="token operator">?.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span>label<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>getSetCall<span class="token punctuation">.</span>initSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            getSetCall<span class="token punctuation">.</span><span class="token function">initSet</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            getSetCall<span class="token punctuation">.</span>set<span class="token operator">?.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        propertyValue <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 构造器装饰器</span>
<span class="token comment">/*
增加日志
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">extendPrototype</span><span class="token punctuation">(</span><span class="token parameter">greeting<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// tslint:disable-next-line:ban-types only-arrow-functions</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// tslint:disable-next-line:only-arrow-functions</span>
    target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">greet</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方法装饰器</span>
<span class="token comment">/*
确认弹框
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ConfirmableDesc</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">:</span> ConfirmableDescription</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token parameter">target<span class="token operator">:</span> object<span class="token punctuation">,</span>
    key<span class="token operator">:</span> string <span class="token operator">|</span> symbol<span class="token punctuation">,</span>
    descriptor<span class="token operator">:</span> PropertyDescriptor</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> original <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">,</span> content<span class="token punctuation">,</span> type<span class="token punctuation">,</span> replaceXxxField<span class="token punctuation">,</span>
        conditionField<span class="token punctuation">,</span> conditionResult<span class="token punctuation">,</span> conditionTitleReplace<span class="token punctuation">,</span> conditionContentReplace<span class="token punctuation">,</span> condition
      <span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span>
      <span class="token keyword">const</span> conditionIf <span class="token operator">=</span> <span class="token keyword">typeof</span> condition <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">;</span>
      <span class="token comment">// tslint:disable-next-line:max-line-length</span>
      <span class="token keyword">const</span> resultCondition <span class="token operator">=</span> conditionIf <span class="token operator">?</span> <span class="token function">condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>conditionField <span class="token operator">&amp;&amp;</span> conditionResult <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>conditionField<span class="token punctuation">]</span> <span class="token operator">===</span> conditionResult<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> resultContent <span class="token operator">=</span> resultCondition <span class="token operator">?</span> conditionContentReplace <span class="token operator">:</span> content<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>modalService<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        nzTitle<span class="token operator">:</span> resultCondition <span class="token operator">?</span> conditionTitleReplace <span class="token operator">||</span> title <span class="token operator">:</span> title<span class="token punctuation">,</span>
        nzContent<span class="token operator">:</span> replaceXxxField <span class="token operator">?</span> resultContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>replaceXxxField<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> resultContent<span class="token punctuation">,</span>
        nzMaskClosable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        nzWrapClassName<span class="token operator">:</span> <span class="token string">'vertical-center-modal'</span><span class="token punctuation">,</span>
        nzCancelText<span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
        nzOkText<span class="token operator">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">nzOnOk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">nzOnCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方法装饰器</span>
<span class="token comment">/*
确认弹框
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ConfirmableFlat</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">:</span> ConfirmableFlatDescription</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token parameter">target<span class="token operator">:</span> object<span class="token punctuation">,</span>
    key<span class="token operator">:</span> string <span class="token operator">|</span> symbol<span class="token punctuation">,</span>
    descriptor<span class="token operator">:</span> PropertyDescriptor</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> content<span class="token punctuation">,</span> type<span class="token punctuation">,</span> nzBodyStyle<span class="token punctuation">,</span> nzWrapClassName<span class="token punctuation">,</span> nzComponentParams<span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span>
    <span class="token keyword">const</span> original <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> loadingControl<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>LoadingControl<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> modal<span class="token operator">:</span> NzModalRef <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modalService<span class="token punctuation">[</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">type</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>type <span class="token operator">||</span> <span class="token string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        nzTitle<span class="token operator">:</span> <span class="token keyword">typeof</span> title <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">title</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">:</span> title<span class="token punctuation">,</span>
        nzContent<span class="token operator">:</span> <span class="token keyword">typeof</span> content <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function">content</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">:</span> content<span class="token punctuation">,</span>
        nzMaskClosable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        nzWrapClassName<span class="token punctuation">,</span>
        nzComponentParams<span class="token punctuation">,</span>
        nzBodyStyle<span class="token punctuation">,</span>
        nzOkText<span class="token operator">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span>
        nzCancelText<span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">nzOnCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token function-variable function">nzOnOk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> loadingControl<span class="token punctuation">,</span> modal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ToolsUtil<span class="token punctuation">.</span><span class="token function">watchTool</span><span class="token punctuation">(</span>loadingControl<span class="token punctuation">,</span> <span class="token string">'loading'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        modal<span class="token punctuation">.</span><span class="token function">updateConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>nzOkLoading<span class="token operator">:</span> val<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
增加日志
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">LogOutput</span><span class="token punctuation">(</span><span class="token parameter">tarage<span class="token operator">:</span> Function<span class="token punctuation">,</span> key<span class="token operator">:</span> string<span class="token punctuation">,</span> descriptor<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> originalMethod <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">newMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token function">originalMethod</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>loggedOutput<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>loggedOutput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loggedOutput<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      method<span class="token operator">:</span> key<span class="token punctuation">,</span>
      parameters<span class="token operator">:</span> args<span class="token punctuation">,</span>
      output<span class="token operator">:</span> result<span class="token punctuation">,</span>
      timestamp<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  descriptor<span class="token punctuation">.</span>value <span class="token operator">=</span> newMethod<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 参数装饰器</span>
<span class="token comment">/*
打印参数在第几个位置
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span> Function<span class="token punctuation">,</span> key<span class="token operator">:</span> string<span class="token punctuation">,</span> parameterIndex<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> functionLogged <span class="token operator">=</span> key <span class="token operator">||</span> target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The parameter in position </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parameterIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>functionLogged<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> has
    been decorated</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br></div></div><h2 id="angular-directive"><a href="#angular-directive" class="header-anchor">#</a> angular-directive</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// example.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> HostBinding<span class="token punctuation">,</span> HostListener<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> Attribute<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[example]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleDirective</span> <span class="token punctuation">{</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> example<span class="token operator">:</span> string<span class="token punctuation">;</span>
  @<span class="token function">HostBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">get</span> <span class="token function">innerText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>example<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'$event'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>example <span class="token operator">=</span> <span class="token string">'Clicked!'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>@<span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> author<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用：</span>
<span class="token comment">// import { Component } from '@angular/core';</span>
<span class="token comment">// @Component({</span>
<span class="token comment">//   selector: 'app-root',</span>
<span class="token comment">//   template: `</span>
<span class="token comment">//     &lt;h2&gt;Hello, Angular&lt;/h2&gt;</span>
<span class="token comment">//     &lt;h2 [example]=&quot;'Hello, Xccjh!'&quot;</span>
<span class="token comment">//       author=&quot;Xccjh&quot;&gt;Hello, Angular&lt;/h2&gt;</span>
<span class="token comment">//   `,</span>
<span class="token comment">// })</span>
<span class="token comment">// export class AppComponent { }</span>

<span class="token comment">// click-outsides.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> Renderer2<span class="token punctuation">,</span> Inject<span class="token punctuation">,</span> Output<span class="token punctuation">,</span> EventEmitter<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> OnChanges<span class="token punctuation">,</span> SimpleChanges <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DOCUMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[appClickoutside]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ClickoutsideDirective</span> <span class="token keyword">implements</span> <span class="token class-name">OnChanges</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token function-variable function">handleClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> bindFlag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span> onClickOutSide <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> el<span class="token operator">:</span> ElementRef<span class="token punctuation">,</span> <span class="token keyword">private</span> rd<span class="token operator">:</span> Renderer2<span class="token punctuation">,</span> @<span class="token function">Inject</span><span class="token punctuation">(</span><span class="token constant">DOCUMENT</span><span class="token punctuation">)</span> <span class="token keyword">private</span> doc<span class="token operator">:</span> Document</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">ngOnChanges</span><span class="token punctuation">(</span>changes<span class="token operator">:</span> SimpleChanges<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>changes<span class="token punctuation">.</span>bindFlag <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>changes<span class="token punctuation">.</span>bindFlag<span class="token punctuation">.</span>firstChange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bindFlag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rd<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>doc<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> target <span class="token operator">=</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
          <span class="token keyword">const</span> isContain <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isContain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>onClickOutSide<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// click-stop.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> Output<span class="token punctuation">,</span> EventEmitter<span class="token punctuation">,</span> Renderer2<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> OnInit<span class="token punctuation">,</span> OnDestroy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[click.stop]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StopPropagationDirective</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span><span class="token punctuation">,</span> OnDestroy <span class="token punctuation">{</span>
  @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token string">'click.stop'</span><span class="token punctuation">)</span> stopPropEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">unsubscribe</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> renderer<span class="token operator">:</span> Renderer2<span class="token punctuation">,</span> <span class="token comment">// Angular 2.x导入Renderer</span>
    <span class="token keyword">private</span> element<span class="token operator">:</span> ElementRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>unsubscribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stopPropEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// debounce-click.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> Output<span class="token punctuation">,</span> EventEmitter<span class="token punctuation">,</span> Renderer2<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> OnInit<span class="token punctuation">,</span> OnDestroy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[click.stop]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StopPropagationDirective</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span><span class="token punctuation">,</span> OnDestroy <span class="token punctuation">{</span>
  @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token string">'click.stop'</span><span class="token punctuation">)</span> stopPropEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">unsubscribe</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token keyword">private</span> renderer<span class="token operator">:</span> Renderer2<span class="token punctuation">,</span> <span class="token comment">// Angular 2.x导入Renderer</span>
    <span class="token keyword">private</span> element<span class="token operator">:</span> ElementRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>unsubscribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stopPropEvent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// equal-validator.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> forwardRef<span class="token punctuation">,</span> Attribute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Validator<span class="token punctuation">,</span> AbstractControl<span class="token punctuation">,</span> <span class="token constant">NG_VALIDATORS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/forms'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[validateEqual][formControlName],[validateEqual][formControl],[validateEqual][ngModel]'</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> provide<span class="token operator">:</span> <span class="token constant">NG_VALIDATORS</span><span class="token punctuation">,</span> useExisting<span class="token operator">:</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> EqualValidator<span class="token punctuation">)</span><span class="token punctuation">,</span>
      multi<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">EqualValidator</span> <span class="token keyword">implements</span> <span class="token class-name">Validator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>@<span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">'validateEqual'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> validateEqual<span class="token operator">:</span> string<span class="token punctuation">,</span>
              @<span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">'reverse'</span><span class="token punctuation">)</span> <span class="token keyword">public</span> reverse<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">isReverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>reverse<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>reverse <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">validate</span><span class="token punctuation">(</span>c<span class="token operator">:</span> AbstractControl<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> any <span class="token punctuation">}</span> <span class="token punctuation">{</span>
    <span class="token comment">// self value</span>
    <span class="token keyword">const</span> v <span class="token operator">=</span> c<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token comment">// control vlaue</span>
    <span class="token keyword">const</span> e <span class="token operator">=</span> c<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>validateEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// value not equal</span>
    <span class="token comment">// 未设置reverse的值或值为false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> v <span class="token operator">!==</span> e<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isReverse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        validateEqual<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value equal and reverse</span>
    <span class="token comment">// 若值相等且reverse的值为true，则删除validateEqual异常信息</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> v <span class="token operator">===</span> e<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isReverse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> e<span class="token punctuation">.</span>errors<span class="token punctuation">[</span><span class="token string">'validateEqual'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">.</span><span class="token function">setErrors</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value not equal and reverse</span>
    <span class="token comment">// 若值不相等且reverse的值为true，则把异常信息添加到比对的目标控件上</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> v <span class="token operator">!==</span> e<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isReverse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">setErrors</span><span class="token punctuation">(</span><span class="token punctuation">{</span> validateEqual<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// error-img.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> HostListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">'[atrErrorImg]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AtrErrorImgDirective</span>  <span class="token punctuation">{</span>

    @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'atrErrorImg'</span><span class="token punctuation">)</span> errorImagSrc<span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">public</span> elementRef<span class="token operator">:</span> ElementRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'$event.target'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">ImageError</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>errorImagSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            event<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>errorImagSrc<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            event<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'https://atr-demo.oss-cn-hangzhou.aliyuncs.com/common/null.png'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// exe-background.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> HostListener<span class="token punctuation">,</span> Renderer2<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[exeBackground]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExeBackgroundDirective</span> <span class="token punctuation">{</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'defaultColor'</span><span class="token punctuation">)</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'exeBackground'</span><span class="token punctuation">)</span>
  defaultColor <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
  backgroundColor<span class="token operator">:</span> string<span class="token punctuation">;</span> <span class="token comment">// 输入属性，用于设置元素的背景颜色</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> elementRef<span class="token operator">:</span> ElementRef<span class="token punctuation">,</span> <span class="token keyword">private</span> renderer<span class="token operator">:</span> Renderer2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'crendererlick'</span><span class="token punctuation">)</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 监听宿主元素的点击事件，设置元素背景色</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>backgroundColor <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 调用对象提供的API设置元素的背景颜色</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementRef<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span>
      <span class="token string">'backgroundColor'</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// exe-button-press.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> HostBinding<span class="token punctuation">,</span> HostListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[exeButtonPress]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExeButtonPressDirective</span> <span class="token punctuation">{</span>
  @<span class="token function">HostBinding</span><span class="token punctuation">(</span><span class="token string">'attr.role'</span><span class="token punctuation">)</span> role <span class="token operator">=</span> <span class="token string">'button'</span><span class="token punctuation">;</span>
  @<span class="token function">HostBinding</span><span class="token punctuation">(</span><span class="token string">'class.pressed'</span><span class="token punctuation">)</span> isPressed<span class="token operator">:</span> boolean<span class="token punctuation">;</span>

  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">)</span> <span class="token function">hasPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isPressed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">)</span> <span class="token function">hasReleased</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isPressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用：</span>
<span class="token comment">// &lt;button ExeButtonPressDirective&gt;按下按钮&lt;/button&gt;</span>

<span class="token comment">// exe-if.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> TemplateRef<span class="token punctuation">,</span> ViewContainerRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[exeIf]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExeIfDirective</span> <span class="token punctuation">{</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'exeIf'</span><span class="token punctuation">)</span>
  <span class="token keyword">set</span> <span class="token function">condition</span><span class="token punctuation">(</span><span class="token parameter">newCondition<span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newCondition<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 创建模板对应的内嵌视图</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>viewContainer<span class="token punctuation">.</span><span class="token function">createEmbeddedView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>templateRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>viewContainer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> templateRef<span class="token operator">:</span> TemplateRef<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">,</span>
              <span class="token keyword">private</span> viewContainer<span class="token operator">:</span> ViewContainerRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用</span>
<span class="token comment">// import { Component } from '@angular/core';</span>
<span class="token comment">// @Component({</span>
<span class="token comment">//   selector: 'app-root',</span>
<span class="token comment">//   template: `</span>
<span class="token comment">//    &lt;h2 *exeIf=&quot;condition&quot;&gt;Hello, Semlinker!&lt;/h2&gt;</span>
<span class="token comment">//   `,</span>
<span class="token comment">// })</span>
<span class="token comment">// export class AppComponent {</span>
<span class="token comment">//   condition: boolean = false;</span>
<span class="token comment">// }</span>

<span class="token comment">// fullscreen.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> HostListener<span class="token punctuation">,</span> OnDestroy<span class="token punctuation">,</span> Output<span class="token punctuation">,</span> EventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> screenfull <span class="token keyword">from</span> <span class="token string">'screenfull'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Screenfull <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'screenfull'</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 隐藏要使用下列方法，不能使用ngIf
 * [style.display]=&quot;isFullScreen?'none':'block'&quot;
 */</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[qkcFullscreen]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FullscreenDirective</span> <span class="token keyword">implements</span> <span class="token class-name">OnDestroy</span> <span class="token punctuation">{</span>
  <span class="token comment">// tslint:disable-next-line:no-input-rename</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'fullId'</span><span class="token punctuation">)</span> eleId <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  @<span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span> fullScreenChange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sf<span class="token operator">:</span> Screenfull <span class="token operator">=</span> screenfull <span class="token keyword">as</span> Screenfull<span class="token punctuation">;</span>
  timeHandler<span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fullScreenHander<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">fullScreenHander</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fullScreenChange<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span>isFullscreen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timeHandler <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span>isFullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timeHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fullScreenChange<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span>isFullscreen<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eleId <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span>isEnabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sf<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fullScreenHander<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timeHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timeHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用：</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;fullContainer&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>button nz<span class="token operator">-</span>button nzType<span class="token operator">=</span><span class="token string">&quot;link&quot;</span> qkcFullscreen fullId<span class="token operator">=</span><span class="token string">&quot;fullContainer&quot;</span> <span class="token punctuation">(</span>fullScreenChange<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;fullChange($event)&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>i nz<span class="token operator">-</span>icon <span class="token punctuation">[</span>nzType<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;isFullScreen ? 'fullscreen-exit' : 'fullscreen'&quot;</span> nzTheme<span class="token operator">=</span><span class="token string">&quot;outline&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token function">fullChange</span><span class="token punctuation">(</span><span class="token parameter">isFullScreen<span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isFullScreen <span class="token operator">=</span> isFullScreen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// highlight.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> HostListener<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> Renderer2<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[highlight]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HighlightDirective</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> el<span class="token operator">:</span> ElementRef<span class="token punctuation">,</span> <span class="token keyword">private</span> renderer2<span class="token operator">:</span> Renderer2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'document:click'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'$event'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token parameter">btn<span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">highlight</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>renderer2<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'backgroundColor'</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用：</span>
<span class="token comment">// &lt;h4 highlight&gt;点击该区域，元素会被高亮。点击其它区域，元素会取消高亮&lt;/h4&gt;</span>

<span class="token comment">// qkc-spin.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> ElementRef <span class="token punctuation">,</span> OnChanges<span class="token punctuation">,</span> SimpleChanges<span class="token punctuation">,</span> Renderer2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[qkcSpin]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">QkcSpinDirective</span> <span class="token keyword">implements</span> <span class="token class-name">OnChanges</span>  <span class="token punctuation">{</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> spinLoading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  loadingEle<span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> el<span class="token operator">:</span> ElementRef<span class="token punctuation">,</span> <span class="token keyword">private</span> render<span class="token operator">:</span> Renderer2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'qkc-spin-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loadingEle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loadingEle<span class="token punctuation">,</span> <span class="token string">'loader-03'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">ngOnChanges</span><span class="token punctuation">(</span><span class="token parameter">changes<span class="token operator">:</span> SimpleChanges</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> spinLoading <span class="token punctuation">}</span> <span class="token operator">=</span> changes<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>spinLoading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>spinLoading<span class="token punctuation">.</span>currentValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'qkc-spin-blur'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadingEle<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token string">'qkc-spin-blur'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>render<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loadingEle<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 样式：loading</span>
<span class="token punctuation">.</span>qkc<span class="token operator">-</span>spin<span class="token operator">-</span>container <span class="token punctuation">{</span>
  position<span class="token operator">:</span> relative<span class="token punctuation">;</span>
  transition<span class="token operator">:</span> opacity <span class="token number">0.3</span>s<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">{</span>
    position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
    top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">;</span>
    display<span class="token operator">:</span> <span class="token operator">~</span><span class="token string">'none \9'</span><span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    background<span class="token operator">:</span> #e6f7ff<span class="token punctuation">;</span>
    opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    transition<span class="token operator">:</span> all <span class="token number">0.3</span>s<span class="token punctuation">;</span>
    content<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    pointer<span class="token operator">-</span>events<span class="token operator">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>qkc<span class="token operator">-</span>spin<span class="token operator">-</span>blur <span class="token punctuation">{</span>
  clear<span class="token operator">:</span> both<span class="token punctuation">;</span>
  overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span>
  opacity<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
  user<span class="token operator">-</span>select<span class="token operator">:</span> none<span class="token punctuation">;</span>
  pointer<span class="token operator">-</span>events<span class="token operator">:</span> none<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">{</span>
    opacity<span class="token operator">:</span> <span class="token number">0.4</span><span class="token punctuation">;</span>
    pointer<span class="token operator">-</span>events<span class="token operator">:</span> auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>loader<span class="token operator">-</span><span class="token number">03</span> <span class="token punctuation">{</span>
    display<span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
    height<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
    color<span class="token operator">:</span> inherit<span class="token punctuation">;</span>
    vertical<span class="token operator">-</span>align<span class="token operator">:</span> middle<span class="token punctuation">;</span>
    pointer<span class="token operator">-</span>events<span class="token operator">:</span> none<span class="token punctuation">;</span>
    border<span class="token operator">:</span> <span class="token number">4</span>px solid #<span class="token number">1890</span>ff<span class="token punctuation">;</span>
    border<span class="token operator">-</span>bottom<span class="token operator">-</span>color<span class="token operator">:</span> transparent<span class="token punctuation">;</span>
    border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
    animation<span class="token operator">:</span> <span class="token number">1</span>s loader<span class="token operator">-</span><span class="token number">03</span> linear infinite<span class="token punctuation">;</span>
    position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
    top<span class="token operator">:</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
    left<span class="token operator">:</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
    margin<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span>px <span class="token number">0</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token number">20</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@keyframes loader<span class="token operator">-</span><span class="token number">03</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">%</span> <span class="token punctuation">{</span>
        <span class="token operator">-</span>webkit<span class="token operator">-</span>transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">{</span>
        <span class="token operator">-</span>webkit<span class="token operator">-</span>transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">360</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">360</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用：</span>
<span class="token operator">&lt;</span>div qkcSpin <span class="token punctuation">[</span>spinLoading<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;isLoadingAddCoorperative&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">// number-input.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Directive<span class="token punctuation">,</span> Attribute<span class="token punctuation">,</span> ElementRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HostListener<span class="token punctuation">,</span> Input<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[att-numberonly]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NumberInputDirective</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token operator">:</span> ElementRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'$event'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token operator">&lt;</span>KeyboardEvent<span class="token operator">&gt;</span>event<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">190</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span>
      <span class="token comment">// 允许全选: Ctrl+A</span>
      <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">65</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token comment">// 允许复制: Ctrl+C</span>
      <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">67</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token comment">// 允许粘贴: Ctrl+V</span>
      <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">86</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token comment">// 允许剪切: Ctrl+X</span>
      <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">88</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>ctrlKey <span class="token operator">||</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token comment">// 允许: home（头）, end（尾）, left（左移）, right（右移）</span>
      <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">&gt;=</span> <span class="token number">35</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>keyCode <span class="token operator">&lt;=</span> <span class="token number">39</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// let it happen, don't do anything</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 确保数字以外的案件被拒绝执行默认动作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>shiftKey <span class="token operator">||</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>keyCode <span class="token operator">&gt;</span> <span class="token number">57</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">&lt;</span> <span class="token number">96</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>keyCode <span class="token operator">&gt;</span> <span class="token number">105</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// scroll.directive.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> HostListener<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> QkcScrollService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./service/qkc-scroll.service'</span><span class="token punctuation">;</span>
@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[qkcScroll]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ScrollDirective</span> <span class="token punctuation">{</span>
  <span class="token comment">// tslint:disable-next-line:no-input-rename</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'scrollId'</span><span class="token punctuation">)</span> eleId <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> scrollService<span class="token operator">:</span> QkcScrollService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>gio
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eleId <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scrollService<span class="token punctuation">.</span><span class="token function">scrollToAnchor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>eleId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br></div></div><h2 id="angular-guard"><a href="#angular-guard" class="header-anchor">#</a> angular-guard</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// auth.guard.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> RouterStateSnapshot<span class="token punctuation">,</span> UrlTree<span class="token punctuation">,</span> CanActivate<span class="token punctuation">,</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LocalStorageUtil <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/localstorage.util'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AtrReuseStrategy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../routereuse/atr-reuse-strategy'</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> <span class="token string">'root'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token keyword">implements</span>   <span class="token class-name">CanActivate</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token keyword">private</span> router<span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">canActivate</span><span class="token punctuation">(</span>
    route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span>
    state<span class="token operator">:</span> RouterStateSnapshot
  <span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token operator">|</span> UrlTree <span class="token operator">|</span> Observable<span class="token operator">&lt;</span>boolean <span class="token operator">|</span> UrlTree<span class="token operator">&gt;</span> <span class="token operator">|</span> Promise<span class="token operator">&lt;</span>boolean <span class="token operator">|</span> UrlTree<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// throw new Error(&quot;Method not implemented.&quot;);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> LocalStorageUtil<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigateByUrl</span><span class="token punctuation">(</span><span class="token string">'/p/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  AtrReuseStrategy<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="angular-service"><a href="#angular-service" class="header-anchor">#</a> angular-service</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// qkc-scroll.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> <span class="token string">'root'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">QkcScrollService</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token function">scrollToAnchor</span><span class="token punctuation">(</span><span class="token parameter">eleId<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>eleId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      behavior<span class="token operator">:</span> <span class="token string">'smooth'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ali-oss.service.ts </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NzUploadXHRArgs<span class="token punctuation">,</span> NzMessageService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  HttpRequest<span class="token punctuation">,</span>
  HttpEvent<span class="token punctuation">,</span>
  HttpEventType<span class="token punctuation">,</span>
  HttpResponse<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common/http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HttpService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./http.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>queryParam<span class="token punctuation">,</span> ToolsUtil<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/tools.util'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">OSS</span> <span class="token keyword">from</span> <span class="token string">'ali-oss'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>defer<span class="token punctuation">,</span> throwError<span class="token punctuation">,</span> <span class="token keyword">of</span><span class="token punctuation">,</span> Observable<span class="token punctuation">,</span> timer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>tap<span class="token punctuation">,</span> switchMap<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> retryWhen<span class="token punctuation">,</span> scan<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>environment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NzUploadXHRArgsExtend<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../base/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>hex_sha1<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/sha1'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">UploadTask</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 直接上传：true， 断点上传： false
   */</span>
  isDirect<span class="token operator">:</span> boolean<span class="token punctuation">;</span>
  policy<span class="token operator">:</span> any<span class="token punctuation">;</span>
  uploadXhrArgs<span class="token operator">:</span> NzUploadXHRArgs<span class="token punctuation">;</span>
  objectName<span class="token operator">:</span> string<span class="token punctuation">;</span>
  undoneUploadPart<span class="token operator">:</span> <span class="token punctuation">{</span>
    done<span class="token operator">:</span> boolean<span class="token punctuation">;</span>
    lastCheckPoints<span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AliOssService</span> <span class="token punctuation">{</span>
  ossClient<span class="token operator">:</span> <span class="token constant">OSS</span><span class="token punctuation">;</span>
  uploadTasks<span class="token operator">:</span> UploadTask<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  percent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token function-variable function">percentReport</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">percent<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  downloadPolicy<span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token keyword">private</span> httpService<span class="token operator">:</span> HttpService<span class="token punctuation">,</span>
    <span class="token keyword">private</span> nzMsg<span class="token operator">:</span> NzMessageService</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token function">createObjectName</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token operator">:</span> string<span class="token punctuation">,</span> filename<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ToolsUtil<span class="token punctuation">.</span><span class="token function">getRandomFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ToolsUtil<span class="token punctuation">.</span><span class="token function">getFileExt</span><span class="token punctuation">(</span>
      filename
    <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token function">addUploadTask</span><span class="token punctuation">(</span>
    <span class="token parameter">uploadXhrArgs<span class="token operator">:</span> NzUploadXHRArgs<span class="token punctuation">,</span>
    policy<span class="token operator">:</span> any<span class="token punctuation">,</span>
    isDirect<span class="token operator">?</span><span class="token operator">:</span> boolean</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> task<span class="token operator">:</span> UploadTask <span class="token operator">=</span> <span class="token punctuation">{</span>
      isDirect<span class="token punctuation">,</span>
      uploadXhrArgs<span class="token punctuation">,</span>
      policy<span class="token punctuation">,</span>
      objectName<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createObjectName</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span>dir<span class="token punctuation">,</span> uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      undoneUploadPart<span class="token operator">:</span> <span class="token punctuation">{</span>
        done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        lastCheckPoints<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uploadTasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> task<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">download</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> filename <span class="token operator">=</span> data<span class="token punctuation">.</span>attachmentName <span class="token operator">||</span> data<span class="token punctuation">.</span>materialName<span class="token punctuation">;</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>sourceType <span class="token operator">===</span> <span class="token string">'2'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> params<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span>
        ptime<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vid<span class="token operator">:</span> data<span class="token punctuation">.</span>attachmentPath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> sign <span class="token operator">=</span> <span class="token function">hex_sha1</span><span class="token punctuation">(</span><span class="token function">queryParam</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">+</span> environment<span class="token punctuation">.</span>secretkey<span class="token punctuation">)</span><span class="token punctuation">;</span>
      params<span class="token punctuation">.</span>sign <span class="token operator">=</span> sign<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> apiUrl <span class="token operator">=</span> environment<span class="token punctuation">.</span>polywayApi <span class="token operator">+</span> <span class="token string">'v2/video/'</span> <span class="token operator">+</span> environment<span class="token punctuation">.</span>userid <span class="token operator">+</span> <span class="token string">'/get-video-msg'</span><span class="token punctuation">;</span>
      ToolsUtil<span class="token punctuation">.</span><span class="token function">getAjax</span><span class="token punctuation">(</span>apiUrl<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mp4<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              url <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mp4<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">,</span> <span class="token string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              url <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mp4<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'文件开始下载中...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">baoliweiDownload</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res <span class="token operator">||</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      url <span class="token operator">=</span> data<span class="token punctuation">.</span>attachmentPath <span class="token operator">||</span> data<span class="token punctuation">.</span>materialUrl<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'文件开始下载中...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token function">baoliweiDownload</span><span class="token punctuation">(</span><span class="token parameter">videoUrl<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBlob</span><span class="token punctuation">(</span>videoUrl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveAs</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">getBlob</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">'blob'</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  saveAs <span class="token operator">=</span> <span class="token punctuation">(</span>blob<span class="token punctuation">,</span> filename <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>msSaveOrOpenBlob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      navigator<span class="token punctuation">.</span><span class="token function">msSaveBlob</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      link<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建对象url</span>
      link<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>
      link<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
      body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
      link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过调用 URL.createObjectURL() 创建的 URL 对象</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>



  <span class="token function">downloadFile</span><span class="token punctuation">(</span>filename<span class="token operator">:</span> string<span class="token punctuation">,</span> objectName<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> policy$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy <span class="token operator">?</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicyMult</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      policy$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy <span class="token operator">=</span> res<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createOssClient</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>objectName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token constant">OSS_URL</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              objectName <span class="token operator">=</span> objectName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token constant">OSS_URL</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> objectName<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'attachmentPath'</span><span class="token punctuation">,</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSignatureUrl</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gotoDownload</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            observer<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'下载失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'获取签名失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token function">getUploadTask</span><span class="token punctuation">(</span><span class="token parameter">objectName<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadTasks<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> task<span class="token punctuation">.</span>objectName <span class="token operator">===</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">createOssClient</span><span class="token punctuation">(</span><span class="token parameter">policy<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>ossClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        bucket<span class="token operator">:</span> policy<span class="token punctuation">.</span>bucket<span class="token punctuation">,</span>
        accessKeyId<span class="token operator">:</span> policy<span class="token punctuation">.</span>accessKeyId<span class="token punctuation">,</span>
        accessKeySecret<span class="token operator">:</span> policy<span class="token punctuation">.</span>accessKeySecret<span class="token punctuation">,</span>
        stsToken<span class="token operator">:</span> policy<span class="token punctuation">.</span>securitytoken<span class="token punctuation">,</span>
        endpoint<span class="token operator">:</span> environment<span class="token punctuation">.</span>endpoint<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPartSize</span><span class="token punctuation">(</span><span class="token parameter">fileSize<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> maxNumParts <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> defaultPartSize <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> filesizeThreshold <span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> partSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fileSize <span class="token operator">&lt;=</span> i <span class="token operator">*</span> filesizeThreshold<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        partSize <span class="token operator">=</span> i <span class="token operator">*</span> defaultPartSize<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>fileSize <span class="token operator">/</span> maxNumParts<span class="token punctuation">)</span><span class="token punctuation">,</span> partSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">progressEvent</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">percentage<span class="token operator">:</span> number<span class="token punctuation">,</span> checkPoint<span class="token operator">:</span> any<span class="token punctuation">,</span> res<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> objectName <span class="token operator">=</span> checkPoint<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">const</span> task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUploadTask</span><span class="token punctuation">(</span>objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>task<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    task<span class="token punctuation">.</span>undoneUploadPart<span class="token punctuation">.</span>lastCheckPoints <span class="token operator">=</span> checkPoint<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">percentReport</span><span class="token punctuation">(</span>percentage <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    task<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onProgress</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span>percent<span class="token operator">:</span> percentage <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      task<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 分片上传
   * @param objectName 文件名
   * @param file 文件
   */</span>
  <span class="token keyword">async</span> <span class="token function">multipartUpload</span><span class="token punctuation">(</span><span class="token parameter">uploadTask<span class="token operator">:</span> UploadTask</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// object-name可以自定义为文件名（例如file.txt）或目录（例如abc/test/file.txt）的形式，实现将文件上传至当前Bucket或Bucket下的指定目录。</span>
      <span class="token keyword">const</span> partSize <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPartSize</span><span class="token punctuation">(</span>uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> opts<span class="token operator">:</span> <span class="token constant">OSS</span><span class="token punctuation">.</span>MultipartUploadOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        partSize<span class="token punctuation">,</span>
        progress<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>progressEvent<span class="token punctuation">,</span>
        checkpoint<span class="token operator">:</span> uploadTask<span class="token punctuation">.</span>undoneUploadPart<span class="token punctuation">.</span>done
          <span class="token operator">?</span> <span class="token keyword">undefined</span>
          <span class="token operator">:</span> uploadTask<span class="token punctuation">.</span>undoneUploadPart<span class="token punctuation">.</span>lastCheckPoints<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ossClient<span class="token punctuation">.</span><span class="token function">multipartUpload</span><span class="token punctuation">(</span>
        uploadTask<span class="token punctuation">.</span>objectName<span class="token punctuation">,</span>
        uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">,</span>
        opts
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      uploadTask<span class="token punctuation">.</span>undoneUploadPart<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> data<span class="token operator">:</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      uploadTask<span class="token punctuation">.</span>undoneUploadPart<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>code<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> data<span class="token operator">:</span> e<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">resumeUpload</span><span class="token punctuation">(</span><span class="token parameter">uploadTask<span class="token operator">:</span> UploadTask</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createOssClient</span><span class="token punctuation">(</span>uploadTask<span class="token punctuation">.</span>policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">defer</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">multipartUpload</span><span class="token punctuation">(</span>uploadTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">throwError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">retryWhen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err$</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> err$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
            <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorDesc</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',5秒后重新尝试上传！'</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>acc <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> curr<span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
              <span class="token keyword">return</span> acc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token string">'/'</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>url <span class="token operator">=</span> ToolsUtil<span class="token punctuation">.</span><span class="token function">getOssUrl</span><span class="token punctuation">(</span>
              uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>key
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onSuccess</span><span class="token punctuation">(</span>
              result<span class="token punctuation">,</span>
              uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">,</span>
              <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>
              result<span class="token punctuation">,</span>
              uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'ConnectionTimeoutError'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorDesc</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',请到更换网络再试！'</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>nzDuration<span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'RequestError'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorDesc</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',请检查是否有网络！'</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>nzDuration<span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorDesc</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              nzDuration<span class="token operator">:</span> <span class="token number">6000</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getErrorDesc</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'ConnectionTimeoutError'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'网络超时'</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token string">'RequestError'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'请求出错'</span><span class="token punctuation">;</span>

      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'未知错误'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPolicyMult</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>httpService<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
      <span class="token string">'res/oss/getPolicyMult'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>dir<span class="token punctuation">}</span><span class="token punctuation">,</span>
      ToolsUtil<span class="token punctuation">.</span><span class="token function">getHttpOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPolicyDirect</span><span class="token punctuation">(</span><span class="token parameter">dir<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>httpService<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
      <span class="token string">'res/oss/getPolicy'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>dir<span class="token punctuation">}</span><span class="token punctuation">,</span>
      ToolsUtil<span class="token punctuation">.</span><span class="token function">getHttpOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPolicy</span><span class="token punctuation">(</span><span class="token parameter">isDirect<span class="token operator">:</span> boolean<span class="token punctuation">,</span> uploadDir<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isDirect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicyDirect</span><span class="token punctuation">(</span>uploadDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicyMult</span><span class="token punctuation">(</span>uploadDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">isDirectUpload</span><span class="token punctuation">(</span><span class="token parameter">filesize<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> filesizeThreshold <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> filesize <span class="token operator">&lt;</span> filesizeThreshold<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">upload2AliOSS</span><span class="token punctuation">(</span><span class="token parameter">uploadXhrArgs<span class="token operator">:</span> NzUploadXHRArgsExtend<span class="token punctuation">,</span> uploadDir<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isDirect <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isDirectUpload</span><span class="token punctuation">(</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>percentReport <span class="token operator">=</span> uploadXhrArgs<span class="token punctuation">.</span>percentReport<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicy</span><span class="token punctuation">(</span>isDirect<span class="token punctuation">,</span> uploadDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> policy <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">const</span> uploadTask <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addUploadTask</span><span class="token punctuation">(</span>uploadXhrArgs<span class="token punctuation">,</span> policy<span class="token punctuation">,</span> isDirect<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDirect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">directUpload2AliOSS</span><span class="token punctuation">(</span>uploadTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resumeUpload</span><span class="token punctuation">(</span>uploadTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> errMsg <span class="token operator">=</span> res<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'获取签名失败'</span><span class="token punctuation">;</span>
        uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">,</span> uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">,</span> <span class="token punctuation">{</span>nzDuration<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">directUpload2AliOSS</span><span class="token punctuation">(</span><span class="token parameter">uploadTask<span class="token operator">:</span> UploadTask</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'policy'</span><span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>policy<span class="token punctuation">.</span>policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'OSSAccessKeyId'</span><span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>policy<span class="token punctuation">.</span>accessKeyId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'Signature'</span><span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>policy<span class="token punctuation">.</span>signature<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>postFile <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'success_action_status'</span><span class="token punctuation">,</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span><span class="token constant">OSS_URL</span><span class="token punctuation">,</span> formData<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      reportProgress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>httpService<span class="token punctuation">.</span>originalHttpClient<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">event<span class="token operator">:</span> HttpEvent<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> HttpEventType<span class="token punctuation">.</span>UploadProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>total <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'percent'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> that<span class="token punctuation">.</span>percent<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>percentReport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  that<span class="token punctuation">.</span><span class="token function">percentReport</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                that<span class="token punctuation">.</span>percent <span class="token operator">=</span> val<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span>event <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>loaded <span class="token operator">/</span> event<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onProgress</span><span class="token punctuation">(</span>
            event<span class="token punctuation">,</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>key <span class="token operator">=</span> <span class="token string">'/'</span> <span class="token operator">+</span> uploadTask<span class="token punctuation">.</span>objectName<span class="token punctuation">;</span>
          uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">.</span>url <span class="token operator">=</span> ToolsUtil<span class="token punctuation">.</span><span class="token function">getOssUrl</span><span class="token punctuation">(</span>
            uploadTask<span class="token punctuation">.</span>objectName
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
          uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onSuccess</span><span class="token punctuation">(</span>
            event<span class="token punctuation">.</span>body<span class="token punctuation">,</span>
            uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">,</span>
            event
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> uploadTask<span class="token punctuation">.</span>uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">patchDownloadFileStudent</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token operator">:</span> <span class="token punctuation">{</span> filename<span class="token operator">:</span> string<span class="token punctuation">,</span> path<span class="token operator">:</span> string <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> policy$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy <span class="token operator">?</span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicyMult</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      policy$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>downloadPolicy <span class="token operator">=</span> res<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createOssClient</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSignatureUrl</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> file<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gotoDownload</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1300</span> <span class="token operator">*</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'下载失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'获取签名失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">patchDownloadFile</span><span class="token punctuation">(</span>filename<span class="token operator">:</span> string<span class="token punctuation">,</span> objectName<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> objectName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ext <span class="token operator">=</span> arr<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>filename<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      filename <span class="token operator">=</span> filename <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> ext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPolicyMult</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createOssClient</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSignatureUrl</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gotoDownload</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
          observer<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          observer<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          observer<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'获取签名失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getSignatureUrl</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> objectName<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ossClient<span class="token punctuation">.</span><span class="token function">signatureUrl</span><span class="token punctuation">(</span>objectName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      response<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'content-disposition'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment; filename=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">gotoDownload</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token operator">:</span> string<span class="token punctuation">,</span> fileUrl<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLIFrameElement<span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>src <span class="token operator">=</span> fileUrl<span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 支持HTML5下载属性的浏览器</span>
    <span class="token comment">// const link = document.createElement('a');</span>
    <span class="token comment">// const url = fileUrl;</span>
    <span class="token comment">// link.setAttribute('href', url);</span>
    <span class="token comment">// link.setAttribute('download', '知识图谱.xls');</span>
    <span class="token comment">// link.style.visibility = 'hidden';</span>
    <span class="token comment">// document.body.appendChild(link);</span>
    <span class="token comment">// link.click();</span>
    <span class="token comment">// document.body.removeChild(link);</span>
    <span class="token comment">// const $eleForm = document.createElement('form');</span>
    <span class="token comment">// $eleForm.setAttribute('method', 'get');</span>
    <span class="token comment">// $eleForm.setAttribute('action','xx');</span>
    <span class="token comment">// document.body.appendChild($eleForm);</span>
    <span class="token comment">// $eleForm.submit();</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// broadcaster.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Observable<span class="token punctuation">,</span> Subject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>filter<span class="token punctuation">,</span> map<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">BroadcastEvent</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> any<span class="token punctuation">;</span>
  data<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BroadcastService</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> eventBus<span class="token operator">:</span> Subject<span class="token operator">&lt;</span>BroadcastEvent<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token operator">&lt;</span>BroadcastEvent<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">broadcast</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token operator">:</span> any<span class="token punctuation">,</span> data<span class="token operator">?</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eventBus<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>key<span class="token punctuation">,</span> data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  on<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>key<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eventBus<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> event<span class="token punctuation">.</span>key <span class="token operator">===</span> key<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> event<span class="token punctuation">.</span>data <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用：</span>
<span class="token comment">// import { Component } from '@angular/core';</span>
<span class="token comment">// @Component({</span>
<span class="token comment">//   selector: 'child'</span>
<span class="token comment">// })</span>
<span class="token comment">// export class ChildComponent {</span>
<span class="token comment">//   constructor(private broadcaster: Broadcaster) {}</span>
<span class="token comment">//   registerStringBroadcast() {</span>
<span class="token comment">//     this.broadcaster.on&lt;string&gt;('MyEvent')</span>
<span class="token comment">//       .subscribe(message =&gt; {</span>
<span class="token comment">//       ...</span>
<span class="token comment">//       });</span>
<span class="token comment">//   }</span>
<span class="token comment">//   emitStringBroadcast() {</span>
<span class="token comment">//     this.broadcaster.broadcast('MyEvent', 'some message');</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br></div></div><h2 id="angular-routereuse"><a href="#angular-routereuse" class="header-anchor">#</a> angular-routereuse</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  ActivatedRouteSnapshot<span class="token punctuation">,</span>
  DetachedRouteHandle<span class="token punctuation">,</span>
  RouteReuseStrategy
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ComponentRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token comment">// solution: https://github.com/angular/angular/issues/25521</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DetachedRouteHandleExt</span> <span class="token keyword">extends</span> <span class="token class-name">DetachedRouteHandle</span> <span class="token punctuation">{</span>
  componentRef<span class="token operator">:</span> ComponentRef<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RouteCacheRecord</span> <span class="token punctuation">{</span>
  handle<span class="token operator">:</span> DetachedRouteHandleExt<span class="token punctuation">;</span>
  <span class="token comment">/**
   * For unclear reasons, when the navigation starts, &quot;retrieve&quot; is called
   * without calling &quot;shouldAttach&quot; first (from &quot;createRouterState&quot;).
   * This flag is used to ignore those calls. :-
   */</span>
  shouldAttachCalled<span class="token operator">:</span> boolean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AtrReuseStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">RouteReuseStrategy</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> routeCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> RouteCacheRecord<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> ReusePath<span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'_m_course-manage_course-list'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_profession-list'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_i-initiated'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_approve-all'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_rm_read'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_rm_case'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_rm_setting'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_rm_train'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_scp-list'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_initiatepkg'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_iapproved'</span><span class="token punctuation">,</span>
    <span class="token string">'_m_course-manage_series-management'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/** 删除所有缓存路由 */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> routeCache <span class="token operator">=</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>routeCache <span class="token operator">&amp;&amp;</span> routeCache<span class="token punctuation">.</span>handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        routeCache<span class="token punctuation">.</span>handle<span class="token punctuation">.</span>componentRef<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token comment">/** 删除缓存路由快照的方法 */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">deleteRouteSnapshot</span><span class="token punctuation">(</span>path<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\//g</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> routeCache <span class="token operator">=</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>routeCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>routeCache <span class="token operator">&amp;&amp;</span> routeCache<span class="token punctuation">.</span>handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        routeCache<span class="token punctuation">.</span>handle<span class="token punctuation">.</span>componentRef<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">shouldDetach</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSnapshotKey</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> del <span class="token operator">=</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shouldDetach <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isToBeIgnored</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token string">'shouldDetach'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>del<span class="token punctuation">;</span>
    <span class="token keyword">return</span> shouldDetach<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">/** 当路由离开时会触发。按path作为key存储路由快照&amp;组件当前实例对象 */</span>
  <span class="token function">store</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> detachedTree<span class="token operator">:</span> DetachedRouteHandleExt <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>detachedTree <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isToBeIgnored</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token string">'store'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSnapshotKey</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      handle<span class="token operator">:</span> detachedTree<span class="token punctuation">,</span>
      shouldAttachCalled<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>detachedTree<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callHook</span><span class="token punctuation">(</span>detachedTree<span class="token punctuation">,</span> <span class="token string">'ngOnDetach'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token comment">/** 若 path 在缓存中有的都认为允许还原路由 */</span>
  <span class="token function">shouldAttach</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSnapshotKey</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stored <span class="token operator">=</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> destroyed <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>
      stored <span class="token operator">&amp;&amp;</span> stored<span class="token punctuation">.</span>handle<span class="token punctuation">.</span>componentRef<span class="token punctuation">.</span>hostView<span class="token punctuation">.</span>destroyed
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> msgStatus <span class="token operator">=</span> destroyed <span class="token operator">?</span> <span class="token string">'DESTROYED'</span> <span class="token operator">:</span> stored <span class="token operator">?</span> <span class="token string">'FOUND'</span> <span class="token operator">:</span> <span class="token string">'NOT FOUND'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shouldAttach <span class="token operator">=</span>
      <span class="token operator">!</span>destroyed <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>stored <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isToBeIgnored</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token string">'shouldAttach'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldAttach<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      stored<span class="token punctuation">.</span>shouldAttachCalled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> shouldAttach<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">/** 从缓存中获取快照，若无则返回nul */</span>
  <span class="token function">retrieve</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> DetachedRouteHandleExt <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSnapshotKey</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stored <span class="token operator">=</span> AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> destroyed <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>
      stored <span class="token operator">&amp;&amp;</span> stored<span class="token punctuation">.</span>handle<span class="token punctuation">.</span>componentRef<span class="token punctuation">.</span>hostView<span class="token punctuation">.</span>destroyed
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> shouldBeRetrieved <span class="token operator">=</span>
      <span class="token operator">!</span>destroyed <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>stored <span class="token operator">&amp;&amp;</span> stored<span class="token punctuation">.</span>shouldAttachCalled<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>destroyed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      AtrReuseStrategy<span class="token punctuation">.</span>routeCache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldBeRetrieved<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      stored<span class="token punctuation">.</span>shouldAttachCalled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isToBeIgnored</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token string">'retrieve'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> detachedTree <span class="token operator">=</span> stored<span class="token punctuation">.</span>handle<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callHook</span><span class="token punctuation">(</span>detachedTree<span class="token punctuation">,</span> <span class="token string">'ngOnAttach'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> detachedTree<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isToBeIgnored</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token string">'pre-retrieve'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> stored <span class="token operator">?</span> stored<span class="token punctuation">.</span>handle <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">/** 进入路由触发，判断是否同一路由 */</span>
  <span class="token function">shouldReuseRoute</span><span class="token punctuation">(</span>future<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> curr<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span>routeConfig <span class="token operator">===</span> curr<span class="token punctuation">.</span>routeConfig<span class="token punctuation">;</span> <span class="token comment">// from DefaultRouteReuseStrategy</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">/** 使用route的path作为快照的key */</span>
  <span class="token keyword">private</span> <span class="token function">getSnapshotKey</span><span class="token punctuation">(</span>snapshot<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> string <span class="token punctuation">{</span>
    <span class="token keyword">return</span> snapshot<span class="token punctuation">[</span><span class="token string">'_routerState'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\//g</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">/**过滤相关不重用路由*/</span>
  <span class="token keyword">private</span> <span class="token function">isToBeIgnored</span><span class="token punctuation">(</span><span class="token parameter">route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> msg<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>route<span class="token punctuation">.</span>routeConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>routeConfig<span class="token punctuation">.</span>loadChildren<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>AtrReuseStrategy<span class="token punctuation">.</span>ReusePath<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>route<span class="token punctuation">[</span><span class="token string">'_routerState'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\//g</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">/**增加attach/dettach钩子*/</span>
  <span class="token keyword">private</span> <span class="token function">callHook</span><span class="token punctuation">(</span>detachedTree<span class="token operator">:</span> DetachedRouteHandleExt<span class="token punctuation">,</span> hookName<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> componentRef <span class="token operator">=</span> detachedTree<span class="token punctuation">.</span>componentRef<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      componentRef <span class="token operator">&amp;&amp;</span>
      componentRef<span class="token punctuation">.</span>instance <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">typeof</span> componentRef<span class="token punctuation">.</span>instance<span class="token punctuation">[</span>hookName<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      componentRef<span class="token punctuation">.</span>instance<span class="token punctuation">[</span>hookName<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// message.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>BehaviorSubject<span class="token punctuation">,</span> Observable<span class="token punctuation">,</span> Subject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MessageService</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">clearMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subject<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// startup.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ToolsUtil <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/tools.util'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 用于应用启动时
 * 一般用来获取应用所需要的基础数据等
 */</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> <span class="token string">'root'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">StartupService</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> orgCode <span class="token operator">=</span> ToolsUtil<span class="token punctuation">.</span><span class="token function">getOrgCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>orgCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> ow365Arr <span class="token operator">=</span> environment<span class="token punctuation">.</span>ow365<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span>ow365 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ow365Arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?orgCode=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orgCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ow365Arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span>commonViewer <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token punctuation">.</span>commonViewer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?orgCode=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>orgCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// upload-oss.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HttpService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./http.service'</span><span class="token punctuation">;</span>
<span class="token comment">// import { UploadFile, UploadXHRArgs } from 'ng-zorro-antd';</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ToolsUtil <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/tools.util'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HttpRequest<span class="token punctuation">,</span> HttpClient<span class="token punctuation">,</span> HttpEvent<span class="token punctuation">,</span> HttpResponse<span class="token punctuation">,</span> HttpEventType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common/http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadOssService</span> <span class="token punctuation">{</span>
  uploadData<span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> httpService<span class="token operator">:</span> HttpService<span class="token punctuation">,</span> <span class="token keyword">private</span> httpClient<span class="token operator">:</span> HttpClient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token function-variable function">uploadOss</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> uploadDir</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">observe</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>uploadData <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">customReq</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            observe<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          observe<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observe<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>httpService<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'res/oss/getPolicy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> dir<span class="token operator">:</span> uploadDir <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">customReq</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadData<span class="token punctuation">.</span>dir <span class="token operator">+</span> ToolsUtil<span class="token punctuation">.</span><span class="token function">getRandomFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> ToolsUtil<span class="token punctuation">.</span><span class="token function">getFileExt</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'OSSAccessKeyId'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadData<span class="token punctuation">.</span>accessKeyId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'policy'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadData<span class="token punctuation">.</span>policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'Signature'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>uploadData<span class="token punctuation">.</span>signature<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'success_action_status'</span><span class="token punctuation">,</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> file <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this.uploadData.host!</span>
    <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span><span class="token constant">OSS_URL</span><span class="token punctuation">,</span> formData<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      reportProgress<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">observe</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token operator">:</span> HttpEvent<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> HttpEventType<span class="token punctuation">.</span>UploadProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// const url = event.url + key;</span>
          observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          observe<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observe<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>httpClient<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// upload-polyway.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HttpService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./http.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HttpRequest<span class="token punctuation">,</span> HttpClient<span class="token punctuation">,</span> HttpEvent<span class="token punctuation">,</span> HttpResponse<span class="token punctuation">,</span> HttpEventType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common/http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>environment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NzMessageService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd/message'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>hex_sha1<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/sha1'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadPolywayService</span> <span class="token punctuation">{</span>
  percent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token function-variable function">percentReport</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">percent<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> httpService<span class="token operator">:</span> HttpService<span class="token punctuation">,</span> <span class="token keyword">private</span> httpClient<span class="token operator">:</span> HttpClient<span class="token punctuation">,</span> <span class="token keyword">private</span> nzMsg<span class="token operator">:</span> NzMessageService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">uploadPolyway</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">customReq</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">customReq</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">uploadXhrArgs</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>percentReport <span class="token operator">=</span> uploadXhrArgs<span class="token punctuation">.</span>percentReport<span class="token punctuation">;</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">JSONRPC</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> uploadXhrArgs<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      tag<span class="token operator">:</span> uploadXhrArgs<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      desc<span class="token operator">:</span> uploadXhrArgs<span class="token punctuation">.</span>name
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'JSONRPC'</span><span class="token punctuation">,</span> <span class="token constant">JSONRPC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'Filedata'</span><span class="token punctuation">,</span> uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'writetoken'</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span>writetoken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'cataid'</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span>cataid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'fcharset'</span><span class="token punctuation">,</span> <span class="token string">'ISO-8859-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> sign <span class="token operator">=</span> <span class="token function">hex_sha1</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">cataid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token punctuation">.</span>cataid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;JSONRPC=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSONRPC</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;writetoken=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token punctuation">.</span>writetoken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token punctuation">.</span>secretkey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'sign'</span><span class="token punctuation">,</span> sign<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this.uploadData.host!</span>
    <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> environment<span class="token punctuation">.</span>polywayUpload <span class="token operator">+</span> <span class="token string">'uc/services/rest/?method=uploadfile'</span><span class="token punctuation">,</span> formData<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      reportProgress<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>httpService<span class="token punctuation">.</span>originalHttpClient<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">event<span class="token operator">:</span> HttpEvent<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> HttpEventType<span class="token punctuation">.</span>UploadProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>total <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'percent'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> that<span class="token punctuation">.</span>percent<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>percentReport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  that<span class="token punctuation">.</span><span class="token function">percentReport</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                that<span class="token punctuation">.</span>percent <span class="token operator">=</span> val<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">(</span>event <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>loaded <span class="token operator">/</span> event<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onProgress</span><span class="token punctuation">(</span>
            event<span class="token punctuation">,</span>
            uploadXhrArgs<span class="token punctuation">.</span>file
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>body<span class="token punctuation">.</span>error <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onSuccess</span><span class="token punctuation">(</span>
              event<span class="token punctuation">.</span>body<span class="token punctuation">,</span>
              uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">,</span>
              event
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>
              <span class="token string">'错误码'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>body<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
              uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>nzMsg<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">'上传错误，保利威错误码'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>body<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        uploadXhrArgs<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> uploadXhrArgs<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// websocket.service.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable<span class="token punctuation">,</span> EventEmitter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> environment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ServicesModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/service/service.module'</span><span class="token punctuation">;</span>
declare <span class="token keyword">const</span> SockJS<span class="token punctuation">;</span>
declare <span class="token keyword">const</span> Stomp<span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> ServicesModule
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WebSocketService</span> <span class="token punctuation">{</span>
  stompClient<span class="token operator">:</span> any<span class="token punctuation">;</span>
  connectSuccess <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  waitingSubscribeList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">connectSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 开启socket连接</span>
    <span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SockJS</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token punctuation">.</span><span class="token constant">SERVER_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">msg/realTime</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">[</span><span class="token string">'socket'</span><span class="token punctuation">]</span> <span class="token operator">=</span> socket<span class="token punctuation">;</span>
    <span class="token keyword">const</span> stompClient <span class="token operator">=</span> Stomp<span class="token punctuation">.</span><span class="token function">over</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stompClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成功连接websocket'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>connectSuccess <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 订阅一个目的地</span>
      <span class="token comment">// STOMP消息的body必须为字符串</span>
      <span class="token comment">// stompClient.subscribe('/topic/greetings', (msg) =&gt; {</span>
      <span class="token comment">//   console.log('接受到java后台发送的消息，' + msg.body);</span>
      <span class="token comment">// });</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>waitingSubscribeList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 存在等待建立的连接</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>waitingSubscribeList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">与服务器建立一个连接，路径：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          item<span class="token punctuation">.</span>observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stompClient<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>path<span class="token punctuation">,</span> item<span class="token punctuation">.</span>callback<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>stompClient <span class="token operator">=</span> stompClient<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">addSubscribe</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">observe</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>connectSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已开启连接</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">与服务器建立一个连接，路径：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observe<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stompClient<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>waitingSubscribeList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> observe<span class="token punctuation">,</span> path<span class="token punctuation">,</span> callback<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'socket尚未连接，等到建立:'</span> <span class="token operator">+</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 推送消息</span>
  <span class="token keyword">public</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> header<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>stompClient<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> header<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 关闭连接</span>
  <span class="token keyword">public</span> <span class="token function">closeSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stompClient <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>stompClient<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'断开socket连接'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br></div></div><h2 id="angular-interceptor"><a href="#angular-interceptor" class="header-anchor">#</a> angular-interceptor</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">,</span> Injector<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  HttpInterceptor<span class="token punctuation">,</span>
  HttpRequest<span class="token punctuation">,</span>
  HttpHandler<span class="token punctuation">,</span>
  HttpEvent<span class="token punctuation">,</span>
  HttpErrorResponse<span class="token punctuation">,</span>
  HttpResponseBase<span class="token punctuation">,</span>
  HttpResponse
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common/http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Observable<span class="token punctuation">,</span> <span class="token keyword">of</span><span class="token punctuation">,</span> throwError<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>mergeMap<span class="token punctuation">,</span> catchError<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>environment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'src/environments/environment'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>NzNotificationService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>NzMessageService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd/message'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>LocalStorageUtil<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../utils/localstorage.util'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>MenuService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'core/services/menu.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AtrReuseStrategy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../routereuse/atr-reuse-strategy'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">CODEMESSAGE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">200</span><span class="token operator">:</span> <span class="token string">'服务器成功返回请求的数据。'</span><span class="token punctuation">,</span>
  <span class="token number">201</span><span class="token operator">:</span> <span class="token string">'新建或修改数据成功。'</span><span class="token punctuation">,</span>
  <span class="token number">202</span><span class="token operator">:</span> <span class="token string">'一个请求已经进入后台排队（异步任务）。'</span><span class="token punctuation">,</span>
  <span class="token number">204</span><span class="token operator">:</span> <span class="token string">'删除数据成功。'</span><span class="token punctuation">,</span>
  <span class="token number">400</span><span class="token operator">:</span> <span class="token string">'发出的请求有错误，服务器没有进行新建或修改数据的操作。'</span><span class="token punctuation">,</span>
  <span class="token number">401</span><span class="token operator">:</span> <span class="token string">'用户没有权限（令牌、用户名、密码错误）。'</span><span class="token punctuation">,</span>
  <span class="token number">403</span><span class="token operator">:</span> <span class="token string">'用户得到授权，但是访问是被禁止的。'</span><span class="token punctuation">,</span>
  <span class="token number">404</span><span class="token operator">:</span> <span class="token string">'发出的请求针对的是不存在的记录，服务器没有进行操作。'</span><span class="token punctuation">,</span>
  <span class="token number">406</span><span class="token operator">:</span> <span class="token string">'请求的格式不可得。'</span><span class="token punctuation">,</span>
  <span class="token number">410</span><span class="token operator">:</span> <span class="token string">'请求的资源被永久删除，且不会再得到的。'</span><span class="token punctuation">,</span>
  <span class="token number">422</span><span class="token operator">:</span> <span class="token string">'当创建一个对象时，发生一个验证错误。'</span><span class="token punctuation">,</span>
  <span class="token number">500</span><span class="token operator">:</span> <span class="token string">'服务器发生错误，请检查服务器。'</span><span class="token punctuation">,</span>
  <span class="token number">502</span><span class="token operator">:</span> <span class="token string">'网关错误。'</span><span class="token punctuation">,</span>
  <span class="token number">503</span><span class="token operator">:</span> <span class="token string">'服务不可用，服务器暂时过载或维护。'</span><span class="token punctuation">,</span>
  <span class="token number">504</span><span class="token operator">:</span> <span class="token string">'网关超时。'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BaseInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HttpInterceptor</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> injector<span class="token operator">:</span> Injector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> NzMessageService <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>injector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>NzMessageService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">notification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> NzNotificationService <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>injector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>NzNotificationService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">menuService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MenuService <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>injector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MenuService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">goTo</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token operator">:</span> string<span class="token punctuation">,</span> isClearCache<span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'需要跳转到页面：'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>injector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">navigateByUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isClearCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AtrReuseStrategy<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span><span class="token parameter">ev<span class="token operator">:</span> HttpResponseBase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> ev<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> ev<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> errortext <span class="token operator">=</span> <span class="token constant">CODEMESSAGE</span><span class="token punctuation">[</span>ev<span class="token punctuation">.</span>status<span class="token punctuation">]</span> <span class="token operator">||</span> ev<span class="token punctuation">.</span>statusText<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请求错误 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ev<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> errortext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">handleData</span><span class="token punctuation">(</span>ev<span class="token operator">:</span> HttpResponseBase<span class="token punctuation">,</span> req<span class="token operator">:</span> HttpRequest<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkStatus</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 业务处理：一些通用操作</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token number">200</span><span class="token operator">:</span>
        <span class="token comment">// TODO status</span>
        <span class="token comment">// 业务层级错误处理，以下是假定restful有一套统一输出格式（指不管成功与否都有相应的数据格式）情况下进行处理</span>
        <span class="token comment">// 例如响应内容：</span>
        <span class="token comment">//  错误内容：{ status: 1, msg: '非法参数' }</span>
        <span class="token comment">//  正确内容：{ status: 0, response: {  } }</span>
        <span class="token comment">// 则以下代码片断可直接适用</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev <span class="token keyword">instanceof</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> body<span class="token operator">:</span> any <span class="token operator">=</span> ev<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">未登录或登录已过期，请重新登录。</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              nzKey<span class="token operator">:</span> <span class="token string">'outTime'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// TODO 清空 token 信息</span>
            LocalStorageUtil<span class="token punctuation">.</span><span class="token function">removeUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>menuService<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">goTo</span><span class="token punctuation">(</span><span class="token string">'/p/login'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 或者依然保持完整的格式</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
              nzKey<span class="token operator">:</span> <span class="token string">'exception'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">1025</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 或者依然保持完整的格式</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">参数为空。</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">503</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 或者依然保持完整的格式</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">204</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 或者依然保持完整的格式</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">201</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token punctuation">(</span>environment<span class="token punctuation">.</span><span class="token constant">SERVER_URL</span> <span class="token operator">+</span> <span class="token string">'res/knowledge-point/save'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'自动保存修改成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// 或者依然保持完整的格式</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">401</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">未登录或登录已过期，请重新登录。</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          nzKey<span class="token operator">:</span> <span class="token string">'outTime'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// TODO 清空 token 信息</span>

        <span class="token comment">// this.goTo('/p/login',false);</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">403</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token number">404</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token number">500</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请求出错，status：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ev<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          nzKey<span class="token operator">:</span> <span class="token string">'outTime'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// this.goTo(`/exception/${ev.status}`, false);</span>
        <span class="token function">throwError</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev <span class="token keyword">instanceof</span> <span class="token class-name">HttpErrorResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'未可知错误，大部分是由于后端不支持CORS或无效配置引起'</span><span class="token punctuation">,</span> ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token function">throwError</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">intercept</span><span class="token punctuation">(</span>req<span class="token operator">:</span> HttpRequest<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">,</span> next<span class="token operator">:</span> HttpHandler<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>HttpEvent<span class="token operator">&lt;</span>any<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 统一加上服务端前缀</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'https://'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'http://'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      url <span class="token operator">=</span> environment<span class="token punctuation">.</span><span class="token constant">SERVER_URL</span> <span class="token operator">+</span> url<span class="token punctuation">;</span>
      req <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> next<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">mergeMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 允许统一对请求错误处理</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">HttpResponseBase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleData</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 若一切都正常，则后续操作</span>
        <span class="token keyword">return</span> <span class="token keyword">of</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token operator">:</span> HttpErrorResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleData</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br></div></div><h2 id="通用绘制圆环gauge"><a href="#通用绘制圆环gauge" class="header-anchor">#</a> 通用绘制圆环Gauge</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 绘制刻度盘
 * 配置参数
 * @method [render]  绘制初始图形
 * @method [updatePercent] 示数动画开始
 * 使用方法
 *  var my_canvas_obj= document.getElementById(&quot;my-canvas&quot;);
 *  var gauge= new SOFAGauge({
 *      &quot;tick_color&quot;: &quot;#6C7179&quot;, // 未达到的刻度颜色
 *      &quot;tick_on_color&quot;: &quot;#00AB84&quot;, // // 已达到的刻度颜色
 *      &quot;value&quot;: 120, // 当前数值
 *      &quot;end_num&quot;: 200, // 总数值
 *      &quot;container&quot;: my_canvas_obj || 'my-canvas', // 容器
 *      &quot;center_bottom_text&quot;: '经验值', // 数值底部文案
 *      &quot;center_text_color&quot;: '#6C7179', // 数值字体颜色
 *   });
 * 只有圆环
 *   setDashboard(value: number, total: number, container: string) {
 *    if (!this.dashboard[container]) {
 *      this.dashboard[container] = new Gauge({
 *        tick_color: '#fff', // 未达到的刻度颜色
 *        tick_on_color: '#fff', // // 已达到的刻度颜色
 *        animation_duration: 1000, // 动画持续时间
 *        value, // 当前数值
 *        end_num: total, // 总数值
 *        container,// 容器
 *        center_text_color: '#00ab84', // 数值字体颜色
 *        only_percentage: true,
 *        total_degrees: 360
 *     });
 *   } else {
 *     this.dashboard[container].refresh(value, total);
 *   }
 * }
 */</span>
<span class="token keyword">function</span> <span class="token function">Gauge</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> properties<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span>
    drawStarIf<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    drawStartStopNumIf<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否绘制起始位置数字</span>
    drawTriangleIf<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否绘制游标</span>
    outRadius<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环半径</span>
    outStartAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环未完成开始角度，东边为0，逆时针累加 '0'</span>
    outEndAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环未完成结束角度，东边为0，顺时针累加 '360'</span>
    innerStartAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环未完成开始角度，东边为0，逆时针累加 '0'</span>
    innerEndAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环未完成结束角度，东边为0，顺时针累加 '360'</span>
    grayCircleStartAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>  <span class="token comment">// 外圆环未完成开始角度，东边为0，逆时针累加 '0'</span>
    grayCircleEndAngleUnComplete<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>   <span class="token comment">// 外圆环未完成开始角度，东边为0，逆时针累加 '360'</span>
    innerRadius<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 内圆环半径</span>
    unCompleteStrikeBg<span class="token operator">:</span> <span class="token string">'#C0E6DD'</span><span class="token punctuation">,</span>  <span class="token comment">// 外圆环未完成颜色</span>
    completeStrikeBg<span class="token operator">:</span> <span class="token string">'#00AB84'</span><span class="token punctuation">,</span> <span class="token comment">// 外圆环完成颜色</span>
    outLineCap<span class="token operator">:</span> <span class="token string">'round'</span><span class="token punctuation">,</span>   <span class="token comment">// 外圆环线头</span>
    outLineWidth<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 外圆环线宽度</span>
    innerLineWidth<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 内圆环线宽度</span>
    innerLineCap<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>  <span class="token comment">// 内圆环线头</span>
    grayCircleStrikeBg<span class="token operator">:</span> <span class="token string">'#F3FAF8'</span><span class="token punctuation">,</span> <span class="token comment">// 内圆环颜色</span>
    tick_length<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 短刻度长度</span>
    large_tick_length<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 长刻度长度</span>
    tick_thickness<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// 刻度条宽度</span>
    tick_group_length<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token comment">// 每组内的短刻度个数</span>
    ticks_groups_begin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 起始点</span>
    tick_color<span class="token operator">:</span> <span class="token string">'#555962'</span><span class="token punctuation">,</span> <span class="token comment">// 未达到的刻度颜色</span>
    tick_on_color<span class="token operator">:</span> <span class="token string">'#527d98'</span><span class="token punctuation">,</span> <span class="token comment">// 已达到的刻度颜色</span>
    total_tick<span class="token operator">:</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token comment">// 刻度线总个数</span>
    total_degrees<span class="token operator">:</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token comment">// 刻度线占比的总角度</span>
    startTickAngle<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 刻度线旋转开始角度,以西边为0，顺时针增加，选转到结束total_degrees</span>
    num_offset<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 刻度值距离刻度的间隔, 单位px,</span>
    show_num<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否展示长刻度下的数字</span>
    tick_text_inner<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 刻度线文字是否在里面，反之在外面</span>
    num_gap<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 每个刻度之间的间隔值，计算显示数字时需要</span>
    num_begin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 起始刻度值，和 num_gap成对使用，永远比num_gap小1</span>
    num_font_size<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token comment">// 刻度值字体大小</span>
    num_font_family<span class="token operator">:</span> <span class="token string">'HanHei SC,PingFang SC,Helvetica Neue Thin, Helvetica, STHeitiSC-Light, Arial, sans-serif'</span><span class="token punctuation">,</span>
    bg_image<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 刻度盘的背景图片</span>
    gauge_scale<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 缩放比例</span>
    animation_duration<span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">,</span> <span class="token comment">// 达到目标值的动画时间</span>
    show_center_num<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否显示中间大的数字</span>
    only_percentage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否仅显示百分比</span>
    show_percent<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否仅显示百分比</span>
    center_bottom_text<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 中心底部字体文案</span>
    center_bottom_text_color<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 中心字体颜色</span>
    center_bottom_font_size<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 中心字体颜色</span>
    center_bottom_font_family<span class="token operator">:</span> <span class="token string">'HanHei SC,PingFang SC,Helvetica Neue Thin, Helvetica, STHeitiSC-Light, Arial, sans-serif'</span><span class="token punctuation">,</span> <span class="token comment">// 中心字体颜色</span>
    center_text_color<span class="token operator">:</span> <span class="token string">'#5b73f2'</span><span class="token punctuation">,</span> <span class="token comment">// 中心字体颜色</span>
    center_font_size<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 中间数字font-size</span>
    center_num_font_family<span class="token operator">:</span> <span class="token string">'HanHei SC,PingFang SC,Helvetica Neue Thin, Helvetica, STHeitiSC-Light, Arial, sans-serif'</span><span class="token punctuation">,</span>
    center_percentage_font<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token comment">// 百分比模式数字字体大小</span>
    triangle_height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 刻度指示三角形的 高度+triangle_offset</span>
    triangle_width<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token comment">// 刻度指示三角形的底部宽度</span>
    triangle_offset<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token comment">// 刻度指示三角形距离刻度的空隙</span>
    start_percent<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 开始跳转数字</span>
    <span class="token comment">//  end_percent: 50, // 百分比</span>
    value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 数值</span>
    end_num<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 总数</span>
    container<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    origin<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 记录中心原点</span>
    origin_center<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    starSize<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 星星大小</span>
    starDistance<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 星星间距</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>container<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'container必须'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>container<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>container <span class="token operator">=</span> container<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'找不到容器元素container，初始化失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>end_num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'end_num必须'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'value必须'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>end_num<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'起止数字必须是数值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> options<span class="token punctuation">.</span>end_num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'开始数值不能大于结束数值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>end_num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>end_percent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>end_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>end_percent <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>value <span class="token operator">/</span> options<span class="token punctuation">.</span>end_num<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// naive Object.keys shim, but I know what the object looks like (it's right above here)</span>
  <span class="token keyword">const</span> objectKeys<span class="token operator">:</span> any <span class="token operator">=</span> Object<span class="token punctuation">.</span>keys<span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>_property_list <span class="token operator">=</span> <span class="token function">objectKeys</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// set object properties based on options and defaults</span>
  <span class="token comment">// tslint:disable-next-line:forin</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> k <span class="token keyword">in</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">||</span> properties<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理特别字段</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>end_num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>end_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 取容器宽高</span>
  <span class="token keyword">const</span> parentNodeWidth <span class="token operator">=</span> options<span class="token punctuation">.</span>container<span class="token punctuation">.</span>offsetWidth <span class="token operator">||</span> <span class="token number">400</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> parentNodeWidth <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> parentNodeWidth <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> pRatio <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pRatio<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> parentNodeWidth <span class="token operator">*</span> pRatio<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> parentNodeWidth <span class="token operator">*</span> pRatio<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> parentNodeWidth<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> parentNodeWidth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tick_length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.025</span><span class="token punctuation">;</span> <span class="token comment">// 设置刻度线长度</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>large_tick_length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>large_tick_length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_length <span class="token operator">*</span> <span class="token number">1.4</span><span class="token punctuation">;</span> <span class="token comment">// 设置长刻度线长度</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.2</span><span class="token punctuation">;</span> <span class="token comment">// 根据视窗设置中心数字大小</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.08</span><span class="token punctuation">;</span> <span class="token comment">// 刻度指示三角形的 高度, 即三角游标的高度</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>delatLength <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>large_tick_length <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_length<span class="token punctuation">;</span>
  <span class="token comment">// 计算百分比</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">=</span> options<span class="token punctuation">.</span>start_percent <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>num_offset <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_offset <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

  options<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updatePercent</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>end_percent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// animate the gauge to 60%</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_requestAnimFrame</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> win<span class="token operator">:</span> any <span class="token operator">=</span> window <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">setTimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// tslint:disable-next-line:new-parens</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> anim <span class="token operator">=</span> window<span class="token punctuation">.</span>requestAnimationFrame
    <span class="token operator">||</span> win<span class="token punctuation">.</span>webkitRequestAnimationFrame
    <span class="token operator">||</span> win<span class="token punctuation">.</span>mozRequestAnimationFrame
    <span class="token operator">||</span> win<span class="token punctuation">.</span>oRequestAnimationFrame
    <span class="token operator">||</span> win<span class="token punctuation">.</span>msRequestAnimationFrame
    <span class="token operator">||</span> setTimeout<span class="token punctuation">;</span>
  <span class="token function">anim</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getCurrentState</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> state<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// tslint:disable-next-line:forin</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_property_list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> prop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_property_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    state<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  state<span class="token punctuation">.</span>percent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent<span class="token punctuation">;</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 设置背景</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_applyBG</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bg_color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_color<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_obj<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// only load the image once</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_obj<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        self<span class="token punctuation">.</span>bg_image_loaded <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>
          self<span class="token punctuation">.</span>bg_image_obj<span class="token punctuation">,</span>
          <span class="token comment">// tslint:disable-next-line:max-line-length</span>
          canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>xoffset<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height <span class="token operator">-</span> self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>height <span class="token operator">-</span> self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>yoffset<span class="token punctuation">,</span>
          self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
          self<span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_obj<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image_obj<span class="token punctuation">,</span>
          canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>xoffset<span class="token punctuation">,</span>
          canvas<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bg_image<span class="token punctuation">.</span>yoffset
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_prepareStage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token comment">// clear canvas</span>
  context<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// set background</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_applyBG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// set the center of rotation to the bottom/center of the canvas</span>
  <span class="token keyword">let</span> origin<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>origin_center<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    origin <span class="token operator">=</span> <span class="token punctuation">{</span>
      x<span class="token operator">:</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    origin <span class="token operator">=</span> <span class="token punctuation">{</span>
      x<span class="token operator">:</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> canvas<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.08</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>origin
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>origin<span class="token punctuation">.</span>x<span class="token punctuation">,</span> origin<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// set the scale of the gauge (will naturally fill the width of the canvas</span>
  context<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gauge_scale<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gauge_scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// draw center big num</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>show_center_num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>only_percentage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawCenterPercentage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawCenterNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// 判断100条刻度线哪条是长的</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isLargeTick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentNum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>currentNum <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ticks_groups_begin <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_group_length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 中心文案</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawCenterNum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_text_color<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">+</span> <span class="token string">'px '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_num_font_family<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> centerText<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end_num <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>total_tick <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_gap <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_begin<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>show_percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      centerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      centerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>centerText<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_text <span class="token operator">?</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.05</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_text_color <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_text_color<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_font_size <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_font_family <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_num_font_family<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_bottom_text<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 中心文案</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawCenterPercentage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_text_color<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_percentage_font <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">*</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_num_font_family<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> centerText <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end_num <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>total_tick <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_gap <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_begin<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    centerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>centerText <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绘画游标</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawTriangle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">beginX<span class="token punctuation">,</span> beginY</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">&lt;</span> <span class="token number">0.1</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_color <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_on_color<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total_degrees <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token operator">-</span>beginX<span class="token punctuation">,</span> <span class="token operator">-</span>beginY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span>beginX<span class="token punctuation">,</span> <span class="token operator">-</span>beginY <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token operator">-</span>beginX <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_offset<span class="token punctuation">,</span> <span class="token operator">-</span>beginY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 表盘数字 （绘制刻度线长度，第几个刻度线）</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawGaugeNum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tickLength<span class="token punctuation">,</span> tickIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_begin <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_gap <span class="token operator">*</span> tickIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// set the center of rotation to the text middle</span>
  <span class="token keyword">let</span> x<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_text_inner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> tickLength <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_font_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> tickLength <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_font_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_font_size <span class="token operator">+</span> <span class="token string">'px '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_font_family<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绘制起止数</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawStartStopNum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_font_size <span class="token operator">*</span> <span class="token number">0.3</span> <span class="token operator">+</span> <span class="token string">'px '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num_font_family<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>center_text_color<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">3.4</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.32</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end_num<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.32</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绘制运动圆环</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawgroundCircle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> startRadian <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>outStartAngleUnComplete <span class="token operator">||</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始弧度</span>
  <span class="token keyword">const</span> endRadian <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>outEndAngleUnComplete <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>outStartAngleUnComplete <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>outStartAngleUnComplete <span class="token operator">+</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">270</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结束弧度</span>
  <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>outRadius <span class="token operator">||</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">0.7</span><span class="token punctuation">;</span> <span class="token comment">// 半径</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>unCompleteStrikeBg<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>outLineWidth <span class="token operator">||</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>outLineCap<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    radius<span class="token punctuation">,</span>
    startRadian<span class="token punctuation">,</span>
    endRadian<span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)</span>
  context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> radianPrecent <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total_degrees <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 运动弧度数</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>completeStrikeBg<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>outLineWidth <span class="token operator">||</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 圆弧边框长度</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">'round'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    radius<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>innerStartAngleUnComplete <span class="token operator">?</span> <span class="token operator">-</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerStartAngleUnComplete <span class="token operator">||</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">:</span> startRadian<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>innerEndAngleUnComplete <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerEndAngleUnComplete<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>startRadian <span class="token operator">+</span> radianPrecent<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">;</span> <span class="token comment">// 用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)</span>
  context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绘画灰色圆环</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawgrayCircle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerRadius <span class="token operator">||</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">;</span> <span class="token comment">// 半径</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>grayCircleStrikeBg<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerLineWidth <span class="token operator">||</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 圆弧边框长度</span>
  context<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerLineCap<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> startRadian <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>grayCircleStartAngleUnComplete <span class="token operator">||</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 开始弧度</span>
  <span class="token keyword">const</span> endRadian <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span>
    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>grayCircleEndAngleUnComplete <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>grayCircleStartAngleUnComplete <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>grayCircleStartAngleUnComplete <span class="token operator">+</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">270</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">||</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">;</span> <span class="token comment">// 结束弧度</span>
  context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    radius<span class="token punctuation">,</span>
    startRadian<span class="token punctuation">,</span>
    endRadian
  <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)</span>
  context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 画星星</span>
<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drawStar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>starSize <span class="token operator">||</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.025</span><span class="token punctuation">;</span> <span class="token comment">// 半径</span>
  <span class="token keyword">const</span> ratio <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>starDistance <span class="token operator">||</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 宽度比例</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'#00AB84'</span> <span class="token operator">:</span> <span class="token string">'#C0E6DD'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置是个顶点的坐标，根据顶点制定路径</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> line1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line2 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line3 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> line4 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line1 <span class="token operator">-</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">,</span> line2 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line3 <span class="token operator">-</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">,</span> line4 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'#00AB84'</span> <span class="token operator">:</span> <span class="token string">'#C0E6DD'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置是个顶点的坐标，根据顶点制定路径</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> line1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line2 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line3 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> line4 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line1 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> line2 <span class="token operator">+</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line3 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> line4 <span class="token operator">+</span> <span class="token operator">-</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token operator">?</span> <span class="token string">'#00AB84'</span> <span class="token operator">:</span> <span class="token string">'#C0E6DD'</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置是个顶点的坐标，根据顶点制定路径</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> line1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line2 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span>
    <span class="token keyword">const</span> line3 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> line4 <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">54</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">72</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line1 <span class="token operator">+</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">,</span> line2 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>line3 <span class="token operator">+</span> canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> ratio<span class="token punctuation">,</span> line4 <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// save original state of context to that it can be restore after rendering</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_prepareStage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 准备绘画</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>drawStartStopNumIf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawStartStopNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画起止数字</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawgrayCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画灰色圆</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawgroundCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画运动圆环</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>drawStarIf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawStar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画星星</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// figure out how many degrees between each tick</span>
  <span class="token keyword">const</span> numTicks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total_tick<span class="token punctuation">;</span>
  <span class="token keyword">const</span> rotationDeg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total_degrees <span class="token operator">/</span> <span class="token punctuation">(</span>numTicks <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每一份旋转间距</span>
  <span class="token comment">// adjust for smaller than 180 degree gauges</span>
  <span class="token keyword">const</span> startingDeg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTickAngle <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token number">180</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total_degrees<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 开始角度</span>
  context<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>startingDeg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 以东边为0顺时针根据刻度总值增加</span>

  <span class="token comment">// 绘制游标</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>drawTriangleIf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawTriangle</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// draw all of the ticks</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> numTicks<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// should this tick be on or off?</span>
    <span class="token keyword">const</span> isOn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> numTicks<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// scale the ticks at group split</span>
    <span class="token keyword">const</span> isLargeTick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLargeTick</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// const rect_scale = isLargeTick ? this.large_tick_scale : 1;</span>
    <span class="token keyword">const</span> tickLength <span class="token operator">=</span> isLargeTick <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>large_tick_length <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_length<span class="token punctuation">;</span>
    <span class="token comment">// draw tick</span>
    <span class="token keyword">const</span> color <span class="token operator">=</span> isOn <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_on_color <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_color<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isLargeTick<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只有长的才绘制数字</span>
      context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> tickLength<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绘制刻度线</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>show_num<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 绘制表盘数字</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawGaugeNum</span><span class="token punctuation">(</span>tickLength<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>triangle_height <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delatLength<span class="token punctuation">;</span>
      <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>
        x<span class="token punctuation">,</span>
        y<span class="token punctuation">,</span>
        tickLength<span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tick_thickness<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// rotate for next tick to be placed</span>
    context<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>rotationDeg <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// set back to original state</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Gauge.prototype.setTickOnColor = function(colorStr) {</span>
<span class="token comment">//   this.tick_on_color = colorStr;</span>
<span class="token comment">// };</span>
<span class="token comment">// Gauge.prototype.setAnimaDur = function(duration) {</span>
<span class="token comment">//   this.animation_duration = duration;</span>
<span class="token comment">// };</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">updatePercent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">percent<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>percent <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>percent <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    percent <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
  options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> duration <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'animation_duration'</span> <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token operator">?</span> options<span class="token punctuation">.</span>animation_duration <span class="token operator">:</span> self<span class="token punctuation">.</span>animation_duration<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastUpdate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_percent<span class="token punctuation">;</span>
    <span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_target_percent<span class="token punctuation">;</span>
    <span class="token keyword">const</span> changePerms <span class="token operator">=</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">/</span> duration<span class="token punctuation">;</span>
    <span class="token keyword">const</span> increasing <span class="token operator">=</span> changePerms <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> elapsed <span class="token operator">=</span> now <span class="token operator">-</span> lastUpdate<span class="token punctuation">;</span>
      self<span class="token punctuation">.</span>_percent <span class="token operator">+=</span> elapsed <span class="token operator">*</span> changePerms<span class="token punctuation">;</span>
      lastUpdate <span class="token operator">=</span> now<span class="token punctuation">;</span>
      <span class="token comment">// check if we've made it to our stopping point</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>increasing <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>_percent <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>_target_percent<span class="token punctuation">)</span>
        <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">!</span>increasing <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>_percent <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>_target_percent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        self<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span><span class="token function">_requestAnimFrame</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        self<span class="token punctuation">.</span>_percent <span class="token operator">=</span> self<span class="token punctuation">.</span>_target_percent<span class="token punctuation">;</span>
        self<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    self<span class="token punctuation">.</span><span class="token function">_requestAnimFrame</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    self<span class="token punctuation">.</span>_percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    self<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Gauge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">refresh</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">'number'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> total <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'参数必须是number'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> percent <span class="token operator">=</span> total <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>value <span class="token operator">/</span> total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>end_num <span class="token operator">=</span> total<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updatePercent</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Gauge <span class="token keyword">as</span> any<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br></div></div><p><img src="/vuebloger/img/post/Snipaste_2021-04-13_15-29-24.png" alt=""></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/4/2020, 3:30:15 PM</span></div></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/vuebloger/assets/js/app.9ef6ba52.js" defer></script><script src="/vuebloger/assets/js/7.c457106d.js" defer></script><script src="/vuebloger/assets/js/1.c991d8a0.js" defer></script><script src="/vuebloger/assets/js/42.f930fbcb.js" defer></script><script src="/vuebloger/assets/js/25.4349a352.js" defer></script>
  </body>
</html>
